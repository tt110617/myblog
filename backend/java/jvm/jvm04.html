<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.49" />
    <meta name="theme" content="VuePress Theme Hope" />
    <title>四、字节码指令 | tt110617</title><meta name="description" content="网站">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/myblog/assets/style.f2a6604f.css">
    <link rel="modulepreload" href="/myblog/assets/app.6a2d513d.js"><link rel="modulepreload" href="/myblog/assets/jvm04.html.7205bd05.js"><link rel="modulepreload" href="/myblog/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/myblog/assets/jvm04.html.dd845ccc.js"><link rel="prefetch" href="/myblog/assets/index.html.d1ca62f7.js"><link rel="prefetch" href="/myblog/assets/index.html.b5c38db1.js"><link rel="prefetch" href="/myblog/assets/index.html.feb38b0c.js"><link rel="prefetch" href="/myblog/assets/algorithm01.html.dd1af2b2.js"><link rel="prefetch" href="/myblog/assets/algorithm02.html.6645e291.js"><link rel="prefetch" href="/myblog/assets/algorithm03.html.9da54164.js"><link rel="prefetch" href="/myblog/assets/LeetCode Hot 100.html.95af3c37.js"><link rel="prefetch" href="/myblog/assets/index.html.2770fb04.js"><link rel="prefetch" href="/myblog/assets/index.html.9f31cb98.js"><link rel="prefetch" href="/myblog/assets/MongoDB.html.747bd522.js"><link rel="prefetch" href="/myblog/assets/index.html.7970fd4d.js"><link rel="prefetch" href="/myblog/assets/index.html.d76d8eeb.js"><link rel="prefetch" href="/myblog/assets/Docker.html.7e9153cc.js"><link rel="prefetch" href="/myblog/assets/ElasticSearch.html.68bc187d.js"><link rel="prefetch" href="/myblog/assets/nginx.html.feb27b40.js"><link rel="prefetch" href="/myblog/assets/index.html.c88cf0a5.js"><link rel="prefetch" href="/myblog/assets/java8新特性.html.eba77086.js"><link rel="prefetch" href="/myblog/assets/index.html.db442bd7.js"><link rel="prefetch" href="/myblog/assets/index.html.e978b3f4.js"><link rel="prefetch" href="/myblog/assets/vue2.html.cd054f5f.js"><link rel="prefetch" href="/myblog/assets/vue3.html.09644e9e.js"><link rel="prefetch" href="/myblog/assets/mysql01.html.14852074.js"><link rel="prefetch" href="/myblog/assets/mysql02.html.19638d4a.js"><link rel="prefetch" href="/myblog/assets/mysql03.html.19940ab5.js"><link rel="prefetch" href="/myblog/assets/mysql04.html.ff20e708.js"><link rel="prefetch" href="/myblog/assets/index.html.aeaeabce.js"><link rel="prefetch" href="/myblog/assets/mianshi.html.5de27bef.js"><link rel="prefetch" href="/myblog/assets/network01.html.d374f53e.js"><link rel="prefetch" href="/myblog/assets/network02.html.612f1790.js"><link rel="prefetch" href="/myblog/assets/network03.html.f409d6e1.js"><link rel="prefetch" href="/myblog/assets/network04.html.417995ce.js"><link rel="prefetch" href="/myblog/assets/network05.html.383f02d3.js"><link rel="prefetch" href="/myblog/assets/network06.html.6b7b74f3.js"><link rel="prefetch" href="/myblog/assets/index.html.a5289baa.js"><link rel="prefetch" href="/myblog/assets/index.html.1ad05321.js"><link rel="prefetch" href="/myblog/assets/Redis01.html.43cb742a.js"><link rel="prefetch" href="/myblog/assets/Redis02.html.ba0a875f.js"><link rel="prefetch" href="/myblog/assets/Redis03.html.c65b1aff.js"><link rel="prefetch" href="/myblog/assets/Redis04.html.8d20d57a.js"><link rel="prefetch" href="/myblog/assets/Redis05.html.66a2065a.js"><link rel="prefetch" href="/myblog/assets/Redisson原理.html.e587d689.js"><link rel="prefetch" href="/myblog/assets/basics.html.ec7af011.js"><link rel="prefetch" href="/myblog/assets/practice.html.3d6fcedb.js"><link rel="prefetch" href="/myblog/assets/index.html.195983d3.js"><link rel="prefetch" href="/myblog/assets/index.html.ffce25e3.js"><link rel="prefetch" href="/myblog/assets/SpringBoot01.html.1539f2df.js"><link rel="prefetch" href="/myblog/assets/SpringBoot02.html.8d492936.js"><link rel="prefetch" href="/myblog/assets/Dubbo.html.25f8081d.js"><link rel="prefetch" href="/myblog/assets/index.html.25b97898.js"><link rel="prefetch" href="/myblog/assets/SpringCloud.html.11fa754a.js"><link rel="prefetch" href="/myblog/assets/SpringCloudAibaba.html.ba7822c1.js"><link rel="prefetch" href="/myblog/assets/mianshi.html.e3fba77d.js"><link rel="prefetch" href="/myblog/assets/RabbitMQ.html.d245b413.js"><link rel="prefetch" href="/myblog/assets/index.html.2e0e8a71.js"><link rel="prefetch" href="/myblog/assets/OAuth2.0.html.ec57b0c6.js"><link rel="prefetch" href="/myblog/assets/index.html.195b9b99.js"><link rel="prefetch" href="/myblog/assets/SpringSecurity.html.f53a3387.js"><link rel="prefetch" href="/myblog/assets/design01.html.a9ca0966.js"><link rel="prefetch" href="/myblog/assets/design02.html.14685d48.js"><link rel="prefetch" href="/myblog/assets/design03.html.d0742e22.js"><link rel="prefetch" href="/myblog/assets/design04.html.4b4d3a60.js"><link rel="prefetch" href="/myblog/assets/design05.html.dd009a09.js"><link rel="prefetch" href="/myblog/assets/index.html.de8a79d7.js"><link rel="prefetch" href="/myblog/assets/juc01.html.7b5b2a61.js"><link rel="prefetch" href="/myblog/assets/juc02.html.e7af61bf.js"><link rel="prefetch" href="/myblog/assets/juc03.html.c680cb04.js"><link rel="prefetch" href="/myblog/assets/index.html.3ef30b14.js"><link rel="prefetch" href="/myblog/assets/jvm01.html.226ff0ab.js"><link rel="prefetch" href="/myblog/assets/jvm02.html.ad530863.js"><link rel="prefetch" href="/myblog/assets/jvm03.html.af77ed0d.js"><link rel="prefetch" href="/myblog/assets/jvm05.html.56d56c94.js"><link rel="prefetch" href="/myblog/assets/jvm06.html.8c5c08ed.js"><link rel="prefetch" href="/myblog/assets/jvm07.html.8713dffe.js"><link rel="prefetch" href="/myblog/assets/jvm08.html.396f92cc.js"><link rel="prefetch" href="/myblog/assets/index.html.cacef81d.js"><link rel="prefetch" href="/myblog/assets/404.html.82bd4b1a.js"><link rel="prefetch" href="/myblog/assets/index.html.2f713335.js"><link rel="prefetch" href="/myblog/assets/index.html.1a811f74.js"><link rel="prefetch" href="/myblog/assets/index.html.79fe6d6e.js"><link rel="prefetch" href="/myblog/assets/index.html.dcd15e89.js"><link rel="prefetch" href="/myblog/assets/index.html.e8952663.js"><link rel="prefetch" href="/myblog/assets/index.html.5ad7ff00.js"><link rel="prefetch" href="/myblog/assets/index.html.92637d35.js"><link rel="prefetch" href="/myblog/assets/index.html.6033e64c.js"><link rel="prefetch" href="/myblog/assets/index.html.29a3be67.js"><link rel="prefetch" href="/myblog/assets/index.html.d2aef326.js"><link rel="prefetch" href="/myblog/assets/index.html.61fd0259.js"><link rel="prefetch" href="/myblog/assets/index.html.cf3e5974.js"><link rel="prefetch" href="/myblog/assets/index.html.b7fddec6.js"><link rel="prefetch" href="/myblog/assets/index.html.2d1c3407.js"><link rel="prefetch" href="/myblog/assets/index.html.f6e57d32.js"><link rel="prefetch" href="/myblog/assets/index.html.57cfa80f.js"><link rel="prefetch" href="/myblog/assets/index.html.5f4c6904.js"><link rel="prefetch" href="/myblog/assets/index.html.adc9fbf5.js"><link rel="prefetch" href="/myblog/assets/index.html.de6bf546.js"><link rel="prefetch" href="/myblog/assets/index.html.5802a134.js"><link rel="prefetch" href="/myblog/assets/index.html.00532d93.js"><link rel="prefetch" href="/myblog/assets/index.html.dcdb8b0c.js"><link rel="prefetch" href="/myblog/assets/index.html.64a2ffc8.js"><link rel="prefetch" href="/myblog/assets/index.html.aa56265b.js"><link rel="prefetch" href="/myblog/assets/index.html.cf5fc743.js"><link rel="prefetch" href="/myblog/assets/index.html.dd0debdd.js"><link rel="prefetch" href="/myblog/assets/index.html.598a85b3.js"><link rel="prefetch" href="/myblog/assets/algorithm01.html.9516ff71.js"><link rel="prefetch" href="/myblog/assets/algorithm02.html.f215eb2a.js"><link rel="prefetch" href="/myblog/assets/algorithm03.html.b981d3d4.js"><link rel="prefetch" href="/myblog/assets/LeetCode Hot 100.html.921fe2c8.js"><link rel="prefetch" href="/myblog/assets/index.html.9ff070dd.js"><link rel="prefetch" href="/myblog/assets/index.html.f985f07c.js"><link rel="prefetch" href="/myblog/assets/MongoDB.html.367811ae.js"><link rel="prefetch" href="/myblog/assets/index.html.ccc78fec.js"><link rel="prefetch" href="/myblog/assets/index.html.cd9c8951.js"><link rel="prefetch" href="/myblog/assets/Docker.html.9aa6750f.js"><link rel="prefetch" href="/myblog/assets/ElasticSearch.html.834de972.js"><link rel="prefetch" href="/myblog/assets/nginx.html.96457f50.js"><link rel="prefetch" href="/myblog/assets/index.html.5f9750b5.js"><link rel="prefetch" href="/myblog/assets/java8新特性.html.72523a0c.js"><link rel="prefetch" href="/myblog/assets/index.html.4267a9c7.js"><link rel="prefetch" href="/myblog/assets/index.html.64b7cc16.js"><link rel="prefetch" href="/myblog/assets/vue2.html.019d3a52.js"><link rel="prefetch" href="/myblog/assets/vue3.html.f014c692.js"><link rel="prefetch" href="/myblog/assets/mysql01.html.1f3c1d4e.js"><link rel="prefetch" href="/myblog/assets/mysql02.html.6085f62b.js"><link rel="prefetch" href="/myblog/assets/mysql03.html.a05b3e35.js"><link rel="prefetch" href="/myblog/assets/mysql04.html.f83e6c8a.js"><link rel="prefetch" href="/myblog/assets/index.html.c2377b6c.js"><link rel="prefetch" href="/myblog/assets/mianshi.html.62e502c2.js"><link rel="prefetch" href="/myblog/assets/network01.html.bb391280.js"><link rel="prefetch" href="/myblog/assets/network02.html.4835dc75.js"><link rel="prefetch" href="/myblog/assets/network03.html.529a44ea.js"><link rel="prefetch" href="/myblog/assets/network04.html.c4a9ab39.js"><link rel="prefetch" href="/myblog/assets/network05.html.fefe6411.js"><link rel="prefetch" href="/myblog/assets/network06.html.4098bbbd.js"><link rel="prefetch" href="/myblog/assets/index.html.9a37999d.js"><link rel="prefetch" href="/myblog/assets/index.html.25f73ada.js"><link rel="prefetch" href="/myblog/assets/Redis01.html.4774eebb.js"><link rel="prefetch" href="/myblog/assets/Redis02.html.7aa43754.js"><link rel="prefetch" href="/myblog/assets/Redis03.html.3b35817c.js"><link rel="prefetch" href="/myblog/assets/Redis04.html.1eb9f421.js"><link rel="prefetch" href="/myblog/assets/Redis05.html.445e2fb4.js"><link rel="prefetch" href="/myblog/assets/Redisson原理.html.a6281fb0.js"><link rel="prefetch" href="/myblog/assets/basics.html.64ecf975.js"><link rel="prefetch" href="/myblog/assets/practice.html.9bd91dc4.js"><link rel="prefetch" href="/myblog/assets/index.html.45528417.js"><link rel="prefetch" href="/myblog/assets/index.html.2765f82f.js"><link rel="prefetch" href="/myblog/assets/SpringBoot01.html.5e31fcb7.js"><link rel="prefetch" href="/myblog/assets/SpringBoot02.html.bbddd314.js"><link rel="prefetch" href="/myblog/assets/Dubbo.html.ccbf57f9.js"><link rel="prefetch" href="/myblog/assets/index.html.534d4ae8.js"><link rel="prefetch" href="/myblog/assets/SpringCloud.html.eab22d83.js"><link rel="prefetch" href="/myblog/assets/SpringCloudAibaba.html.79284ee6.js"><link rel="prefetch" href="/myblog/assets/mianshi.html.da3eb94f.js"><link rel="prefetch" href="/myblog/assets/RabbitMQ.html.1224037c.js"><link rel="prefetch" href="/myblog/assets/index.html.668ad86c.js"><link rel="prefetch" href="/myblog/assets/OAuth2.0.html.aabd01a5.js"><link rel="prefetch" href="/myblog/assets/index.html.9cd27700.js"><link rel="prefetch" href="/myblog/assets/SpringSecurity.html.469ecc81.js"><link rel="prefetch" href="/myblog/assets/design01.html.2b9f9e86.js"><link rel="prefetch" href="/myblog/assets/design02.html.849b42b0.js"><link rel="prefetch" href="/myblog/assets/design03.html.e4be33cd.js"><link rel="prefetch" href="/myblog/assets/design04.html.bc31a0d9.js"><link rel="prefetch" href="/myblog/assets/design05.html.d5c35997.js"><link rel="prefetch" href="/myblog/assets/index.html.4a7a1688.js"><link rel="prefetch" href="/myblog/assets/juc01.html.5bb1f884.js"><link rel="prefetch" href="/myblog/assets/juc02.html.0ce510cd.js"><link rel="prefetch" href="/myblog/assets/juc03.html.e93fe7b6.js"><link rel="prefetch" href="/myblog/assets/index.html.b5425fa1.js"><link rel="prefetch" href="/myblog/assets/jvm01.html.f238e096.js"><link rel="prefetch" href="/myblog/assets/jvm02.html.a9498b0d.js"><link rel="prefetch" href="/myblog/assets/jvm03.html.460f2e71.js"><link rel="prefetch" href="/myblog/assets/jvm05.html.edac738a.js"><link rel="prefetch" href="/myblog/assets/jvm06.html.91cbb3f0.js"><link rel="prefetch" href="/myblog/assets/jvm07.html.f40c12f1.js"><link rel="prefetch" href="/myblog/assets/jvm08.html.fb107a67.js"><link rel="prefetch" href="/myblog/assets/index.html.3ba3011a.js"><link rel="prefetch" href="/myblog/assets/404.html.1f196261.js"><link rel="prefetch" href="/myblog/assets/index.html.1375c5bc.js"><link rel="prefetch" href="/myblog/assets/index.html.90d1ac0c.js"><link rel="prefetch" href="/myblog/assets/index.html.4d12ff1c.js"><link rel="prefetch" href="/myblog/assets/index.html.8ddb93d5.js"><link rel="prefetch" href="/myblog/assets/index.html.dd098c61.js"><link rel="prefetch" href="/myblog/assets/index.html.cebf8dc1.js"><link rel="prefetch" href="/myblog/assets/index.html.5674ca1e.js"><link rel="prefetch" href="/myblog/assets/index.html.d2abca49.js"><link rel="prefetch" href="/myblog/assets/index.html.1351de8d.js"><link rel="prefetch" href="/myblog/assets/index.html.9de6b46c.js"><link rel="prefetch" href="/myblog/assets/index.html.611ec9ae.js"><link rel="prefetch" href="/myblog/assets/index.html.a02c1bed.js"><link rel="prefetch" href="/myblog/assets/index.html.eb87c7a9.js"><link rel="prefetch" href="/myblog/assets/index.html.33261d15.js"><link rel="prefetch" href="/myblog/assets/index.html.5589fc08.js"><link rel="prefetch" href="/myblog/assets/index.html.f989be9b.js"><link rel="prefetch" href="/myblog/assets/index.html.9f0a51f1.js"><link rel="prefetch" href="/myblog/assets/index.html.49bd673c.js"><link rel="prefetch" href="/myblog/assets/index.html.f1449990.js"><link rel="prefetch" href="/myblog/assets/index.html.b063a78e.js"><link rel="prefetch" href="/myblog/assets/index.html.3f40e5f3.js"><link rel="prefetch" href="/myblog/assets/index.html.56c44de1.js"><link rel="prefetch" href="/myblog/assets/index.html.f8a7efd0.js"><link rel="prefetch" href="/myblog/assets/index.html.c2db4fad.js"><link rel="prefetch" href="/myblog/assets/404.d0d6ec4e.js"><link rel="prefetch" href="/myblog/assets/Layout.4e3e5e78.js"><link rel="prefetch" href="/myblog/assets/Slide.81c38424.js"><link rel="prefetch" href="/myblog/assets/Blog.d28c723c.js"><link rel="prefetch" href="/myblog/assets/auto.264f6c8c.js"><link rel="prefetch" href="/myblog/assets/index.d8a59108.js"><link rel="prefetch" href="/myblog/assets/index.1842ee54.js"><link rel="prefetch" href="/myblog/assets/mermaid.esm.min.fac286bf.js"><link rel="prefetch" href="/myblog/assets/highlight.esm.d982e650.js"><link rel="prefetch" href="/myblog/assets/markdown.esm.832a189d.js"><link rel="prefetch" href="/myblog/assets/math.esm.a3f84b6f.js"><link rel="prefetch" href="/myblog/assets/notes.esm.3c361cb7.js"><link rel="prefetch" href="/myblog/assets/reveal.esm.b96f05d8.js"><link rel="prefetch" href="/myblog/assets/search.esm.80da4a02.js"><link rel="prefetch" href="/myblog/assets/zoom.esm.8514a202.js"><link rel="prefetch" href="/myblog/assets/Playground.c4bd3c9e.js"><link rel="prefetch" href="/myblog/assets/photoswipe.esm.218074cd.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/myblog/" class="brand"><img class="logo" src="/myblog/avatar.jpg" alt="tt110617"><!----><span class="site-name hide-in-pad">tt110617</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/myblog/" class="nav-link" aria-label="首页"><span class="icon iconfont icon-home"></span>首页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/myblog/backend/" class="nav-link active" aria-label="后端"><span class="icon iconfont icon-java"></span>后端<!----></a></div><div class="nav-item hide-in-mobile"><a href="/myblog/frontend/" class="nav-link" aria-label="前端"><span class="icon iconfont icon-vue"></span>前端<!----></a></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/tt110617" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-java"></span><span class="title">Java</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/myblog/backend/java/java8%E6%96%B0%E7%89%B9%E6%80%A7.html" class="nav-link sidebar-link sidebar-page" aria-label="Java8新特性"><!---->Java8新特性<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-creative"></span><span class="title">设计模式</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-asynchronous"></span><span class="title">JUC</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-share"></span><span class="title">JVM</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/myblog/backend/java/jvm/jvm01.html" class="nav-link sidebar-link sidebar-page" aria-label="一、内存管理"><!---->一、内存管理<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/myblog/backend/java/jvm/jvm02.html" class="nav-link sidebar-link sidebar-page" aria-label="二、垃圾回收"><!---->二、垃圾回收<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/myblog/backend/java/jvm/jvm03.html" class="nav-link sidebar-link sidebar-page" aria-label="三、类结构文件"><!---->三、类结构文件<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="四、字节码指令"><!---->四、字节码指令<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#字节码指令简介" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="字节码指令简介"><!---->字节码指令简介<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#字节码与数据类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="字节码与数据类型"><!---->字节码与数据类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#加载和存储指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="加载和存储指令"><!---->加载和存储指令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#运算指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="运算指令"><!---->运算指令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#类型转换指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="类型转换指令"><!---->类型转换指令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#对象创建与访问指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="对象创建与访问指令"><!---->对象创建与访问指令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#操作数栈管理指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="操作数栈管理指令"><!---->操作数栈管理指令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#控制转移指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="控制转移指令"><!---->控制转移指令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#方法调用和返回指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="方法调用和返回指令"><!---->方法调用和返回指令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#异常处理指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="异常处理指令"><!---->异常处理指令<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#入门" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="入门"><!---->入门<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#javap工具" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="javap工具"><!---->javap工具<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#图解方法执行流程" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="图解方法执行流程"><!---->图解方法执行流程<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#原始java代码" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="原始java代码"><!---->原始java代码<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#编译后的字节码文件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="编译后的字节码文件"><!---->编译后的字节码文件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#常量池载入运行时常量池" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="常量池载入运行时常量池"><!---->常量池载入运行时常量池<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#方法字节码载入方法区" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="方法字节码载入方法区"><!---->方法字节码载入方法区<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#main线程开始运行-分配栈帧内存" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="main线程开始运行，分配栈帧内存"><!---->main线程开始运行，分配栈帧内存<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#执行引擎开始执行字节码" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="执行引擎开始执行字节码"><!---->执行引擎开始执行字节码<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#练习-分析i" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="练习：分析i++"><!---->练习：分析i++<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#条件判断指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="条件判断指令"><!---->条件判断指令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#循环控制指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="循环控制指令"><!---->循环控制指令<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#while循环" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="while循环"><!---->while循环<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#do-while循环" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="do while循环"><!---->do while循环<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#for循环" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="for循环"><!---->for循环<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#练习-判断结果" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="练习-判断结果"><!---->练习-判断结果<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#构造方法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="构造方法"><!---->构造方法<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#cinit-v" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="&lt; cinit &gt;()V"><!---->&lt; cinit &gt;()V<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#init-v" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="&lt; init &gt;()V"><!---->&lt; init &gt;()V<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#方法调用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="方法调用"><!---->方法调用<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#多态的原理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="多态的原理"><!---->多态的原理<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#_1-运行代码" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1）运行代码"><!---->1）运行代码<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#_2-运行-hsdb-工具" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2）运行 HSDB 工具"><!---->2）运行 HSDB 工具<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#_3-查找某个对象" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3）查找某个对象"><!---->3）查找某个对象<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#_4-查看对象内存结构" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4）查看对象内存结构"><!---->4）查看对象内存结构<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#_5-查看对象-class-的内存地址" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5）查看对象 Class 的内存地址"><!---->5）查看对象 Class 的内存地址<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#_6-查看类的-vtable" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6）查看类的 vtable"><!---->6）查看类的 vtable<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#_7-验证方法地址" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7）验证方法地址"><!---->7）验证方法地址<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#_8-小结" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8）小结"><!---->8）小结<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#异常处理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="异常处理"><!---->异常处理<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#try-catch" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="try-catch"><!---->try-catch<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#多个single-catch块的情况" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="多个single-catch块的情况"><!---->多个single-catch块的情况<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#multi-catch的情况" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="multi-catch的情况"><!---->multi-catch的情况<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#finally" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="finally"><!---->finally<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#练习-finally面试题" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="练习-finally面试题"><!---->练习-finally面试题<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#finally出现了return" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="finally出现了return"><!---->finally出现了return<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#finally对返回值的影响" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="finally对返回值的影响"><!---->finally对返回值的影响<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#synchronized" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="synchronized"><!---->synchronized<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/myblog/backend/java/jvm/jvm05.html" class="nav-link sidebar-link sidebar-page" aria-label="五、编译器优化"><!---->五、编译器优化<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/myblog/backend/java/jvm/jvm06.html" class="nav-link sidebar-link sidebar-page" aria-label="六、类加载"><!---->六、类加载<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/myblog/backend/java/jvm/jvm07.html" class="nav-link sidebar-link sidebar-page" aria-label="七、运行期优化"><!---->七、运行期优化<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/myblog/backend/java/jvm/jvm08.html" class="nav-link sidebar-link sidebar-page" aria-label="八、内存模型"><!---->八、内存模型<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><img class="icon" src="/myblog/icon/gaoxingneng.png"><span class="title">高性能</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-computer"></span><span class="title">计算机基础</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-frame"></span><span class="title">框架</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><img class="icon" src="/myblog/icon/odbc-full.png"><span class="title">数据库</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-snow"></span><span class="title">算法</span><span class="arrow right"></span></button><!----></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->四、字节码指令</h1><div class="page-info"><span class="author-info" aria-label="作者🖊" data-balloon-pos="down" localizeddate="2022年8月29日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="/myblog/article/" target="_blank" rel="noopener noreferrer">十一</a></span><span property="author" content="十一"></span></span><!----><span class="date-info" aria-label="写作日期📅" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022年8月29日</span><meta property="datePublished" content="2022-08-29T00:00:00.000Z"></span><!----><span aria-label="标签🏷" data-balloon-pos="down" localizeddate="2022年8月29日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><ul class="tags-wrapper"><li class="tag tag2 clickable" role="navigation">jvm</li></ul><meta property="keywords" content="jvm"></span><span class="words-info" aria-label="字数🔠" data-balloon-pos="down" localizeddate="2022年8月29日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>约 4628 字</span><meta property="wordCount" content="4628"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#字节码指令简介" class="router-link-active router-link-exact-active toc-link level2">字节码指令简介</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#字节码与数据类型" class="router-link-active router-link-exact-active toc-link level3">字节码与数据类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#加载和存储指令" class="router-link-active router-link-exact-active toc-link level3">加载和存储指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#运算指令" class="router-link-active router-link-exact-active toc-link level3">运算指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#类型转换指令" class="router-link-active router-link-exact-active toc-link level3">类型转换指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#对象创建与访问指令" class="router-link-active router-link-exact-active toc-link level3">对象创建与访问指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#操作数栈管理指令" class="router-link-active router-link-exact-active toc-link level3">操作数栈管理指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#控制转移指令" class="router-link-active router-link-exact-active toc-link level3">控制转移指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#方法调用和返回指令" class="router-link-active router-link-exact-active toc-link level3">方法调用和返回指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#异常处理指令" class="router-link-active router-link-exact-active toc-link level3">异常处理指令</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#入门" class="router-link-active router-link-exact-active toc-link level2">入门</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#javap工具" class="router-link-active router-link-exact-active toc-link level2">javap工具</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#图解方法执行流程" class="router-link-active router-link-exact-active toc-link level2">图解方法执行流程</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#原始java代码" class="router-link-active router-link-exact-active toc-link level3">原始java代码</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#编译后的字节码文件" class="router-link-active router-link-exact-active toc-link level3">编译后的字节码文件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#常量池载入运行时常量池" class="router-link-active router-link-exact-active toc-link level3">常量池载入运行时常量池</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#方法字节码载入方法区" class="router-link-active router-link-exact-active toc-link level3">方法字节码载入方法区</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#main线程开始运行-分配栈帧内存" class="router-link-active router-link-exact-active toc-link level3">main线程开始运行，分配栈帧内存</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#执行引擎开始执行字节码" class="router-link-active router-link-exact-active toc-link level3">执行引擎开始执行字节码</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#练习-分析i" class="router-link-active router-link-exact-active toc-link level2">练习：分析i++</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#条件判断指令" class="router-link-active router-link-exact-active toc-link level2">条件判断指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#循环控制指令" class="router-link-active router-link-exact-active toc-link level2">循环控制指令</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#while循环" class="router-link-active router-link-exact-active toc-link level3">while循环</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#do-while循环" class="router-link-active router-link-exact-active toc-link level3">do while循环</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#for循环" class="router-link-active router-link-exact-active toc-link level3">for循环</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#练习-判断结果" class="router-link-active router-link-exact-active toc-link level2">练习-判断结果</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#构造方法" class="router-link-active router-link-exact-active toc-link level2">构造方法</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#cinit-v" class="router-link-active router-link-exact-active toc-link level3">&lt; cinit &gt;()V</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#init-v" class="router-link-active router-link-exact-active toc-link level3">&lt; init &gt;()V</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#方法调用" class="router-link-active router-link-exact-active toc-link level2">方法调用</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#多态的原理" class="router-link-active router-link-exact-active toc-link level2">多态的原理</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#_1-运行代码" class="router-link-active router-link-exact-active toc-link level3">1）运行代码</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#_2-运行-hsdb-工具" class="router-link-active router-link-exact-active toc-link level3">2）运行 HSDB 工具</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#_3-查找某个对象" class="router-link-active router-link-exact-active toc-link level3">3）查找某个对象</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#_4-查看对象内存结构" class="router-link-active router-link-exact-active toc-link level3">4）查看对象内存结构</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#_5-查看对象-class-的内存地址" class="router-link-active router-link-exact-active toc-link level3">5）查看对象 Class 的内存地址</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#_6-查看类的-vtable" class="router-link-active router-link-exact-active toc-link level3">6）查看类的 vtable</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#_7-验证方法地址" class="router-link-active router-link-exact-active toc-link level3">7）验证方法地址</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#_8-小结" class="router-link-active router-link-exact-active toc-link level3">8）小结</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#异常处理" class="router-link-active router-link-exact-active toc-link level2">异常处理</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#try-catch" class="router-link-active router-link-exact-active toc-link level3">try-catch</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#多个single-catch块的情况" class="router-link-active router-link-exact-active toc-link level3">多个single-catch块的情况</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#multi-catch的情况" class="router-link-active router-link-exact-active toc-link level3">multi-catch的情况</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#finally" class="router-link-active router-link-exact-active toc-link level3">finally</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#练习-finally面试题" class="router-link-active router-link-exact-active toc-link level2">练习-finally面试题</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#finally出现了return" class="router-link-active router-link-exact-active toc-link level3">finally出现了return</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#finally对返回值的影响" class="router-link-active router-link-exact-active toc-link level3">finally对返回值的影响</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/backend/java/jvm/jvm04.html#synchronized" class="router-link-active router-link-exact-active toc-link level2">synchronized</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="四、字节码指令" tabindex="-1"><a class="header-anchor" href="#四、字节码指令" aria-hidden="true">#</a> 四、字节码指令</h1><h2 id="字节码指令简介" tabindex="-1"><a class="header-anchor" href="#字节码指令简介" aria-hidden="true">#</a> 字节码指令简介</h2><h3 id="字节码与数据类型" tabindex="-1"><a class="header-anchor" href="#字节码与数据类型" aria-hidden="true">#</a> 字节码与数据类型</h3><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20211121114519703.png" alt="image-20211121114519703"></p><p>具体指令的分类与介绍，虚参照书籍。</p><ul><li>在Java虚拟机的指令集中，大多数指令都包含其操作所对应的数据类型信息。举个例子，iload指令用于从局部变量表中加载int型的数据到操作数栈中，而fload指令加载的则是float类型的数据。这两条指令的操作在虚拟机内部可能会是由同一段代码来实现的，但在Class文件中它们必须拥有各自独立的操作码。</li><li>对于大部分与数据类型相关的字节码指令，它们的操作码助记符中都有特殊的字符来表明专门为哪种数据类型服务:i代表对int类型的数据操作，l代表long，s代表short，b代表byte，c代表char，f代表 float，d代表double，a代表reference。</li><li>Java虚拟机的操作码长度只有一字节，指令集将会被故意设计成非完全独立的。</li></ul><h3 id="加载和存储指令" tabindex="-1"><a class="header-anchor" href="#加载和存储指令" aria-hidden="true">#</a> 加载和存储指令</h3><blockquote><p>加载和存储指令用于将数据在栈帧中的<strong>局部变量表</strong>和<strong>操作数栈</strong>之间来回传输，这类指令包括:</p></blockquote><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20211121115500054.png" alt="image-20211121115500054"></p><p>存储数据的操作数栈和局部变量表主要由加载和存储指令进行操作</p><h3 id="运算指令" tabindex="-1"><a class="header-anchor" href="#运算指令" aria-hidden="true">#</a> 运算指令</h3><blockquote><p>算术指令用于对两个<strong>操作数栈</strong>上的值进行某种特定运算，并把结果重新存入到操作栈顶。大体上运算指令可以分为两种：对整型数据进行运算的指令与对浮点型数据进行运算的指令。</p></blockquote><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20211121115619022.png" alt="image-20211121115619022"></p><p>innc在局部变量表槽位上完成的。</p><h3 id="类型转换指令" tabindex="-1"><a class="header-anchor" href="#类型转换指令" aria-hidden="true">#</a> 类型转换指令</h3><blockquote><p>类型转换指令可以将两种不同的数值类型相互转换，这些转换操作一般用于实现用户代码中的显式类型转换操作，或者用来处理本节开篇所提到的字节码指令集中数据类型相关指令无法与数据类型一一对应的问题。</p></blockquote><p>Java虚拟机直接支持(即转换时无须显式的转换指令)以下数值类型的宽化类型转换(Widening Numeric Conversion，即小范围类型向大范围类型的安全转换):</p><ul><li>int类型到long、float或者double类型</li><li>long类型到float、double类型 ·</li><li>float类型到double类型</li></ul><p>处理窄化类型转换(Narrowing Numeric Conversion)时，就必须显式地使用转换指令来完成，这些转换指令包括</p><ul><li>i2b、i2c、i2s、l2i、f2i、f2l、d2i、d2l和d2f</li></ul><h3 id="对象创建与访问指令" tabindex="-1"><a class="header-anchor" href="#对象创建与访问指令" aria-hidden="true">#</a> 对象创建与访问指令</h3><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20211121120128538.png" alt="image-20211121120128538"></p><h3 id="操作数栈管理指令" tabindex="-1"><a class="header-anchor" href="#操作数栈管理指令" aria-hidden="true">#</a> 操作数栈管理指令</h3><blockquote><p>如同操作一个普通数据结构中的堆栈那样，Java虚拟机提供了一些用于直接操作操作数栈的指令</p></blockquote><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20211121120252495.png" alt="image-20211121120252495"></p><h3 id="控制转移指令" tabindex="-1"><a class="header-anchor" href="#控制转移指令" aria-hidden="true">#</a> 控制转移指令</h3><blockquote><p>控制转移指令可以让Java虚拟机有条件或无条件地从指定位置指令(而不是控制转移指令)的下 一条指令继续执行程序，从概念模型上理解，可以认为控制指令就是在有条件或无条件地修改PC寄存 器的值。</p></blockquote><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20211121120405138.png" alt="image-20211121120405138"></p><h3 id="方法调用和返回指令" tabindex="-1"><a class="header-anchor" href="#方法调用和返回指令" aria-hidden="true">#</a> 方法调用和返回指令</h3><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20211121120452607.png" alt="image-20211121120452607"></p><h3 id="异常处理指令" tabindex="-1"><a class="header-anchor" href="#异常处理指令" aria-hidden="true">#</a> 异常处理指令</h3><p>在Java程序中显式抛出异常的操作(throw语句)都由athrow指令来实现，除了用throw语句显式抛出异常的情况外，《Java虚拟机规范》还规定了许多运行时异常会在其他Java虚拟机指令检测到异常状况时自动抛出。例如前面介绍整数运算中，当除数为零时，虚拟机会在idiv或ldiv指令中抛出A r i t h m e t i c E xc e p t i o n 异 常 。 而在Java虚拟机中，处理异常(cat ch语句)不是由字节码指令来实现的(很久之前曾经使用jsr和 ret指令来实现，现在已经不用了)，而是采用异常表来完成。</p><p>同步指令 Java虚拟机可以支持方法级的同步和方法内部一段指令序列的同步，这两种同步结构都是使用管程(Monitor，更常见的是直接将它称为“锁”)来实现的。 方法级的同步是隐式的，无须通过字节码指令来控制，它实现在方法调用和返回操作之中。虚拟 机可以从方法常量池中的方法表结构中的ACC_SYNCHRONIZED访问标志得知一个方法是否被声明为同步方法。当方法调用时，调用指令将会检查方法的ACC_SYNCHRONIZED访问标志是否被设置，如果设置了，执行线程就要求先成功持有管程，然后才能执行方法，最后当方法完成(无论是正常完成还是非正常完成)时释放管程。在方法执行期间，执行线程持有了管程，其他任何线程都无法再获取到同一个管程。如果一个同步方法执行期间抛出了异常，并且在方法内部无法处理此异常，那这个同步方法所持有的管程将在异常抛到同步方法边界之外时自动释放。 同步一段指令集序列通常是由Java语言中的synchronized语句块来表示的，Java虚拟机的指令集中有monitorenter和monitorexit两条指令来支持synchronized关键字的语义，正确实现synchronized关键字 需要Javac编译器与Java虚拟机两者共同协作支持</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20211121120713272.png" alt="image-20211121120713272"></p><h2 id="入门" tabindex="-1"><a class="header-anchor" href="#入门" aria-hidden="true">#</a> 入门</h2><p>接着上一节，研究一下两组字节码指令，一个是</p><p>public cn.itcast.jvm.t5.HelloWorld(); 构造方法的字节码指令</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210917110912675.png" alt="image-20210917110912675"></p><ol><li>2a =&gt; <em>aload_0</em> 加载 slot 0 的局部变量，即 this，做为下面的 <em>invokespecial</em> 构造方法调用的参数</li><li>b7 =&gt; <em>invokespecial</em> 预备调用构造方法，哪个方法呢？</li><li>00 01 引用常量池中 ##1 项，即【 Method java/lang/Object.”“😦)V 】</li><li>b1 表示返回</li></ol><p>另一个是 public static void main(java.lang.String[]); 主方法的字节码指令</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210917111213650.png" alt="image-20210917111213650"></p><ol><li>b2 =&gt; <em>getstatic</em> 用来加载静态变量，哪个静态变量呢？</li><li>00 02 引用常量池中 ##2 项，即【Field java/lang/System.out:Ljava/io/PrintStream;】</li><li>12 =&gt; <em>ldc</em> 加载参数，哪个参数呢？</li><li>03 引用常量池中 ##3 项，即 【String hello world】</li><li>b6 =&gt; <em>invokevirtual</em> 预备调用成员方法，哪个方法呢？</li><li>00 04 引用常量池中 ##4 项，即【Method java/io/PrintStream.println:(Ljava/lang/String;)V】</li><li>b1 表示返回</li></ol><p>请参考</p><p><a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html##jvms-6.5" target="_blank" rel="noopener noreferrer">https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html##jvms-6.5<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="javap工具" tabindex="-1"><a class="header-anchor" href="#javap工具" aria-hidden="true">#</a> javap工具</h2><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210923153557134.png" alt="image-20210923153557134"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210923153623601.png" alt="image-20210923153623601"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210923153708752.png" alt="image-20210923153708752"></p><h2 id="图解方法执行流程" tabindex="-1"><a class="header-anchor" href="#图解方法执行流程" aria-hidden="true">#</a> 图解方法执行流程</h2><h3 id="原始java代码" tabindex="-1"><a class="header-anchor" href="#原始java代码" aria-hidden="true">#</a> 原始java代码</h3><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924111210754.png" alt="image-20210924111210754"></p><h3 id="编译后的字节码文件" tabindex="-1"><a class="header-anchor" href="#编译后的字节码文件" aria-hidden="true">#</a> 编译后的字节码文件</h3><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924111241397.png" alt="image-20210924111241397"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924111316540.png" alt="image-20210924111316540"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924111340332.png" alt="image-20210924111340332"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924111409302.png" alt="image-20210924111409302"></p><h3 id="常量池载入运行时常量池" tabindex="-1"><a class="header-anchor" href="#常量池载入运行时常量池" aria-hidden="true">#</a> 常量池载入运行时常量池</h3><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924111440781.png" alt="image-20210924111440781"></p><h3 id="方法字节码载入方法区" tabindex="-1"><a class="header-anchor" href="#方法字节码载入方法区" aria-hidden="true">#</a> 方法字节码载入方法区</h3><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924111506534.png" alt="image-20210924111506534"></p><h3 id="main线程开始运行-分配栈帧内存" tabindex="-1"><a class="header-anchor" href="#main线程开始运行-分配栈帧内存" aria-hidden="true">#</a> main线程开始运行，分配栈帧内存</h3><p>（stack=2，local=4）</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924111608159.png" alt="image-20210924111608159"></p><ul><li>stack 操作数栈深度，即只允许栈内两个操作数</li><li>local即本地变量表，即能为本地变量分配四个槽位</li></ul><h3 id="执行引擎开始执行字节码" tabindex="-1"><a class="header-anchor" href="#执行引擎开始执行字节码" aria-hidden="true">#</a> 执行引擎开始执行字节码</h3><h4 id="bipush10" tabindex="-1"><a class="header-anchor" href="#bipush10" aria-hidden="true">#</a> bipush10</h4><ul><li>将一个 byte 压入操作数栈（其长度会补齐 4 个字节），类似的指令还有</li><li>sipush 将一个 short 压入操作数栈（其长度会补齐 4 个字节）</li><li>ldc 将一个 int 压入操作数栈</li><li>ldc2_w 将一个 long 压入操作数栈（分两次压入，因为 long 是 8 个字节）</li><li>这里小的数字都是和字节码指令存在一起，超过 <code>short 范围</code> 的数字存入了常量池</li></ul><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924112034863.png" alt="image-20210924112034863"></p><h4 id="istore-1" tabindex="-1"><a class="header-anchor" href="#istore-1" aria-hidden="true">#</a> istore_1</h4><ul><li>将操作数栈顶数据弹出，存入局部变量表的 slot 1</li></ul><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924112215894.png" alt="image-20210924112215894"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924112234290.png" alt="image-20210924112234290"></p><h4 id="ldc-3" tabindex="-1"><a class="header-anchor" href="#ldc-3" aria-hidden="true">#</a> ldc ##3</h4><ul><li>从常量池加载 ##3 数据到操作数栈</li><li><strong>注意</strong> Short.MAX_VALUE 是 32767，所以 32768 = Short.MAX_VALUE + 1 实际是在编译期间计算好的</li></ul><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924112356501.png" alt="image-20210924112356501"></p><h4 id="istore-2" tabindex="-1"><a class="header-anchor" href="#istore-2" aria-hidden="true">#</a> istore_2</h4><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924112955648.png" alt="image-20210924112955648"></p><h4 id="iload-1" tabindex="-1"><a class="header-anchor" href="#iload-1" aria-hidden="true">#</a> iload_1</h4><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924113031356.png" alt="image-20210924113031356"></p><h4 id="iload-2" tabindex="-1"><a class="header-anchor" href="#iload-2" aria-hidden="true">#</a> iload_2</h4><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924113108640.png" alt="image-20210924113108640"></p><h4 id="iadd" tabindex="-1"><a class="header-anchor" href="#iadd" aria-hidden="true">#</a> iadd</h4><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924113139808.png" alt="image-20210924113139808"></p><h4 id="istore-3" tabindex="-1"><a class="header-anchor" href="#istore-3" aria-hidden="true">#</a> istore_3</h4><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924113229028.png" alt="image-20210924113229028"></p><h4 id="getstatic-4" tabindex="-1"><a class="header-anchor" href="#getstatic-4" aria-hidden="true">#</a> getstatic ##4</h4><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924113302422.png" alt="image-20210924113302422"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924113321963.png" alt="image-20210924113321963"></p><h4 id="iload-3" tabindex="-1"><a class="header-anchor" href="#iload-3" aria-hidden="true">#</a> iload_3</h4><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924113350170.png" alt="image-20210924113350170"></p><h4 id="invokevirtual-5" tabindex="-1"><a class="header-anchor" href="#invokevirtual-5" aria-hidden="true">#</a> invokevirtual ##5</h4><ul><li>找到常量池 ##5 项</li><li>定位到方法区 java/io/PrintStream.println:(I)V 方法</li><li>生成新的栈帧（分配 locals、stack等）</li><li>传递参数，执行新栈帧中的字节码</li></ul><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924113452774.png" alt="image-20210924113452774"></p><ul><li>执行完毕，弹出栈帧</li><li>清除 main 操作数栈内容</li></ul><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924113515490.png" alt="image-20210924113515490"></p><h4 id="return" tabindex="-1"><a class="header-anchor" href="#return" aria-hidden="true">#</a> return</h4><ul><li>完成 main 方法调用，弹出 main 栈帧</li><li>程序结束</li></ul><h2 id="练习-分析i" tabindex="-1"><a class="header-anchor" href="#练习-分析i" aria-hidden="true">#</a> 练习：分析i++</h2><p>源码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924165626742.png" alt="image-20210924165626742"></p><p>字节码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924165651480.png" alt="image-20210924165651480"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924165704812.png" alt="image-20210924165704812"></p><p>分析</p><ul><li>注意 iinc 指令是直接在局部变量 slot 上进行运算</li><li>a++ 和 ++a 的区别是先执行 iload 还是 先执行 iinc</li></ul><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924165807165.png" alt="image-20210924165807165"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924165908486.png" alt="image-20210924165908486"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924170057846.png" alt="image-20210924170057846"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924170221454.png" alt="image-20210924170221454"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924170548957.png" alt="image-20210924170548957"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924170650885.png" alt="image-20210924170650885"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924170740778.png" alt="image-20210924170740778"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924170906586.png" alt="image-20210924170906586"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924170954460.png" alt="image-20210924170954460"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924171036917.png" alt="image-20210924171036917"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210924171109858.png" alt="image-20210924171109858"></p><h2 id="条件判断指令" tabindex="-1"><a class="header-anchor" href="#条件判断指令" aria-hidden="true">#</a> 条件判断指令</h2><table><thead><tr><th>二进制</th><th>字节码</th><th>含义</th></tr></thead><tbody><tr><td>0x99</td><td>ifeq</td><td>判断是否 == 0</td></tr><tr><td>0x9a</td><td>ifne</td><td>判断是否 !=0</td></tr><tr><td>0x9b</td><td>iflt</td><td>判断是否 &lt; 0</td></tr><tr><td>0x9c</td><td>ifge</td><td>判断是否 &gt;= 0</td></tr><tr><td>0x9d</td><td>ifgt</td><td>判断是否 &gt; 0</td></tr><tr><td>0x9e</td><td>ifle</td><td>判断是否 &lt;= 0</td></tr><tr><td>0x9f</td><td>if_icmpeq</td><td>两个int是否 ==</td></tr><tr><td>0xa0</td><td>if_icmpne</td><td>两个int是否 !=</td></tr><tr><td>0xa1</td><td>if_icmplt</td><td>两个int是否 &lt;</td></tr><tr><td>0xa2</td><td>if_icmpge</td><td>两个int是否 &gt;=</td></tr><tr><td>0xa3</td><td>if_icmpgt</td><td>两个int是否 &gt;</td></tr><tr><td>0xa4</td><td>if_icmple</td><td>两个int是否 &lt;=</td></tr><tr><td>0xa5</td><td>if_acmpeq</td><td>两个引用是否 ==</td></tr><tr><td>0xa6</td><td>if_acmpne</td><td>两个引用是否 !=</td></tr><tr><td>0xc6</td><td>ifnull</td><td>判断是否 == null</td></tr><tr><td>0xc7</td><td>ifnonnull</td><td>判断是否 != null</td></tr></tbody></table><p>几点说明：</p><ul><li>byte，short，char 都会按 int 比较，因为操作数栈都是 4 字节</li><li>goto 用来进行跳转到指定行号的字节码</li></ul><p>源码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925105301625.png" alt="image-20210925105301625"></p><p>字节码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925105352387.png" alt="image-20210925105352387"></p><h2 id="循环控制指令" tabindex="-1"><a class="header-anchor" href="#循环控制指令" aria-hidden="true">#</a> 循环控制指令</h2><h3 id="while循环" tabindex="-1"><a class="header-anchor" href="#while循环" aria-hidden="true">#</a> while循环</h3><p>源码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925105448736.png" alt="image-20210925105448736"></p><p>字节码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925105516430.png" alt="image-20210925105516430"></p><h3 id="do-while循环" tabindex="-1"><a class="header-anchor" href="#do-while循环" aria-hidden="true">#</a> do while循环</h3><p>源码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925105600444.png" alt="image-20210925105600444"></p><p>字节码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925110919606.png" alt="image-20210925110919606"></p><ul><li>之前案例的a++先iload在iinc，是因为在自增之前有赋值操作，需要放如操作数栈</li><li>a = a++，由于先有 = 的赋值操作，所以先把a的值放到操作数栈，iload，iinc</li><li>此处只是a++，所以只是iinc</li><li>只是由于后面有 &lt; 比较操作，所以有iload操作</li></ul><h3 id="for循环" tabindex="-1"><a class="header-anchor" href="#for循环" aria-hidden="true">#</a> for循环</h3><p>源码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925105642347.png" alt="image-20210925105642347"></p><p>for循环字节码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925105657311.png" alt="image-20210925105657311"></p><p><strong>注意</strong></p><p>比较 while 和 for 的字节码，你发现它们是一模一样的，殊途也能同归</p><h2 id="练习-判断结果" tabindex="-1"><a class="header-anchor" href="#练习-判断结果" aria-hidden="true">#</a> 练习-判断结果</h2><p>源码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925105819870.png" alt="image-20210925105819870"></p><ul><li>x = 0，会将0赋值给x所在本地变量表的某个槽位</li><li>由于是x++，所以是先把x的值从槽位拷贝到操作数栈；然后x再在槽位上执行自增变成1</li><li>在操作数栈中，对x进行赋值操作 x = x++，操作数栈中x++的值是0，再重新赋值给x</li><li>x的值从自增的1，被赋值操作覆盖成了0</li><li>所以不管循环赋值多少次，都是0</li></ul><h2 id="构造方法" tabindex="-1"><a class="header-anchor" href="#构造方法" aria-hidden="true">#</a> 构造方法</h2><h3 id="cinit-v" tabindex="-1"><a class="header-anchor" href="#cinit-v" aria-hidden="true">#</a> &lt; cinit &gt;()V</h3><p>静态代码块和静态成员变量的初始化</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925162751694.png" alt="image-20210925162751694"></p><p>编译器会按从上至下的顺序，收集所有 static 静态代码块和静态成员赋值的代码，合并为一个特殊的方法 &lt; cinit &gt;()V ：</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925162904136.png" alt="image-20210925162904136"></p><p>&lt; cinit &gt;()V 方法会在类加载的初始化阶段被调用</p><h3 id="init-v" tabindex="-1"><a class="header-anchor" href="#init-v" aria-hidden="true">#</a> &lt; init &gt;()V</h3><p>代码块和成员变量初始化</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925163022085.png" alt="image-20210925163022085"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925163034579.png" alt="image-20210925163034579"></p><p>编译器会按从上至下的顺序，收集所有 {} 代码块和成员变量赋值的代码，形成新的构造方法，但原始构造方法内的代码总是在最后</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925163202818.png" alt="image-20210925163202818"></p><h2 id="方法调用" tabindex="-1"><a class="header-anchor" href="#方法调用" aria-hidden="true">#</a> 方法调用</h2><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925163503713.png" alt="image-20210925163503713"></p><p>字节码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925163526434.png" alt="image-20210925163526434"></p><ul><li>new 是创建【对象】，给对象分配堆内存，执行成功会将【对象引用】压入操作数栈</li><li>dup 是赋值操作数栈栈顶的内容，本例即为【对象引用】，为什么需要两份引用呢，一个是要配合 invokespecial 调用该对象的构造方法 “&lt; init &gt;”😦)V （会消耗掉栈顶一个引用），另一个要配合 astore_1 赋值给局部变量</li><li>最终方法（final），私有方法（private），构造方法都是由 invokespecial 指令来调用，属于 <code>静态绑定</code></li><li>普通成员方法是由 invokevirtual 调用，属于 <code>动态绑定</code> ，即支持 <code>多态</code></li><li>成员方法与静态方法调用的另一个区别是，执行方法前是否需要【对象引用】</li><li>比较有意思的是 d.test4(); 是通过【对象引用】调用一个静态方法，可以看到在调用invokestatic 之前执行了 pop 指令，把【对象引用】从操作数栈弹掉了</li><li>还有一个执行 invokespecial 的情况是通过 super 调用父类方法</li></ul><h2 id="多态的原理" tabindex="-1"><a class="header-anchor" href="#多态的原理" aria-hidden="true">#</a> 多态的原理</h2><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925170159436.png" alt="image-20210925170159436"></p><h3 id="_1-运行代码" tabindex="-1"><a class="header-anchor" href="#_1-运行代码" aria-hidden="true">#</a> 1）运行代码</h3><p>停在 System.in.read() 方法上，这时运行 jps 获取进程 id</p><h3 id="_2-运行-hsdb-工具" tabindex="-1"><a class="header-anchor" href="#_2-运行-hsdb-工具" aria-hidden="true">#</a> 2）运行 HSDB 工具</h3><p>进入 JDK 安装目录，执行</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>java -cp ./lib/sa-jdi.jar sun.jvm.hotspot.HSDB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>进入图形界面 attach 进程 id</p><h3 id="_3-查找某个对象" tabindex="-1"><a class="header-anchor" href="#_3-查找某个对象" aria-hidden="true">#</a> 3）查找某个对象</h3><p>打开 Tools -&gt; Find Object By Query</p><p>输入 select d from cn.itcast.jvm.t3.bytecode.Dog d 点击 Execute 执行</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925170422238.png" alt="image-20210925170422238"></p><h3 id="_4-查看对象内存结构" tabindex="-1"><a class="header-anchor" href="#_4-查看对象内存结构" aria-hidden="true">#</a> 4）查看对象内存结构</h3><p>点击超链接可以看到对象的内存结构，此对象没有任何属性，因此只有对象头的 16 字节，前 8 字节是MarkWord，后 8 字节就是对象的 Class 指针，但目前看不到它的实际地址</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925170554237.png" alt="image-20210925170554237"></p><h3 id="_5-查看对象-class-的内存地址" tabindex="-1"><a class="header-anchor" href="#_5-查看对象-class-的内存地址" aria-hidden="true">#</a> 5）查看对象 Class 的内存地址</h3><p>可以通过 Windows -&gt; Console 进入命令行模式，执行</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>mem 0x00000001299b4978 2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>mem 有两个参数，参数 1 是对象地址，参数 2 是查看 2 行（即 16 字节）</p><p>结果中第二行 0x000000001b7d4028 即为 Class 的内存地址</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925170802243.png" alt="image-20210925170802243"></p><h3 id="_6-查看类的-vtable" tabindex="-1"><a class="header-anchor" href="#_6-查看类的-vtable" aria-hidden="true">#</a> 6）查看类的 vtable</h3><ul><li>方法1：Alt+R 进入 Inspector 工具，输入刚才的 Class 内存地址，看到如下界面</li></ul><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925170842197.png" alt="image-20210925170842197"></p><ul><li>方法2：或者 Tools -&gt; Class Browser 输入 Dog 查找，可以得到相同的结果</li></ul><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925170914079.png" alt="image-20210925170914079"></p><p>无论通过哪种方法，都可以找到 Dog Class 的 vtable 长度为 6，意思就是 Dog 类有 6 个虚方法（多态相关的，fifinal，static 不会列入）</p><p>那么这 6 个方法都是谁呢？从 Class 的起始地址开始算，偏移 0x1b8 就是 vtable 的起始地址，进行计算得到：</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925170950898.png" alt="image-20210925170950898"></p><p>通过 Windows -&gt; Console 进入命令行模式，执行</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>mem 0x000000001b7d41e0 6
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925171027439.png" alt="image-20210925171027439"></p><p>就得到了 6 个虚方法的入口地址</p><h3 id="_7-验证方法地址" tabindex="-1"><a class="header-anchor" href="#_7-验证方法地址" aria-hidden="true">#</a> 7）验证方法地址</h3><p>通过 Tools -&gt; Class Browser 查看每个类的方法定义，比较可知</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925171108398.png" alt="image-20210925171108398"></p><p>对号入座，发现</p><ul><li>eat() 方法是 Dog 类自己的</li><li>toString() 方法是继承 String 类的</li><li>fifinalize() ，equals()，hashCode()，clone() 都是继承 Object 类的</li></ul><h3 id="_8-小结" tabindex="-1"><a class="header-anchor" href="#_8-小结" aria-hidden="true">#</a> 8）小结</h3><p>当执行 invokevirtual 指令时，</p><ol><li>先通过栈帧中的对象引用找到对象</li><li>分析对象头，找到对象的实际 Class</li><li>Class 结构中有 vtable，它在类加载的链接阶段就已经根据方法的重写规则生成好了</li><li>查表得到方法的具体地址</li><li>执行方法的字节码</li></ol><h2 id="异常处理" tabindex="-1"><a class="header-anchor" href="#异常处理" aria-hidden="true">#</a> 异常处理</h2><h3 id="try-catch" tabindex="-1"><a class="header-anchor" href="#try-catch" aria-hidden="true">#</a> try-catch</h3><p>源码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925193148430.png" alt="image-20210925193148430"></p><p>字节码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925193304497.png" alt="image-20210925193304497"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925193317991.png" alt="image-20210925193317991"></p><ul><li>可以看到多出来一个 Exception table 的结构，[from, to) 是前闭后开的检测范围，一旦这个范围内的字节码执行出现异常，则通过 type 匹配异常类型，如果一致，进入 target 所指示行号</li><li>8 行的字节码指令 astore_2 是将异常对象引用存入局部变量表的 slot 2 位置</li></ul><h3 id="多个single-catch块的情况" tabindex="-1"><a class="header-anchor" href="#多个single-catch块的情况" aria-hidden="true">#</a> 多个single-catch块的情况</h3><p>源码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925193411730.png" alt="image-20210925193411730"></p><p>字节码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925193438077.png" alt="image-20210925193438077"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925193450388.png" alt="image-20210925193450388"></p><ul><li>因为异常出现时，只能进入 Exception table 中一个分支，所以局部变量表 slot 2 位置被共用</li></ul><h3 id="multi-catch的情况" tabindex="-1"><a class="header-anchor" href="#multi-catch的情况" aria-hidden="true">#</a> multi-catch的情况</h3><p>源码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925193530484.png" alt="image-20210925193530484"></p><p>字节码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925193553253.png" alt="image-20210925193553253"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925193605329.png" alt="image-20210925193605329"></p><h3 id="finally" tabindex="-1"><a class="header-anchor" href="#finally" aria-hidden="true">#</a> finally</h3><p>源码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925193627842.png" alt="image-20210925193627842"></p><p>字节码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925193652990.png" alt="image-20210925193652990"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925193705582.png" alt="image-20210925193705582"></p><p>可以看到 fifinally 中的代码被复制了 3 份，分别放入 try 流程，catch 流程以及 catch 剩余的异常类型流程</p><h2 id="练习-finally面试题" tabindex="-1"><a class="header-anchor" href="#练习-finally面试题" aria-hidden="true">#</a> 练习-finally面试题</h2><h3 id="finally出现了return" tabindex="-1"><a class="header-anchor" href="#finally出现了return" aria-hidden="true">#</a> finally出现了return</h3><p>源码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925193812575.png" alt="image-20210925193812575"></p><ul><li>输出20</li></ul><p>字节码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925193839362.png" alt="image-20210925193839362"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925193851730.png" alt="image-20210925193851730"></p><ul><li>输出20</li><li>由于 finally 中的 ireturn 被插入了所有可能的流程，因此返回结果肯定以 finally 的为准</li><li>至于字节码中第 2 行，似乎没啥用，且留个伏笔，看下个例子</li><li>跟上例中的 fifinally 相比，发现没有 athrow 了，这告诉我们：如果在 fifinally 中出现了 return，会吞掉异常，可以试一下下面的代码</li></ul><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925193952176.png" alt="image-20210925193952176"></p><h3 id="finally对返回值的影响" tabindex="-1"><a class="header-anchor" href="#finally对返回值的影响" aria-hidden="true">#</a> finally对返回值的影响</h3><p>源码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925194018660.png" alt="image-20210925194018660"></p><p>字节码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925194154627.png" alt="image-20210925194154627"></p><h2 id="synchronized" tabindex="-1"><a class="header-anchor" href="#synchronized" aria-hidden="true">#</a> synchronized</h2><p>源码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925194245536.png" alt="image-20210925194245536"></p><ul><li>如何保证synchronize在遇到异常时也能正常解锁（通过异常处理）</li></ul><p>字节码</p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925194342854.png" alt="image-20210925194342854"></p><p><img src="https://chasing1874.oss-cn-chengdu.aliyuncs.com/image-20210925194405057.png" alt="image-20210925194405057"></p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/tt110617/edit/main/demo/src/backend/java/jvm/jvm04.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">上次编辑于: </span><span class="info">2022/8/29 21:57:52</span></div><div class="meta-item contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: 1253728268@qq.com">hzz</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/myblog/backend/java/jvm/jvm03.html" class="nav-link prev" aria-label="三、类结构文件"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><!---->三、类结构文件</div></a><a href="/myblog/backend/java/jvm/jvm05.html" class="nav-link next" aria-label="五、编译器优化"><div class="hint">下一页<span class="arrow right"></span></div><div class="link">五、编译器优化<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer"></div><div class="copyright">Copyright © 2022 十一</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/myblog/assets/app.6a2d513d.js" defer></script>
  </body>
</html>
