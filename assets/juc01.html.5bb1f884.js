import{_ as e}from"./plugin-vue_export-helper.21dcd24c.js";import{o as c,c as o,a as n,b as t,e as s,d as p,r as i}from"./app.6a2d513d.js";const u={},l=n("h1",{id:"\u4E00\u3001\u8FDB\u7A0B\u548C\u7EBF\u7A0B",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u4E00\u3001\u8FDB\u7A0B\u548C\u7EBF\u7A0B","aria-hidden":"true"},"#"),s(" \u4E00\u3001\u8FDB\u7A0B\u548C\u7EBF\u7A0B")],-1),k=n("h2",{id:"_0-\u8BF4\u660E",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_0-\u8BF4\u660E","aria-hidden":"true"},"#"),s(" 0.\u8BF4\u660E")],-1),r=s("\u7B14\u8BB0\u6765\u6E90\uFF1A"),d={href:"https://gitee.com/gu_chun_bo/java-construct",target:"_blank",rel:"noopener noreferrer"},v=s("https://gitee.com/gu_chun_bo/java-construct"),m=s(" + \u672C\u4EBA\u4FEE\u6539 by tt11"),b=s("\u53C2\u8003\u89C6\u9891\uFF1A"),h={href:"https://www.bilibili.com/video/BV16J411h7Rd",target:"_blank",rel:"noopener noreferrer"},g=s("https://www.bilibili.com/video/BV16J411h7Rd"),w=p(`<h2 id="_1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_1-\u6982\u8FF0" aria-hidden="true">#</a> 1.\u6982\u8FF0</h2><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209121603101.png" alt="img"></p><h2 id="_2-\u8FDB\u7A0B\u4E0E\u8FDB\u7A0B" tabindex="-1"><a class="header-anchor" href="#_2-\u8FDB\u7A0B\u4E0E\u8FDB\u7A0B" aria-hidden="true">#</a> 2.\u8FDB\u7A0B\u4E0E\u8FDB\u7A0B</h2><h3 id="_2-1-\u8FDB\u7A0B\u4E0E\u8FDB\u7A0B" tabindex="-1"><a class="header-anchor" href="#_2-1-\u8FDB\u7A0B\u4E0E\u8FDB\u7A0B" aria-hidden="true">#</a> 2.1 \u8FDB\u7A0B\u4E0E\u8FDB\u7A0B</h3><h4 id="\u8FDB\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u8FDB\u7A0B" aria-hidden="true">#</a> \u8FDB\u7A0B</h4><ul><li>\u7A0B\u5E8F\u7531\u6307\u4EE4\u548C\u6570\u636E\u7EC4\u6210\uFF0C\u4F46\u662F\u8FD9\u4E9B\u6307\u4EE4\u8981\u8FD0\u884C\uFF0C \u6570\u636E\u8981\u8BFB\u5199\uFF0C\u5C31\u5FC5\u987B\u5C06\u6307\u4EE4\u52A0\u8F7D\u5230cpu\uFF0C\u6570\u636E\u52A0\u8F7D\u81F3\u5185\u5B58\u3002\u5728\u6307\u4EE4\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u8FD8\u9700\u8981\u7528\u5230\u78C1\u76D8\uFF0C\u7F51\u7EDC\u7B49\u8BBE\u5907\uFF0C\u8FDB\u7A0B\u5C31\u662F\u7528\u6765\u52A0\u8F7D\u6307\u4EE4\u7BA1\u7406\u5185\u5B58\u7BA1\u7406IO\u7684</li><li>\u5F53\u4E00\u4E2A\u6307\u4EE4\u88AB\u8FD0\u884C\uFF0C\u4ECE\u78C1\u76D8\u52A0\u8F7D\u8FD9\u4E2A\u7A0B\u5E8F\u7684\u4EE3\u7801\u5230\u5185\u5B58\uFF0C\u8FD9\u65F6\u5019\u5C31\u5F00\u542F\u4E86\u4E00\u4E2A\u8FDB\u7A0B</li><li>\u8FDB\u7A0B\u5C31\u53EF\u4EE5\u89C6\u4E3A\u7A0B\u5E8F\u7684\u4E00\u4E2A\u5B9E\u4F8B\uFF0C\u5927\u90E8\u5206\u7A0B\u5E8F\u90FD\u53EF\u4EE5\u8FD0\u884C\u591A\u4E2A\u5B9E\u4F8B\u8FDB\u7A0B\uFF08\u4F8B\u5982\u8BB0\u4E8B\u672C\uFF0C\u6D4F\u89C8\u5668\u7B49\uFF09\uFF0C\u90E8\u5206\u53EA\u53EF\u4EE5\u8FD0\u884C\u4E00\u4E2A\u5B9E\u4F8B\u8FDB\u7A0B\uFF08\u4F8B\u5982360\u5B89\u5168\u536B\u58EB\uFF09</li></ul><h4 id="\u7EBF\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u7EBF\u7A0B" aria-hidden="true">#</a> \u7EBF\u7A0B</h4><ul><li>\u4E00\u4E2A\u8FDB\u7A0B\u4E4B\u5185\u53EF\u4EE5\u5206\u4E3A\u4E00\u5230\u591A\u4E2A\u7EBF\u7A0B\u3002</li><li>\u4E00\u4E2A\u7EBF\u7A0B\u5C31\u662F\u4E00\u4E2A\u6307\u4EE4\u6D41\uFF0C\u5C06\u6307\u4EE4\u6D41\u4E2D\u7684\u4E00\u6761\u6761\u6307\u4EE4\u4EE5\u4E00\u5B9A\u7684\u987A\u5E8F\u4EA4\u7ED9 CPU \u6267\u884C</li><li>Java \u4E2D\uFF0C<strong>\u7EBF\u7A0B\u4F5C\u4E3A\u6700\u5C0F\u8C03\u5EA6\u5355\u4F4D\uFF0C\u8FDB\u7A0B\u4F5C\u4E3A\u8D44\u6E90\u5206\u914D\u7684\u6700\u5C0F\u5355\u4F4D</strong>\u3002 \u5728 windows \u4E2D\u8FDB\u7A0B\u662F\u4E0D\u6D3B\u52A8\u7684\uFF0C\u53EA\u662F\u4F5C\u4E3A \u7EBF\u7A0B\u7684\u5BB9\u5668</li></ul><h4 id="\u4E8C\u8005\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u8005\u5BF9\u6BD4" aria-hidden="true">#</a> \u4E8C\u8005\u5BF9\u6BD4</h4><ul><li>\u8FDB\u7A0B\u57FA\u672C\u4E0A\u76F8\u4E92\u72EC\u7ACB\u7684\uFF0C\u800C\u7EBF\u7A0B\u5B58\u5728\u4E8E\u8FDB\u7A0B\u5185\uFF0C\u662F\u8FDB\u7A0B\u7684\u4E00\u4E2A\u5B50\u96C6</li><li>\u8FDB\u7A0B\u62E5\u6709\u5171\u4EAB\u7684\u8D44\u6E90\uFF0C\u5982\u5185\u5B58\u7A7A\u95F4\u7B49\uFF0C\u4F9B\u5176\u5185\u90E8\u7684\u7EBF\u7A0B\u5171\u4EAB</li><li>\u8FDB\u7A0B\u95F4\u901A\u4FE1\u8F83\u4E3A\u590D\u6742 <ul><li>\u540C\u4E00\u53F0\u8BA1\u7B97\u673A\u7684\u8FDB\u7A0B\u901A\u4FE1\u79F0\u4E3A IPC\uFF08Inter-process communication\uFF09</li><li>\u4E0D\u540C\u8BA1\u7B97\u673A\u4E4B\u95F4\u7684\u8FDB\u7A0B\u901A\u4FE1\uFF0C\u9700\u8981\u901A\u8FC7\u7F51\u7EDC\uFF0C\u5E76\u9075\u5B88\u5171\u540C\u7684\u534F\u8BAE\uFF0C\u4F8B\u5982 HTTP</li></ul></li><li>\u7EBF\u7A0B\u901A\u4FE1\u76F8\u5BF9\u7B80\u5355\uFF0C\u56E0\u4E3A\u5B83\u4EEC\u5171\u4EAB\u8FDB\u7A0B\u5185\u7684\u5185\u5B58\uFF0C\u4E00\u4E2A\u4F8B\u5B50\u662F\u591A\u4E2A\u7EBF\u7A0B\u53EF\u4EE5\u8BBF\u95EE\u540C\u4E00\u4E2A\u5171\u4EAB\u53D8\u91CF</li><li>\u7EBF\u7A0B\u66F4\u8F7B\u91CF\uFF0C\u7EBF\u7A0B\u4E0A\u4E0B\u6587\u5207\u6362\u6210\u672C\u4E00\u822C\u4E0A\u8981\u6BD4\u8FDB\u7A0B\u4E0A\u4E0B\u6587\u5207\u6362\u4F4E</li></ul><h3 id="_2-2-\u5E76\u884C\u4E0E\u5E76\u53D1" tabindex="-1"><a class="header-anchor" href="#_2-2-\u5E76\u884C\u4E0E\u5E76\u53D1" aria-hidden="true">#</a> 2.2 \u5E76\u884C\u4E0E\u5E76\u53D1</h3><h4 id="\u5E76\u53D1" tabindex="-1"><a class="header-anchor" href="#\u5E76\u53D1" aria-hidden="true">#</a> \u5E76\u53D1</h4><p>\u5728\u5355\u6838 cpu \u4E0B\uFF0C\u7EBF\u7A0B\u5B9E\u9645\u8FD8\u662F\u4E32\u884C\u6267\u884C\u7684\u3002\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u6709\u4E00\u4E2A\u7EC4\u4EF6\u53EB\u505A\u4EFB\u52A1\u8C03\u5EA6\u5668\uFF0C\u5C06 cpu \u7684\u65F6\u95F4\u7247\uFF08windows \u4E0B\u65F6\u95F4\u7247\u6700\u5C0F\u7EA6\u4E3A 15 \u6BEB\u79D2\uFF09\u5206\u7ED9\u4E0D\u540C\u7684\u7A0B\u5E8F\u4F7F\u7528\uFF0C\u53EA\u662F\u7531\u4E8E cpu \u5728\u7EBF\u7A0B\u95F4\uFF08\u65F6\u95F4\u7247\u5F88\u77ED\uFF09\u7684\u5207\u6362\u975E\u5E38\u5FEB\uFF0C\u4EBA\u7C7B\u611F \u89C9\u662F\u540C\u65F6\u8FD0\u884C\u7684 \u3002\u4E00\u822C\u4F1A\u5C06\u8FD9\u79CD\u7EBF\u7A0B\u8F6E\u6D41\u4F7F\u7528 CPU \u7684\u505A\u6CD5\u79F0\u4E3A\u5E76\u53D1\uFF08concurrent\uFF09</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209121603988.png" alt="1583408729416"></p><h4 id="\u5E76\u884C" tabindex="-1"><a class="header-anchor" href="#\u5E76\u884C" aria-hidden="true">#</a> \u5E76\u884C</h4><p>\u591A\u6838 cpu\u4E0B\uFF0C\u6BCF\u4E2A\u6838\uFF08core\uFF09 \u90FD\u53EF\u4EE5\u8C03\u5EA6\u8FD0\u884C\u7EBF\u7A0B\uFF0C\u8FD9\u65F6\u5019\u7EBF\u7A0B\u53EF\u4EE5\u662F\u5E76\u884C\u7684\uFF0C\u4E0D\u540C\u7684\u7EBF\u7A0B\u540C\u65F6\u4F7F\u7528\u4E0D\u540C\u7684cpu\u5728\u6267\u884C\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209121603001.png" alt="1583408812725"></p><h4 id="\u4E8C\u8005\u5BF9\u6BD4-1" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u8005\u5BF9\u6BD4-1" aria-hidden="true">#</a> \u4E8C\u8005\u5BF9\u6BD4</h4><p>\u5F15\u7528 Rob Pike \u7684\u4E00\u6BB5\u63CF\u8FF0\uFF1A\u5E76\u53D1\uFF08concurrent\uFF09\u662F\u540C\u4E00\u65F6\u95F4\u5E94\u5BF9\uFF08dealing with\uFF09\u591A\u4EF6\u4E8B\u60C5\u7684\u80FD\u529B\uFF0C\u5E76\u884C\uFF08parallel\uFF09\u662F\u540C\u4E00\u65F6\u95F4\u52A8\u624B\u505A\uFF08doing\uFF09\u591A\u4EF6\u4E8B\u60C5\u7684\u80FD\u529B</p><ul><li>\u5BB6\u5EAD\u4E3B\u5987\u505A\u996D\u3001\u6253\u626B\u536B\u751F\u3001\u7ED9\u5B69\u5B50\u5582\u5976\uFF0C\u5979\u4E00\u4E2A\u4EBA\u8F6E\u6D41\u4EA4\u66FF\u505A\u8FD9\u591A\u4EF6\u4E8B\uFF0C\u8FD9\u65F6\u5C31\u662F\u5E76\u53D1</li><li>\u96C7\u4E863\u4E2A\u4FDD\u59C6\uFF0C\u4E00\u4E2A\u4E13\u505A\u996D\u3001\u4E00\u4E2A\u4E13\u6253\u626B\u536B\u751F\u3001\u4E00\u4E2A\u4E13\u5582\u5976\uFF0C\u4E92\u4E0D\u5E72\u6270\uFF0C\u8FD9\u65F6\u662F\u5E76\u884C</li><li>\u5BB6\u5EAD\u4E3B\u5987\u96C7\u4E86\u4E2A\u4FDD\u59C6\uFF0C\u5979\u4EEC\u4E00\u8D77\u8FD9\u4E9B\u4E8B\uFF0C\u8FD9\u65F6\u65E2\u6709\u5E76\u53D1\uFF0C\u4E5F\u6709\u5E76\u884C\uFF08\u8FD9\u65F6\u4F1A\u4EA7\u751F\u7ADE\u4E89\uFF0C\u4F8B\u5982\u9505\u53EA\u6709\u4E00\u53E3\uFF0C\u4E00 \u4E2A\u4EBA\u7528\u9505\u65F6\uFF0C\u53E6\u4E00\u4E2A\u4EBA\u5C31\u5F97\u7B49\u5F85\uFF09</li></ul><h3 id="_2-3-\u5E94\u7528" tabindex="-1"><a class="header-anchor" href="#_2-3-\u5E94\u7528" aria-hidden="true">#</a> 2.3 \u5E94\u7528</h3><h4 id="\u5E94\u7528\u4E4B\u5F02\u6B65\u8C03\u7528-\u6848\u4F8B1" tabindex="-1"><a class="header-anchor" href="#\u5E94\u7528\u4E4B\u5F02\u6B65\u8C03\u7528-\u6848\u4F8B1" aria-hidden="true">#</a> \u5E94\u7528\u4E4B\u5F02\u6B65\u8C03\u7528\uFF08\u6848\u4F8B1\uFF09</h4><p>\u4EE5\u8C03\u7528\u65B9\u7684\u89D2\u5EA6\u8BB2\uFF0C\u5982\u679C</p><ul><li>\u9700\u8981\u7B49\u5F85\u7ED3\u679C\u8FD4\u56DE\u624D\u80FD\u7EE7\u7EED\u8FD0\u884C\u7684\u8BDD\u5C31\u662F\u540C\u6B65</li><li>\u4E0D\u9700\u8981\u7B49\u5F85\u5C31\u662F\u5F02\u6B65</li></ul><h5 id="_1-\u8BBE\u8BA1" tabindex="-1"><a class="header-anchor" href="#_1-\u8BBE\u8BA1" aria-hidden="true">#</a> 1) \u8BBE\u8BA1</h5><p>\u591A\u7EBF\u7A0B\u53EF\u4EE5\u4F7F\u65B9\u6CD5\u7684\u6267\u884C\u53D8\u6210\u5F02\u6B65\u7684\uFF0C\u6BD4\u5982\u8BF4\u8BFB\u53D6\u78C1\u76D8\u6587\u4EF6\u65F6\uFF0C\u5047\u8BBE\u8BFB\u53D6\u64CD\u4F5C\u82B1\u8D39\u4E865\u79D2\uFF0C\u5982\u679C\u6CA1\u6709\u7EBF\u7A0B\u7684\u8C03\u5EA6\u673A\u5236\uFF0C\u8FD9\u4E48cpu\u53EA\u80FD\u7B495\u79D2\uFF0C\u5565\u90FD\u4E0D\u80FD\u505A\u3002</p><p>\u540C\u6B65\u6267\u884C</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span><span class="token punctuation">(</span>topic <span class="token operator">=</span> <span class="token string">&quot;c.Sync&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Sync</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">FileReader</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>MP4_FULL_PATH<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;do other things ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209121603842.png" alt="image-20220912160256669"></p><p>\u5F02\u6B65\u6267\u884C</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span><span class="token punctuation">(</span>topic <span class="token operator">=</span> <span class="token string">&quot;c.Async&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Async</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">FileReader</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>MP4_FULL_PATH<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;do other things ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209121603385.png" alt="image-20220912160228276"></p><h5 id="_2-\u7ED3\u8BBA" tabindex="-1"><a class="header-anchor" href="#_2-\u7ED3\u8BBA" aria-hidden="true">#</a> 2) \u7ED3\u8BBA</h5><ul><li>\u6BD4\u5982\u5728\u9879\u76EE\u4E2D\uFF0C\u89C6\u9891\u6587\u4EF6\u9700\u8981\u8F6C\u6362\u683C\u5F0F\u7B49\u64CD\u4F5C\u6BD4\u8F83\u8D39\u65F6\uFF0C\u8FD9\u65F6\u5F00\u4E00\u4E2A\u65B0\u7EBF\u7A0B\u5904\u7406\u89C6\u9891\u8F6C\u6362\uFF0C\u907F\u514D\u963B\u585E\u4E3B\u7EBF\u7A0B</li><li>tomcat \u7684\u5F02\u6B65 servlet \u4E5F\u662F\u7C7B\u4F3C\u7684\u76EE\u7684\uFF0C\u8BA9\u7528\u6237\u7EBF\u7A0B\u5904\u7406\u8017\u65F6\u8F83\u957F\u7684\u64CD\u4F5C\uFF0C\u907F\u514D\u963B\u585E tomcat \u7684\u5DE5\u4F5C\u7EBF\u7A0B</li><li>ui \u7A0B\u5E8F\u4E2D\uFF0C\u5F00\u7EBF\u7A0B\u8FDB\u884C\u5176\u4ED6\u64CD\u4F5C\uFF0C\u907F\u514D\u963B\u585E ui \u7EBF\u7A0B</li></ul><h4 id="\u5E94\u7528\u4E4B\u63D0\u9AD8\u6548\u7387-\u6848\u4F8B1" tabindex="-1"><a class="header-anchor" href="#\u5E94\u7528\u4E4B\u63D0\u9AD8\u6548\u7387-\u6848\u4F8B1" aria-hidden="true">#</a> \u5E94\u7528\u4E4B\u63D0\u9AD8\u6548\u7387\uFF08\u6848\u4F8B1\uFF09</h4><p>\u5145\u5206\u5229\u7528\u591A\u6838 cpu \u7684\u4F18\u52BF\uFF0C\u63D0\u9AD8\u8FD0\u884C\u6548\u7387\u3002\u60F3\u8C61\u4E0B\u9762\u7684\u573A\u666F\uFF0C\u6267\u884C 3 \u4E2A\u8BA1\u7B97\uFF0C\u6700\u540E\u5C06\u8BA1\u7B97\u7ED3\u679C\u6C47\u603B\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\u8BA1\u7B97 1 \u82B1\u8D39 10 ms

\u8BA1\u7B97 2 \u82B1\u8D39 11 ms

\u8BA1\u7B97 3 \u82B1\u8D39 9 ms

\u6C47\u603B\u9700\u8981 1 ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5982\u679C\u662F\u4E32\u884C\u6267\u884C\uFF0C\u90A3\u4E48\u603B\u5171\u82B1\u8D39\u7684\u65F6\u95F4\u662F 10 + 11 + 9 + 1 = 31ms</li><li>\u4F46\u5982\u679C\u662F\u56DB\u6838 cpu\uFF0C\u5404\u4E2A\u6838\u5FC3\u5206\u522B\u4F7F\u7528\u7EBF\u7A0B 1 \u6267\u884C\u8BA1\u7B97 1\uFF0C\u7EBF\u7A0B 2 \u6267\u884C\u8BA1\u7B97 2\uFF0C\u7EBF\u7A0B 3 \u6267\u884C\u8BA1\u7B97 3\uFF0C\u90A3\u4E48 3 \u4E2A\u7EBF\u7A0B\u662F\u5E76\u884C\u7684\uFF0C\u82B1\u8D39\u65F6\u95F4\u53EA\u53D6\u51B3\u4E8E\u6700\u957F\u7684\u90A3\u4E2A\u7EBF\u7A0B\u8FD0\u884C\u7684\u65F6\u95F4\uFF0C\u5373 11ms \u6700\u540E\u52A0\u4E0A\u6C47\u603B\u65F6\u95F4\u53EA\u4F1A\u82B1\u8D39 12ms</li></ul><blockquote><p>\u9700\u8981\u5728\u591A\u6838 cpu \u624D\u80FD\u63D0\u9AD8\u6548\u7387\uFF0C\u5355\u6838\u4ECD\u7136\u65F6\u662F\u8F6E\u6D41\u6267\u884C</p></blockquote><h5 id="_1-\u8BBE\u8BA1-1" tabindex="-1"><a class="header-anchor" href="#_1-\u8BBE\u8BA1-1" aria-hidden="true">#</a> 1) \u8BBE\u8BA1</h5><p>\u4EE3\u7801\u89C1\u3010\u5E94\u7528\u4E4B\u6548\u7387-\u6848\u4F8B1\u3011</p><h5 id="_2-\u7ED3\u8BBA-1" tabindex="-1"><a class="header-anchor" href="#_2-\u7ED3\u8BBA-1" aria-hidden="true">#</a> 2\uFF09\u7ED3\u8BBA</h5><ol><li><strong>\u5355\u6838 cpu \u4E0B\uFF0C\u591A\u7EBF\u7A0B\u4E0D\u80FD\u5B9E\u9645\u63D0\u9AD8\u7A0B\u5E8F\u8FD0\u884C\u6548\u7387</strong>\uFF0C\u53EA\u662F\u4E3A\u4E86\u80FD\u591F\u5728\u4E0D\u540C\u7684\u4EFB\u52A1\u4E4B\u95F4\u5207\u6362\uFF0C\u4E0D\u540C\u7EBF\u7A0B\u8F6E\u6D41\u4F7F\u7528cpu \uFF0C\u4E0D\u81F3\u4E8E\u4E00\u4E2A\u7EBF\u7A0B\u603B\u5360\u7528 cpu\uFF0C\u522B\u7684\u7EBF\u7A0B\u6CA1\u6CD5\u5E72\u6D3B</li><li>\u591A\u6838 cpu \u53EF\u4EE5\u5E76\u884C\u8DD1\u591A\u4E2A\u7EBF\u7A0B\uFF0C\u4F46\u80FD\u5426\u63D0\u9AD8\u7A0B\u5E8F\u8FD0\u884C\u6548\u7387\u8FD8\u662F\u8981\u5206\u60C5\u51B5\u7684</li></ol><ul><li>\u6709\u4E9B\u4EFB\u52A1\uFF0C\u7ECF\u8FC7\u7CBE\u5FC3\u8BBE\u8BA1\uFF0C\u5C06\u4EFB\u52A1\u62C6\u5206\uFF0C\u5E76\u884C\u6267\u884C\uFF0C\u5F53\u7136\u53EF\u4EE5\u63D0\u9AD8\u7A0B\u5E8F\u7684\u8FD0\u884C\u6548\u7387\u3002\u4F46\u4E0D\u662F\u6240\u6709\u8BA1\u7B97\u4EFB\u52A1\u90FD\u80FD\u62C6\u5206\uFF08\u53C2\u8003\u540E\u6587\u7684\u3010\u963F\u59C6\u8FBE\u5C14\u5B9A\u5F8B\u3011\uFF09</li><li>\u4E5F\u4E0D\u662F\u6240\u6709\u4EFB\u52A1\u90FD\u9700\u8981\u62C6\u5206\uFF0C\u4EFB\u52A1\u7684\u76EE\u7684\u5982\u679C\u4E0D\u540C\uFF0C\u8C08\u62C6\u5206\u548C\u6548\u7387\u6CA1\u5565\u610F\u4E49</li></ul><ol start="3"><li>IO \u64CD\u4F5C\u4E0D\u5360\u7528 cpu\uFF0C\u53EA\u662F\u6211\u4EEC\u4E00\u822C\u62F7\u8D1D\u6587\u4EF6\u4F7F\u7528\u7684\u662F\u3010\u963B\u585E IO\u3011\uFF0C\u8FD9\u65F6\u76F8\u5F53\u4E8E\u7EBF\u7A0B\u867D\u7136\u4E0D\u7528 cpu\uFF0C\u4F46\u9700\u8981\u4E00\u76F4\u7B49\u5F85 IO \u7ED3\u675F\uFF0C\u6CA1\u80FD\u5145\u5206\u5229\u7528\u7EBF\u7A0B\u3002\u6240\u4EE5\u624D\u6709\u540E\u9762\u7684\u3010\u975E\u963B\u585E IO\u3011\u548C\u3010\u5F02\u6B65 IO\u3011\u4F18\u5316</li></ol><h2 id="_3-java\u7EBF\u7A0B" tabindex="-1"><a class="header-anchor" href="#_3-java\u7EBF\u7A0B" aria-hidden="true">#</a> 3.Java\u7EBF\u7A0B</h2><h3 id="_3-1-\u521B\u5EFA\u548C\u8FD0\u884C\u7EBF\u7A0B" tabindex="-1"><a class="header-anchor" href="#_3-1-\u521B\u5EFA\u548C\u8FD0\u884C\u7EBF\u7A0B" aria-hidden="true">#</a> 3.1 \u521B\u5EFA\u548C\u8FD0\u884C\u7EBF\u7A0B</h3><h5 id="\u65B9\u6CD5\u4E00-\u76F4\u63A5\u4F7F\u7528-thread" tabindex="-1"><a class="header-anchor" href="#\u65B9\u6CD5\u4E00-\u76F4\u63A5\u4F7F\u7528-thread" aria-hidden="true">#</a> \u65B9\u6CD5\u4E00\uFF0C\u76F4\u63A5\u4F7F\u7528 Thread</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u6784\u9020\u65B9\u6CD5\u7684\u53C2\u6570\u662F\u7ED9\u7EBF\u7A0B\u6307\u5B9A\u540D\u5B57\uFF0C\u63A8\u8350\u7ED9\u7EBF\u7A0B\u8D77\u4E2A\u540D\u5B57</span>
<span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token comment">// run \u65B9\u6CD5\u5185\u5B9E\u73B0\u4E86\u8981\u6267\u884C\u7684\u4EFB\u52A1</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u65B9\u6CD5\u4E8C-\u4F7F\u7528-runnable-\u914D\u5408-thread" tabindex="-1"><a class="header-anchor" href="#\u65B9\u6CD5\u4E8C-\u4F7F\u7528-runnable-\u914D\u5408-thread" aria-hidden="true">#</a> \u65B9\u6CD5\u4E8C\uFF0C\u4F7F\u7528 Runnable \u914D\u5408 Thread</h5><p>\u628A\u3010\u7EBF\u7A0B\u3011\u548C\u3010\u4EFB\u52A1\u3011\uFF08\u8981\u6267\u884C\u7684\u4EE3\u7801\uFF09\u5206\u5F00\uFF0CThread \u4EE3\u8868\u7EBF\u7A0B\uFF0CRunnable \u53EF\u8FD0\u884C\u7684\u4EFB\u52A1\uFF08\u7EBF\u7A0B\u8981\u6267\u884C\u7684\u4EE3\u7801\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u521B\u5EFA\u4EFB\u52A1\u5BF9\u8C61</span>
<span class="token class-name">Runnable</span> task2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// \u53C2\u65701 \u662F\u4EFB\u52A1\u5BF9\u8C61; \u53C2\u65702 \u662F\u7EBF\u7A0B\u540D\u5B57\uFF0C\u63A8\u8350\u7ED9\u7EBF\u7A0B\u8D77\u4E2A\u540D\u5B57</span>
<span class="token class-name">Thread</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>task2<span class="token punctuation">,</span> <span class="token string">&quot;t2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5C0F\u7ED3</p><ul><li><p>\u65B9\u6CD51 \u662F\u628A\u7EBF\u7A0B\u548C\u4EFB\u52A1\u5408\u5E76\u5728\u4E86\u4E00\u8D77\uFF0C\u65B9\u6CD52 \u662F\u628A\u7EBF\u7A0B\u548C\u4EFB\u52A1\u5206\u5F00\u4E86</p></li><li><p>\u7528 Runnable \u66F4\u5BB9\u6613\u4E0E\u7EBF\u7A0B\u6C60\u7B49\u9AD8\u7EA7 API \u914D\u5408\uFF0C\u7528 Runnable \u8BA9\u4EFB\u52A1\u7C7B\u8131\u79BB\u4E86 Thread \u7EE7\u627F\u4F53\u7CFB\uFF0C\u66F4\u7075\u6D3B\u3002</p></li><li><p>\u901A\u8FC7\u67E5\u770B\u6E90\u7801\u53EF\u4EE5\u53D1\u73B0\uFF0C\u65B9\u6CD5\u4E8C\u5176\u5B9E\u5230\u5E95\u8FD8\u662F\u901A\u8FC7\u65B9\u6CD5\u4E00\u6267\u884C\u7684\uFF01</p></li></ul><h5 id="\u65B9\u6CD5\u4E09-futuretask-\u914D\u5408-thread" tabindex="-1"><a class="header-anchor" href="#\u65B9\u6CD5\u4E09-futuretask-\u914D\u5408-thread" aria-hidden="true">#</a> \u65B9\u6CD5\u4E09\uFF0CFutureTask \u914D\u5408 Thread</h5><p>\u7EE7\u627F\u5173\u7CFB</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209121629549.png" alt="image-20220912162907446"></p><p>FutureTask \u80FD\u591F\u63A5\u6536 Callable \u7C7B\u578B\u7684\u53C2\u6570\uFF0C\u7528\u6765\u5904\u7406\u6709\u8FD4\u56DE\u7ED3\u679C\u7684\u60C5\u51B5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span><span class="token punctuation">(</span>topic <span class="token operator">=</span> <span class="token string">&quot;c.Test01&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test01</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> task <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;running....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token number">100</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>task<span class="token punctuation">,</span> <span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u963B\u585E\uFF0C\u76F4\u5230 task \u4EFB\u52A1\u6267\u884C\u7ED3\u675F</span>
        <span class="token class-name">Integer</span> res <span class="token operator">=</span> task<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ED3\u679C\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209121636959.png" alt="image-20220912163643854"></p><p>Future\u5C31\u662F <strong>\u5BF9\u4E8E\u5177\u4F53\u7684Runnable\u6216\u8005Callable\u4EFB\u52A1\u7684\u6267\u884C\u7ED3\u679C\u8FDB\u884C\u53D6\u6D88\u3001\u67E5\u8BE2\u662F\u5426\u5B8C\u6210\u3001\u83B7\u53D6\u7ED3\u679C</strong>\u3002\u5FC5\u8981\u65F6\u53EF\u4EE5\u901A\u8FC7get\u65B9\u6CD5\u83B7\u53D6\u6267\u884C\u7ED3\u679C\uFF0C\u8BE5\u65B9\u6CD5\u4F1A <strong>\u963B\u585E</strong> \u76F4\u5230\u4EFB\u52A1\u8FD4\u56DE\u7ED3\u679C\uFF0C<strong>\u53EF\u7528\u4E8E\u8FDB\u7A0B\u95F4\u901A\u4FE1</strong>\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">boolean</span> <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> mayInterruptIfRunning<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">boolean</span> <span class="token function">isCancelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">boolean</span> <span class="token function">isDone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">V</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">,</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">;</span>
    <span class="token class-name">V</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">long</span> timeout<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">)</span>
        <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">,</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">,</span> <span class="token class-name">TimeoutException</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Future\u63D0\u4F9B\u4E86\u4E09\u79CD\u529F\u80FD\uFF1A</p><ol><li>\u5224\u65AD\u4EFB\u52A1\u662F\u5426\u5B8C\u6210\uFF1B</li><li>\u80FD\u591F\u4E2D\u65AD\u4EFB\u52A1\uFF1B</li><li>\u80FD\u591F\u83B7\u53D6\u4EFB\u52A1\u6267\u884C\u7ED3\u679C\u3002</li></ol>`,65),f={href:"https://mp.weixin.qq.com/s/RX5rVuGr6Ab0SmKigmZEag",target:"_blank",rel:"noopener noreferrer"},y=s("FutureTask\u662FFuture\u548CRunable\u7684\u5B9E\u73B0"),q=p(`<h5 id="\u67E5\u770B\u8FDB\u7A0B\u7684\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u67E5\u770B\u8FDB\u7A0B\u7684\u65B9\u6CD5" aria-hidden="true">#</a> \u67E5\u770B\u8FDB\u7A0B\u7684\u65B9\u6CD5</h5><h5 id="windows" tabindex="-1"><a class="header-anchor" href="#windows" aria-hidden="true">#</a> windows</h5><ul><li>\u4EFB\u52A1\u7BA1\u7406\u5668\u53EF\u4EE5\u67E5\u770B\u8FDB\u7A0B\u548C\u7EBF\u7A0B\u6570\uFF0C\u4E5F\u53EF\u4EE5\u7528\u6765\u6740\u6B7B\u8FDB\u7A0B</li><li>tasklist \u67E5\u770B\u8FDB\u7A0B</li><li>taskkill \u6740\u6B7B\u8FDB\u7A0B</li></ul><p>\u547D\u4EE4\u6F14\u793A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>\u5341\u4E00<span class="token operator">&gt;</span>tasklist <span class="token operator">|</span> findstr java
java.exe                     <span class="token number">38736</span> Console                    <span class="token number">1</span>     <span class="token number">91,260</span> K
java.exe                     <span class="token number">35344</span> Console                    <span class="token number">1</span>    <span class="token number">141,264</span> K
java.exe                     <span class="token number">40116</span> Console                    <span class="token number">1</span>    <span class="token number">154,660</span> K

C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>\u5341\u4E00<span class="token operator">&gt;</span>jps
<span class="token number">35344</span> Launcher
<span class="token number">36384</span>
<span class="token number">38736</span> RemoteMavenServer36
<span class="token number">40116</span> TestMultiThread
<span class="token number">40868</span> Jps

C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>\u5341\u4E00<span class="token operator">&gt;</span>taskkill /f /pid <span class="token number">40116</span>
SUCCESS: The process with PID <span class="token number">40116</span> has been terminated.

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="linux" tabindex="-1"><a class="header-anchor" href="#linux" aria-hidden="true">#</a> linux</h5><ul><li>ps -ef \u67E5\u770B\u6240\u6709\u8FDB\u7A0B</li><li>ps -fT -p \u67E5\u770B\u67D0\u4E2A\u8FDB\u7A0B\uFF08PID\uFF09\u7684\u6240\u6709\u7EBF\u7A0B</li><li>kill \u6740\u6B7B\u8FDB\u7A0B</li><li>top \u6309\u5927\u5199 H \u5207\u6362\u662F\u5426\u663E\u793A\u7EBF\u7A0B</li><li>top -H -p \u67E5\u770B\u67D0\u4E2A\u8FDB\u7A0B\uFF08PID\uFF09\u7684\u6240\u6709\u7EBF\u7A0B</li></ul><h5 id="java" tabindex="-1"><a class="header-anchor" href="#java" aria-hidden="true">#</a> Java</h5><ul><li>ps \u547D\u4EE4\u67E5\u770B\u6240\u6709 Java \u8FDB\u7A0B</li><li>jstack \u67E5\u770B\u67D0\u4E2A\u65F6\u523B Java \u8FDB\u7A0B\uFF08PID\uFF09\u7684\u6240\u6709\u7EBF\u7A0B\u72B6\u6001</li><li>jconsole \u6765\u67E5\u770B\u67D0\u4E2A Java \u8FDB\u7A0B\u4E2D\u7EBF\u7A0B\u7684\u8FD0\u884C\u60C5\u51B5\uFF08\u56FE\u5F62\u754C\u9762\uFF09</li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209121650186.png" alt="image-20220912165017969"></p><h3 id="_3-2-\u7EBF\u7A0B\u8FD0\u884C\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_3-2-\u7EBF\u7A0B\u8FD0\u884C\u539F\u7406" aria-hidden="true">#</a> 3.2 \u7EBF\u7A0B\u8FD0\u884C\u539F\u7406</h3><h4 id="\u865A\u62DF\u673A\u6808\u4E0E\u6808\u5E27" tabindex="-1"><a class="header-anchor" href="#\u865A\u62DF\u673A\u6808\u4E0E\u6808\u5E27" aria-hidden="true">#</a> \u865A\u62DF\u673A\u6808\u4E0E\u6808\u5E27</h4><p>\u62DF\u673A\u6808\u63CF\u8FF0\u7684\u662FJava\u65B9\u6CD5\u6267\u884C\u7684\u5185\u5B58\u6A21\u578B\uFF1A\u6BCF\u4E2A\u65B9\u6CD5\u88AB\u6267\u884C\u7684\u65F6\u5019\u90FD\u4F1A\u540C\u65F6\u521B\u5EFA\u4E00\u4E2A\u6808\u5E27(stack frame)\u7528\u4E8E\u5B58\u50A8 <strong>\u5C40\u90E8\u53D8\u91CF\u8868\u3001\u64CD\u4F5C\u6570\u6808\u3001\u52A8\u6001\u94FE\u63A5\u3001\u65B9\u6CD5\u51FA\u53E3</strong> \u7B49\u4FE1\u606F\uFF0C\u662F\u5C5E\u4E8E\u7EBF\u7A0B\u7684\u79C1\u6709\u7684\u3002<strong>\u5F53java\u4E2D\u4F7F\u7528\u591A\u7EBF\u7A0B\u65F6\uFF0C\u6BCF\u4E2A\u7EBF\u7A0B\u90FD\u4F1A\u7EF4\u62A4\u5B83\u81EA\u5DF1\u7684\u6808\u5E27</strong>\uFF01\u6BCF\u4E2A\u7EBF\u7A0B\u53EA\u80FD\u6709\u4E00\u4E2A\u6D3B\u52A8\u6808\u5E27\uFF0C\u5BF9\u5E94\u7740\u5F53\u524D\u6B63\u5728\u6267\u884C\u7684\u90A3\u4E2A\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestFrames</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">method1</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">method1</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> y <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> m <span class="token operator">=</span> <span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Object</span> <span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span> n <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6267\u884C\u5230 method2() \u65B9\u6CD5</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209121659590.png" alt="image-20220912165932236"></p><p>\u56DE\u5230 main() \u65B9\u6CD5</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209121700673.png" alt="image-20220912170033415"></p><h4 id="\u7EBF\u7A0B\u4E0A\u4E0B\u6587\u5207\u6362-thread-context-switch" tabindex="-1"><a class="header-anchor" href="#\u7EBF\u7A0B\u4E0A\u4E0B\u6587\u5207\u6362-thread-context-switch" aria-hidden="true">#</a> \u7EBF\u7A0B\u4E0A\u4E0B\u6587\u5207\u6362\uFF08Thread Context Switch\uFF09</h4><p>\u56E0\u4E3A\u4EE5\u4E0B\u4E00\u4E9B\u539F\u56E0\u5BFC\u81F4 cpu \u4E0D\u518D\u6267\u884C\u5F53\u524D\u7684\u7EBF\u7A0B\uFF0C\u8F6C\u800C\u6267\u884C\u53E6\u4E00\u4E2A\u7EBF\u7A0B\u7684\u4EE3\u7801</p><ul><li>\u7EBF\u7A0B\u7684 cpu \u65F6\u95F4\u7247\u7528\u5B8C(\u6BCF\u4E2A\u7EBF\u7A0B\u8F6E\u6D41\u6267\u884C\uFF0C\u770B\u524D\u9762\u5E76\u884C\u7684\u6982\u5FF5)</li><li>\u5783\u573E\u56DE\u6536\uFF08\u6240\u6709\u7EBF\u7A0B\u505C\u6B62\u6267\u884C\uFF09</li><li>\u6709\u66F4\u9AD8\u4F18\u5148\u7EA7\u7684\u7EBF\u7A0B\u9700\u8981\u8FD0\u884C</li><li>\u7EBF\u7A0B\u81EA\u5DF1\u8C03\u7528\u4E86 <code>sleep</code>\u3001<code>yield</code>\u3001<code>wait</code>\u3001<code>join</code>\u3001<code>park</code>\u3001<code>synchronized</code>\u3001<code>lock</code> \u7B49\u65B9\u6CD5</li></ul><p>\u5F53 Context Switch \u53D1\u751F\u65F6\uFF0C\u9700\u8981\u7531\u64CD\u4F5C\u7CFB\u7EDF\u4FDD\u5B58\u5F53\u524D\u7EBF\u7A0B\u7684\u72B6\u6001\uFF0C\u5E76\u6062\u590D\u53E6\u4E00\u4E2A\u7EBF\u7A0B\u7684\u72B6\u6001\uFF0CJava \u4E2D\u5BF9\u5E94\u7684\u6982\u5FF5\u5C31\u662F <strong>\u7A0B\u5E8F\u8BA1\u6570\u5668</strong>\uFF08Program Counter Register\uFF09\uFF0C\u5B83\u7684\u4F5C\u7528\u662F <strong>\u8BB0\u4F4F\u4E0B\u4E00\u6761 jvm \u6307\u4EE4\u7684\u6267\u884C\u5730\u5740\uFF0C\u662F\u7EBF\u7A0B\u79C1\u6709\u7684</strong></p><ul><li>\u72B6\u6001\u5305\u62EC\u7A0B\u5E8F\u8BA1\u6570\u5668\u3001\u865A\u62DF\u673A\u6808\u4E2D\u6BCF\u4E2A\u6808\u5E27\u7684\u4FE1\u606F\uFF0C\u5982\u5C40\u90E8\u53D8\u91CF\u3001\u64CD\u4F5C\u6570\u6808\u3001\u8FD4\u56DE\u5730\u5740\u7B49</li><li><strong>Context Switch \u9891\u7E41\u53D1\u751F\u4F1A\u5F71\u54CD\u6027\u80FD</strong></li></ul><h3 id="_3-3-thread\u7684\u5E38\u89C1\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_3-3-thread\u7684\u5E38\u89C1\u65B9\u6CD5" aria-hidden="true">#</a> 3.3 Thread\u7684\u5E38\u89C1\u65B9\u6CD5</h3><table><thead><tr><th>\u65B9\u6CD5\u540D</th><th>static</th><th>\u529F\u80FD\u8BF4\u660E</th><th>\u6CE8\u610F</th></tr></thead><tbody><tr><td>start()</td><td></td><td>\u542F\u52A8\u4E00\u4E2A\u65B0\u7EBF\u7A0B\uFF0C\u5728\u65B0\u7684\u7EBF\u7A0B\u8FD0\u884Crun\u65B9\u6CD5\u4E2D\u7684\u4EE3\u7801</td><td>start\u65B9\u6CD5\u53EA\u662F\u8BA9\u7EBF\u7A0B\u8FDB\u5165\u5C31\u7EEA\uFF0C\u91CC\u9762\u7684\u4EE3\u7801\u4E0D\u4E00\u5B9A\u7ACB\u523B\u8FD0\u884C\uFF08CUP\u7684\u65F6\u95F4\u7247\u8FD8\u6CA1\u6709\u5206\u7ED9\u4ED6\uFF09\u3002\u6BCF\u4E2A\u7EBF\u7A0B\u5BF9\u8C61\u7684start\u65B9\u6CD5\u53EA\u80FD\u8C03\u7528\u4E00\u6B21\uFF0C\u5982\u679C\u8C03\u7528\u591A\u6B21\u4F1A\u51FA\u73B0IllegalThreadStateException</td></tr><tr><td>run()</td><td></td><td>\u65B0\u7EBF\u7A0B\u542F\u7528\u540E\u4F1A\u8C03\u7528\u7684\u65B9\u6CD5</td><td>\u5982\u679C\u5728\u6784\u9020Thread\u5BF9\u8C61\u65F6\u4F20\u9012\u4E86Runnable\u53C2\u6570\uFF0C\u5219\u7EBF\u7A0B\u542F\u52A8\u540E\u8C03\u7528Runnable\u4E2D\u7684run\u65B9\u6CD5\uFF0C\u5426\u5219\u9ED8\u8BA4\u4E0D\u6267\u884C\u4EFB\u4F55\u64CD\u4F5C\u3002\u4F46\u53EF\u4EE5\u4F20 Thread \u7684\u5B50\u7C7B\u5BF9\u8C61\uFF0C\u6765\u8986\u76D6\u9ED8\u8BA4\u884C\u4E3A</td></tr><tr><td>join()</td><td></td><td>\u7B49\u5F85\u7EBF\u7A0B\u8FD0\u884C\u7ED3\u675F</td><td></td></tr><tr><td>join(long n)</td><td></td><td>\u7B49\u5F85\u7EBF\u7A0B\u8FD0\u884C\u7ED3\u675F\uFF0C\u6700\u591A\u7B49\u5F85n\u6BEB\u79D2</td><td></td></tr><tr><td>getId()</td><td></td><td>\u83B7\u53D6\u7EBF\u7A0B\u957F\u6574\u578B\u7684id</td><td>id\u552F\u4E00</td></tr><tr><td>getName()</td><td></td><td>\u83B7\u53D6\u7EBF\u7A0B\u540D</td><td></td></tr><tr><td>setName(String)</td><td></td><td>\u4FEE\u6539\u7EBF\u7A0B\u540D</td><td></td></tr><tr><td>getPriority()</td><td></td><td>\u83B7\u53D6\u7EBF\u7A0B\u4F18\u5148\u7EA7</td><td></td></tr><tr><td>getPriority(int)</td><td></td><td>\u4FEE\u6539\u7EBF\u7A0B\u4F18\u5148\u7EA7</td><td>java\u4E2D\u89C4\u5B9A\u4F18\u5148\u7EA7\u662F1~10\u7684\u6574\u6570\uFF0C\u6BD4\u8F83\u5927\u4F18\u5148\u7EA7\u80FD\u63D0\u9AD8\u8BE5\u7EBF\u7A0B\u88ABCPU\u8C03\u7528\u7684\u51E0\u7387</td></tr><tr><td>getState()</td><td></td><td>\u83B7\u53D6\u7EBF\u7A0B\u72B6\u6001</td><td>Java \u4E2D\u7EBF\u7A0B\u72B6\u6001\u662F\u7528 6 \u4E2A enum \u8868\u793A\uFF0C\u5206\u522B\u4E3A\uFF1A NEW, RUNNABLE, BLOCKED, WAITING, TIMED_WAITING, TERMINATED</td></tr><tr><td>isInterrupted()</td><td></td><td>\u5224\u65AD\u662F\u5426\u88AB\u6253\u65AD</td><td>\u4E0D\u4F1A\u6E05\u9664 &quot;<strong>\u6253\u65AD\u6807\u8BB0</strong>&quot;</td></tr><tr><td>isAlive()</td><td></td><td>\u7EBF\u7A0B\u662F\u5426\u5B58\u6D3B\uFF08\u8FD8\u6CA1\u6709\u8FD0\u884C\u5B8C \u6BD5\uFF09</td><td></td></tr><tr><td>interrupt()</td><td></td><td>\u6253\u65AD\u7EBF\u7A0B</td><td>\u5982\u679C\u88AB\u6253\u65AD\u7EBF\u7A0B\u6B63\u5728 sleep\uFF0Cwait\uFF0Cjoin \u4F1A\u5BFC\u81F4\u88AB\u6253\u65AD \u7684\u7EBF\u7A0B\u629B\u51FA InterruptedException\uFF0C\u5E76 <strong>\u6E05\u9664\u6253\u65AD\u6807\u8BB0</strong> \uFF1B\u5982\u679C\u6253\u65AD\u7684\u6B63\u5728\u8FD0\u884C\u7684\u7EBF\u7A0B\uFF0C\u5219\u4F1A <strong>\u8BBE\u7F6E\u6253\u65AD\u6807\u8BB0</strong> \uFF1Bpark \u7684\u7EBF\u7A0B\u88AB\u6253\u65AD\uFF0C\u4E5F\u4F1A <strong>\u8BBE\u7F6E\u6253\u65AD\u6807\u8BB0</strong></td></tr><tr><td>interrupted()</td><td>static</td><td>\u5224\u65AD\u5F53\u524D\u7EBF\u7A0B\u662F\u5426\u88AB\u6253\u65AD</td><td>\u4F1A\u6E05\u9664 \u6253\u65AD\u6807\u8BB0</td></tr><tr><td>currentThread()</td><td>static</td><td>\u83B7\u53D6\u5F53\u524D\u6B63\u5728\u6267\u884C\u7684\u7EBF\u7A0B</td><td></td></tr><tr><td>sleep(long n)</td><td>static</td><td>\u8BA9\u5F53\u524D\u6267\u884C\u7684\u7EBF\u7A0B\u4F11\u7720n\u6BEB\u79D2\uFF0C\u4F11\u7720\u65F6\u8BA9\u51FA cpu \u7684\u65F6\u95F4\u7247\u7ED9\u5176\u5B83\u7EBF\u7A0B</td><td></td></tr><tr><td>yield()</td><td>static</td><td>\u63D0\u793A\u7EBF\u7A0B\u8C03\u5EA6\u5668\uFF0C\u8BA9\u51FA\u5F53\u524D\u7EBF\u7A0B\u5BF9CPU\u7684\u4F7F\u7528</td><td>\u4E3B\u8981\u662F\u4E3A\u4E86\u6D4B\u8BD5\u548C\u8C03\u8BD5</td></tr></tbody></table><h4 id="_3-3-1-start-\u4E0E-run" tabindex="-1"><a class="header-anchor" href="#_3-3-1-start-\u4E0E-run" aria-hidden="true">#</a> 3.3.1 start \u4E0E run</h4><h5 id="\u8C03\u7528start-\u80FD\u4E0D\u80FD\u8FD0\u884C\u4EFB\u52A1\u8C03\u5EA6\u5668\u8BF4\u4E86\u7B97" tabindex="-1"><a class="header-anchor" href="#\u8C03\u7528start-\u80FD\u4E0D\u80FD\u8FD0\u884C\u4EFB\u52A1\u8C03\u5EA6\u5668\u8BF4\u4E86\u7B97" aria-hidden="true">#</a> \u8C03\u7528start\uFF08\u80FD\u4E0D\u80FD\u8FD0\u884C\u4EFB\u52A1\u8C03\u5EA6\u5668\u8BF4\u4E86\u7B97\uFF09</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token annotation punctuation">@Override</span>
          <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
              log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u6211\u662F\u4E00\u4E2A\u65B0\u5EFA\u7684\u7EBF\u7A0B\u6B63\u5728\u8FD0\u884C\u4E2D&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token class-name">FileReader</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;\u65B0\u5EFA\u7EBF\u7A0B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u4E3B\u7EBF\u7A0B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\uFF1A\u7A0B\u5E8F\u5728 t1 \u7EBF\u7A0B\u8FD0\u884C\uFF0C <code>run()</code>\u65B9\u6CD5\u91CC\u9762\u5185\u5BB9\u7684\u8C03\u7528\u662F\u5F02\u6B65\u7684</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">11</span>:59:40.711 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG com.concurrent.test.Test4 - \u4E3B\u7EBF\u7A0B
<span class="token number">11</span>:59:40.711 <span class="token punctuation">[</span>\u65B0\u5EFA\u7EBF\u7A0B<span class="token punctuation">]</span> DEBUG com.concurrent.test.Test4 - \u6211\u662F\u4E00\u4E2A\u65B0\u5EFA\u7684\u7EBF\u7A0B\u6B63\u5728\u8FD0\u884C\u4E2D
<span class="token number">11</span>:59:40.732 <span class="token punctuation">[</span>\u65B0\u5EFA\u7EBF\u7A0B<span class="token punctuation">]</span> DEBUG com.concurrent.test.FileReader - <span class="token builtin class-name">read</span> <span class="token punctuation">[</span>test<span class="token punctuation">]</span> start <span class="token punctuation">..</span>.
<span class="token number">11</span>:59:40.735 <span class="token punctuation">[</span>\u65B0\u5EFA\u7EBF\u7A0B<span class="token punctuation">]</span> DEBUG com.concurrent.test.FileReader - <span class="token builtin class-name">read</span> <span class="token punctuation">[</span>test<span class="token punctuation">]</span> end <span class="token punctuation">..</span>. cost: <span class="token number">3</span> ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u8C03\u7528run" tabindex="-1"><a class="header-anchor" href="#\u8C03\u7528run" aria-hidden="true">#</a> \u8C03\u7528run</h5><p>\u5C06\u4E0A\u9762\u4EE3\u7801\u7684<code>thread.start();</code>\u6539\u4E3A <code>thread.run();</code>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A\u7A0B\u5E8F\u4ECD\u5728 main \u7EBF\u7A0B\u8FD0\u884C\uFF0C <code>run()</code>\u65B9\u6CD5\u91CC\u9762\u5185\u5BB9\u7684\u8C03\u7528\u8FD8\u662F\u540C\u6B65\u7684</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">12</span>:03:46.711 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG com.concurrent.test.Test4 - \u6211\u662F\u4E00\u4E2A\u65B0\u5EFA\u7684\u7EBF\u7A0B\u6B63\u5728\u8FD0\u884C\u4E2D
<span class="token number">12</span>:03:46.727 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG com.concurrent.test.FileReader - <span class="token builtin class-name">read</span> <span class="token punctuation">[</span>test<span class="token punctuation">]</span> start <span class="token punctuation">..</span>.
<span class="token number">12</span>:03:46.729 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG com.concurrent.test.FileReader - <span class="token builtin class-name">read</span> <span class="token punctuation">[</span>test<span class="token punctuation">]</span> end <span class="token punctuation">..</span>. cost: <span class="token number">2</span> ms
<span class="token number">12</span>:03:46.730 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG com.concurrent.test.Test4 - \u4E3B\u7EBF\u7A0B
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u67E5\u770B\u7EBF\u7A0B\u72B6\u6001</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span><span class="token punctuation">(</span>topic <span class="token operator">=</span> <span class="token string">&quot;c.Test5&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test5</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;running...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>t1<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>t1<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209121732715.png" alt="image-20220912173200594"></p><p>\u591A\u6B21\u8C03\u7528 start() \u65B9\u6CD5 <strong>\u62A5\u9519</strong></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209121732067.png" alt="image-20220912173225972"></p><h5 id="\u5C0F\u7ED3" tabindex="-1"><a class="header-anchor" href="#\u5C0F\u7ED3" aria-hidden="true">#</a> \u5C0F\u7ED3</h5><p>\u76F4\u63A5\u8C03\u7528 <code>run()</code> \u662F\u5728\u4E3B\u7EBF\u7A0B\u4E2D\u6267\u884C\u4E86 <code>run()</code>\uFF0C\u6CA1\u6709\u542F\u52A8\u65B0\u7684\u7EBF\u7A0B \u4F7F\u7528 <code>start()</code> \u662F\u542F\u52A8\u65B0\u7684\u7EBF\u7A0B\uFF0C\u901A\u8FC7\u65B0\u7684\u7EBF\u7A0B\u95F4\u63A5\u6267\u884C <code>run()</code>\u65B9\u6CD5 \u4E2D\u7684\u4EE3\u7801</p><p>\u5F53\u8C03\u7528start\u65B9\u6CD5\u540E\uFF0C\u7EBF\u7A0B\u72B6\u6001\u4F1A\u7531\u201CNEW\u201D\u53D8\u4E3A\u201CRUNABLE\u201D\uFF0C\u6B64\u65F6\u518D\u6B21\u8C03\u7528start\u65B9\u6CD5\u4F1A\u62A5\u9519 <code>IllegalThreadStateException</code>\uFF08\u975E\u6CD5\u7684\u72B6\u6001\u5F02\u5E38\uFF09</p><h4 id="_3-3-2-sleep-\u4E0E-yield" tabindex="-1"><a class="header-anchor" href="#_3-3-2-sleep-\u4E0E-yield" aria-hidden="true">#</a> 3.3.2 sleep \u4E0E yield</h4><h5 id="sleep" tabindex="-1"><a class="header-anchor" href="#sleep" aria-hidden="true">#</a> sleep</h5><ol><li><p>\u8C03\u7528 sleep \u4F1A\u8BA9\u5F53\u524D\u7EBF\u7A0B\u4ECE <strong>Running</strong> \u8FDB\u5165 <strong>Timed Waiting \u72B6\u6001\uFF08\u963B\u585E\uFF09</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;t1 state: {}&quot;</span><span class="token punctuation">,</span> t1<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;t1 state: {}&quot;</span><span class="token punctuation">,</span> t1<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ED3\u679C\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209121736648.png" alt="image-20220912173602542"></p></li><li><p>\u5176\u5B83\u7EBF\u7A0B\u53EF\u4EE5\u4F7F\u7528 interrupt \u65B9\u6CD5\u6253\u65AD\u6B63\u5728\u7761\u7720\u7684\u7EBF\u7A0B\uFF0C\u90A3\u4E48\u88AB\u6253\u65AD\u7684\u7EBF\u7A0B\u8FD9\u65F6\u5C31\u4F1A\u629B\u51FA <code>InterruptedException </code>\u5F02\u5E38\u3010\u6CE8\u610F\uFF1A\u8FD9\u91CC\u6253\u65AD\u7684\u662F\u6B63\u5728\u4F11\u7720\u7684\u7EBF\u7A0B\uFF0C\u800C\u4E0D\u662F\u5176\u5B83\u72B6\u6001\u7684\u7EBF\u7A0B\u3011</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;enter sleep...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;wake up...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;interrupt...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ED3\u679C\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209121738987.png" alt="image-20220912173826881"></p></li><li><p>\u7761\u7720\u7ED3\u675F\u540E\u7684\u7EBF\u7A0B\u672A\u5FC5\u4F1A\u7ACB\u523B\u5F97\u5230\u6267\u884C(\u9700\u8981\u5206\u914D\u5230cpu\u65F6\u95F4\u7247)</p></li><li><p>\u5EFA\u8BAE\u7528 TimeUnit \u7684 <code>sleep()</code> \u4EE3\u66FF Thread \u7684 <code>sleep()</code>\u6765\u83B7\u5F97\u66F4\u597D\u7684\u53EF\u8BFB\u6027</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u7761\u77201s</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h5 id="yield" tabindex="-1"><a class="header-anchor" href="#yield" aria-hidden="true">#</a> yield</h5><ol><li>\u8C03\u7528 yield \u4F1A\u8BA9\u5F53\u524D\u7EBF\u7A0B\u4ECE <strong>Running</strong> \u8FDB\u5165 <strong>Runnable \u5C31\u7EEA\u72B6\u6001</strong>\uFF0C\u7136\u540E\u8C03\u5EA6\u6267\u884C\u5176\u5B83\u7EBF\u7A0B</li><li>\u5177\u4F53\u7684\u5B9E\u73B0\u4F9D\u8D56\u4E8E\u64CD\u4F5C\u7CFB\u7EDF\u7684\u4EFB\u52A1\u8C03\u5EA6\u5668(\u5C31\u662F\u53EF\u80FD\u6CA1\u6709\u5176\u5B83\u7684\u7EBF\u7A0B\u6B63\u5728\u6267\u884C\uFF0C\u867D\u7136\u8C03\u7528\u4E86yield\u65B9\u6CD5\uFF0C\u4F46\u662F\u4E5F\u6CA1\u6709\u7528)</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Runnable</span> task1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;----&gt;1 &quot;</span> <span class="token operator">+</span> count<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">Runnable</span> task2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token keyword">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;              ----&gt;2 &quot;</span> <span class="token operator">+</span> count<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>task1<span class="token punctuation">,</span> <span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Thread</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>task2<span class="token punctuation">,</span> <span class="token string">&quot;t2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// t1.setPriority(Thread.MIN_PRIORITY);</span>
    <span class="token comment">// t2.setPriority(Thread.MAX_PRIORITY);</span>
    t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ED3\u679C\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209121748638.png" alt="image-20220912174815476"></p><h5 id="\u5C0F\u7ED3-1" tabindex="-1"><a class="header-anchor" href="#\u5C0F\u7ED3-1" aria-hidden="true">#</a> \u5C0F\u7ED3</h5><ul><li><p>yield()\u4F1A\u8BA9\u5F53\u524D\u7EBF\u7A0B\u8BA9\u51FAcpu\uFF0C\u4F46\u662Fcpu\u53EF\u80FD\u4F1A\u518D\u5206\u914D\u65F6\u95F4\u7247\u7ED9\u8BE5\u7EBF\u7A0B</p></li><li><p>\u800Csleep()\u9700\u8981\u7B49\u8FC7\u4E86\u4F11\u7720\u65F6\u95F4\u4E4B\u540E\u624D\u6709\u53EF\u80FD\u88AB\u5206\u914Dcpu\u65F6\u95F4\u7247</p></li></ul><h5 id="\u5E94\u7528" tabindex="-1"><a class="header-anchor" href="#\u5E94\u7528" aria-hidden="true">#</a> \u5E94\u7528</h5><p>\u9650\u5236\u5BF9 CPU \u7684\u4F7F\u7528</p><p>\u5728\u6CA1\u6709\u5229\u7528 cpu \u6765\u8BA1\u7B97\u65F6\uFF0C\u4E0D\u8981\u8BA9 while(true) \u7A7A\u8F6C\u6D6A\u8D39 cpu\uFF0C\u8FD9\u65F6\u53EF\u4EE5\u4F7F\u7528 yield \u6216 sleep \u6765\u8BA9\u51FA cpu \u7684\u4F7F\u7528\u6743\u7ED9\u5176\u4ED6\u7A0B\u5E8F</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u53EF\u4EE5\u7528 wait \u6216 \u6761\u4EF6\u53D8\u91CF\u8FBE\u5230\u7C7B\u4F3C\u7684\u6548\u679C</li><li>\u4E0D\u540C\u7684\u662F\uFF0C\u540E\u4E24\u79CD\u90FD\u9700\u8981\u52A0\u9501\uFF0C\u5E76\u4E14\u9700\u8981\u76F8\u5E94\u7684\u5524\u9192\u64CD\u4F5C\uFF0C\u4E00\u822C\u9002\u7528\u4E8E\u8981\u8FDB\u884C\u540C\u6B65\u7684\u573A\u666F</li><li>sleep \u9002\u7528\u4E8E\u65E0\u9700\u9501\u540C\u6B65\u7684\u573A\u666F</li></ul><h4 id="_3-3-3-\u7EBF\u7A0B\u4F18\u5148\u7EA7" tabindex="-1"><a class="header-anchor" href="#_3-3-3-\u7EBF\u7A0B\u4F18\u5148\u7EA7" aria-hidden="true">#</a> 3.3.3 \u7EBF\u7A0B\u4F18\u5148\u7EA7</h4><p>\u7EBF\u7A0B\u4F18\u5148\u7EA7\u4F1A\u63D0\u793A\uFF08hint\uFF09\u8C03\u5EA6\u5668\u4F18\u5148\u8C03\u5EA6\u8BE5\u7EBF\u7A0B\uFF0C\u4F46\u5B83\u4EC5\u4EC5\u662F\u4E00\u4E2A\u63D0\u793A\uFF0C\u8C03\u5EA6\u5668\u53EF\u4EE5\u5FFD\u7565\u5B83 \u5982\u679C <strong>cpu \u6BD4\u8F83\u5FD9</strong>\uFF0C\u90A3\u4E48\u4F18\u5148\u7EA7\u9AD8\u7684\u7EBF\u7A0B\u4F1A\u83B7\u5F97\u66F4\u591A\u7684\u65F6\u95F4\u7247\uFF0C\u4F46 cpu \u95F2\u65F6\uFF0C\u4F18\u5148\u7EA7\u51E0\u4E4E\u6CA1\u4F5C\u7528</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Runnable</span> task1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;----&gt;1 &quot;</span> <span class="token operator">+</span> count<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">Runnable</span> task2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Thread.yield();</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;              ----&gt;2 &quot;</span> <span class="token operator">+</span> count<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>task1<span class="token punctuation">,</span> <span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Thread</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>task2<span class="token punctuation">,</span> <span class="token string">&quot;t2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t1<span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>MIN_PRIORITY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    t2<span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>MAX_PRIORITY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ED3\u679C\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209121747658.png" alt="image-20220912174717549"></p><h4 id="_3-3-4-join" tabindex="-1"><a class="header-anchor" href="#_3-3-4-join" aria-hidden="true">#</a> 3.3.4 join</h4><h5 id="\u4E3A\u4EC0\u4E48\u9700\u8981-join" tabindex="-1"><a class="header-anchor" href="#\u4E3A\u4EC0\u4E48\u9700\u8981-join" aria-hidden="true">#</a> \u4E3A\u4EC0\u4E48\u9700\u8981 join</h5><p>\u4E0B\u9762\u7684\u4EE3\u7801\u6267\u884C\uFF0C\u6253\u5370 r \u662F\u4EC0\u4E48\uFF1F</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
    <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F00\u59CB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F00\u59CB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u7ED3\u675F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        r <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u7ED3\u679C\u4E3A:{}&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u7ED3\u675F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5206\u6790</p><ul><li>\u56E0\u4E3A\u4E3B\u7EBF\u7A0B\u548C\u7EBF\u7A0B t1 \u662F\u5E76\u884C\u6267\u884C\u7684\uFF0Ct1 \u7EBF\u7A0B\u9700\u8981 1 \u79D2\u4E4B\u540E\u624D\u80FD\u7B97\u51FA r=10</li><li>\u800C\u4E3B\u7EBF\u7A0B\u4E00\u5F00\u59CB\u5C31\u8981\u6253\u5370 r \u7684\u7ED3\u679C\uFF0C\u6240\u4EE5\u53EA\u80FD\u6253\u5370\u51FA r=0</li></ul><p>\u89E3\u51B3\u65B9\u6CD5</p><ul><li>\u7528 sleep \u884C\u4E0D\u884C\uFF1F\u4E3A\u4EC0\u4E48\uFF1F</li><li>\u7528 join\uFF0C\u52A0\u5728 t1.start() \u4E4B\u540E\u5373\u53EF</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
    <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F00\u59CB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F00\u59CB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u7ED3\u675F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        r <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u7ED3\u679C\u4E3A:{}&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u7ED3\u675F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u5E94\u7528\u4E4B\u540C\u6B65-\u6848\u4F8B1" tabindex="-1"><a class="header-anchor" href="#\u5E94\u7528\u4E4B\u540C\u6B65-\u6848\u4F8B1" aria-hidden="true">#</a> \u5E94\u7528\u4E4B\u540C\u6B65\uFF08\u6848\u4F8B1\uFF09</h5><p>\u4EE5\u8C03\u7528\u65B9\u89D2\u5EA6\u6765\u8BB2\uFF0C\u5982\u679C</p><ul><li>\u9700\u8981\u7B49\u5F85\u7ED3\u679C\u8FD4\u56DE\uFF0C\u624D\u80FD\u7EE7\u7EED\u8FD0\u884C\u5C31\u662F\u540C\u6B65</li><li>\u4E0D\u9700\u8981\u7B49\u5F85\u7ED3\u679C\u8FD4\u56DE\uFF0C\u5C31\u80FD\u7EE7\u7EED\u8FD0\u884C\u5C31\u662F\u5F02\u6B65</li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209121603731.png" alt="1583483843354"></p><h5 id="\u7B49\u5F85\u591A\u4E2A\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#\u7B49\u5F85\u591A\u4E2A\u7ED3\u679C" aria-hidden="true">#</a> \u7B49\u5F85\u591A\u4E2A\u7ED3\u679C</h5><p>\u95EE\uFF0C\u4E0B\u9762\u4EE3\u7801 cost \u5927\u7EA6\u591A\u5C11\u79D2\uFF1F</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">int</span> r1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">int</span> r2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
    <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
    <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        r1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Thread</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        r2 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;r1: {} r2: {} cost: {}&quot;</span><span class="token punctuation">,</span> r1<span class="token punctuation">,</span> r2<span class="token punctuation">,</span> end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5206\u6790\u5982\u4E0B</p><ul><li>\u7B2C\u4E00\u4E2A join\uFF1A\u7B49\u5F85 t1 \u65F6, t2 \u5E76\u6CA1\u6709\u505C\u6B62, \u800C\u5728\u8FD0\u884C</li><li>\u7B2C\u4E8C\u4E2A join\uFF1A1s \u540E, \u6267\u884C\u5230\u6B64, t2 \u4E5F\u8FD0\u884C\u4E86 1s, \u56E0\u6B64\u4E5F\u53EA\u9700\u518D\u7B49\u5F85 1s</li></ul><p>\u5982\u679C\u98A0\u5012\u4E24\u4E2A join \u5462\uFF1F</p><p>\u6700\u7EC8\u90FD\u662F\u8F93\u51FA</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">20</span>:45:43.239 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c.TestJoin - r1: <span class="token number">10</span> r2: <span class="token number">20</span> cost: <span class="token number">2005</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209122109852.png" alt="image-20220912210923751"></p><h5 id="\u6709\u65F6\u6548\u7684-join" tabindex="-1"><a class="header-anchor" href="#\u6709\u65F6\u6548\u7684-join" aria-hidden="true">#</a> \u6709\u65F6\u6548\u7684 join</h5><p>\u7B49\u591F\u65F6\u95F4</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">int</span> r1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">int</span> r2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
    <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
    <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        r1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u7EBF\u7A0B\u6267\u884C\u7ED3\u675F\u4F1A\u5BFC\u81F4 join \u7ED3\u675F</span>
    t1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;r1: {} r2: {} cost: {}&quot;</span><span class="token punctuation">,</span> r1<span class="token punctuation">,</span> r2<span class="token punctuation">,</span> end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">20</span>:48:01.320 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c.TestJoin - r1: <span class="token number">10</span> r2: <span class="token number">0</span> cost: <span class="token number">1010</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6CA1\u7B49\u591F\u65F6\u95F4</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">int</span> r1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">int</span> r2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
    <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
    <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        r1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u7EBF\u7A0B\u6267\u884C\u7ED3\u675F\u4F1A\u5BFC\u81F4 join \u7ED3\u675F</span>
    t1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;r1: {} r2: {} cost: {}&quot;</span><span class="token punctuation">,</span> r1<span class="token punctuation">,</span> r2<span class="token punctuation">,</span> end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">20</span>:52:15.623 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c.TestJoin - r1: <span class="token number">0</span> r2: <span class="token number">0</span> cost: <span class="token number">1502</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_3-3-5-interrupt-\u65B9\u6CD5\u8BE6\u89E3" tabindex="-1"><a class="header-anchor" href="#_3-3-5-interrupt-\u65B9\u6CD5\u8BE6\u89E3" aria-hidden="true">#</a> 3.3.5 interrupt \u65B9\u6CD5\u8BE6\u89E3</h4><h5 id="\u6253\u65AD-sleep-wait-join-\u7684\u7EBF\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u6253\u65AD-sleep-wait-join-\u7684\u7EBF\u7A0B" aria-hidden="true">#</a> \u6253\u65AD sleep\uFF0Cwait\uFF0Cjoin \u7684\u7EBF\u7A0B</h5>`,94),T=s("\u5148\u4E86\u89E3\u4E00\u4E9Binterrupt()\u65B9\u6CD5\u7684\u76F8\u5173\u77E5\u8BC6\uFF1A"),x={href:"https://www.cnblogs.com/noteless/p/10372826.html##0",target:"_blank",rel:"noopener noreferrer"},j=s("\u535A\u5BA2\u5730\u5740"),_=p(`<p>sleep\uFF0Cwait\uFF0Cjoin \u7684\u7EBF\u7A0B\uFF0C\u8FD9\u51E0\u4E2A\u65B9\u6CD5\u90FD\u4F1A\u8BA9\u7EBF\u7A0B\u8FDB\u5165\u963B\u585E\u72B6\u6001\uFF0C\u4EE5 sleep \u4E3A\u4F8B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
    <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u7EBF\u7A0B\u4EFB\u52A1\u6267\u884C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// wait, join</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//e.printStackTrace();</span>
                log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u88AB\u6253\u65AD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;111\u662F\u5426\u88AB\u6253\u65AD\uFF1F{}&quot;</span><span class="token punctuation">,</span>t1<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t1<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;222\u662F\u5426\u88AB\u6253\u65AD\uFF1F{}&quot;</span><span class="token punctuation">,</span>t1<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;222\u662F\u5426\u88AB\u6253\u65AD\uFF1F{}&quot;</span><span class="token punctuation">,</span>t1<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u4E3B\u7EBF\u7A0B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A\uFF08\u6211\u4E0B\u9762\u5C06\u4E2D\u65AD\u548C\u6253\u65AD\u4E24\u4E2A\u8BCD\u6DF7\u7528\uFF09\u53EF\u4EE5\u770B\u5230\uFF0C\u6253\u65AD sleep \u7684\u7EBF\u7A0B, \u4F1A\u6E05\u7A7A\u4E2D\u65AD\u72B6\u6001\uFF0C\u521A\u88AB\u4E2D\u65AD\u5B8C\u4E4B\u540E<code>t1.isInterrupted()</code>\u7684\u503C\u4E3A<code>true</code>\uFF0C\u540E\u6765\u53D8\u4E3A<code>false</code>\uFF0C\u5373\u4E2D\u65AD\u72B6\u6001\u4F1A\u88AB\u6E05\u9664\u3002\u90A3\u4E48\u7EBF\u7A0B\u662F\u5426\u88AB\u4E2D\u65AD\u8FC7\u53EF\u4EE5\u901A\u8FC7\u5F02\u5E38\u6765\u5224\u65AD\u3002\u3010\u540C\u65F6\u8981\u6CE8\u610F\u5982\u679C\u6253\u65AD\u88AB<code>join()</code>\uFF0C<code>wait()</code> blocked\u7684\u7EBF\u7A0B\u4E5F\u662F\u4E00\u6837\u4F1A\u88AB\u6E05\u9664\uFF0C\u88AB\u6E05\u9664(interrupt status will be cleared)\u7684\u610F\u601D\u5373\u4E2D\u65AD\u72B6\u6001\u8BBE\u7F6E\u4E3A<code>false</code>\uFF0C\u88AB\u8BBE\u7F6E( interrupt status will be set)\u7684\u610F\u601D\u5C31\u662F\u4E2D\u65AD\u72B6\u6001\u8BBE\u7F6E\u4E3A<code>true</code>\u3011</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">17</span>:06:11.890 <span class="token punctuation">[</span>Thread-0<span class="token punctuation">]</span> DEBUG com.concurrent.test.Test7 - \u7EBF\u7A0B\u4EFB\u52A1\u6267\u884C
<span class="token number">17</span>:06:12.387 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG com.concurrent.test.Test7 - <span class="token number">111</span>\u662F\u5426\u88AB\u6253\u65AD\uFF1Ffalse
<span class="token number">17</span>:06:12.390 <span class="token punctuation">[</span>Thread-0<span class="token punctuation">]</span> DEBUG com.concurrent.test.Test7 - \u88AB\u6253\u65AD
<span class="token number">17</span>:06:12.390 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG com.concurrent.test.Test7 - <span class="token number">222</span>\u662F\u5426\u88AB\u6253\u65AD\uFF1Ftrue
<span class="token number">17</span>:06:12.890 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG com.concurrent.test.Test7 - <span class="token number">222</span>\u662F\u5426\u88AB\u6253\u65AD\uFF1Ffalse
<span class="token number">17</span>:06:12.890 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG com.concurrent.test.Test7 - \u4E3B\u7EBF\u7A0B
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u6253\u65AD\u6B63\u5E38\u8FD0\u884C\u7684\u7EBF\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u6253\u65AD\u6B63\u5E38\u8FD0\u884C\u7684\u7EBF\u7A0B" aria-hidden="true">#</a> \u6253\u65AD\u6B63\u5E38\u8FD0\u884C\u7684\u7EBF\u7A0B</h5><p>\u6253\u65AD\u6B63\u5E38\u8FD0\u884C\u7684\u7EBF\u7A0B, \u7EBF\u7A0B\u5E76\u4E0D\u4F1A\u6682\u505C\uFF0C\u53EA\u662F\u8C03\u7528\u65B9\u6CD5<code>Thread.currentThread().isInterrupted();</code>\u7684\u8FD4\u56DE\u503C\u4E3Atrue\uFF0C\u53EF\u4EE5\u5224\u65AD<code>Thread.currentThread().isInterrupted();</code>\u7684\u503C\u6765\u624B\u52A8\u505C\u6B62\u7EBF\u7A0B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
    <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">boolean</span> interrupted <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>interrupted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u88AB\u6253\u65AD\u4E86, \u9000\u51FA\u5FAA\u73AF&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;interrupt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t1<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">20</span>:57:37.964 <span class="token punctuation">[</span>t2<span class="token punctuation">]</span> c.TestInterrupt - \u6253\u65AD\u72B6\u6001: <span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="\u7EC8\u6B62\u6A21\u5F0F\u4E4B\u4E24\u9636\u6BB5\u7EC8\u6B62\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u7EC8\u6B62\u6A21\u5F0F\u4E4B\u4E24\u9636\u6BB5\u7EC8\u6B62\u6A21\u5F0F" aria-hidden="true">#</a> \u7EC8\u6B62\u6A21\u5F0F\u4E4B\u4E24\u9636\u6BB5\u7EC8\u6B62\u6A21\u5F0F</h5><p>Two Phase Termination\uFF0C\u5C31\u662F\u8003\u8651\u5728\u4E00\u4E2A\u7EBF\u7A0BT1\u4E2D\u5982\u4F55\u4F18\u96C5\u5730\u7EC8\u6B62\u53E6\u4E00\u4E2A\u7EBF\u7A0BT2\uFF1F\u8FD9\u91CC\u7684\u4F18\u96C5\u6307\u7684\u662F\u7ED9T2\u4E00\u4E2A\u6599\u7406\u540E\u4E8B\u7684\u673A\u4F1A\uFF08\u5982\u91CA\u653E\u9501\uFF09\u3002</p><p>\u5982\u4E0B\u6240\u793A\uFF1A\u90A3\u4E48\u7EBF\u7A0B\u7684<code>isInterrupted()</code>\u65B9\u6CD5\u53EF\u4EE5\u53D6\u5F97\u7EBF\u7A0B\u7684\u6253\u65AD\u6807\u8BB0\uFF0C\u5982\u679C\u7EBF\u7A0B\u5728\u7761\u7720<code>sleep</code>\u671F\u95F4\u88AB\u6253\u65AD\uFF0C\u6253\u65AD\u6807\u8BB0\u662F\u4E0D\u4F1A\u53D8\u7684\uFF0C\u4E3Afalse\uFF0C\u4F46\u662F<code>sleep</code>\u671F\u95F4\u88AB\u6253\u65AD\u4F1A\u629B\u51FA\u5F02\u5E38\uFF0C\u6211\u4EEC\u636E\u6B64\u624B\u52A8\u8BBE\u7F6E\u6253\u65AD\u6807\u8BB0\u4E3A<code>true</code>\uFF1B\u5982\u679C\u662F\u5728\u7A0B\u5E8F\u6B63\u5E38\u8FD0\u884C\u671F\u95F4\u88AB\u6253\u65AD\u7684\uFF0C\u90A3\u4E48\u6253\u65AD\u6807\u8BB0\u5C31\u88AB\u81EA\u52A8\u8BBE\u7F6E\u4E3A<code>true</code>\u3002\u5904\u7406\u597D\u8FD9\u4E24\u79CD\u60C5\u51B5\u90A3\u6211\u4EEC\u5C31\u53EF\u4EE5\u653E\u5FC3\u5730\u6765\u6599\u7406\u540E\u4E8B\u5566\uFF01</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209121603774.png" alt="1583496991915"></p><p>\u4EE3\u7801\u5B9E\u73B0\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span><span class="token punctuation">(</span>topic <span class="token operator">=</span> <span class="token string">&quot;c.Test02&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test02</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">TwoParseTermination</span> twoParseTermination <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TwoParseTermination</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        twoParseTermination<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        twoParseTermination<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Slf4j</span><span class="token punctuation">(</span>topic <span class="token operator">=</span> <span class="token string">&quot;c.TwoPhaseTermination&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">TwoParseTermination</span> <span class="token punctuation">{</span>
    <span class="token class-name">Thread</span> minitor<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        minitor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 1.\u83B7\u53D6\u5F53\u524D\u7EBF\u7A0B</span>
                <span class="token class-name">Thread</span> current <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 2.\u5224\u65AD\u662F\u5426\u88AB\u6253\u65AD</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u6599\u7406\u540E\u4E8B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u6267\u884C\u76D1\u63A7\u529F\u80FD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 3.\u91CD\u65B0\u8BBE\u7F6E\u6253\u65AD\u6807\u8BB0</span>
                    current<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        minitor<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        minitor<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ED3\u679C\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209122126972.png" alt="image-20220912212624915"></p><h5 id="\u6253\u65AD-park-\u7EBF\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u6253\u65AD-park-\u7EBF\u7A0B" aria-hidden="true">#</a> \u6253\u65AD park \u7EBF\u7A0B</h5><p>\u6253\u65AD park \u7EBF\u7A0B, \u4E0D\u4F1A\u6E05\u7A7A\u6253\u65AD\u72B6\u6001</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
    <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;park...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">LockSupport</span><span class="token punctuation">.</span><span class="token function">park</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;unpark...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u6253\u65AD\u72B6\u6001\uFF1A{}&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t1<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">21</span>:11:52.795 <span class="token punctuation">[</span>t1<span class="token punctuation">]</span> c.TestInterrupt - park<span class="token punctuation">..</span>.
<span class="token number">21</span>:11:53.295 <span class="token punctuation">[</span>t1<span class="token punctuation">]</span> c.TestInterrupt - unpark<span class="token punctuation">..</span>.
<span class="token number">21</span>:11:53.295 <span class="token punctuation">[</span>t1<span class="token punctuation">]</span> c.TestInterrupt - \u6253\u65AD\u72B6\u6001\uFF1Atrue

Process finished with <span class="token builtin class-name">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u6253\u65AD\u6807\u8BB0\u5DF2\u7ECF\u662F true, \u5219 park \u4F1A\u5931\u6548</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;park...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">LockSupport</span><span class="token punctuation">.</span><span class="token function">park</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;unpark...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u6253\u65AD\u72B6\u6001\uFF1A{}&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">LockSupport</span><span class="token punctuation">.</span><span class="token function">park</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;unpark...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">21</span>:35:26.736 c.Test14 <span class="token punctuation">[</span>t1<span class="token punctuation">]</span> - park<span class="token punctuation">..</span>.
<span class="token number">21</span>:35:27.740 c.Test14 <span class="token punctuation">[</span>t1<span class="token punctuation">]</span> - unpark<span class="token punctuation">..</span>.
<span class="token number">21</span>:35:27.740 c.Test14 <span class="token punctuation">[</span>t1<span class="token punctuation">]</span> - \u6253\u65AD\u72B6\u6001\uFF1Atrue
<span class="token number">21</span>:35:27.742 c.Test14 <span class="token punctuation">[</span>t1<span class="token punctuation">]</span> - unpark<span class="token punctuation">..</span>.

Process finished with <span class="token builtin class-name">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u53EF\u4EE5\u4F7F\u7528 <code>Thread.interrupted()</code> \u6E05\u9664\u6253\u65AD\u72B6\u6001</p><p>Thread.interrupted()\uFF1A\u8FD4\u56DE\u5F53\u524D\u6253\u65AD\u6807\u8BB0\uFF0C\u5E76\u8BBE\u7F6E\u6253\u65AD\u6807\u8BB0\u4E3A false</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
    <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
    <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;park...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">LockSupport</span><span class="token punctuation">.</span><span class="token function">park</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;unpark...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u6253\u65AD\u72B6\u6001\uFF1A{}&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">interrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">LockSupport</span><span class="token punctuation">.</span><span class="token function">park</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u6B64\u65F6\u6253\u65AD\u6807\u8BB0\u4E3A false</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;unpark...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t1<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ED3\u679C\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209131540324.png" alt="image-20220913154056258"></p><h4 id="_3-3-6-\u4E0D\u63A8\u8350\u7684\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_3-3-6-\u4E0D\u63A8\u8350\u7684\u65B9\u6CD5" aria-hidden="true">#</a> 3.3.6 \u4E0D\u63A8\u8350\u7684\u65B9\u6CD5</h4><p>\u8FD8\u6709\u4E00\u4E9B\u4E0D\u63A8\u8350\u4F7F\u7528\u7684\u65B9\u6CD5\uFF0C\u8FD9\u4E9B\u65B9\u6CD5\u5DF2\u8FC7\u65F6\uFF0C\u5BB9\u6613\u7834\u574F\u540C\u6B65\u4EE3\u7801\u5757\uFF0C\u9020\u6210\u7EBF\u7A0B\u6B7B\u9501</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209122139981.png" alt="image-20220912213917891"></p><h4 id="_3-3-7-sleep-yiled-wait-join-\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#_3-3-7-sleep-yiled-wait-join-\u5BF9\u6BD4" aria-hidden="true">#</a> 3.3.7 sleep\uFF0Cyiled\uFF0Cwait\uFF0Cjoin \u5BF9\u6BD4</h4>`,33),I=s("\u5173\u4E8Ejoin\u7684\u539F\u7406\u548C\u8FD9\u51E0\u4E2A\u65B9\u6CD5\u7684\u5BF9\u6BD4\uFF1A"),S={href:"https://blog.csdn.net/dataiyangu/article/details/104956755",target:"_blank",rel:"noopener noreferrer"},E=s("\u770B\u8FD9\u91CC"),P=p(`<blockquote><p>\u8865\u5145\uFF1A</p><ol><li>sleep\uFF0Cjoin\uFF0Cyield\uFF0Cinterrupted\u662FThread\u7C7B\u4E2D\u7684\u65B9\u6CD5</li><li>wait/notify\u662Fobject\u4E2D\u7684\u65B9\u6CD5</li></ol><p>sleep \u4E0D\u91CA\u653E\u9501\u3001\u91CA\u653Ecpu</p><p>join \u91CA\u653E\u9501\u3001\u62A2\u5360cpu</p><p>yiled \u4E0D\u91CA\u653E\u9501\u3001\u91CA\u653Ecpu</p><p>wait \u91CA\u653E\u9501\u3001\u91CA\u653Ecpu</p></blockquote><h3 id="_3-4-\u5B88\u62A4\u7EBF\u7A0B" tabindex="-1"><a class="header-anchor" href="#_3-4-\u5B88\u62A4\u7EBF\u7A0B" aria-hidden="true">#</a> 3.4 \u5B88\u62A4\u7EBF\u7A0B</h3><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Cjava\u8FDB\u7A0B\u9700\u8981\u7B49\u5F85\u6240\u6709\u7684\u7EBF\u7A0B\u7ED3\u675F\u540E\u624D\u4F1A\u505C\u6B62\uFF0C\u4F46\u662F\u6709\u4E00\u79CD\u7279\u6B8A\u7684\u7EBF\u7A0B\uFF0C\u53EB\u505A\u5B88\u62A4\u7EBF\u7A0B\uFF0C<strong>\u5728\u5176\u4ED6\u7EBF\u7A0B\u5168\u90E8\u7ED3\u675F\u7684\u65F6\u5019\u5373\u4F7F\u5B88\u62A4\u7EBF\u7A0B\u8FD8\u672A\u7ED3\u675F\u4EE3\u7801\u672A\u6267\u884C\u5B8Cjava\u8FDB\u7A0B\u4E5F\u4F1A\u505C\u6B62</strong>\u3002\u666E\u901A\u7EBF\u7A0Bt1\u53EF\u4EE5\u8C03\u7528 <code>t1.setDeamon(true);</code> \u65B9\u6CD5\u53D8\u6210\u5B88\u62A4\u7EBF\u7A0B</p><blockquote><p>\u5783\u573E\u56DE\u6536\u5668\u7EBF\u7A0B\u5C31\u662F\u4E00\u79CD\u5B88\u62A4\u7EBF\u7A0B</p><p>Tomcat \u4E2D\u7684 Acceptor \u548C Poller \u7EBF\u7A0B\u90FD\u662F\u5B88\u62A4\u7EBF\u7A0B\uFF0C\u6240\u4EE5 Tomcat \u63A5\u6536\u5230 shutdown \u547D\u4EE4\u540E\uFF0C\u4E0D\u4F1A\u7B49 \u5F85\u5B83\u4EEC\u5904\u7406\u5B8C\u5F53\u524D\u8BF7\u6C42</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span><span class="token punctuation">(</span>topic <span class="token operator">=</span> <span class="token string">&quot;c.Test15&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test15</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u7ED3\u675F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">setDaemon</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u7ED3\u675F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ED3\u679C\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209122203403.png" alt="image-20220912215822508"></p><h3 id="_3-5-\u7EBF\u7A0B\u72B6\u6001\u4E4B\u4E94\u79CD\u72B6\u6001" tabindex="-1"><a class="header-anchor" href="#_3-5-\u7EBF\u7A0B\u72B6\u6001\u4E4B\u4E94\u79CD\u72B6\u6001" aria-hidden="true">#</a> 3.5 \u7EBF\u7A0B\u72B6\u6001\u4E4B\u4E94\u79CD\u72B6\u6001</h3><p>\u4E94\u79CD\u72B6\u6001\u7684\u5212\u5206\u4E3B\u8981\u662F\u4ECE\u64CD\u4F5C\u7CFB\u7EDF\u7684\u5C42\u9762\u8FDB\u884C\u5212\u5206\u7684</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209122204844.png" alt="image-20220912220447747"></p><ol><li>\u521D\u59CB\u72B6\u6001\uFF0C\u4EC5\u4EC5\u662F\u5728\u8BED\u8A00\u5C42\u9762\u4E0A\u521B\u5EFA\u4E86\u7EBF\u7A0B\u5BF9\u8C61\uFF0C\u5373<code>Thead thread = new Thead();</code>\uFF0C\u8FD8\u672A\u4E0E\u64CD\u4F5C\u7CFB\u7EDF\u7EBF\u7A0B\u5173\u8054</li><li>\u53EF\u8FD0\u884C\u72B6\u6001\uFF0C\u4E5F\u79F0\u5C31\u7EEA\u72B6\u6001\uFF0C\u6307\u8BE5\u7EBF\u7A0B\u5DF2\u7ECF\u88AB\u521B\u5EFA\uFF0C\u4E0E\u64CD\u4F5C\u7CFB\u7EDF\u76F8\u5173\u8054\uFF0C\u7B49\u5F85cpu\u7ED9\u5B83\u5206\u914D\u65F6\u95F4\u7247\u5C31\u53EF\u8FD0\u884C</li><li>\u8FD0\u884C\u72B6\u6001\uFF0C\u6307\u7EBF\u7A0B\u83B7\u53D6\u4E86CPU\u65F6\u95F4\u7247\uFF0C\u6B63\u5728\u8FD0\u884C <ol><li>\u5F53CPU\u65F6\u95F4\u7247\u7528\u5B8C\uFF0C\u7EBF\u7A0B\u4F1A\u8F6C\u6362\u81F3\u3010\u53EF\u8FD0\u884C\u72B6\u6001\u3011\uFF0C\u7B49\u5F85 CPU\u518D\u6B21\u5206\u914D\u65F6\u95F4\u7247\uFF0C\u4F1A\u5BFC\u81F4\u6211\u4EEC\u524D\u9762\u8BB2\u5230\u7684\u4E0A\u4E0B\u6587\u5207\u6362</li></ol></li><li>\u963B\u585E\u72B6\u6001 <ol><li>\u5982\u679C\u8C03\u7528\u4E86\u963B\u585EAPI\uFF0C\u5982BIO\u8BFB\u5199\u6587\u4EF6\uFF0C\u90A3\u4E48\u7EBF\u7A0B\u5B9E\u9645\u4E0A\u4E0D\u4F1A\u7528\u5230CPU\uFF0C\u4E0D\u4F1A\u5206\u914DCPU\u65F6\u95F4\u7247\uFF0C\u4F1A\u5BFC\u81F4\u4E0A\u4E0B\u6587\u5207\u6362\uFF0C\u8FDB\u5165\u3010\u963B\u585E\u72B6\u6001\u3011</li><li>\u7B49\u5F85BIO\u64CD\u4F5C\u5B8C\u6BD5\uFF0C\u4F1A\u7531\u64CD\u4F5C\u7CFB\u7EDF\u5524\u9192\u963B\u585E\u7684\u7EBF\u7A0B\uFF0C\u8F6C\u6362\u81F3\u3010\u53EF\u8FD0\u884C\u72B6\u6001\u3011</li><li>\u4E0E\u3010\u53EF\u8FD0\u884C\u72B6\u6001\u3011\u7684\u533A\u522B\u662F\uFF0C\u53EA\u8981\u64CD\u4F5C\u7CFB\u7EDF\u4E00\u76F4\u4E0D\u5524\u9192\u7EBF\u7A0B\uFF0C\u8C03\u5EA6\u5668\u5C31\u4E00\u76F4\u4E0D\u4F1A\u8003\u8651\u8C03\u5EA6\u5B83\u4EEC\uFF0CCPU\u5C31\u4E00\u76F4\u4E0D\u4F1A\u5206\u914D\u65F6\u95F4\u7247</li></ol></li><li>\u7EC8\u6B62\u72B6\u6001\uFF0C\u8868\u793A\u7EBF\u7A0B\u5DF2\u7ECF\u6267\u884C\u5B8C\u6BD5\uFF0C\u751F\u547D\u5468\u671F\u5DF2\u7ECF\u7ED3\u675F\uFF0C\u4E0D\u4F1A\u518D\u8F6C\u6362\u4E3A\u5176\u5B83\u72B6\u6001</li></ol><h3 id="_3-6-\u7EBF\u7A0B\u72B6\u6001\u4E4B\u516D\u79CD\u72B6\u6001" tabindex="-1"><a class="header-anchor" href="#_3-6-\u7EBF\u7A0B\u72B6\u6001\u4E4B\u516D\u79CD\u72B6\u6001" aria-hidden="true">#</a> 3.6 \u7EBF\u7A0B\u72B6\u6001\u4E4B\u516D\u79CD\u72B6\u6001</h3>`,12),R=s("\u8FD9\u662F\u4ECE Java API \u5C42\u9762\u6765\u63CF\u8FF0\u7684\uFF0C\u6211\u4EEC\u4E3B\u8981\u7814\u7A76\u7684\u5C31\u662F\u8FD9\u79CD\u3002\u72B6\u6001\u8F6C\u6362\u8BE6\u60C5\u56FE\uFF1A"),U={href:"https://www.jianshu.com/p/ec94ed32895f",target:"_blank",rel:"noopener noreferrer"},O=s("\u5730\u5740"),C=s(" \u6839\u636E Thread.State \u679A\u4E3E\uFF0C\u5206\u4E3A\u516D\u79CD\u72B6\u6001"),B=p(`<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209122205067.png" alt="image-20220912220459967"></p><ol><li>NEW \u8DDF\u4E94\u79CD\u72B6\u6001\u91CC\u7684\u521D\u59CB\u72B6\u6001\u662F\u4E00\u4E2A\u610F\u601D</li><li>RUNNABLE \u662F\u5F53\u8C03\u7528\u4E86 <code>start()</code> \u65B9\u6CD5\u4E4B\u540E\u7684\u72B6\u6001\uFF0C\u6CE8\u610F\uFF0CJava API \u5C42\u9762\u7684 <code>RUNNABLE</code> \u72B6\u6001\u6DB5\u76D6\u4E86\u64CD\u4F5C\u7CFB\u7EDF\u5C42\u9762\u7684\u3010\u53EF\u8FD0\u884C\u72B6\u6001\u3011\u3001\u3010\u8FD0\u884C\u72B6\u6001\u3011\u548C\u3010IO\u963B\u585E\u72B6\u6001\u3011\uFF08\u7531\u4E8E BIO \u5BFC\u81F4\u7684\u7EBF\u7A0B\u963B\u585E\uFF0C\u5728 Java \u91CC\u65E0\u6CD5\u533A\u5206\uFF0C\u4ECD\u7136\u8BA4\u4E3A\u662F\u53EF\u8FD0\u884C\uFF09</li><li><code>BLOCKED</code> \uFF0C <code>WAITING</code> \uFF0C <code>TIMED_WAITING</code> \u90FD\u662F Java API \u5C42\u9762\u5BF9\u3010\u963B\u585E\u72B6\u6001\u3011\u7684\u7EC6\u5206\uFF0C\u540E\u9762\u4F1A\u5728\u72B6\u6001\u8F6C\u6362\u4E00\u8282 \u8BE6\u8FF0</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span><span class="token punctuation">(</span>topic <span class="token operator">=</span> <span class="token string">&quot;c.TestState&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestState</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;running...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// new</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token class-name">Thread</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token string">&quot;t2&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// runnable</span>

                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Thread</span> t3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token string">&quot;t3&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;running...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// terminated</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        t3<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Thread</span> t4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token string">&quot;t4&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">TestState</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// timed_waiting</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        t4<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Thread</span> t5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token string">&quot;t5&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    t2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// waiting</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        t5<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Thread</span> t6 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token string">&quot;t6&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">TestState</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// blocked</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        t6<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;t1 state {}&quot;</span><span class="token punctuation">,</span> t1<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;t2 state {}&quot;</span><span class="token punctuation">,</span> t2<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;t3 state {}&quot;</span><span class="token punctuation">,</span> t3<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;t4 state {}&quot;</span><span class="token punctuation">,</span> t4<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;t5 state {}&quot;</span><span class="token punctuation">,</span> t5<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;t6 state {}&quot;</span><span class="token punctuation">,</span> t6<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ED3\u679C\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209122210180.png" alt="image-20220912221006122"></p><h3 id="_3-7-\u4E60\u9898" tabindex="-1"><a class="header-anchor" href="#_3-7-\u4E60\u9898" aria-hidden="true">#</a> 3.7 \u4E60\u9898</h3><p>\u5E94\u7528\u4E4B\u7EDF\u7B79\uFF08\u70E7\u6C34\u6CE1\u8336\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span><span class="token punctuation">(</span>topic <span class="token operator">=</span> <span class="token string">&quot;c.Test16&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test16</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u6D17\u6C34\u58F6&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u70E7\u5F00\u6C34&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;\u8001\u738B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Thread</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u6D17\u8336\u58F6&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u6D17\u8336\u676F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u62FF\u8336\u53F6&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                t1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u6CE1\u8336&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;\u5C0F\u738B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-8-\u672C\u7AE0\u5C0F\u7ED3" tabindex="-1"><a class="header-anchor" href="#_3-8-\u672C\u7AE0\u5C0F\u7ED3" aria-hidden="true">#</a> 3.8 \u672C\u7AE0\u5C0F\u7ED3</h3><p>\u672C\u7AE0\u7684\u91CD\u70B9\u5728\u4E8E\u638C\u63E1</p><ul><li><p>\u7EBF\u7A0B\u521B\u5EFA(3\u79CD\u65B9\u5F0F Thread\u5B50\u5B9E\u73B0\u7C7B\u3001Runnable\u63A5\u53E3\u3001FutureTask\u63A5\u53E3)</p></li><li><p>\u7EBF\u7A0B\u91CD\u8981 api\uFF0C\u5982 start(\u5F00\u542F\u4E00\u4E2A\u7EBF\u7A0B)\uFF0Crun(\u7EBF\u7A0B\u6267\u884C\u7684\u65B9\u6CD5)\uFF0Csleep(\u4F11\u7720\uFF0C\u8BA9\u51FAcpu)\uFF0Cjoin(\u7B49\u5F85\u7EBF\u7A0B\u7EC8\u6B62)\uFF0Cinterrupt(\u6253\u65AD\u7EBF\u7A0B) \u7B49</p></li><li><p>\u7EBF\u7A0B\u72B6\u6001(\u5BF9\u64CD\u4F5C\u7CFB\u7EDF\u6765\u8BF4\u67095\u79CD\uFF0Cjava\u89C4\u5B9A\u67096\u79CD)</p><ul><li>new</li><li>runnable</li><li>timed_waiting</li><li>waiting</li><li>blocked</li><li>terminated</li></ul></li><li><p>\u5E94\u7528\u65B9\u9762</p><ul><li>\u5F02\u6B65\u8C03\u7528\uFF1A\u4E3B\u7EBF\u7A0B\u6267\u884C\u671F\u95F4\uFF0C\u5176\u5B83\u7EBF\u7A0B\u5F02\u6B65\u6267\u884C\u8017\u65F6\u64CD\u4F5C</li><li>\u63D0\u9AD8\u6548\u7387\uFF1A\u5E76\u884C\u8BA1\u7B97\uFF0C\u7F29\u77ED\u8FD0\u7B97\u65F6\u95F4</li><li>\u540C\u6B65\u7B49\u5F85\uFF1Ajoin</li><li>\u7EDF\u7B79\u89C4\u5212\uFF1A\u5408\u7406\u4F7F\u7528\u7EBF\u7A0B\uFF0C\u5F97\u5230\u6700\u4F18\u6548\u679C</li></ul></li><li><p>\u539F\u7406\u65B9\u9762</p><ul><li>\u7EBF\u7A0B\u8FD0\u884C\u6D41\u7A0B\uFF1A\u6808(\u7EBF\u7A0B\u79C1\u6709)\u3001\u6808\u5E27(\u8BB0\u5F55\u8FD4\u56DE\u5730\u5740\u3001\u5C40\u90E8\u53D8\u91CF\u7B49)\u3001\u4E0A\u4E0B\u6587\u5207\u6362(\u4FDD\u5B58\u73B0\u573A\uFF0C\u5207\u6362\u73B0\u573A)\u3001\u7A0B\u5E8F\u8BA1\u6570\u5668(\u8BB0\u5F55\u4E0B\u4E00\u6761jvm\u6307\u4EE4\u7684\u5730\u5740)</li><li>Thread \u4E24\u79CD\u521B\u5EFA\u65B9\u5F0F \u7684\u6E90\u7801 <ul><li>\u5982\u679C\u662F Thread \u5B50\u5B9E\u73B0\u7C7B\uFF0C\u5219\u8C03\u7528\u5B50\u7C7B\u7684 run() \u65B9\u6CD5</li><li>\u5982\u679C\u662F Runnable \u63A5\u53E3\uFF0C\u5219 Runnable \u63A5\u53E3\u5B50\u5B9E\u73B0\u7C7B\u8D4B\u503C\u7ED9 Thread \u4E2D\u7684 target \u5C5E\u6027\uFF0C\u8C03\u7528 target.run() \u65B9\u6CD5</li></ul></li></ul></li><li><p>\u6A21\u5F0F\u65B9\u9762</p><ul><li>\u7EC8\u6B62\u6A21\u5F0F\u4E4B\u4E24\u9636\u6BB5\u7EC8\u6B62</li></ul></li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/202209121603774.png" alt="1583496991915"></p>`,12);function D(N,A){const a=i("ExternalLinkIcon");return c(),o("div",null,[l,k,n("blockquote",null,[n("p",null,[r,n("a",d,[v,t(a)]),m]),n("p",null,[b,n("a",h,[g,t(a)])])]),w,n("p",null,[n("a",f,[y,t(a)])]),q,n("p",null,[T,n("a",x,[j,t(a)])]),_,n("p",null,[I,n("a",S,[E,t(a)])]),P,n("p",null,[R,n("a",U,[O,t(a)]),C]),B])}var J=e(u,[["render",D],["__file","juc01.html.vue"]]);export{J as default};
