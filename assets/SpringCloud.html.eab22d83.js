import{_ as e}from"./plugin-vue_export-helper.21dcd24c.js";import{o,c,a as n,b as t,e as a,d as p,r as l}from"./app.6a2d513d.js";const i={},u=n("h1",{id:"springcloud",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#springcloud","aria-hidden":"true"},"#"),a(" SpringCloud")],-1),r=n("h2",{id:"\u9605\u8BFB\u987B\u77E5",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u9605\u8BFB\u987B\u77E5","aria-hidden":"true"},"#"),a(" \u9605\u8BFB\u987B\u77E5")],-1),k=n("p",null,"\u672C\u7B14\u8BB0\u53EA\u662F\u6574\u5408\u4E86\u4E0B\u65B9\u7684\u7B14\u8BB0",-1),d={href:"https://www.yuque.com/mrlinxi/pxvr4g/wcwd39",target:"_blank",rel:"noopener noreferrer"},g=a("https://www.yuque.com/mrlinxi/pxvr4g/wcwd39"),m=p('<h2 id="springcloud\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#springcloud\u7B80\u4ECB" aria-hidden="true">#</a> SpringCloud\u7B80\u4ECB</h2><p>SpringCloud\u662F\u5206\u5E03\u5F0F\u5FAE\u670D\u52A1\u4EA4\u5ABE\u7684\u4E00\u7AD9\u5F0F\u89E3\u51B3\u65B9\u6848\uFF0C\u662F\u591A\u79CD\u5FAE\u670D\u52A1\u4EA4\u5ABE\u843D\u5730\u6280\u672F\u7684\u96C6\u5408\u4F53\uFF0C\u4FD7\u79F0\u5FAE\u670D\u52A1\u5168\u5BB6\u6876</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1630893118207-d3e06fd8-718a-473c-86fc-ea03c3ee8730.png" alt="img"></p><p>\u5404\u6A21\u5757\u5E38\u7528\u7684\u6280\u672F\u652F\u6491\uFF1A</p><ul><li>\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0\uFF1Aeureka</li><li>\u670D\u52A1\u8D1F\u8F7D\u4E0E\u8C03\u7528\uFF1Aribbon\u3001feign</li><li>\u670D\u52A1\u7194\u65AD\u964D\u7EA7\uFF1Ahystrix</li><li>\u670D\u52A1\u7F51\u5173\uFF1Azuul</li><li>\u670D\u52A1\u5206\u5E03\u5F0F\u914D\u7F6E\uFF1ASpring Cloud Config</li><li>\u670D\u52A1\u5F00\u53D1\uFF1ASpringBoot</li></ul><h3 id="\u7248\u672C\u9009\u62E9" tabindex="-1"><a class="header-anchor" href="#\u7248\u672C\u9009\u62E9" aria-hidden="true">#</a> \u7248\u672C\u9009\u62E9</h3>',6),v={href:"https://spring.io/projects/spring-cloud##overview",target:"_blank",rel:"noopener noreferrer"},b=a("https://spring.io/projects/spring-cloud##overview"),h=p('<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1630895228589-68165471-f705-4da5-9f8f-e4dec780a2a4.png" alt="img"></p><p>\u4E25\u683C\u6309\u7167\u5B98\u7F51\u8981\u6C42\u9009\u62E9\u5BF9\u5E94\u7684SpringBoot\u548CSpringCloud\u7248\u672C</p><h3 id="cloud\u5404\u7EC4\u4EF6\u7684\u505C\u66F4-\u5347\u7EA7-\u66FF\u6362" tabindex="-1"><a class="header-anchor" href="#cloud\u5404\u7EC4\u4EF6\u7684\u505C\u66F4-\u5347\u7EA7-\u66FF\u6362" aria-hidden="true">#</a> Cloud\u5404\u7EC4\u4EF6\u7684\u505C\u66F4/\u5347\u7EA7/\u66FF\u6362</h3><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1630904566825-e71eedb9-4525-49f9-b324-95b047ca5440.png" alt="img"></p><h2 id="_0-\u8BA2\u5355\u652F\u4ED8\u6A21\u5757" tabindex="-1"><a class="header-anchor" href="#_0-\u8BA2\u5355\u652F\u4ED8\u6A21\u5757" aria-hidden="true">#</a> <strong>0.\u8BA2\u5355\u652F\u4ED8\u6A21\u5757</strong></h2><h3 id="\u7236\u5DE5\u7A0Bspringboot\u3001springcloud\u3001springcloudalibaba\u7248\u672C\u5BF9\u5E94\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#\u7236\u5DE5\u7A0Bspringboot\u3001springcloud\u3001springcloudalibaba\u7248\u672C\u5BF9\u5E94\u5173\u7CFB" aria-hidden="true">#</a> \u7236\u5DE5\u7A0BSpringBoot\u3001SpringCloud\u3001SpringCloudAlibaba\u7248\u672C\u5BF9\u5E94\u5173\u7CFB</h3>',6),y={href:"https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E",target:"_blank",rel:"noopener noreferrer"},f=a("\uFF08aligithub\uFF09spring-cloud-alibaba\u4E0Espringcloud\u3001springboot\u5BF9\u5E94\u5173\u7CFB"),_={href:"https://spring.io/projects/spring-cloud",target:"_blank",rel:"noopener noreferrer"},x=a("https://spring.io/projects/spring-cloud"),q={href:"https://developer.aliyun.com/mvn/guide",target:"_blank",rel:"noopener noreferrer"},w=a("\u963F\u91CCmaven\u4ED3\u5E93\u6700\u65B0\u955C\u50CF\uFF08\u5B98\u7F51\uFF09"),I=p(`<h4 id="\u590D\u4E60" tabindex="-1"><a class="header-anchor" href="#\u590D\u4E60" aria-hidden="true">#</a> \u590D\u4E60</h4><h5 id="maven\u4E2D\u7684dependencymanagement\u548Cdependencies" tabindex="-1"><a class="header-anchor" href="#maven\u4E2D\u7684dependencymanagement\u548Cdependencies" aria-hidden="true">#</a> Maven\u4E2D\u7684DependencyManagement\u548CDependencies</h5><p>dependencyManagement</p><p><strong>Maven \u4F7F\u7528dependencyManagement \u5143\u7D20\u6765\u63D0\u4F9B\u4E86\u4E00\u79CD\u7BA1\u7406\u4F9D\u8D56\u7248\u672C\u53F7\u7684\u65B9\u5F0F\u3002</strong></p><p>\u901A\u5E38\u4F1A\u5728\u4E00\u4E2A\u7EC4\u7EC7\u6216\u8005\u9879\u76EE\u7684\u6700\u9876\u5C42\u7684\u7236POM \u4E2D\u770BdependencyManagement \u5143\u7D20\u3002</p><p>\u4F7F\u7528pom.xml \u4E2D\u7684dependencyManagement \u5143\u7D20\u80FD\u8BA9\u6240\u6709\u5728\u5B50\u9879\u76EE\u4E2D\u5F15\u7528\u4E00\u4E2A\u4F9D\u8D56\u800C\u4E0D\u7528\u663E\u5F0F\u7684\u5217\u51FA\u7248\u672C\u53F7\u3002</p><p>Maven \u4F1A\u6CBF\u7740\u7236\u5B50\u5C42\u6B21\u5411\u4E0A\u8D70\uFF0C\u76F4\u5230\u627E\u5230\u4E00\u4E2A\u62E5\u6709dependencyManagement \u5143\u7D20\u7684\u9879\u76EE\uFF0C\u7136\u540E\u5B83\u5C31\u4F1A\u4F7F\u7528\u8FD9\u4E2A</p><p>dependencyManagement \u5143\u7D20\u4E2D\u6307\u5B9A\u7684\u7248\u672C\u53F7\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1630913101789-b69efca5-6490-4ac9-80fc-1d90304aefe9.png" alt="img"></p><p>\u8FD9\u6837\u505A\u7684\u597D\u5904\u5C31\u662F\uFF1A\u5982\u679C\u6709\u591A\u4E2A\u5B50\u9879\u76EE\u90FD\u5F15\u7528\u540C\u4E00\u6837\u4F9D\u8D56\uFF0C\u5219\u53EF\u4EE5\u907F\u514D\u5728\u6BCF\u4E2A\u4F7F\u7528\u7684\u5B50\u9879\u76EE\u91CC\u90FD\u58F0\u660E\u4E00\u4E2A\u7248\u672C\u53F7\uFF0C\u8FD9\u6837\u5F53\u60F3\u5347\u7EA7\u6216\u5207\u6362\u5230\u53E6\u4E00\u4E2A\u7248\u672C\u65F6\uFF0C\u53EA\u9700\u8981\u5728\u9876\u5C42\u7236\u5BB9\u5668\u91CC\u66F4\u65B0\uFF0C\u800C\u4E0D\u9700\u8981\u4E00\u4E2A\u4E00\u4E2A\u5B50\u9879\u76EE\u7684\u4FEE\u6539 \uFF1B\u53E6\u5916\u5982\u679C\u67D0\u4E2A\u5B50\u9879\u76EE\u9700\u8981\u53E6\u5916\u7684\u4E00\u4E2A\u7248\u672C\uFF0C\u53EA\u9700\u8981\u58F0\u660Eversion\u5C31\u53EF\u3002</p><ul><li>dependencyManagement\u91CC\u53EA\u662F\u58F0\u660E\u4F9D\u8D56\uFF0C<strong>\u5E76\u4E0D\u5B9E\u73B0\u5F15\u5165</strong>\uFF0C\u56E0\u6B64\u5B50\u9879\u76EE\u9700\u8981\u663E\u793A\u7684\u58F0\u660E\u9700\u8981\u7528\u7684\u4F9D\u8D56\u3002</li><li>\u5982\u679C\u4E0D\u5728\u5B50\u9879\u76EE\u4E2D\u58F0\u660E\u4F9D\u8D56\uFF0C\u662F\u4E0D\u4F1A\u4ECE\u7236\u9879\u76EE\u4E2D\u7EE7\u627F\u4E0B\u6765\u7684\uFF1B\u53EA\u6709\u5728\u5B50\u9879\u76EE\u4E2D\u5199\u4E86\u8BE5\u4F9D\u8D56\u9879\uFF0C\u5E76\u4E14\u6CA1\u6709\u6307\u5B9A\u5177\u4F53\u7248\u672C\uFF0C\u624D\u4F1A\u4ECE\u7236\u9879\u76EE\u4E2D\u7EE7\u627F\u8BE5\u9879\uFF0C\u5E76\u4E14version\u548Cscope\u90FD\u8BFB\u53D6\u81EA\u7236pom;</li><li>\u5982\u679C\u5B50\u9879\u76EE\u4E2D\u6307\u5B9A\u4E86\u7248\u672C\u53F7\uFF0C\u90A3\u4E48\u4F1A\u4F7F\u7528\u5B50\u9879\u76EE\u4E2D\u6307\u5B9A\u7684jar\u7248\u672C\u3002</li></ul><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- \u7EDF\u4E00\u7BA1\u7406jar\u5305\u7248\u672C --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>junit.version</span><span class="token punctuation">&gt;</span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>junit.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>log4j.version</span><span class="token punctuation">&gt;</span></span>1.2.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>log4j.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lombok.version</span><span class="token punctuation">&gt;</span></span>1.16.18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lombok.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mysql.version</span><span class="token punctuation">&gt;</span></span>8.0.22<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mysql.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>druid.version</span><span class="token punctuation">&gt;</span></span>1.1.16<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>druid.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mybatis.spring.boot.version</span><span class="token punctuation">&gt;</span></span>1.3.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mybatis.spring.boot.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- \u5B50\u6A21\u5757\u7EE7\u627F\u4E4B\u540E\uFF0C\u63D0\u4F9B\u4F5C\u7528\uFF1A\u9501\u5B9A\u7248\u672C+\u5B50modlue\u4E0D\u7528\u5199groupId\u548Cversion  --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--spring boot 2.2.2--&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--spring cloud Hoxton.SR1--&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>Hoxton.SR1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--spring cloud alibaba 2.1.0.RELEASE--&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-alibaba-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.0.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${mysql.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${druid.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${mybatis.spring.boot.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${junit.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${log4j.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${lombok.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fork</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fork</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>addResources</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>addResources</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5FAE\u670D\u52A1\u6A21\u5757\u7684\u6784\u5EFA-\u670D\u52A1\u7AEF8001" tabindex="-1"><a class="header-anchor" href="#\u5FAE\u670D\u52A1\u6A21\u5757\u7684\u6784\u5EFA-\u670D\u52A1\u7AEF8001" aria-hidden="true">#</a> \u5FAE\u670D\u52A1\u6A21\u5757\u7684\u6784\u5EFA--\u670D\u52A1\u7AEF8001</h3><h4 id="\u5EFAmodule" tabindex="-1"><a class="header-anchor" href="#\u5EFAmodule" aria-hidden="true">#</a> \u5EFAmodule</h4><h4 id="\u6539pom" tabindex="-1"><a class="header-anchor" href="#\u6539pom" aria-hidden="true">#</a> \u6539pom</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-provider-payment8001<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--mysql-connector-java--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--jdbc--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5199yml" tabindex="-1"><a class="header-anchor" href="#\u5199yml" aria-hidden="true">#</a> \u5199YML</h4><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8001</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>payment<span class="token punctuation">-</span>service
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource            <span class="token comment">## \u5F53\u524D\u6570\u636E\u6E90\u64CD\u4F5C\u7C7B\u578B</span>
  <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/dbCloud<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=utf-8&amp;useSSL=false</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">10086</span>

<span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
  <span class="token key atrule">mapperLocations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>mapper/<span class="token important">*.xml</span>
  <span class="token key atrule">type-aliases-package</span><span class="token punctuation">:</span> com.atguigu.springcloud.entities    <span class="token comment">## \u6240\u6709Entity\u522B\u540D\u7C7B\u6240\u5728\u5305</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u4E3B\u542F\u52A8" tabindex="-1"><a class="header-anchor" href="#\u4E3B\u542F\u52A8" aria-hidden="true">#</a> \u4E3B\u542F\u52A8</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentMain8001</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">PaymentMain8001</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u4E1A\u52A1\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u4E1A\u52A1\u7C7B" aria-hidden="true">#</a> \u4E1A\u52A1\u7C7B</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1630931977874-279e4fde-a629-43f0-84af-874d6120f20c.png" alt="img"></p><h4 id="\u9047\u5230\u7684\u5751" tabindex="-1"><a class="header-anchor" href="#\u9047\u5230\u7684\u5751" aria-hidden="true">#</a> \u9047\u5230\u7684\u5751</h4><p>\u9879\u76EE\uFF0C\u6A21\u5757jdk,pom\u7684jdk\u7248\u672C\u4E00\u5B9A\u8981\u4E00\u81F4\uFF01</p>`,24),S={href:"https://zhuanlan.zhihu.com/p/348660719",target:"_blank",rel:"noopener noreferrer"},C=a("\u89E3\u51B3jdk\u65E0\u6548\u7248\u6216\u9700\u8981\u53D1\u884C\u7248"),j={href:"https://blog.csdn.net/weixin_41846320/article/details/109176831?utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-2.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-2.control",target:"_blank",rel:"noopener noreferrer"},P=a("\u4FEE\u6539\u65B0\u5EFA\u9879\u76EE\u9ED8\u8BA4\u7684maven"),E=p(`<p>\u6CE8\u610F\u4E8B\u9879\uFF1A\u89C6\u9891\u91CC\u9762\u4F7F\u7528\u7684jdk8\uFF0C\u5404\u4E2A\u7EC4\u4EF6\u7684\u7248\u672C\u53F7\u4E00\u4E00\u5BF9\u5E94\uFF0C\u5982\u679C\u4E0D\u76F8\u540C\u4F1A\u5BFC\u81F4mybatis\u62A5\u8B66\u544AWARNING: An illegal reflective access operation has occurred\uFF0C\u867D\u7136\u4E0D\u5F71\u54CD\u4F7F\u7528</p><h4 id="\u5F00\u542F\u70ED\u90E8\u7F72" tabindex="-1"><a class="header-anchor" href="#\u5F00\u542F\u70ED\u90E8\u7F72" aria-hidden="true">#</a> \u5F00\u542F\u70ED\u90E8\u7F72</h4><p>\u5BFC\u5165\u4F9D\u8D56\u3001\u5728\u7236\u5DE5\u7A0B\u7684pom\u4E2D\u52A0\u5165\u63D2\u4EF6</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>finalName</span><span class="token punctuation">&gt;</span></span>\u4F60\u81EA\u5DF1\u7684\u5DE5\u7A0B\u540D\u5B57<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>finalName</span><span class="token punctuation">&gt;</span></span> //\u52A0\u4E0D\u52A0\u65E0\u6240\u8C13
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fork</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fork</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>addResources</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>addResources</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F00\u542F\u81EA\u52A8build</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1630935703404-7a028834-2143-4980-bce1-14928e0a8cdf.png" alt="img"></p><p>\u6309\u4E24\u4E0Bshift\uFF0C\u641C\u7D22registry\uFF0C\u52FE\u9009\u5982\u4E0B\u4E24\u9879</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1630935767528-25b18fb3-241b-4e81-a922-73a7cd362e00.png" alt="img"></p><h3 id="\u5FAE\u670D\u52A1\u6A21\u5757\u7684\u6784\u5EFA-\u5BA2\u6237\u7AEF80" tabindex="-1"><a class="header-anchor" href="#\u5FAE\u670D\u52A1\u6A21\u5757\u7684\u6784\u5EFA-\u5BA2\u6237\u7AEF80" aria-hidden="true">#</a> \u5FAE\u670D\u52A1\u6A21\u5757\u7684\u6784\u5EFA--\u5BA2\u6237\u7AEF80</h3><p>\u4E3A\u4EC0\u4E48\u5BA2\u6237\u7AEF\u662F80\u7AEF\u53E3\uFF1F</p>`,10),R=a("\u56E0\u4E3A\u6D4F\u89C8\u7F51\u9875\u670D\u52A1\u9ED8\u8BA4\u7684\u7AEF\u53E3\u53F7\u5C31\u662F80\uFF0C\u56E0\u6B64\u8FD8\u9700\u8981\u8F93\u5165\u7F51\u5740\u5373\u53EF\uFF0C80\u53EF\u4EE5\u7701\u7565\u3002e.g. "),M={href:"http://www.baidu.com:80",target:"_blank",rel:"noopener noreferrer"},T=a("www.baidu.com:80"),H=p(`<h4 id="resttemplate" tabindex="-1"><a class="header-anchor" href="#resttemplate" aria-hidden="true">#</a> RestTemplate</h4><p>\u56E0\u4E3A\u5BA2\u6237\u7AEF\u8DDF\u670D\u52A1\u7AEF\u662F\u4E24\u4E2A\u4E0D\u540C\u7684\u6A21\u5757\uFF0C\u6240\u4EE5\u6211\u4EEC\u9700\u8981\u901A\u8FC7http\u8BBF\u95EE\u652F\u4ED8\u6A21\u5757\u3002</p><p>RestTemplate\u63D0\u4F9B\u4E86\u591A\u79CD\u4FBF\u6377\u8BBF\u95EE\u8FDC\u7A0BHttp\u670D\u52A1\u7684\u65B9\u6CD5\uFF0C\u662F\u4E00\u79CD\u7B80\u5355\u4FBF\u6377\u7684\u8BBF\u95EErestful\u670D\u52A1\u6A21\u677F\u7C7B\uFF0C\u662FSpring\u63D0\u4F9B\u7684\u7528\u4E8E\u8BBF\u95EERest\u670D\u52A1\u7684\u5BA2\u6237\u7AEF\u6A21\u677F\u5DE5\u5177\u96C6\u3002</p><p>\u4F7F\u7528restTemplate\u8BBF\u95EErestful\u63A5\u53E3\u975E\u5E38\u7684\u7B80\u5355\u7C97\u66B4\u65E0\u8111\u3002</p><p>(url, requestMap, ResponseBean.class)\u8FD9\u4E09\u4E2A\u53C2\u6570\u5206\u522B\u4EE3\u8868</p><p>REST\u8BF7\u6C42\u5730\u5740\u3001\u8BF7\u6C42\u53C2\u6570\u3001HTTP\u54CD\u5E94\u8F6C\u6362\u88AB\u8F6C\u6362\u6210\u7684\u5BF9\u8C61\u7C7B\u578B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderController</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> PAYMENT_URL <span class="token operator">=</span> <span class="token string">&quot;http://localhost:8001&quot;</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/create&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Payment</span> payment<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;80\u6536\u5230\u7684\u53C2\u6570\uFF1A&quot;</span> <span class="token operator">+</span> payment<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">postForObject</span><span class="token punctuation">(</span>PAYMENT_URL <span class="token operator">+</span> <span class="token string">&quot;/payment/create&quot;</span><span class="token punctuation">,</span> payment<span class="token punctuation">,</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/get/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">getPayment</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span>PAYMENT_URL <span class="token operator">+</span> <span class="token string">&quot;/payment/get/&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">,</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5DE5\u7A0B\u91CD\u6784" tabindex="-1"><a class="header-anchor" href="#\u5DE5\u7A0B\u91CD\u6784" aria-hidden="true">#</a> \u5DE5\u7A0B\u91CD\u6784</h3><p>\u6211\u4EEC\u53D1\u73B0\u5728\u652F\u4ED8\u6A21\u5757\u7684\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u7AEF\u5747\u6709entities\uFF0C\u4E14\u5185\u5BB9\u76F8\u540C\uFF1B\u56E0\u6B64\u5C06\u76F8\u540C\u7684\u91CD\u590D\u4EE3\u7801\u63D0\u53D6\u5230\u4E00\u4E2A\u516C\u5F00\u5171\u7528\u7684\u5DE5\u7A0B\u4E2D</p><p>\u8FD9\u91CC\u8BF4\u5230\u4E00\u4E2Ahutool\u5DE5\u5177\u5305</p><h2 id="_1-\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0-eureka" tabindex="-1"><a class="header-anchor" href="#_1-\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0-eureka" aria-hidden="true">#</a> 1.\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0-Eureka</h2><ul><li>Eureka\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0</li><li>\u5355\u673AEureka\u6784\u5EFA</li><li>\u96C6\u7FA4Eureka\u6784\u5EFA</li></ul><h3 id="_1-eureka\u57FA\u7840\u77E5\u8BC6" tabindex="-1"><a class="header-anchor" href="#_1-eureka\u57FA\u7840\u77E5\u8BC6" aria-hidden="true">#</a> 1 Eureka\u57FA\u7840\u77E5\u8BC6</h3><ul><li>\u524D\u9762\u6211\u4EEC\u6CA1\u6709\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3,\u4E5F\u53EF\u4EE5\u670D\u52A1\u95F4\u8C03\u7528,\u4E3A\u4EC0\u4E48\u8FD8\u8981\u670D\u52A1\u6CE8\u518C?</li><li>\u5F53\u670D\u52A1\u5F88\u591A\u65F6,\u5355\u9760\u4EE3\u7801\u624B\u52A8\u7BA1\u7406\u662F\u5F88\u9EBB\u70E6\u7684,\u9700\u8981\u4E00\u4E2A\u516C\u5171\u7EC4\u4EF6,\u7EDF\u4E00\u7BA1\u7406\u591A\u670D\u52A1\u4E4B\u95F4\u7684\u76F8\u4E92\u8C03\u7528\u3002</li><li>Eureka\u7528\u4E8E\u670D\u52A1\u6CE8\u518C,\u76EE\u524D\u5B98\u7F51\u5DF2\u7ECF\u505C\u6B62\u66F4\u65B0\u3002</li></ul><h4 id="_1-1-\u4EC0\u4E48\u662F\u670D\u52A1\u6CBB\u7406" tabindex="-1"><a class="header-anchor" href="#_1-1-\u4EC0\u4E48\u662F\u670D\u52A1\u6CBB\u7406" aria-hidden="true">#</a> 1.1 \u4EC0\u4E48\u662F\u670D\u52A1\u6CBB\u7406</h4><p>Spring Cloud \u5C01\u88C5\u4E86 Netflix \u516C\u53F8\u5F00\u53D1\u7684 Eureka \u6A21\u5757\u6765\u5B9E\u73B0\u670D\u52A1\u6CBB\u7406</p><p>\u5728\u4F20\u7EDF\u7684rpc\u8FDC\u7A0B\u8C03\u7528\u6846\u67B6\u4E2D\uFF0C\u7BA1\u7406\u6BCF\u4E2A\u670D\u52A1\u4E0E\u670D\u52A1\u4E4B\u95F4\u4F9D\u8D56\u5173\u7CFB\u6BD4\u8F83\u590D\u6742\uFF0C\u7BA1\u7406\u6BD4\u8F83\u590D\u6742\uFF0C\u6240\u4EE5\u9700\u8981\u4F7F\u7528\u670D\u52A1\u6CBB\u7406\uFF0C\u7BA1\u7406\u670D\u52A1\u4E8E\u670D\u52A1\u4E4B\u95F4\u4F9D\u8D56\u5173\u7CFB\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u670D\u52A1\u8C03\u7528\u3001\u8D1F\u8F7D\u5747\u8861\u3001\u5BB9\u9519\u7B49\uFF0C\u5B9E\u73B0\u670D\u52A1\u53D1\u73B0\u4E0E\u6CE8\u518C\u3002</p><p>n\u4E2A\u751F\u4EA7\u8005\u4E0E\u90A3\u4E2A\u6D88\u8D39\u8005\u4E4B\u95F4\u76F8\u4E92\u8C03\u7528</p><h4 id="_1-2-\u4EC0\u4E48\u662F\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0" tabindex="-1"><a class="header-anchor" href="#_1-2-\u4EC0\u4E48\u662F\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0" aria-hidden="true">#</a> 1.2 \u4EC0\u4E48\u662F\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0</h4><p>\u5982\u679C\u4F60\u7684\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u53EA\u6709\u4E00\u53F0\u673A\u5668\uFF0C\u90A3\u4E48\u53EA\u8981\u5B83\u4E00\u5B95\u673A\uFF0C\u5C31\u4F1A\u4EA7\u751F\u5355\u70B9\u6545\u969C\u3002\u6240\u4EE5\u4E00\u822C\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u80FD\u914D\u591A\u4E2A\u5C31\u914D\u591A\u4E2A\uFF0C\u4E3B\u8981\u5C31\u662F\u4E3A\u4E86\u907F\u514D\u5355\u70B9\u6545\u969C\u3002</p><p>Eureka\u91C7\u7528\u4E86CS(Client-Server)\u7684\u8BBE\u8BA1\u67B6\u6784\uFF0CEureka Server \u4F5C\u4E3A\u670D\u52A1\u6CE8\u518C\u529F\u80FD\u7684\u670D\u52A1\u5668\uFF0C\u5B83\u662F\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u3002\u800C\u7CFB\u7EDF\u4E2D\u7684\u5176\u4ED6\u5FAE\u670D\u52A1\uFF0C\u4F7F\u7528 Eureka\u7684\u5BA2\u6237\u7AEF\u8FDE\u63A5\u5230 Eureka Server\u5E76\u7EF4\u6301\u5FC3\u8DF3\u8FDE\u63A5\u3002\u8FD9\u6837\u7CFB\u7EDF\u7684\u7EF4\u62A4\u4EBA\u5458\u5C31\u53EF\u4EE5\u901A\u8FC7 Eureka Server \u6765\u76D1\u63A7\u7CFB\u7EDF\u4E2D\u5404\u4E2A\u5FAE\u670D\u52A1\u662F\u5426\u6B63\u5E38\u8FD0\u884C\u3002</p><p>\u5728\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0\u4E2D\uFF0C\u6709\u4E00\u4E2A\u6CE8\u518C\u4E2D\u5FC3\u3002\u5F53\u670D\u52A1\u5668\u542F\u52A8\u7684\u65F6\u5019\uFF0C\u4F1A\u628A\u5F53\u524D\u81EA\u5DF1\u670D\u52A1\u5668\u7684\u4FE1\u606F \u6BD4\u5982 \u670D\u52A1\u5730\u5740\u901A\u8BAF\u5730\u5740\u7B49\u4EE5\u522B\u540D\u65B9\u5F0F\u6CE8\u518C\u5230\u6CE8\u518C\u4E2D\u5FC3\u4E0A\u3002\u53E6\u4E00\u65B9\uFF08\u6D88\u8D39\u8005|\u670D\u52A1\u63D0\u4F9B\u8005\uFF09\uFF0C\u4EE5\u8BE5\u522B\u540D\u7684\u65B9\u5F0F\u53BB\u6CE8\u518C\u4E2D\u5FC3\u4E0A\u83B7\u53D6\u5230\u5B9E\u9645\u7684\u670D\u52A1\u901A\u8BAF\u5730\u5740\uFF0C\u7136\u540E\u518D\u5B9E\u73B0\u672C\u5730RPC\u8C03\u7528RPC\u8FDC\u7A0B\u8C03\u7528\u6846\u67B6\u6838\u5FC3\u8BBE\u8BA1\u601D\u60F3\uFF1A\u5728\u4E8E\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u56E0\u4E3A\u4F7F\u7528\u6CE8\u518C\u4E2D\u5FC3\u7BA1\u7406\u6BCF\u4E2A\u670D\u52A1\u4E0E\u670D\u52A1\u4E4B\u95F4\u7684\u4E00\u4E2A\u4F9D\u8D56\u5173\u7CFB(\u670D\u52A1\u6CBB\u7406\u6982\u5FF5)\u3002\u5728\u4EFB\u4F55rpc\u8FDC\u7A0B\u6846\u67B6\u4E2D\uFF0C\u90FD\u4F1A\u6709\u4E00\u4E2A\u6CE8\u518C\u4E2D\u5FC3(\u5B58\u653E\u670D\u52A1\u5730\u5740\u76F8\u5173\u4FE1\u606F(\u63A5\u53E3\u5730\u5740))</p><p>\u4E0B\u5DE6\u56FE\u662FEureka\u7CFB\u7EDF\u67B6\u6784\uFF0C\u53F3\u56FE\u662FDubbo\u7684\u67B6\u6784\uFF0C\u8BF7\u5BF9\u6BD4</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1630989219581-56e7f310-72c1-4662-b3ac-bab1aa1695cd.png" alt="img"></p><h4 id="_1-3-eureka\u5305\u542B\u4E24\u4E2A\u7EC4\u4EF6-eureka-server\u548Ceureka-client" tabindex="-1"><a class="header-anchor" href="#_1-3-eureka\u5305\u542B\u4E24\u4E2A\u7EC4\u4EF6-eureka-server\u548Ceureka-client" aria-hidden="true">#</a> 1.3 Eureka\u5305\u542B\u4E24\u4E2A\u7EC4\u4EF6\uFF1AEureka Server\u548CEureka Client</h4><h5 id="eureka-server\u63D0\u4F9B\u670D\u52A1\u6CE8\u518C\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#eureka-server\u63D0\u4F9B\u670D\u52A1\u6CE8\u518C\u670D\u52A1" aria-hidden="true">#</a> Eureka Server\u63D0\u4F9B\u670D\u52A1\u6CE8\u518C\u670D\u52A1</h5><p>\u5404\u4E2A\u5FAE\u670D\u52A1\u8282\u70B9\u901A\u8FC7\u914D\u7F6E\u542F\u52A8\u540E\uFF0C\u4F1A\u5728EurekaServer\u4E2D\u8FDB\u884C\u6CE8\u518C\uFF0C\u8FD9\u6837EurekaServer\u4E2D\u7684\u670D\u52A1\u6CE8\u518C\u8868\u4E2D\u5C06\u4F1A\u5B58\u50A8\u6240\u6709\u53EF\u7528\u670D\u52A1\u8282\u70B9\u7684\u4FE1\u606F\uFF0C\u670D\u52A1\u8282\u70B9\u7684\u4FE1\u606F\u53EF\u4EE5\u5728\u754C\u9762\u4E2D\u76F4\u89C2\u770B\u5230\u3002</p><h5 id="eurekaclient\u901A\u8FC7\u6CE8\u518C\u4E2D\u5FC3\u8FDB\u884C\u8BBF\u95EE" tabindex="-1"><a class="header-anchor" href="#eurekaclient\u901A\u8FC7\u6CE8\u518C\u4E2D\u5FC3\u8FDB\u884C\u8BBF\u95EE" aria-hidden="true">#</a> EurekaClient\u901A\u8FC7\u6CE8\u518C\u4E2D\u5FC3\u8FDB\u884C\u8BBF\u95EE</h5><p>\u662F\u4E00\u4E2AJava\u5BA2\u6237\u7AEF\uFF0C\u7528\u4E8E\u7B80\u5316Eureka Server\u7684\u4EA4\u4E92\uFF0C\u5BA2\u6237\u7AEF\u540C\u65F6\u4E5F\u5177\u5907\u4E00\u4E2A\u5185\u7F6E\u7684\u3001\u4F7F\u7528\u8F6E\u8BE2(round-robin)\u8D1F\u8F7D\u7B97\u6CD5\u7684\u8D1F\u8F7D\u5747\u8861\u5668\u3002\u5728\u5E94\u7528\u542F\u52A8\u540E\uFF0C\u5C06\u4F1A\u5411Eureka Server\u53D1\u9001\u5FC3\u8DF3(\u9ED8\u8BA4\u5468\u671F\u4E3A30\u79D2)\u3002\u5982\u679CEureka Server\u5728\u591A\u4E2A\u5FC3\u8DF3\u5468\u671F\u5185\u6CA1\u6709\u63A5\u6536\u5230\u67D0\u4E2A\u8282\u70B9\u7684\u5FC3\u8DF3\uFF0CEurekaServer\u5C06\u4F1A\u4ECE\u670D\u52A1\u6CE8\u518C\u8868\u4E2D\u628A\u8FD9\u4E2A\u670D\u52A1\u8282\u70B9\u79FB\u9664\uFF08\u9ED8\u8BA490\u79D2\uFF09</p><h3 id="_2-\u5355\u673Aeureka\u6784\u5EFA\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#_2-\u5355\u673Aeureka\u6784\u5EFA\u6B65\u9AA4" aria-hidden="true">#</a> 2 \u5355\u673AEureka\u6784\u5EFA\u6B65\u9AA4</h3><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1630991069107-727851c1-b9a8-474e-b015-66cfb7d923c6.png" alt="img"></p><h4 id="_2-1-\u5EFAmodule" tabindex="-1"><a class="header-anchor" href="#_2-1-\u5EFAmodule" aria-hidden="true">#</a> 2.1 \u5EFAModule</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1630991228345-a00b6faa-d491-4903-8f24-80e9434df889.png" alt="img"></p><h4 id="_2-2-\u6539pom" tabindex="-1"><a class="header-anchor" href="#_2-2-\u6539pom" aria-hidden="true">#</a> 2.2 \u6539pom</h4><p>1.x\u548C2.x\u7684Eureka\u4F9D\u8D56\u5BF9\u6BD4</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>1.x:    server\u8DDFclient\u5408\u5728\u4E00\u8D77
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-eureka<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
2.x\uFF1A server\u8DDFclient\u5206\u5F00
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u5F53\u524D\u6A21\u5757\u65F6eureka\u7684server\u7AEF\uFF0C\u90A3\u4E48\u5F15\u5165\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jdk8cloud2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-eureka-server7001<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--eureka-server--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- \u5F15\u5165\u81EA\u5DF1\u5B9A\u4E49\u7684api\u901A\u7528\u5305\uFF0C\u53EF\u4EE5\u4F7F\u7528Payment\u652F\u4ED8Entity --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--boot web actuator--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--\u4E00\u822C\u901A\u7528\u914D\u7F6E--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-\u5199yml" tabindex="-1"><a class="header-anchor" href="#_2-3-\u5199yml" aria-hidden="true">#</a> 2.3 \u5199yml</h4><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">7001</span>

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> localhost <span class="token comment">##eureka\u670D\u52A1\u7AEF\u7684\u5B9E\u4F8B\u540D\u79F0</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token comment">##false\u8868\u793A\u4E0D\u5411\u6CE8\u518C\u4E2D\u5FC3\u6CE8\u518C\u81EA\u5DF1\u3002</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token comment">##false\u8868\u793A\u81EA\u5DF1\u7AEF\u5C31\u662F\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u6211\u7684\u804C\u8D23\u5C31\u662F\u7EF4\u62A4\u670D\u52A1\u5B9E\u4F8B\uFF0C\u5E76\u4E0D\u9700\u8981\u53BB\u68C0\u7D22\u670D\u52A1</span>
    <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
    <span class="token comment">##\u8BBE\u7F6E\u4E0EEureka Server\u4EA4\u4E92\u7684\u5730\u5740\u67E5\u8BE2\u670D\u52A1\u548C\u6CE8\u518C\u670D\u52A1\u90FD\u9700\u8981\u4F9D\u8D56\u8FD9\u4E2A\u5730\u5740\u3002</span>
    <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//$<span class="token punctuation">{</span>eureka.instance.hostname<span class="token punctuation">}</span><span class="token punctuation">:</span>$<span class="token punctuation">{</span>server.port<span class="token punctuation">}</span>/eureka/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-4-\u4E3B\u542F\u52A8\u7C7B" tabindex="-1"><a class="header-anchor" href="#_2-4-\u4E3B\u542F\u52A8\u7C7B" aria-hidden="true">#</a> 2.4 \u4E3B\u542F\u52A8\u7C7B</h4><p>\u6CE8\u610F\u4E8B\u9879\uFF1A\u589E\u52A0@EnableEurekaServer\u6CE8\u89E3\uFF0C\u6307\u5B9A\u8BE5\u6A21\u5757\u4F5C\u4E3AEureka\u6CE8\u518C\u4E2D\u5FC3\u7684\u670D\u52A1\u5668\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaServer</span>  <span class="token comment">//\u8868\u793A\u5F53\u524D\u662FEureka\u7684\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EurekaMain7001</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">EurekaMain7001</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-5-service\u7C7B" tabindex="-1"><a class="header-anchor" href="#_2-5-service\u7C7B" aria-hidden="true">#</a> 2.5 service\u7C7B</h4><p>Eureka Server \u4E0D\u9700\u8981\u5199Service\u7C7B</p><h4 id="_2-6-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_2-6-\u6D4B\u8BD5" aria-hidden="true">#</a> 2.6 \u6D4B\u8BD5</h4>`,46),O=a("\u6E38\u89C8\u5668\u8BBF\u95EE "),A={href:"http://localhost:7001",target:"_blank",rel:"noopener noreferrer"},B=a("http://localhost:7001"),F=p(`<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1630991672466-c5132bb3-724d-4111-9375-c3df5c264cd8.png" alt="img"></p><h3 id="_3-\u5FAE\u670D\u52A1\u6CE8\u518C" tabindex="-1"><a class="header-anchor" href="#_3-\u5FAE\u670D\u52A1\u6CE8\u518C" aria-hidden="true">#</a> 3 \u5FAE\u670D\u52A1\u6CE8\u518C</h3><h4 id="_3-1-\u751F\u4EA7\u8005\u5FAE\u670D\u52A18001\u6CE8\u518C\u8FDBeurekaserver" tabindex="-1"><a class="header-anchor" href="#_3-1-\u751F\u4EA7\u8005\u5FAE\u670D\u52A18001\u6CE8\u518C\u8FDBeurekaserver" aria-hidden="true">#</a> 3.1 \u751F\u4EA7\u8005\u5FAE\u670D\u52A18001\u6CE8\u518C\u8FDBEurekaServer</h4><h5 id="_3-1-1-\u6539pom" tabindex="-1"><a class="header-anchor" href="#_3-1-1-\u6539pom" aria-hidden="true">#</a> 3.1.1 \u6539pom</h5><p>\u6DFB\u52A0\u4E00\u4E2AEureka-Client\u4F9D\u8D56\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-1-2-\u6539yml" tabindex="-1"><a class="header-anchor" href="#_3-1-2-\u6539yml" aria-hidden="true">#</a> 3.1.2 \u6539yml</h5><p>yml\u6587\u4EF6\u6DFB\u52A0\u5982\u4E0B\u914D\u7F6E</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token comment">## \u8868\u793A\u5C06\u81EA\u5DF1\u6CE8\u518C\u8FDBEurekaServer\u9ED8\u8BA4\u4E3Atrue</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment">## \u8868\u793A\u53EF\u4EE5\u4ECEEureka\u6293\u53D6\u5DF2\u6709\u7684\u6CE8\u518C\u4FE1\u606F\uFF0C\u9ED8\u8BA4\u4E3Atrue\u3002\u5355\u8282\u70B9\u65E0\u6240\u8C13\uFF0C\u96C6\u7FA4\u5FC5\u987B\u8BBE\u7F6E\u4E3Atrue\u624D\u80FD\u914D\u5408ribbon\u4F7F\u7528\u8D1F\u8F7D\u5747\u8861</span>
    <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span> 
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7001/eureka
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-1-3-\u6539\u4E3B\u542F\u52A8\u7C7B" tabindex="-1"><a class="header-anchor" href="#_3-1-3-\u6539\u4E3B\u542F\u52A8\u7C7B" aria-hidden="true">#</a> 3.1.3 \u6539\u4E3B\u542F\u52A8\u7C7B</h5><p>\u6DFB\u52A0\u6CE8\u89E3\uFF1A<strong>@EnableEurekaClient</strong>\u3002 \u6307\u660E\u8FD9\u662F\u4E00\u4E2AEureka\u5BA2\u6237\u7AEF\uFF0C\u8981\u6CE8\u518C\u8FDBEurekaServer\u4E2D\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token comment">//@MapperScan(&quot;com.atguigu.springcloud.dao&quot;)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentMain8001</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">PaymentMain8001</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-1-4-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_3-1-4-\u6D4B\u8BD5" aria-hidden="true">#</a> 3.1.4 \u6D4B\u8BD5</h5><p>\u542F\u52A88001\u6A21\u5757</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1630995073927-0078ec02-dca3-4b63-9f99-6afb7fbc02e6.png" alt="img"></p><p>\u7EA2\u8272\u5B57\u4F53\u8868\u793Aeureka\u7684\u81EA\u6211\u4FDD\u62A4\u673A\u5236\u3002</p><p>\u6CE8\u610F\uFF1A\u6CE8\u518C\u8FDB\u6765\u7684\u670D\u52A1\u540D\uFF0C\u5C31\u662F\u6211\u4EEC\u5728\u8BE5\u670D\u52A1yml\u6587\u4EF6\u4E2D\u914D\u7F6E\u7684\u5FAE\u670D\u52A1\u540D\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632147258103-bb2d8ad2-8daf-493b-bc8b-2652f4c32f4e.png" alt="img"></p><h4 id="_3-2-\u6D88\u8D39\u8005\u5FAE\u670D\u52A180\u6CE8\u518C\u8FDBeurekaserver" tabindex="-1"><a class="header-anchor" href="#_3-2-\u6D88\u8D39\u8005\u5FAE\u670D\u52A180\u6CE8\u518C\u8FDBeurekaserver" aria-hidden="true">#</a> 3.2 \u6D88\u8D39\u8005\u5FAE\u670D\u52A180\u6CE8\u518C\u8FDBEurekaServer</h4><h5 id="_3-2-1-\u6539pom" tabindex="-1"><a class="header-anchor" href="#_3-2-1-\u6539pom" aria-hidden="true">#</a> 3.2.1 \u6539pom</h5><p>\u4E0E8001\u4E00\u6837</p><h5 id="_3-2-2-\u6539yml" tabindex="-1"><a class="header-anchor" href="#_3-2-2-\u6539yml" aria-hidden="true">#</a> 3.2.2 \u6539yml</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">## \u5FAE\u670D\u52A1\u540D\u79F0</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
 <span class="token key atrule">application</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>order<span class="token punctuation">-</span>service
        
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
 <span class="token key atrule">client</span><span class="token punctuation">:</span>
  <span class="token comment">## \u8868\u793A\u5C06\u81EA\u5DF1\u6CE8\u518C\u8FDBEurekaServer\u9ED8\u8BA4\u4E3Atrue</span>
  <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token comment">## \u8868\u793A\u53EF\u4EE5\u4ECEEureka\u6293\u53D6\u5DF2\u6709\u7684\u6CE8\u518C\u4FE1\u606F\uFF0C\u9ED8\u8BA4\u4E3Atrue\u3002\u5355\u8282\u70B9\u65E0\u6240\u8C13\uFF0C\u96C6\u7FA4\u5FC5\u987B\u8BBE\u7F6E\u4E3Atrue\u624D\u80FD\u914D\u5408ribbon\u4F7F\u7528\u8D1F\u8F7D\u5747\u8861</span>
  <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
    <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7001/eureka 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-2-3-\u4FEE\u6539\u4E3B\u542F\u52A8\u7C7B" tabindex="-1"><a class="header-anchor" href="#_3-2-3-\u4FEE\u6539\u4E3B\u542F\u52A8\u7C7B" aria-hidden="true">#</a> 3.2.3 \u4FEE\u6539\u4E3B\u542F\u52A8\u7C7B</h5><p>\u540C8001\u52A0\u4E0A**@EnableEurekaClient** \u6CE8\u89E3</p><h5 id="_3-2-4-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_3-2-4-\u6D4B\u8BD5" aria-hidden="true">#</a> 3.2.4 \u6D4B\u8BD5</h5><p>\u542F\u52A880\u6D88\u8D39\u8005\u7AEF\u5FAE\u670D\u52A1</p>`,27),L=a("\u5237\u65B0"),V={href:"http://localhost:7001/%E9%A1%B5%E9%9D%A2%EF%BC%9A%E6%B6%88%E8%B4%B9%E8%80%8580%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B9%9F%E6%B3%A8%E5%86%8C%E8%BF%9B%E6%9D%A5%E4%BA%86%E3%80%82",target:"_blank",rel:"noopener noreferrer"},N=a("http://localhost:7001/\u9875\u9762\uFF1A\u6D88\u8D39\u800580\u5FAE\u670D\u52A1\u4E5F\u6CE8\u518C\u8FDB\u6765\u4E86\u3002"),z=p('<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632147495075-8b4c0fa8-82db-4c4a-82e3-43354b76307c.png" alt="img"></p><h5 id="\u5982\u679C\u4E0D\u60F3\u5C06\u670D\u52A1\u6CE8\u518C\u8FDBeureka" tabindex="-1"><a class="header-anchor" href="#\u5982\u679C\u4E0D\u60F3\u5C06\u670D\u52A1\u6CE8\u518C\u8FDBeureka" aria-hidden="true">#</a> \u5982\u679C\u4E0D\u60F3\u5C06\u670D\u52A1\u6CE8\u518C\u8FDBeureka</h5><p>\u5728yml\u6587\u4EF6\u4E2D\uFF0C\u8BBE\u7F6E <code>register-with-eureka: false</code></p><h3 id="_4-\u96C6\u7FA4eureka\u642D\u5EFA" tabindex="-1"><a class="header-anchor" href="#_4-\u96C6\u7FA4eureka\u642D\u5EFA" aria-hidden="true">#</a> 4 \u96C6\u7FA4Eureka\u642D\u5EFA</h3><p>\u5355\u673A\u7248Eureka\u6784\u5EFA\u5230\u8FD9\u5C31\u7ED3\u675F\u4E86\uFF0C\u4F46\u662F\u4F01\u4E1A\u4E2D\u4E0D\u53EF\u80FD\u6709\u8C01\u6562\u8BF4\u5B83\u7684\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u662F\u5355\u673A\u7248\u3002 \u56E0\u4E3A\u6CA1\u6709\u96C6\u7FA4\u7684\u9AD8\u53EF\u7528\uFF0C\u5C31\u4F1A\u5E26\u6765\u4E00\u4E2A\u4E25\u91CD\u7684\u95EE\u9898\uFF0C\u5355\u70B9\u6545\u969C\u3002</p><ol><li><p>Eureka\u96C6\u7FA4\u539F\u7406\u8BF4\u660E</p></li><li><p>EurekaServer\u96C6\u7FA4\u73AF\u5883\u6784\u5EFA\u6B65\u9AA4</p></li><li><p>\u5C06\u652F\u4ED8\u670D\u52A18001\u5FAE\u670D\u52A1\u53D1\u5E03\u5230\u4E0A\u97622\u53F0Eureka\u96C6\u7FA4\u914D\u7F6E\u4E2D</p></li><li><p>\u5C06\u8BA2\u5355\u670D\u52A180\u5FAE\u670D\u52A1\u53D1\u5E03\u5230\u4E0A\u97622\u53F0Eureka\u96C6\u7FA4\u914D\u7F6E\u4E2D</p></li><li><p>\u6D4B\u8BD501</p></li><li><p>\u652F\u4ED8\u670D\u52A1\u63D0\u4F9B\u80058001\u96C6\u7FA4\u73AF\u5883\u6784\u5EFA\u3002</p></li><li><p>\u8D1F\u8F7D\u5747\u8861</p></li><li><p>\u6D4B\u8BD502</p></li></ol><h4 id="_4-1-eureka\u96C6\u7FA4\u539F\u7406\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#_4-1-eureka\u96C6\u7FA4\u539F\u7406\u8BF4\u660E" aria-hidden="true">#</a> 4.1 Eureka\u96C6\u7FA4\u539F\u7406\u8BF4\u660E</h4><h5 id="eureka\u6D41\u7A0B\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#eureka\u6D41\u7A0B\u539F\u7406" aria-hidden="true">#</a> Eureka\u6D41\u7A0B\u539F\u7406\uFF1A</h5><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1630998115284-3d6a0a3d-b566-49d2-9c98-0c7e540c929b.png" alt="img"></p><p><strong>\u95EE\u9898\uFF1A\u5FAE\u670D\u52A1RPC\u8FDC\u7A0B\u670D\u52A1\u8C03\u7528\u6700\u6838\u5FC3\u7684\u662F\u4EC0\u4E48\uFF1F</strong></p><p>\u9AD8\u53EF\u7528\uFF0C\u8BD5\u60F3\u4F60\u7684\u6CE8\u518C\u4E2D\u5FC3\u53EA\u6709\u4E00\u4E2Aonly one\uFF0C \u5B83\u51FA\u6545\u969C\u4E86\u90A3\u5C31\u5475\u5475(\uFFE3\u25BD\uFFE3)&quot;\u4E86\uFF0C\u4F1A\u5BFC\u81F4\u6574\u4E2A\u4E3A\u670D\u52A1\u73AF\u5883\u4E0D\u53EF\u7528\u3002</p><p>\u89E3\u51B3\u529E\u6CD5\uFF1A\u642D\u5EFAEureka\u6CE8\u518C\u4E2D\u5FC3\u96C6\u7FA4 \uFF0C\u5B9E\u73B0<strong>\u8D1F\u8F7D\u5747\u8861+\u6545\u969C\u5BB9\u9519</strong></p><h5 id="eureka\u96C6\u7FA4\u539F\u7406-\u4E92\u76F8\u6CE8\u518C-\u76F8\u4E92\u5B88\u671B" tabindex="-1"><a class="header-anchor" href="#eureka\u96C6\u7FA4\u539F\u7406-\u4E92\u76F8\u6CE8\u518C-\u76F8\u4E92\u5B88\u671B" aria-hidden="true">#</a> Eureka\u96C6\u7FA4\u539F\u7406\uFF1A\u4E92\u76F8\u6CE8\u518C\uFF0C\u76F8\u4E92\u5B88\u671B</h5><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1630998514861-54f6d464-b1b6-4f76-8648-c8aefb515867.png" alt="img"></p><h4 id="_4-2-eurekaserver\u96C6\u7FA4\u73AF\u5883\u6784\u5EFA" tabindex="-1"><a class="header-anchor" href="#_4-2-eurekaserver\u96C6\u7FA4\u73AF\u5883\u6784\u5EFA" aria-hidden="true">#</a> 4.2 EurekaServer\u96C6\u7FA4\u73AF\u5883\u6784\u5EFA</h4><h5 id="_4-2-1-\u65B0\u5EFA\u4E00\u4E2Acloud-eureka-server7002\u6A21\u5757" tabindex="-1"><a class="header-anchor" href="#_4-2-1-\u65B0\u5EFA\u4E00\u4E2Acloud-eureka-server7002\u6A21\u5757" aria-hidden="true">#</a> 4.2.1 \u65B0\u5EFA\u4E00\u4E2Acloud-eureka-server7002\u6A21\u5757</h5><h5 id="_4-2-2-pom\u4F9D\u8D56" tabindex="-1"><a class="header-anchor" href="#_4-2-2-pom\u4F9D\u8D56" aria-hidden="true">#</a> 4.2.2 pom\u4F9D\u8D56</h5><p>\u4E0Ecloud-eureka-server7001\u4F9D\u8D56\u76F8\u540C</p><h5 id="_4-2-3-\u4FEE\u6539\u4E24\u4E2Aeurekaserver\u7684yml\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_4-2-3-\u4FEE\u6539\u4E24\u4E2Aeurekaserver\u7684yml\u914D\u7F6E" aria-hidden="true">#</a> 4.2.3 \u4FEE\u6539\u4E24\u4E2AEurekaServer\u7684yml\u914D\u7F6E</h5><p>\u73B0\u6709\u5B58\u5728\u591A\u53F0eureka\u670D\u52A1\u5668\uFF0C\u56E0\u6B64\u6BCF\u4E00\u53F0eureka\u670D\u52A1\u5668\u9700\u8981\u6709\u81EA\u5DF1\u7684\u4E3B\u673A\u540D\uFF0C\u540C\u65F6\u5404\u670D\u52A1\u5668\u9700\u8981\u76F8\u4E92\u6CE8\u518C</p><p>####### \u4FEE\u6539\u57DF\u540D\u6620\u5C04\u914D\u7F6E\u6587\u4EF6</p><p>C:\\Windows\\System32\\drivers\\etc \u8DEF\u5F84\u4E0B\u7684host\u6587\u4EF6</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631700421951-1c389350-5d2f-4cc6-8b0c-30067658c651.png" alt="img"></p>',23),G=a("\u914D\u7F6E\u4E4B\u540E\u6211\u4EEC\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7"),D={href:"http://eureka7001.com:7001",target:"_blank",rel:"noopener noreferrer"},U=a("http://eureka7001.com:7001"),Z=a("\u548C"),Q={href:"http://eureka7002.com:7002",target:"_blank",rel:"noopener noreferrer"},X=a("http://eureka7002.com:7002"),W=a("\u6765\u8BBF\u95EE\u8FD9\u4E24\u4E2AEurekaServer\u3002"),Y=p(`<p>####### \u4FEE\u6539eureka\u7684yml\u6587\u4EF6</p><p><strong>eureka1\uFF1A</strong></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">7001</span>

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> eureka7001.com <span class="token comment">##eureka\u670D\u52A1\u7AEF\u7684\u5B9E\u4F8B\u540D\u79F0 \u8FD9\u91CC\u8DDFhost\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u4E00\u81F4</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token comment">##false\u8868\u793A\u4E0D\u5411\u6CE8\u518C\u4E2D\u5FC3\u6CE8\u518C\u81EA\u5DF1\u3002</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token comment">##false\u8868\u793A\u81EA\u5DF1\u7AEF\u5C31\u662F\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u6211\u7684\u804C\u8D23\u5C31\u662F\u7EF4\u62A4\u670D\u52A1\u5B9E\u4F8B\uFF0C\u5E76\u4E0D\u9700\u8981\u53BB\u68C0\u7D22\u670D\u52A1</span>
    <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
    <span class="token comment">##\u8BBE\u7F6E\u4E0EEureka Server\u4EA4\u4E92\u7684\u5730\u5740\u67E5\u8BE2\u670D\u52A1\u548C\u6CE8\u518C\u670D\u52A1\u90FD\u9700\u8981\u4F9D\u8D56\u8FD9\u4E2A\u5730\u5740\u3002</span>
      <span class="token comment">## \u5355\u673A\u5C31\u662F\u81EA\u5DF1</span>
      <span class="token comment">## defaultZone: http://eureka7001.com:7001/eureka/</span>
      <span class="token comment">## \u96C6\u7FA4\u6307\u5411\u5176\u4ED6eureka</span>
      <span class="token comment">##defaultZone: http://eureka7002.com:7002/eureka/</span>
      <span class="token comment">##\u5199\u6210\u8FD9\u6837\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u53EF\u89C6\u5316\u9875\u9762\u8DF3\u8F6C\u52307002</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7002.com<span class="token punctuation">:</span>7002/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>eureka2\uFF1A</strong></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">7002</span>

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> eureka7002.com <span class="token comment">##eureka\u670D\u52A1\u7AEF\u7684\u5B9E\u4F8B\u540D\u79F0 \u8FD9\u91CC\u8DDFhost\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u4E00\u81F4</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token comment">##false\u8868\u793A\u4E0D\u5411\u6CE8\u518C\u4E2D\u5FC3\u6CE8\u518C\u81EA\u5DF1\u3002</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token comment">##false\u8868\u793A\u81EA\u5DF1\u7AEF\u5C31\u662F\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u6211\u7684\u804C\u8D23\u5C31\u662F\u7EF4\u62A4\u670D\u52A1\u5B9E\u4F8B\uFF0C\u5E76\u4E0D\u9700\u8981\u53BB\u68C0\u7D22\u670D\u52A1</span>
    <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token comment">##\u8BBE\u7F6E\u4E0EEureka Server\u4EA4\u4E92\u7684\u5730\u5740\u67E5\u8BE2\u670D\u52A1\u548C\u6CE8\u518C\u670D\u52A1\u90FD\u9700\u8981\u4F9D\u8D56\u8FD9\u4E2A\u5730\u5740\u3002</span>
      <span class="token comment">## \u5355\u673A\u5C31\u662F\u81EA\u5DF1</span>
      <span class="token comment">## defaultZone: http://eureka7002.com:7002/eureka/</span>
      <span class="token comment">##\u96C6\u7FA4\u7248</span>
      <span class="token comment">##defaultZone: http://eureka7001.com:7001/eureka/</span>
      <span class="token comment">##\u5199\u6210\u8FD9\u6837\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u53EF\u89C6\u5316\u9875\u9762\u8DF3\u8F6C\u52307001</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-2-4-\u4E3B\u914D\u7F6E\u7C7B" tabindex="-1"><a class="header-anchor" href="#_4-2-4-\u4E3B\u914D\u7F6E\u7C7B" aria-hidden="true">#</a> 4.2.4 \u4E3B\u914D\u7F6E\u7C7B</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaServer</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EurekaMain7002</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">EurekaMain7002</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-2-5-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_4-2-5-\u6D4B\u8BD5" aria-hidden="true">#</a> 4.2.5 \u6D4B\u8BD5</h5><p>\u5F00\u542Feureka7001\u548Ceureka7002\u8FD9\u4E24\u4E2A\u670D\u52A1</p>`,9),$=a("\u8BBF\u95EE"),K={href:"http://eureka7001.com:7001",target:"_blank",rel:"noopener noreferrer"},J=a("http://eureka7001.com:7001"),nn=a("\u548C"),an={href:"http://eureka7002.com:7002",target:"_blank",rel:"noopener noreferrer"},sn=a("http://eureka7002.com:7002"),tn=p(`<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631701998561-36c60ecb-7f71-4087-bc31-c3c2ca47d872.png" alt="img"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631702042424-4f3f5919-7957-47e0-8c7b-568e756505a8.png" alt="img"></p><p>\u4E24\u4E2A\u670D\u52A1\u5668\u7684\u76F8\u4E92\u6CE8\u518C\u6210\u529F\u3002</p><h3 id="_5-\u6CE8\u518C\u63D0\u4F9B\u8FD9\u5FAE\u670D\u52A1\u548C\u6D88\u8D39\u8005\u5FAE\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#_5-\u6CE8\u518C\u63D0\u4F9B\u8FD9\u5FAE\u670D\u52A1\u548C\u6D88\u8D39\u8005\u5FAE\u670D\u52A1" aria-hidden="true">#</a> 5 \u6CE8\u518C\u63D0\u4F9B\u8FD9\u5FAE\u670D\u52A1\u548C\u6D88\u8D39\u8005\u5FAE\u670D\u52A1</h3><h4 id="_5-1-\u5C06\u63D0\u4F9B\u8005\u670D\u52A18001\u5FAE\u670D\u52A1\u548C\u6D88\u8D39\u8005\u670D\u52A180\u5FAE\u670D\u52A1\u53D1\u5E03\u5230\u4E0A\u9762\u76842\u53F0eureka\u96C6\u7FA4\u914D\u7F6E\u4E2D" tabindex="-1"><a class="header-anchor" href="#_5-1-\u5C06\u63D0\u4F9B\u8005\u670D\u52A18001\u5FAE\u670D\u52A1\u548C\u6D88\u8D39\u8005\u670D\u52A180\u5FAE\u670D\u52A1\u53D1\u5E03\u5230\u4E0A\u9762\u76842\u53F0eureka\u96C6\u7FA4\u914D\u7F6E\u4E2D" aria-hidden="true">#</a> 5.1 \u5C06\u63D0\u4F9B\u8005\u670D\u52A18001\u5FAE\u670D\u52A1\u548C\u6D88\u8D39\u8005\u670D\u52A180\u5FAE\u670D\u52A1\u53D1\u5E03\u5230\u4E0A\u9762\u76842\u53F0Eureka\u96C6\u7FA4\u914D\u7F6E\u4E2D</h4><p>\u4FEE\u6539yml</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//eureka7002.com<span class="token punctuation">:</span>7002/eureka <span class="token comment">##\u96C6\u7FA4\u7248</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_5-2-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_5-2-\u6D4B\u8BD5" aria-hidden="true">#</a> 5.2 \u6D4B\u8BD5</h4><ul><li>\u5148\u542F\u52A8eureka7001/7002</li><li>\u518D\u542F\u52A8payment8001\u3001order80</li><li>\u767B\u9646http://eureka7001.com:7001\u6D4B\u8BD5</li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631702378760-313ec1bc-9e8c-4f63-ac38-449184ceaf2d.png" alt="img"></p><p>\u8FD9\u91CC\u7684CLOUD-ORDER-SERVICE\u548CCLOUD-PAYMENT-SERVICE</p>`,10),pn={href:"http://xn--ymlspring-sl6np4ar2bgzdtxo4pa44da159f4x0bf5kby0afmid6ica8852bw20cga0772aea8465aim3gzj1a.application.name",target:"_blank",rel:"noopener noreferrer"},en=a("\u5206\u522B\u5BF9\u5E94\u4E86\u63D0\u4F9B\u670D\u52A1\u7AEF\u548C\u6D88\u8D39\u670D\u52A1\u7AEF\u7684yml\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684spring.application.name"),on=p(`<h3 id="_6-\u751F\u4EA7\u8005-provider-\u5FAE\u670D\u52A1\u96C6\u7FA4\u6784\u5EFA" tabindex="-1"><a class="header-anchor" href="#_6-\u751F\u4EA7\u8005-provider-\u5FAE\u670D\u52A1\u96C6\u7FA4\u6784\u5EFA" aria-hidden="true">#</a> 6 \u751F\u4EA7\u8005(provider)\u5FAE\u670D\u52A1\u96C6\u7FA4\u6784\u5EFA</h3><p>\u4E00\u4E2A\u63D0\u4F9B\u8005\u5FAE\u670D\u52A1\u4E0D\u53EF\u80FD\u5E94\u5BF9\u6240\u6709\u7684\u6D88\u8D39\u8005\u5FAE\u670D\u52A1</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631702528224-0ee7ee9f-c4b7-43b9-b82e-3370b35ecb88.png" alt="img"></p><h4 id="_6-1-\u65B0\u5EFAcloud-provider-payment8002-\u5FAE\u670D\u52A1\u6A21\u5757" tabindex="-1"><a class="header-anchor" href="#_6-1-\u65B0\u5EFAcloud-provider-payment8002-\u5FAE\u670D\u52A1\u6A21\u5757" aria-hidden="true">#</a> 6.1 \u65B0\u5EFAcloud-provider-payment8002 \u5FAE\u670D\u52A1\u6A21\u5757</h4><h5 id="_1-pom\u4E0Ecloud-provider-payment8001\u4E00\u81F4" tabindex="-1"><a class="header-anchor" href="#_1-pom\u4E0Ecloud-provider-payment8001\u4E00\u81F4" aria-hidden="true">#</a> 1. pom\u4E0Ecloud-provider-payment8001\u4E00\u81F4</h5><p>\u552F\u4E00\u533A\u522B\u5728\u4E8E<code>&lt;artifactId&gt;cloud-provider-payment8002&lt;/artifactId&gt;</code></p><h5 id="_2-\u5199yml" tabindex="-1"><a class="header-anchor" href="#_2-\u5199yml" aria-hidden="true">#</a> 2. \u5199yml</h5><p>\u4E0E8001\u4E00\u81F4\uFF0C\u5C06port\u6539\u4E3A8002</p><h5 id="_3-\u4E3B\u542F\u52A8\u7C7B" tabindex="-1"><a class="header-anchor" href="#_3-\u4E3B\u542F\u52A8\u7C7B" aria-hidden="true">#</a> 3. \u4E3B\u542F\u52A8\u7C7B</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentMain8002</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">PaymentMain8002</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-\u5176\u4ED6\u4E1A\u52A1\u8BF6\u548Cpayment8001\u4E00\u81F4" tabindex="-1"><a class="header-anchor" href="#_4-\u5176\u4ED6\u4E1A\u52A1\u8BF6\u548Cpayment8001\u4E00\u81F4" aria-hidden="true">#</a> 4. \u5176\u4ED6\u4E1A\u52A1\u8BF6\u548Cpayment8001\u4E00\u81F4</h5><h4 id="_6-2-\u4FEE\u6539controller" tabindex="-1"><a class="header-anchor" href="#_6-2-\u4FEE\u6539controller" aria-hidden="true">#</a> 6.2 \u4FEE\u6539controller</h4><ol><li><p>**\u6CE8\u610F\uFF1A**\u4E24\u4E2Aprovider\u5FAE\u670D\u52A1\u5728\u6CE8\u518C\u4E2D\u5FC3\u4E2D\u7684\u6CE8\u518C\u540D\u662F\u4E00\u6837\u7684\uFF0C\u8FD9\u4E24\u4E2A\u5FAE\u670D\u52A1\u5BF9\u5916\u66B4\u9732\u7684\u90FD\u662F\u540C\u4E00\u4E2A\u540D\u5B57\uFF0C\u5373yml\u6587\u4EF6\u4E2Dspring.application.name\u5747\u4E3A<img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631702990069-9a3b51b8-5e84-488d-93f9-d76dc0dafe14.png" alt="img"></p></li><li><p>\u6D88\u8D39\u8005\u5FAE\u670D\u52A1\u8C03\u7528\u7684\u662Fcloud-payment-service\u8FD9\u4E2A\u670D\u52A1\uFF0C\u4F46\u662F\u5728\u8FD9\u4E2A\u540D\u5B57\u4E0B\u9762\u53EF\u80FD\u6709\u591A\u53F0\u673A\u5668\u3002\u90A3\u4E48\u5982\u4F55\u786E\u5B9A\u6D88\u8D39\u8005\u5FAE\u670D\u52A1\u8C03\u7528\u54EA\u53F0\u673A\u5668\u4E0A\u7684cloud-payment-service\u670D\u52A1\u5462\uFF1F</p></li></ol><p>\u901A\u8FC7\u7AEF\u53E3\u53F7\u6765\u533A\u5206\uFF0C\u6211\u4EEC\u6709\u4E24\u4E2Aprovider\u5FAE\u670D\u52A1\uFF0C\u7AEF\u53E3\u53F7\u5206\u522B\u4E3A8001\u30018002</p><ol><li>\u4FEE\u6539\u4E24\u4E2A\u751F\u4EA7\u8005\u5FAE\u670D\u52A1\u7684controller\u65B9\u6CD5\uFF0C\u6539\u6CD5\u4E00\u81F4\u3002</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">PaymentService</span> paymentService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${server.port}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> serverPort<span class="token punctuation">;</span>

    <span class="token comment">//\u63D2\u5165\u6570\u636E\u5230\u6570\u636E\u5E93</span>
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/payment/create&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Payment</span> payment<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> paymentService<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>payment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;***********\u63D2\u5165\u7ED3\u679C\uFF1A&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommonResult</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">&quot;\u63D2\u5165\u6570\u636E\u5E93\u6210\u529F,serverPort:&quot;</span> <span class="token operator">+</span> serverPort<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommonResult</span><span class="token punctuation">(</span><span class="token number">444</span><span class="token punctuation">,</span> <span class="token string">&quot;\u63D2\u5165\u6570\u636E\u5E93\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u67E5\u8BE2\u6570\u636E\u5E93\u4E2D\u6307\u5B9Aid\u7684\u8BB0\u5F55</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/payment/get/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">getPaymentById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Payment</span> payment <span class="token operator">=</span> paymentService<span class="token punctuation">.</span><span class="token function">getPaymentById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;***********\u67E5\u8BE2\u7ED3\u679C\uFF1A&quot;</span> <span class="token operator">+</span> payment<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>payment <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommonResult</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">&quot;\u67E5\u8BE2\u6210\u529F,serverPort:&quot;</span> <span class="token operator">+</span> serverPort<span class="token punctuation">,</span> payment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommonResult</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">,</span> <span class="token string">&quot;\u67E5\u8BE2id\u5931\u8D25:&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>\u6D4B\u8BD5\u542F\u52A8EurekaServer</li></ol><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631703666885-18109b60-277c-4942-ad91-569682e434f0.png" alt="img"></p><ol><li>\u6D4B\u8BD5\u6D88\u8D39\u8005\u5FAE\u670D\u52A1</li></ol><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631703824568-b4ef1260-c14c-4f25-bd52-e4c87b684ec5.png" alt="img"></p><p>\u53D1\u73B0\u82E5\u5E72\u6B21\u4E0D\u540C\u8BF7\u6C42\uFF0C\u8D70\u7684\u90FD\u662Fprovider8001\u3002\u8FD9\u662F\u56E0\u4E3A\u6211\u4EEC\u5728\u6D88\u8D39\u8005\u4E3A\u670D\u52A1\u4E2D\u5C06\u5730\u5740\u5199\u6B7B\u4E86</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631703891176-dd232dff-4c3f-407e-8bbf-392c49913883.png" alt="img"></p>`,22),cn=a("\u6240\u4EE5\u5728\u8BBF\u95EE\u6D88\u8D39\u8005\u5FAE\u670D\u52A1\u540E\uFF0C\u6D88\u8D39\u8005\u5FAE\u670D\u52A1\u518D\u53BB\u8C03\u7528\u751F\u4EA7\u8005\u4E2D\u7684\u65B9\u6CD5\u3002 \u8C03\u7528\u53D1\u9001\u7684\u8BF7\u6C42\u4E00\u76F4\u90FD\u662F"),ln={href:"http://localhost:8001/",target:"_blank",rel:"noopener noreferrer"},un=a("http://localhost:8001/"),rn=a("... \u6240\u4EE5\u4E00\u76F4\u8C03\u7528\u4E868001\u7AEF\u53E3\u7684\u5FAE\u670D\u52A1\u3002 \u90A3\u4E48\u73B0\u5728\u6211\u4EEC\u4E0D\u6307\u660E\u5177\u4F53\u7684\u5FAE\u670D\u52A1\u7AEF\u53E3\uFF0C\u6307\u5B9A\u4E00\u4E2A\u8FD9\u4E24\u4E2A\u751F\u4EA7\u8005\u5FAE\u670D\u52A1\u5171\u6709\u7684\u6307\u5411\uFF1A \u5373\u5FAE\u670D\u52A1\u540D\uFF1ACLOUD-PAYMENT-SERVICE"),kn=p(`<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631703966240-4a758474-c21e-4d1c-8f71-dfe48692fe3c.png" alt="img"></p><p>\u90A3\u4E48\u6D88\u8D39\u8005\u518D\u53BB\u8C03\u7528\u751F\u4EA7\u8005\u4E2D\u7684\u65B9\u6CD5\u65F6\uFF0C\u5C31\u6CA1\u6709\u6307\u5B9A\u5177\u4F53\u7684\u7AEF\u53E3\uFF08\u5177\u4F53\u7684\u5FAE\u670D\u52A1\uFF09\u3002\u90A3\u4E48\u54EA\u4E00\u4E2A\u5FAE\u670D\u52A1\u88AB\u8C03\u7528\u7531\u5176\u4ED6\u65B9\u5F0F\u6765\u51B3\u5B9A\u3002</p><p>\u6CE8\u610F\u8FD9\u4E2A\u8BF4\u6CD5\uFF1A</p><ul><li>\u8FD9\u4E2A\u7A0B\u5E8F\u7684\u4F7F\u7528\u8005\u4F1A\u77E5\u9053\u8FD9\u4E9B\u5FAE\u670D\u52A1\u7684\u7AEF\u53E3\u6216\u8005\u5730\u5740\u5417\uFF1F</li><li>\u6D88\u8D39\u8005\u4F7F\u7528\u65F6\uFF0C\u4ED6\u4EEC\u6839\u672C\u4E0D\u60F3\u77E5\u9053\u5177\u4F53\u54EA\u4E2A\u5FAE\u670D\u52A1\u5BF9\u5E94\u54EA\u4E2A\u7AEF\u53E3\u6216\u8005\u5177\u4F53\u7684\u5730\u5740\u3002\u4ED6\u53EA\u5173\u5FC3\u5FAE\u670D\u52A1\u7684\u540D\u79F0\u3002</li><li>\u4ED6\u4EEC\u53EA\u60F3\u901A\u8FC7\u770B\u5230\u7684\u5FAE\u670D\u52A1\u540D\uFF0C\u6765\u4F7F\u7528\u8FD9\u4E9B\u5FAE\u670D\u52A1\u3002</li><li>\u4E5F\u5C31\u662F\u8BF4\uFF0C\u6211\u4EEC\u5BF9\u5916\u66B4\u9732\u7684\u53EA\u80FD\u662F\u5FAE\u670D\u52A1\u540D\uFF0C\u6765\u4F9B\u4F7F\u7528\u8005\u4F7F\u7528</li></ul><ol><li>\u518D\u6B21\u6D4B\u8BD5</li></ol><p>\u62A5\u9519\uFF1A<img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631704154325-4071f3b5-b853-4210-876e-1a5dec044269.png" alt="img"></p><p>\u539F\u56E0\uFF1A \u8FD9\u4E2A\u5FAE\u670D\u52A1\u4E0B\u9762\u5BF9\u5E94\u7740\u591A\u4E2A\u5FAE\u670D\u52A1\uFF0C\u8FD9\u4E2A\u5FAE\u670D\u52A1\u540D\u4E0B\u7684\u591A\u4E2A\u5FAE\u670D\u52A1\u5230\u5E95\u662F\u54EA\u4E2A\u51FA\u6765\u54CD\u5E94\uFF0C\u6CA1\u6709\u529E\u6CD5\u8BC6\u522B\u3002</p><h4 id="_6-3-\u4F7F\u7528-loadblanced\u6CE8\u89E3\u8D4B\u4E88resttemplate\u8D1F\u8F7D\u5747\u8861\u7684\u80FD\u529B" tabindex="-1"><a class="header-anchor" href="#_6-3-\u4F7F\u7528-loadblanced\u6CE8\u89E3\u8D4B\u4E88resttemplate\u8D1F\u8F7D\u5747\u8861\u7684\u80FD\u529B" aria-hidden="true">#</a> 6.3 \u4F7F\u7528@LoadBlanced\u6CE8\u89E3\u8D4B\u4E88RestTemplate\u8D1F\u8F7D\u5747\u8861\u7684\u80FD\u529B</h4><ol><li>\u4EE5\u524D\u6211\u4EEC\u628A\u751F\u4EA7\u8005\u5FAE\u670D\u52A1\u5199\u6B7B\uFF0C\u6CA1\u5173\u7CFB\uFF0C\u56E0\u4E3A\u53EA\u6709\u4E00\u4E2A\u751F\u4EA7\u8005\u5FAE\u670D\u52A1\uFF0C\u53EA\u8BA4\u4E00\u4E2A\u3002</li></ol><p>\u4F46\u662F\u73B0\u5728\u4E0D\u80FD\u5199\u6B7B\u4E86\uFF0C\u56E0\u4E3A\u8FD9\u4E2A\u5FAE\u670D\u52A1\u540D\u4E0B\u5BF9\u5E94\u6709\u591A\u4E2A\u5FAE\u670D\u52A1\uFF0C\u90A3\u4E48\u8C03\u7528\u65F6\uFF0C\u5FC5\u987B\u5F97\u8BF4\u660E \u54EA\u4E00\u4E2A\u88AB\u8C03\u7528\u4E86\u3002 \u9700\u8981\u89C4\u5B9A\u4E00\u79CD\u9ED8\u8BA4\u7684\u8D1F\u8F7D\u5747\u8861\u673A\u5236\uFF1A<strong>@LoadBlanced</strong>\uFF1B\u5728Order80\u7AEF\u7684\u914D\u7F6E\u7C7B\u4E0A\u52A0\u5165**@LoadBlanced**\u6CE8\u89E3\u5F00\u542F\u8D1F\u8F7D\u5747\u8861</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631704278335-f3b52043-761d-4e03-913d-557dbe9572e5.png" alt="img"></p><h3 id="_7-actuator\u5FAE\u670D\u52A1\u4FE1\u606F\u5B8C\u5584" tabindex="-1"><a class="header-anchor" href="#_7-actuator\u5FAE\u670D\u52A1\u4FE1\u606F\u5B8C\u5584" aria-hidden="true">#</a> 7 actuator\u5FAE\u670D\u52A1\u4FE1\u606F\u5B8C\u5584</h3><h4 id="_7-1-\u4E3B\u673A\u540D\u79F0-\u670D\u52A1\u540D\u79F0\u7684\u89C4\u8303\u548C\u4FEE\u6539" tabindex="-1"><a class="header-anchor" href="#_7-1-\u4E3B\u673A\u540D\u79F0-\u670D\u52A1\u540D\u79F0\u7684\u89C4\u8303\u548C\u4FEE\u6539" aria-hidden="true">#</a> 7.1 \u4E3B\u673A\u540D\u79F0\uFF1A\u670D\u52A1\u540D\u79F0\u7684\u89C4\u8303\u548C\u4FEE\u6539</h4><ol><li><p>\u6309\u7167\u89C4\u8303\u7684\u8981\u6C42\u53EA\u66B4\u9732\u670D\u52A1\u540D\uFF0C\u4E0D\u5E26\u6709\u4E3B\u673A\u540D\u3002</p></li><li><p>\u4FEE\u6539\u751F\u4EA7\u8005\u5FAE\u670D\u52A1\u7684yml</p></li></ol><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631704450338-fc5f7714-c957-486d-b04e-4e695aa2d235.png" alt="img"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631704456633-f75ccbc5-51e6-416e-83a0-af005591f4c9.png" alt="img"></p><p>3.\u6D4B\u8BD5\uFF1A\u4EC5\u66B4\u9732\u670D\u52A1\u540D</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631703666885-18109b60-277c-4942-ad91-569682e434f0.png" alt="img"></p><h4 id="_7-2-\u8BBF\u95EE\u4FE1\u606F\u6709ip\u4FE1\u606F\u63D0\u793A" tabindex="-1"><a class="header-anchor" href="#_7-2-\u8BBF\u95EE\u4FE1\u606F\u6709ip\u4FE1\u606F\u63D0\u793A" aria-hidden="true">#</a> 7.2 \u8BBF\u95EE\u4FE1\u606F\u6709IP\u4FE1\u606F\u63D0\u793A</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631704600433-da87fdc9-56cc-45b2-907c-b1be857f81a6.png" alt="img"></p><ol><li><p>\u6211\u73B0\u5728\u70B9\u51FB\u8FD9\u4E2A\u5FAE\u670D\u52A1\u7684\u94FE\u63A5\uFF0C\u6CA1\u6709ip\u4FE1\u606F\u63D0\u793A\u3002 \u5B9E\u9645\u5DE5\u4F5C\u4E2D\uFF0C\u6211\u4EEC\u90FD\u4F1A\u8BF4\u8FD9\u4E2A\u5FAE\u670D\u52A1\u662F\u90E8\u7F72\u5728\u51E0\u53F7\u673A\u5668\u4E0A\u9762\u7684\u51E0\u53F7\u7AEF\u53E3\u3002\u6211\u4EEC\u8981\u8BA9\u8BBF\u95EE\u4FE1\u606F \u6709ip\u4FE1\u606F\u63D0\u793A\u3002</p></li><li><p>\u5728\u6BCF\u4E2A\u5FAE\u670D\u52A1\u7684yml\u4E2D\u6DFB\u52A0\u5982\u4E0B</p></li></ol><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631704693453-7470f0d0-fe04-4283-a267-78c02a129522.png" alt="img"></p><h3 id="_8-\u670D\u52A1\u53D1\u73B0discovery" tabindex="-1"><a class="header-anchor" href="#_8-\u670D\u52A1\u53D1\u73B0discovery" aria-hidden="true">#</a> 8 \u670D\u52A1\u53D1\u73B0Discovery</h3><p><strong>\u670D\u52A1\u53D1\u73B0</strong>\uFF1A\u5BF9\u4E8E\u6CE8\u518C\u8FDBeureka\u91CC\u9762\u7684\u5FAE\u670D\u52A1\uFF0C\u53EF\u4EE5\u901A\u8FC7\u670D\u52A1\u53D1\u73B0\u6765\u83B7\u5F97\u8BE5\u670D\u52A1\u7684\u4FE1\u606F</p><p><strong>@EnableDiscoveryClient</strong>\u6CE8\u89E3</p><p>\u4E0D\u6392\u9664\u6211\u4EEC\u5FAE\u670D\u52A1\u8981\u5BF9\u5916\u63D0\u4F9B\u4E00\u79CD\u529F\u80FD\u3002\u90A3\u4E48\u6211\u4EEC\u5C31\u9700\u8981\u62FF\u5230\u5728eureka\u4E0A\u6CE8\u518C\u4E86\u7684\u5FAE\u670D\u52A1\u7684\u4FE1\u606F\uFF0C\u4F8B\u5982\uFF1A\u4E3B\u673A\u540D\u79F0\u3001\u7AEF\u53E3\u53F7\u3002</p><p><strong>1 \u4FEE\u6539cloud-provider-payment8001\u7684controller\uFF1A\u5199\u597D\u63D0\u4F9B\u7ED9\u5916\u90E8\u7684\u4FE1\u606F</strong></p><p><strong>\u6CE8\u610F\u5199\u572880\u548C8002\u4E2D\u4E5F\u90FD\u53EF\u4EE5\u83B7\u5F97\u6240\u6709\u7684\u5FAE\u670D\u52A1\u4FE1\u606F\uFF0C\u8FD9\u91CC\u53EA\u662F\u57288001\u4E0A\u8FDB\u884C\u6D4B\u8BD5\u3002</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Resource</span>   <span class="token comment">//\u53D1\u73B0\u81EA\u5DF1\u7684\u670D\u52A1\u4FE1\u606F</span>
<span class="token keyword">private</span> <span class="token class-name">DiscoveryClient</span> discoveryClient<span class="token punctuation">;</span>

<span class="token comment">//\u670D\u52A1\u53D1\u73B0</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/payment/discovery&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">discovery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5F97\u5230\u5168\u90E8\u670D\u52A1\u6E05\u5355</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> services <span class="token operator">=</span> discoveryClient<span class="token punctuation">.</span><span class="token function">getServices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> service <span class="token operator">:</span> services<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;*********element:&quot;</span> <span class="token operator">+</span> service<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//\u83B7\u53D6\u5FAE\u670D\u52A1\u5B9E\u4F8B</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServiceInstance</span><span class="token punctuation">&gt;</span></span> instances <span class="token operator">=</span> discoveryClient<span class="token punctuation">.</span><span class="token function">getInstances</span><span class="token punctuation">(</span><span class="token string">&quot;CLOUD-PAYMENT-SERVICE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ServiceInstance</span> instance <span class="token operator">:</span> instances<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span><span class="token function">getServiceId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span> <span class="token operator">+</span> instance<span class="token punctuation">.</span><span class="token function">getHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span>
                 <span class="token operator">+</span> instance<span class="token punctuation">.</span><span class="token function">getPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span> <span class="token operator">+</span> instance<span class="token punctuation">.</span><span class="token function">getUri</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> discoveryClient<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2 \u57288001\u7684\u4E3B\u542F\u52A8\u7C7B\u4E2D\u5F00\u542F\u6CE8\u89E3</strong>\uFF1A<strong>@EnableDiscoveryClient</strong></p>`,29),dn=a("\u6D4B\u8BD5\uFF0C\u8BBF\u95EE"),gn={href:"http://localhost:8001/payment/discovery",target:"_blank",rel:"noopener noreferrer"},mn=a("http://localhost:8001/payment/discovery"),vn=p(`<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631707101134-9f79116e-e133-46ef-bca6-68312f355846.png" alt="img"></p><p>\u63A7\u5236\u53F0\u6253\u5370\u4FE1\u606F</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631707370541-72b5368b-b30b-4c1a-b05d-c29ac27b7016.png" alt="img"></p><h3 id="_9-eureka\u81EA\u6211\u4FDD\u62A4" tabindex="-1"><a class="header-anchor" href="#_9-eureka\u81EA\u6211\u4FDD\u62A4" aria-hidden="true">#</a> 9 eureka\u81EA\u6211\u4FDD\u62A4</h3><h4 id="_9-1-\u81EA\u6211\u4FDD\u62A4" tabindex="-1"><a class="header-anchor" href="#_9-1-\u81EA\u6211\u4FDD\u62A4" aria-hidden="true">#</a> 9.1 \u81EA\u6211\u4FDD\u62A4</h4><ol><li>\u6982\u8FF0\uFF1A \u4FDD\u62A4\u6A21\u5F0F\u4E3B\u8981\u7528\u4E8E\u4E00\u7EC4\u5BA2\u6237\u7AEF\u548CEurekaServer\u4E4B\u95F4\u5B58\u5728\u7F51\u7EDC\u5206\u533A\u573A\u666F\u4E0B\u7684\u4FDD\u62A4\u3002\u4E00\u65E6\u8FDB\u5165\u4FDD\u62A4\u6A21\u5F0F\uFF0C EurekaServer\u5C06\u4F1A\u5C1D\u8BD5\u4FDD\u62A4\u5176\u670D\u52A1\u6CE8\u518C\u8868\u4E2D\u7684\u4FE1\u606F\uFF0C\u4E0D\u5728\u5220\u9664\u670D\u52A1\u6CE8\u518C\u8868\u4E2D\u7684\u6570\u636E\uFF0C\u4E5F\u5C31\u662F\u4E0D\u4F1A\u6CE8\u9500\u4EFB\u4F55\u5FAE\u670D\u52A1\u3002</li></ol><p>\u5982\u679C\u5728EurekaServer\u7684\u9996\u9875\u770B\u5230\u4EE5\u4E0B\u8FD9\u6BB5\u63D0\u793A\uFF0C\u5219\u8BF4\u660EEureka\u8FDB\u5165\u4E86\u4FDD\u62A4\u6A21\u5F0F\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631707780822-bd921fea-2ace-4224-a1ca-1c6f8ae7dcf7.png" alt="img"></p><p>\u4E00\u53E5\u8BDD\uFF1A\u67D0\u65F6\u523B\u67D0\u4E00\u4E2A\u5FAE\u670D\u52A1\u4E0D\u53EF\u7528\u4E86\uFF0CEureka\u4E0D\u4F1A\u7ACB\u523B\u6E05\u7406\uFF0C\u4F9D\u65E7\u4F1A\u5BF9\u8BE5\u5FAE\u670D\u52A1\u7684\u4FE1\u606F\u8FDB\u884C\u4FDD\u5B58\u3002</p><p>\u5C5E\u4E8ECAP\u91CC\u9762\u7684AP\u5206\u652F\u3002</p><p>Eureka\u5B83\u7684\u8BBE\u8BA1\u601D\u60F3\uFF1A \u5206\u5E03\u5F0FCAP\u91CC\u9762\u7684AP\u5206\u652F\uFF0C\u67D0\u65F6\u523B\u67D0\u4E00\u4E2A\u5FAE\u670D\u52A1\u4E0D\u53EF\u7528\u4E86\uFF0CEureka\u4E0D\u4F1A\u7ACB\u523B\u6E05\u7406\uFF0C \u4F9D\u65E7\u4F1A\u5BF9\u8BE5\u5FAE\u670D\u52A1\u7684\u4FE1\u606F\u8FDB\u884C\u4FDD\u5B58\u3002</p><ol start="2"><li>\u4E3A\u4EC0\u4E48\u4F1A\u4EA7\u751FEureka\u81EA\u6211\u4FDD\u62A4\u673A\u5236\uFF1F</li></ol><p>\u56E0\u4E3A\u53EF\u80FD\u5B58\u5728\u8FD9\u6837\u7684\u60C5\u51B5\uFF1A EurekaClient\u53EF\u4EE5\u6B63\u5E38\u8FD0\u884C\uFF0C\u4F46\u662F\u4E0EEurekaServer\u7F51\u7EDC\u4E0D\u901A\u3002 \u6B64\u65F6EurekaServer\u4E0D\u4F1A\u7ACB\u523B\u5C06EurekaClient\u670D\u52A1\u5254\u9664\u3002</p><ol start="3"><li>\u81EA\u6211\u4FDD\u62A4</li></ol><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631707878100-2e5d3532-628b-4cad-96b8-358f0f87e9b1.png" alt="img"></p><p>\u5982\u679C\u4E00\u5B9A\u65F6\u95F4\u5185\u4E22\u5931\u5927\u91CF\u8BE5\u5FAE\u670D\u52A1\u7684\u5B9E\u4F8B\uFF0C\u8FD9\u65F6Eureka\u5C31\u4F1A\u5F00\u542F\u81EA\u6211\u4FDD\u62A4\u673A\u5236\uFF0C\u4E0D\u4F1A\u5254\u9664\u8BE5\u670D\u52A1\u3002 \u56E0\u4E3A\u8FD9\u4E2A\u73B0\u8C61\u53EF\u80FD\u662F\u56E0\u4E3A\u7F51\u7EDC\u6682\u65F6\u4E0D\u901A\uFF0C\u51FA\u73B0\u4E86Eureka\u7684\u5047\u6B7B\uFF0C\u62E5\u5835\uFF0C\u5361\u987F\u3002 \u7A0D\u7B49\u4F1A\u5BA2\u6237\u7AEF\u8FD8\u80FD\u6B63\u5E38\u53D1\u9001\u5FC3\u8DF3\u3002 \u8FD9\u5C31\u662FCAP\u91CC\u9762\u7684AP\u5206\u652F\u601D\u60F3\u3002</p><p>4.\u8BBE\u8BA1\u54F2\u5B66</p><p>\u5B81\u53EF\u4FDD\u7559\u9519\u8BEF\u7684\u670D\u52A1\u6CE8\u518C\u4FE1\u606F\uFF0C\u4E5F\u4E0D\u76F2\u76EE\u6CE8\u9500\u4EFB\u4F55\u53EF\u80FD\u5065\u5EB7\u7684\u670D\u52A1\u5B9E\u4F8B</p><h5 id="cap" tabindex="-1"><a class="header-anchor" href="#cap" aria-hidden="true">#</a> CAP</h5><ul><li>Consistency\uFF08\u4E00\u81F4\u6027\uFF09\uFF1A\u5373\u66F4\u65B0\u64CD\u4F5C\u6210\u529F\u5E76\u8FD4\u56DE\u5BA2\u6237\u7AEF\u540E\uFF0C\u6240\u6709\u8282\u70B9\u5728\u540C\u4E00\u65F6\u95F4\u7684\u6570\u636E\u5B8C\u5168\u4E00\u81F4\u3002\u5BF9\u4E8E\u5BA2\u6237\u7AEF\u6765\u8BF4\uFF0C\u4E00\u81F4\u6027\u6307\u7684\u662F\u5E76\u53D1\u8BBF\u95EE\u65F6\u66F4\u65B0\u8FC7\u7684\u6570\u636E\u5982\u4F55\u83B7\u53D6\u7684\u95EE\u9898\u3002\u4ECE\u670D\u52A1\u7AEF\u6765\u770B\uFF0C\u5219\u662F\u66F4\u65B0\u5982\u4F55\u590D\u5236\u5206\u5E03\u5230\u6574\u4E2A\u7CFB\u7EDF\uFF0C\u4EE5\u4FDD\u8BC1\u6570\u636E\u6700\u7EC8\u4E00\u81F4\u3002</li><li>Avaliability\uFF08\u53EF\u7528\u6027\uFF09\uFF1A\u5373\u670D\u52A1\u4E00\u76F4\u53EF\u7528\uFF0C\u800C\u4E14\u662F\u6B63\u5E38\u54CD\u5E94\u65F6\u95F4\u3002\u7CFB\u7EDF\u80FD\u591F\u5F88\u597D\u7684\u4E3A\u7528\u6237\u670D\u52A1\uFF0C\u4E0D\u51FA\u73B0\u7528\u6237\u64CD\u4F5C\u5931\u8D25\u6216\u8005\u8BBF\u95EE\u8D85\u65F6\u7B49\u7528\u6237\u4F53\u9A8C\u4E0D\u597D\u7684\u60C5\u51B5\u3002</li><li>Partition Tolerance\uFF08\u5206\u533A\u5BB9\u9519\u6027\uFF09\uFF1A\u5373\u5206\u5E03\u5F0F\u7CFB\u7EDF\u5728\u9047\u5230\u67D0\u8282\u70B9\u6216\u7F51\u7EDC\u6545\u969C\u7684\u65F6\u5019\uFF0C\u4ECD\u7136\u80FD\u591F\u5BF9\u5916\u63D0\u4F9B\u6EE1\u8DB3\u4E00\u81F4\u6027\u548C\u53EF\u7528\u6027\u7684\u670D\u52A1\u3002\u5206\u533A\u5BB9\u9519\u6027\u8981\u6C42\u5E94\u7528\u867D\u7136\u662F\u4E00\u4E2A\u5206\u5E03\u5F0F\u7CFB\u7EDF\uFF0C\u4F46\u770B\u4E0A\u53BB\u5207\u597D\u50CF\u662F\u5728\u4E00\u4E2A\u53EF\u4EE5\u8FD0\u8F6C\u6B63\u5E38\u7684\u6574\u4F53\u3002\u6BD4\u5982\u73B0\u5728\u7684\u5206\u5E03\u5F0F\u7CFB\u7EDF\u4E2D\u6709\u67D0\u4E00\u4E2A\u6216\u8005\u51E0\u4E2A\u673A\u5668\u5B95\u6389\u4E86\uFF0C\u5176\u4ED6\u5269\u4E0B\u7684\u673A\u5668\u8FD8\u80FD\u591F\u6B63\u5E38\u8FD0\u8F6C\u6EE1\u8DB3\u7CFB\u7EDF\u8981\u6C42\uFF0C\u5BF9\u4E8E\u7528\u6237\u800C\u8A00\u5E76\u6CA1\u6709\u4EC0\u4E48\u4F53\u9A8C\u4E0A\u7684\u5F71\u54CD\u3002</li><li>CP\u548CAP\uFF1A\u5206\u533A\u5BB9\u9519\u662F\u5FC5\u987B\u4FDD\u8BC1\u7684\uFF0C\u5F53\u53D1\u751F\u7F51\u7EDC\u5206\u533A\u7684\u65F6\u5019\uFF0C\u5982\u679C\u8981\u7EE7\u7EED\u670D\u52A1\uFF0C\u90A3\u4E48\u5F3A\u4E00\u81F4\u6027\u548C\u53EF\u7528\u6027\u53EA\u80FD2\u90091</li></ul><h5 id="_9-2-\u600E\u4E48\u7981\u6B62\u81EA\u6211\u4FDD\u62A4" tabindex="-1"><a class="header-anchor" href="#_9-2-\u600E\u4E48\u7981\u6B62\u81EA\u6211\u4FDD\u62A4" aria-hidden="true">#</a> 9.2 \u600E\u4E48\u7981\u6B62\u81EA\u6211\u4FDD\u62A4</h5><p>\u4FEE\u65397001\u7684yml\u914D\u7F6E\u6587\u4EF6</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631710096444-f4da5584-cc01-4982-ad44-5b97bc4b5d3b.png" alt="img"></p><p><strong>\u4FEE\u6539eurekaClient\u7AEF8001</strong></p><p>\u5B83\u6709\u4E24\u4E2A\u9ED8\u8BA4\u7684\u914D\u7F6E</p><p>## Eureka\u5BA2\u6237\u7AEF\u5411\u670D\u52A1\u7AEF\u53D1\u9001\u5FC3\u8DF3\u7684\u65F6\u95F4\u95F4\u9694\u9ED8\u8BA430\u79D2</p><p>eureka.instance.lease-renewal-interval-in-seconds: 30 \u5355\u4F4D\u79D2</p><p>## Eureka\u670D\u52A1\u7AEF\u5728\u6536\u5230\u6700\u540E\u4E00\u6B21\u5FC3\u8DF3\u540E\uFF0C90s\u6CA1\u6709\u6536\u5230\u5FC3\u8DF3\uFF0C\u5254\u9664\u670D\u52A1</p><p>eureka.instance.lease-expiration-duration-in-seconds: 90 \u5355\u4F4D\u79D2</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1631710338948-a76f27af-d5ae-458a-b29d-31f03b4c4377.png" alt="img"></p><h2 id="_2-\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0-zookeeper" tabindex="-1"><a class="header-anchor" href="#_2-\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0-zookeeper" aria-hidden="true">#</a> 2.\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0-Zookeeper</h2><ul><li>\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\uFF1Azookeeper\u4EE3\u66FFeureka</li><li>Consul\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0</li></ul><h3 id="_1-\u6CE8\u518C\u4E2D\u5FC3zookeeper" tabindex="-1"><a class="header-anchor" href="#_1-\u6CE8\u518C\u4E2D\u5FC3zookeeper" aria-hidden="true">#</a> 1. \u6CE8\u518C\u4E2D\u5FC3Zookeeper</h3><p>zookeeper\u662F\u4E00\u4E2A\u5206\u5E03\u5F0F\u534F\u8C03\u5DE5\u5177\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u6CE8\u518C\u4E2D\u5FC3\u529F\u80FD</p><p>\u5173\u95EDlinux\u670D\u52A1\u5668\u9632\u706B\u5899\u540E\uFF0C\u542F\u52A8zookeeper\u670D\u52A1\u5668</p><p><strong>centos\uFF1A</strong></p><p>systemctl stop firewalld</p><p>Ubuntu\uFF1A</p><p>sudo ufw disable</p><p>zookeeper\u670D\u52A1\u5668\u53D6\u4EE3Eureka\u670D\u52A1\u5668\uFF0Czk\u4F5C\u4E3A\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3</p><h3 id="_2-\u670D\u52A1\u63D0\u4F9B\u8005" tabindex="-1"><a class="header-anchor" href="#_2-\u670D\u52A1\u63D0\u4F9B\u8005" aria-hidden="true">#</a> 2.\u670D\u52A1\u63D0\u4F9B\u8005</h3><h4 id="_2-1-\u65B0\u5EFAcloud-provider-payment8004\u5FAE\u670D\u52A1\u6A21\u5757" tabindex="-1"><a class="header-anchor" href="#_2-1-\u65B0\u5EFAcloud-provider-payment8004\u5FAE\u670D\u52A1\u6A21\u5757" aria-hidden="true">#</a> 2.1 \u65B0\u5EFAcloud-provider-payment8004\u5FAE\u670D\u52A1\u6A21\u5757</h4><h4 id="_2-2-pom" tabindex="-1"><a class="header-anchor" href="#_2-2-pom" aria-hidden="true">#</a> 2.2 pom</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jdk8cloud2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-provider-payment8004<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- \u5F15\u5165\u81EA\u5DF1\u5B9A\u4E49\u7684api\u901A\u7528\u5305\uFF0C\u53EF\u4EE5\u4F7F\u7528Payment\u652F\u4ED8Entity --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- SpringBoot\u6574\u5408zookeeper\u5BA2\u6237\u7AEF --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-zookeeper-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-application-yml" tabindex="-1"><a class="header-anchor" href="#_2-3-application-yml" aria-hidden="true">#</a> 2.3 application.yml</h4><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">##8004\u8868\u793A\u6CE8\u518C\u5230zookeeper\u670D\u52A1\u5668\u7684\u652F\u4ED8\u670D\u52A1\u63D0\u4F9B\u8005\u7AEF\u53E3\u53F7</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8004</span>

<span class="token comment">##\u670D\u52A1\u522B\u540D----\u6CE8\u518Czookeeper\u5230\u6CE8\u518C\u4E2D\u5FC3\u540D\u79F0</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>provider<span class="token punctuation">-</span>payment
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">zookeeper</span><span class="token punctuation">:</span>
      <span class="token key atrule">connect-string</span><span class="token punctuation">:</span> 192.168.190.128<span class="token punctuation">:</span><span class="token number">2181</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-4-\u4E3B\u542F\u52A8\u7C7B-1" tabindex="-1"><a class="header-anchor" href="#_2-4-\u4E3B\u542F\u52A8\u7C7B-1" aria-hidden="true">#</a> 2.4 \u4E3B\u542F\u52A8\u7C7B</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span> <span class="token comment">//\u8BE5\u6CE8\u89E3\u7528\u4E8E\u5411\u4F7F\u7528consul\u6216\u8005zookeeper\u4F5C\u4E3A\u6CE8\u518C\u4E2D\u5FC3\u65F6\u6CE8\u518C\u670D\u52A1</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentMain8004</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">PaymentMain8004</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-5-controller" tabindex="-1"><a class="header-anchor" href="#_2-5-controller" aria-hidden="true">#</a> 2.5 controller</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${server.port}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> serverPort<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/payment/zk&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentzk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;springcloud with zookeeper: &quot;</span> <span class="token operator">+</span> serverPort <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span> <span class="token operator">+</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-6-\u6D4B\u8BD5-\u89E3\u51B3jar\u5305\u51B2\u7A81" tabindex="-1"><a class="header-anchor" href="#_2-6-\u6D4B\u8BD5-\u89E3\u51B3jar\u5305\u51B2\u7A81" aria-hidden="true">#</a> 2.6 \u6D4B\u8BD5\uFF1A\u89E3\u51B3jar\u5305\u51B2\u7A81</h4><h5 id="_2-6-1-\u89E3\u51B3jar\u5305\u51B2\u7A81" tabindex="-1"><a class="header-anchor" href="#_2-6-1-\u89E3\u51B3jar\u5305\u51B2\u7A81" aria-hidden="true">#</a> 2.6.1 \u89E3\u51B3jar\u5305\u51B2\u7A81</h5><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632121651933-2b44edb1-3d63-41bd-8109-ae3cd4c99591.png" alt="img"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632121616898-d528236a-46f9-4bf1-88d7-b727c1c475d0.png" alt="img"></p><p>\u5982\u679C\u5B89\u88C5\u7684zookeeper\u7248\u672C\u9AD8\u4E8E3.5.3\u5219\u4E0D\u4F1A\u51FA\u73B0\u51B2\u7A81\u62A5\u9519\u3002\u6211\u662F3.5.7\u6CA1\u6709\u62A5\u9519</p><p>\u62A5\u9519\u89E3\u51B3\u65B9\u6848\uFF1A\u6392\u9664\u5F15\u5165\u76843.5.3-beta\uFF0C\u5F15\u5165\u4E0E\u5B89\u88C5\u7684zookeeper\u5BF9\u5E94\u7684\u7248\u672C</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- \u5F15\u5165\u81EA\u5DF1\u5B9A\u4E49\u7684api\u901A\u7528\u5305\uFF0C\u53EF\u4EE5\u4F7F\u7528Payment\u652F\u4ED8Entity --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- SpringBoot\u6574\u5408zookeeper\u5BA2\u6237\u7AEF --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-zookeeper-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--\u5148\u6392\u9664\u81EA\u5E26\u7684zookeeper3.5.3--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.zookeeper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>zookeeper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--\u6DFB\u52A0zookeeper3.5.7\u7248\u672C--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.zookeeper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>zookeeper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.5.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u6837\u53C8\u4F1A\u4EA7\u751F\u65B0\u7684\u9519\u8BEF\uFF1ASLF4J\u591A\u6B21\u7ED1\u5B9A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632122328575-e2edea02-985f-4bf7-bbc3-59b3e3a6c208.png" alt="img"></p><p>zookeeper\u8DDFstarter-web\u4E2D\u90FD\u6709slf4j\u4EA7\u751F\u4E86\u51B2\u7A81</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632122455660-c3d64778-c9d0-44a7-9fad-e7bcdc16aef5.png" alt="img"></p><p>\u6240\u4EE5\u6392\u9664\u6389zookeeper\u4E2D\u7684slf4j</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632122641717-eb501130-b00b-4be7-ab40-83bbbdd2ed6b.png" alt="img"></p><p>\u518D\u6B21\u542F\u52A8\u6210\u529F</p><h5 id="_2-6-2-\u67E5\u770B\u670D\u52A1\u662F\u5426\u6CE8\u518C\u6210\u529F" tabindex="-1"><a class="header-anchor" href="#_2-6-2-\u67E5\u770B\u670D\u52A1\u662F\u5426\u6CE8\u518C\u6210\u529F" aria-hidden="true">#</a> 2.6.2 \u67E5\u770B\u670D\u52A1\u662F\u5426\u6CE8\u518C\u6210\u529F</h5><p>\u865A\u62DF\u673Acd\u5230zookeeper\u5B89\u88C5\u76EE\u5F55\u4E0B\uFF1Acd /usr/local/moudle/zookeeper-3.5.7</p><p>\u8FDE\u63A5zookeeper\u5BA2\u6237\u7AEF\uFF1Abin/zkCli.sh</p><p>\u67E5\u770B\u670D\u52A1\u662F\u5426\u6CE8\u518C\u6210\u529F\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632122967342-bd911f0b-43c8-4c79-8cfb-e5b5bdfcb6d5.png" alt="img"></p><h5 id="_2-6-3-\u6D4B\u8BD5controller" tabindex="-1"><a class="header-anchor" href="#_2-6-3-\u6D4B\u8BD5controller" aria-hidden="true">#</a> 2.6.3 \u6D4B\u8BD5controller</h5><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632123485179-e66e49ed-cc1b-4876-ac08-531f39b7f7ec.png" alt="img"></p><p>\u901A\u8FC7 get /services/cloud-provider-payment/39f814f5-8ddd-4fa3-9d95-130ff687f736 \u83B7\u53D6\u8282\u70B9\u4FE1\u606F</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632123656848-c9732906-af30-4c12-8c8a-86bcb0c6655e.png" alt="img"></p>`,73),bn=a("\u5728\u7EBF\u89E3\u6790json\u4E32\uFF1A"),hn={href:"https://tool.lu/json",target:"_blank",rel:"noopener noreferrer"},yn=a("https://tool.lu/json"),fn=p(`<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632123695814-82639de9-7319-473c-8365-d18390c9c631.png" alt="img"></p><h4 id="_2-7-\u601D\u8003" tabindex="-1"><a class="header-anchor" href="#_2-7-\u601D\u8003" aria-hidden="true">#</a> 2.7 \u601D\u8003</h4><h5 id="\u6CE8\u518C\u5230zookeeper\u7684\u5FAE\u670D\u52A1\u662F\u4E00\u4E2Aznode\u8282\u70B9-\u8FD9\u4E2A\u8282\u70B9\u662F\u4E34\u65F6\u8282\u70B9\u8FD8\u662F\u6301\u4E45\u8282\u70B9" tabindex="-1"><a class="header-anchor" href="#\u6CE8\u518C\u5230zookeeper\u7684\u5FAE\u670D\u52A1\u662F\u4E00\u4E2Aznode\u8282\u70B9-\u8FD9\u4E2A\u8282\u70B9\u662F\u4E34\u65F6\u8282\u70B9\u8FD8\u662F\u6301\u4E45\u8282\u70B9" aria-hidden="true">#</a> \u6CE8\u518C\u5230zookeeper\u7684\u5FAE\u670D\u52A1\u662F\u4E00\u4E2AzNode\u8282\u70B9\uFF0C\u8FD9\u4E2A\u8282\u70B9\u662F\u4E34\u65F6\u8282\u70B9\u8FD8\u662F\u6301\u4E45\u8282\u70B9\uFF1F</h5><p>\u6211\u4EEC\u5728\u6CE8\u518C\u7684\u65F6\u5019\u4F1A\u751F\u6210\u4E00\u4E2A\u6D41\u6C34\u53F7id\uFF0C\u6211\u4EEC\u5C06\u670D\u52A1\u65AD\u5F00\uFF0C\u53D1\u73B0\u521A\u65AD\u5F00\u65F6zookeeper\u8FD8\u4FDD\u5B58\u7740\u8BE5\u670D\u52A1\uFF0C\u7B49\u5F85\u4E00\u6BB5\u65F6\u95F4\u540E\uFF0C\u8BE5\u8282\u70B9\u88AB\u5220\u9664\u3002\u6240\u4EE5\u662F\u4E34\u65F6\u8282\u70B9\u3002\u91CD\u65B0\u542F\u52A88004\u7684\u5FAE\u670D\u52A1\uFF0C\u53EF\u4EE5\u770B\u5230\u751F\u6210\u4E86\u4E00\u4E2A\u65B0\u7684\u6D41\u6C34\u53F7id</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632123316715-436d39fa-96da-463a-9636-c4aeae09bdd6.png" alt="img"></p><h5 id="\u5982\u679C\u5148\u524D\u914D\u7F6E\u4E86zookeeper\u7684\u96C6\u7FA4-\u8BF7\u786E\u4FDD\u4E00\u534A\u4EE5\u4E0A\u7684\u670D\u52A1\u5668\u5904\u4E8E\u5F00\u542F\u72B6\u6001-\u5426\u8005zookeeper\u670D\u52A1\u65E0\u6CD5\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u5982\u679C\u5148\u524D\u914D\u7F6E\u4E86zookeeper\u7684\u96C6\u7FA4-\u8BF7\u786E\u4FDD\u4E00\u534A\u4EE5\u4E0A\u7684\u670D\u52A1\u5668\u5904\u4E8E\u5F00\u542F\u72B6\u6001-\u5426\u8005zookeeper\u670D\u52A1\u65E0\u6CD5\u4F7F\u7528" aria-hidden="true">#</a> \u5982\u679C\u5148\u524D\u914D\u7F6E\u4E86zookeeper\u7684\u96C6\u7FA4\uFF0C\u8BF7\u786E\u4FDD\u4E00\u534A\u4EE5\u4E0A\u7684\u670D\u52A1\u5668\u5904\u4E8E\u5F00\u542F\u72B6\u6001\uFF0C\u5426\u8005zookeeper\u670D\u52A1\u65E0\u6CD5\u4F7F\u7528</h5><h3 id="_3-\u670D\u52A1\u6D88\u8D39\u8005" tabindex="-1"><a class="header-anchor" href="#_3-\u670D\u52A1\u6D88\u8D39\u8005" aria-hidden="true">#</a> 3 \u670D\u52A1\u6D88\u8D39\u8005</h3><h5 id="_3-1-\u65B0\u5EFAcloud-consumerzk-order80" tabindex="-1"><a class="header-anchor" href="#_3-1-\u65B0\u5EFAcloud-consumerzk-order80" aria-hidden="true">#</a> 3.1 \u65B0\u5EFAcloud-consumerzk-order80</h5><h5 id="_3-2-pom" tabindex="-1"><a class="header-anchor" href="#_3-2-pom" aria-hidden="true">#</a> 3.2 pom</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jdk8cloud2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-consumer-order80<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--eureka-client--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- \u5F15\u5165\u81EA\u5DF1\u5B9A\u4E49\u7684api\u901A\u7528\u5305\uFF0C\u53EF\u4EE5\u4F7F\u7528Payment\u652F\u4ED8Entity --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-3-yml" tabindex="-1"><a class="header-anchor" href="#_3-3-yml" aria-hidden="true">#</a> 3.3 yml</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">##80\u8868\u793A\u6CE8\u518C\u5230zookeeper\u670D\u52A1\u5668\u7684\u6D88\u8D39\u670D\u52A1\u63D0\u4F9B\u8005\u7AEF\u53E3\u53F7</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>

<span class="token comment">##\u670D\u52A1\u522B\u540D----\u6CE8\u518Czookeeper\u5230\u6CE8\u518C\u4E2D\u5FC3\u540D\u79F0</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>consumer<span class="token punctuation">-</span>order
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">zookeeper</span><span class="token punctuation">:</span>
      <span class="token key atrule">connect-string</span><span class="token punctuation">:</span> 192.168.190.128<span class="token punctuation">:</span><span class="token number">2181</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-4-\u4E3B\u542F\u52A8\u7C7B" tabindex="-1"><a class="header-anchor" href="#_3-4-\u4E3B\u542F\u52A8\u7C7B" aria-hidden="true">#</a> 3.4. \u4E3B\u542F\u52A8\u7C7B</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderZKMain80</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">OrderZKMain80</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-5-\u914D\u7F6E\u7C7B" tabindex="-1"><a class="header-anchor" href="#_3-5-\u914D\u7F6E\u7C7B" aria-hidden="true">#</a> 3.5. \u914D\u7F6E\u7C7B</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationContextConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@LoadBalanced</span> <span class="token comment">//\u4F7F\u7528@LoadBalanced\u6CE8\u89E3\u8D4B\u4E88RestTemplate\u8D1F\u8F7D\u5747\u8861\u7684\u80FD\u529B</span>
    <span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">restTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-6-\u4E1A\u52A1\u7C7B" tabindex="-1"><a class="header-anchor" href="#_3-6-\u4E1A\u52A1\u7C7B" aria-hidden="true">#</a> 3.6. \u4E1A\u52A1\u7C7B</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderZKController</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> INVOKE_URL <span class="token operator">=</span> <span class="token string">&quot;http://cloud-provider-payment&quot;</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/zk&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span>INVOKE_URL <span class="token operator">+</span> <span class="token string">&quot;/payment/zk&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-7-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_3-7-\u6D4B\u8BD5" aria-hidden="true">#</a> 3.7. \u6D4B\u8BD5</h5><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632127607283-f32e74d9-0fb3-4767-8da9-a6919fd598f1.png" alt="img"></p><h2 id="_3-\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0-consul" tabindex="-1"><a class="header-anchor" href="#_3-\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0-consul" aria-hidden="true">#</a> 3.\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0-Consul</h2><h4 id="_1-consul\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#_1-consul\u7B80\u4ECB" aria-hidden="true">#</a> 1. Consul\u7B80\u4ECB</h4>`,22),_n=a("\u662F\u4EC0\u4E48\uFF1A\u5FAE\u670D\u52A1\u7684\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3 "),xn={href:"https://www.consul.io/docs/intro",target:"_blank",rel:"noopener noreferrer"},qn=a("Consul\u5B98\u7F51"),wn=p("<p>Consul\u662F\u4E00\u5957\u5F00\u6E90\u7684\u5206\u5E03\u5F0F\u670D\u52A1\u53D1\u73B0\u548C\u914D\u7F6E\u7BA1\u7406\u7CFB\u7EDF\uFF0C\u7531HashiCorp\u516C\u53F8\u91C7\u7528Go\u8BED\u8A00\u5F00\u53D1</p><ul><li><p>\u63D0\u4F9B\u4E86\u5FAE\u670D\u52A1\u7CFB\u7EDF\u4E2D\u5FC3\u7684\u670D\u52A1\u6CBB\u7406\uFF0C\u914D\u7F6E\u4E2D\u5FC3\uFF0C\u63A7\u5236\u603B\u7EBF\u7B49\u529F\u80FD\u3002\u8FD9\u4E9B\u529F\u80FD\u4E2D\u7684\u6BCF\u4E00\u4E2A\u90FD\u53EF\u4EE5\u6839\u636E\u9700\u8981\u5355\u72EC\u4F7F\u7528\uFF0C\u4E5F\u53EF\u4EE5\u4E00\u8D77\u4F7F\u7528\uFF0C\u4EE5\u6784\u5EFA\u5168\u65B9\u4F4D\u7684\u670D\u52A1\u7F51\u683C\u3002</p></li><li><p>\u603B\u4E4BConsul\u63D0\u4F9B\u4E86\u4E00\u79CD\u5B8C\u6574\u7684\u670D\u52A1\u7F51\u683C\u89E3\u51B3\u65B9\u6848\u3002</p></li><li><p>\u5B83\u5177\u6709\u5F88\u591A\u4F18\u70B9\uFF1A</p></li><li><ul><li>\u5305\u62EC\uFF0C\u57FA\u4E8Eraft\u534F\u8BAE\uFF0C\u6BD4\u8F83\u7B80\u6D01\uFF1B\u652F\u6301\u5065\u5EB7\u68C0\u67E5\uFF0C\u540C\u65F6\u652F\u6301HTTP\u548CDNS\u534F\u8BAE\u652F\u6301\u8DE8\u6570\u636E\u4E2D\u5FC3\u7684WAN\u96C6\u7FA4\u3002</li><li>\u63D0\u4F9B\u56FE\u5F62\u754C\u9762 \u8DE8\u5E73\u53F0\uFF0C\u652F\u6301Linux\uFF0CMAC\uFF0CWindows</li></ul></li></ul><ol><li>\u80FD\u5E72\u561B\uFF1AThe key features of Consul are:</li></ol><ul><li>Service Discovery\uFF1A\u670D\u52A1\u53D1\u73B0\uFF0C\u63D0\u4F9BHTTP\u548CDNS\u4E24\u79CD\u53D1\u73B0\u65B9\u5F0F</li><li>Health Checking: \u5065\u5EB7\u68C0\u67E5\uFF0C\u652F\u6301\u591A\u79CD\u65B9\u5F0F\uFF0CHTTP\uFF0CTCP\uFF0CDocker\uFF0CShell\u811A\u672C\u5B9A\u5236\u5316</li><li>KV Store: Key\uFF0CValue\u7684\u5B58\u50A8\u65B9\u5F0F</li><li>Secure Service Communication: \u5B89\u5168\u7684\u670D\u52A1\u4EA4\u6D41</li><li>Multi Datacenter:\u591A\u6570\u636E\u4E2D\u5FC3</li><li>\u53EF\u89C6\u5316web\u754C\u9762</li></ul><ol><li>\u4E0B\u8F7D</li></ol>",5),In={href:"https://www.consul.io/downloads",target:"_blank",rel:"noopener noreferrer"},Sn=a("\u4E0B\u8F7D\u9875\u9762"),Cn=n("ol",null,[n("li",null,"\u4E2D\u6587\u6587\u6863")],-1),jn={href:"https://www.springcloud.cc/spring-cloud-consul.html",target:"_blank",rel:"noopener noreferrer"},Pn=a("\u4E2D\u6587\u6587\u6863"),En=p(`<h4 id="_2-\u5B89\u88C5\u5E76\u8FD0\u884Cconsul" tabindex="-1"><a class="header-anchor" href="#_2-\u5B89\u88C5\u5E76\u8FD0\u884Cconsul" aria-hidden="true">#</a> 2. \u5B89\u88C5\u5E76\u8FD0\u884CConsul</h4><p>\u4E0B\u8F7Dzip\u5B8C\u6210\u540E\u89E3\u538B\uFF0C\u53EA\u6709\u4E00\u4E2Aexe\u6587\u4EF6\u3002\u5728\u89E3\u538B\u76EE\u5F55\u4E0B\u6253\u5F00cmd\uFF0C\u8F93\u5165<code>consul --version</code> \u5373\u53EF\u67E5\u770Bconsul\u7248\u672C</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632134305155-6ee9b4de-0fff-45b6-9cec-a64398e35ddf.png" alt="img"></p><p>\u4F7F\u7528\u5F00\u53D1\u8005\u6A21\u5F0F\u542F\u52A8<code>consul agent -dev</code></p><p>\u8BBF\u95EE\u53EF\u89C6\u5316\u9875\u9762\uFF1Alocalhost:8500</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632134497396-98976f5e-978c-452f-8e8a-4c2db48ca5b8.png" alt="img"></p><h4 id="_3-\u751F\u4EA7\u8005\u670D\u52A1\u6CE8\u518C-consul" tabindex="-1"><a class="header-anchor" href="#_3-\u751F\u4EA7\u8005\u670D\u52A1\u6CE8\u518C-consul" aria-hidden="true">#</a> 3. \u751F\u4EA7\u8005\u670D\u52A1\u6CE8\u518C\uFF1Aconsul</h4><h5 id="_3-1-\u65B0\u5EFAmodule\u652F\u4ED8\u670D\u52A1-cloud-providerconsul-payment8006" tabindex="-1"><a class="header-anchor" href="#_3-1-\u65B0\u5EFAmodule\u652F\u4ED8\u670D\u52A1-cloud-providerconsul-payment8006" aria-hidden="true">#</a> 3.1 \u65B0\u5EFAModule\u652F\u4ED8\u670D\u52A1\uFF1Acloud-providerconsul-payment8006</h5><h5 id="_3-2-pom-1" tabindex="-1"><a class="header-anchor" href="#_3-2-pom-1" aria-hidden="true">#</a> 3.2 pom</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jdk8cloud2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-providerconsul-payment8006<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--SpringCloud consul-server --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-consul-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- SpringBoot\u6574\u5408Web\u7EC4\u4EF6 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--\u65E5\u5E38\u901A\u7528jar\u5305\u914D\u7F6E--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-3-yml-1" tabindex="-1"><a class="header-anchor" href="#_3-3-yml-1" aria-hidden="true">#</a> 3.3 yml</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">####consul\u670D\u52A1\u7AEF\u53E3\u53F7</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8006</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> consul<span class="token punctuation">-</span>provider<span class="token punctuation">-</span>payment
  <span class="token comment">#####consul\u6CE8\u518C\u4E2D\u5FC3\u5730\u5740</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">consul</span><span class="token punctuation">:</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8500</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">service-name</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-4-\u4E3B\u542F\u52A8\u7C7B-1" tabindex="-1"><a class="header-anchor" href="#_3-4-\u4E3B\u542F\u52A8\u7C7B-1" aria-hidden="true">#</a> 3.4 \u4E3B\u542F\u52A8\u7C7B</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentMain8006</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">PaymentMain8006</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-5-\u4E1A\u52A1\u7C7B-controller" tabindex="-1"><a class="header-anchor" href="#_3-5-\u4E1A\u52A1\u7C7B-controller" aria-hidden="true">#</a> 3.5 \u4E1A\u52A1\u7C7B(controller)</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${server.port}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> serverPort<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/payment/consul&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentConsul</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;springcloud with consul: &quot;</span> <span class="token operator">+</span> serverPort <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span> <span class="token operator">+</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-6-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_3-6-\u6D4B\u8BD5" aria-hidden="true">#</a> 3.6 \u6D4B\u8BD5</h5><p>\u542F\u52A88006\u670D\u52A1</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632136491958-b3758191-82f6-4e71-adae-f0e1296a012b.png" alt="img"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632136499119-1e05f2ab-5c01-4db5-b2c0-d114a1612e1e.png" alt="img"></p><h4 id="_4-\u6D88\u8D39\u8005\u670D\u52A1\u6CE8\u518C" tabindex="-1"><a class="header-anchor" href="#_4-\u6D88\u8D39\u8005\u670D\u52A1\u6CE8\u518C" aria-hidden="true">#</a> 4 \u6D88\u8D39\u8005\u670D\u52A1\u6CE8\u518C</h4><h5 id="_4-1-\u65B0\u5EFAcloud-consumerconsul-order80" tabindex="-1"><a class="header-anchor" href="#_4-1-\u65B0\u5EFAcloud-consumerconsul-order80" aria-hidden="true">#</a> 4.1 \u65B0\u5EFAcloud-consumerconsul-order80</h5><h5 id="_4-2-pom" tabindex="-1"><a class="header-anchor" href="#_4-2-pom" aria-hidden="true">#</a> 4.2 pom</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jdk8cloud2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-consumerconsul-order80<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--SpringCloud consul-server --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-consul-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- SpringBoot\u6574\u5408Web\u7EC4\u4EF6 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--\u65E5\u5E38\u901A\u7528jar\u5305\u914D\u7F6E--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-3-yml" tabindex="-1"><a class="header-anchor" href="#_4-3-yml" aria-hidden="true">#</a> 4.3 yml</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">####consul\u670D\u52A1\u7AEF\u53E3\u53F7</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>consumer<span class="token punctuation">-</span>order
  <span class="token comment">#####consul\u6CE8\u518C\u4E2D\u5FC3\u5730\u5740</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">consul</span><span class="token punctuation">:</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8500</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token comment">##hostname: 127.0.0.1</span>
        <span class="token key atrule">service-name</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-4-\u4E3B\u542F\u52A8\u7C7B" tabindex="-1"><a class="header-anchor" href="#_4-4-\u4E3B\u542F\u52A8\u7C7B" aria-hidden="true">#</a> 4.4 \u4E3B\u542F\u52A8\u7C7B</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderConsulMain80</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">OrderConsulMain80</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-5-\u914D\u7F6E\u7C7B-\u914D\u7F6Ebean-resttemplate" tabindex="-1"><a class="header-anchor" href="#_4-5-\u914D\u7F6E\u7C7B-\u914D\u7F6Ebean-resttemplate" aria-hidden="true">#</a> 4.5 \u914D\u7F6E\u7C7B \u914D\u7F6EBean RestTemplate</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationContextConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@LoadBalanced</span>
    <span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">getRestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-6-\u4E1A\u52A1\u7C7Bcontroller" tabindex="-1"><a class="header-anchor" href="#_4-6-\u4E1A\u52A1\u7C7Bcontroller" aria-hidden="true">#</a> 4.6 \u4E1A\u52A1\u7C7Bcontroller</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderConsulController</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> INVOKE_URL <span class="token operator">=</span> <span class="token string">&quot;http://cloud-provider-pament&quot;</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/consul&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span>INVOKE_URL<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u6D88\u8D39\u8005\u8C03\u7528\u652F\u4ED8\u670D\u52A1(consule)---&gt;result:&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-7-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_4-7-\u6D4B\u8BD5" aria-hidden="true">#</a> 4.7 \u6D4B\u8BD5</h5><h2 id="_4-\u4E09\u4E2A\u6CE8\u518C\u4E2D\u5FC3\u7684\u5F02\u540C\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-\u4E09\u4E2A\u6CE8\u518C\u4E2D\u5FC3\u7684\u5F02\u540C\u70B9" aria-hidden="true">#</a> 4.\u4E09\u4E2A\u6CE8\u518C\u4E2D\u5FC3\u7684\u5F02\u540C\u70B9</h2><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632138989354-c4630f66-bb8c-4fe4-9f46-926817f96034.png" alt="img"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632138998622-19096fdf-3daf-4da5-b508-ca18bdba6cf7.png" alt="img"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632139247280-15047525-8832-4823-b3a5-2a9c4831f7c8.png" alt="img"></p><h3 id="cap\u7406\u8BBA" tabindex="-1"><a class="header-anchor" href="#cap\u7406\u8BBA" aria-hidden="true">#</a> CAP\u7406\u8BBA</h3><ul><li>Consistency\uFF08\u4E00\u81F4\u6027\uFF09\uFF1A\u5373\u66F4\u65B0\u64CD\u4F5C\u6210\u529F\u5E76\u8FD4\u56DE\u5BA2\u6237\u7AEF\u540E\uFF0C\u6240\u6709\u8282\u70B9\u5728\u540C\u4E00\u65F6\u95F4\u7684\u6570\u636E\u5B8C\u5168\u4E00\u81F4\u3002\u5BF9\u4E8E\u5BA2\u6237\u7AEF\u6765\u8BF4\uFF0C\u4E00\u81F4\u6027\u6307\u7684\u662F\u5E76\u53D1\u8BBF\u95EE\u65F6\u66F4\u65B0\u8FC7\u7684\u6570\u636E\u5982\u4F55\u83B7\u53D6\u7684\u95EE\u9898\u3002\u4ECE\u670D\u52A1\u7AEF\u6765\u770B\uFF0C\u5219\u662F\u66F4\u65B0\u5982\u4F55\u590D\u5236\u5206\u5E03\u5230\u6574\u4E2A\u7CFB\u7EDF\uFF0C\u4EE5\u4FDD\u8BC1\u6570\u636E\u6700\u7EC8\u4E00\u81F4\u3002</li><li>Avaliability\uFF08\u53EF\u7528\u6027\uFF09\uFF1A\u5373\u670D\u52A1\u4E00\u76F4\u53EF\u7528\uFF0C\u800C\u4E14\u662F\u6B63\u5E38\u54CD\u5E94\u65F6\u95F4\u3002\u7CFB\u7EDF\u80FD\u591F\u5F88\u597D\u7684\u4E3A\u7528\u6237\u670D\u52A1\uFF0C\u4E0D\u51FA\u73B0\u7528\u6237\u64CD\u4F5C\u5931\u8D25\u6216\u8005\u8BBF\u95EE\u8D85\u65F6\u7B49\u7528\u6237\u4F53\u9A8C\u4E0D\u597D\u7684\u60C5\u51B5\u3002</li><li>Partition Tolerance\uFF08\u5206\u533A\u5BB9\u9519\u6027\uFF09\uFF1A\u5373\u5206\u5E03\u5F0F\u7CFB\u7EDF\u5728\u9047\u5230\u67D0\u8282\u70B9\u6216\u7F51\u7EDC\u6545\u969C\u7684\u65F6\u5019\uFF0C\u4ECD\u7136\u80FD\u591F\u5BF9\u5916\u63D0\u4F9B\u6EE1\u8DB3\u4E00\u81F4\u6027\u548C\u53EF\u7528\u6027\u7684\u670D\u52A1\u3002\u5206\u533A\u5BB9\u9519\u6027\u8981\u6C42\u5E94\u7528\u867D\u7136\u662F\u4E00\u4E2A\u5206\u5E03\u5F0F\u7CFB\u7EDF\uFF0C\u4F46\u770B\u4E0A\u53BB\u5207\u597D\u50CF\u662F\u5728\u4E00\u4E2A\u53EF\u4EE5\u8FD0\u8F6C\u6B63\u5E38\u7684\u6574\u4F53\u3002\u6BD4\u5982\u73B0\u5728\u7684\u5206\u5E03\u5F0F\u7CFB\u7EDF\u4E2D\u6709\u67D0\u4E00\u4E2A\u6216\u8005\u51E0\u4E2A\u673A\u5668\u5B95\u6389\u4E86\uFF0C\u5176\u4ED6\u5269\u4E0B\u7684\u673A\u5668\u8FD8\u80FD\u591F\u6B63\u5E38\u8FD0\u8F6C\u6EE1\u8DB3\u7CFB\u7EDF\u8981\u6C42\uFF0C\u5BF9\u4E8E\u7528\u6237\u800C\u8A00\u5E76\u6CA1\u6709\u4EC0\u4E48\u4F53\u9A8C\u4E0A\u7684\u5F71\u54CD\u3002</li><li>CP\u548CAP\uFF1A\u5206\u5E03\u5F0F\u4E2D\uFF0C**\u5206\u533A\u5BB9\u9519\uFF08P\uFF09<strong>\u662F\u5FC5\u987B\u4FDD\u8BC1\u7684\uFF0C\u5F53\u53D1\u751F\u7F51\u7EDC\u5206\u533A\u7684\u65F6\u5019\uFF0C\u5982\u679C\u8981\u7EE7\u7EED\u670D\u52A1\uFF0C\u90A3\u4E48</strong>\u5F3A\u4E00\u81F4\u6027\uFF08C\uFF09<strong>\u548C</strong>\u53EF\u7528\u6027\uFF08A\uFF09**\u53EA\u80FD2\u90091</li></ul><p><strong>CAP\u7406\u8BBA\u5173\u6CE8\u7C92\u5EA6\u662F\u6570\u636E\uFF0C\u800C\u4E0D\u662F\u6574\u4F53\u7CFB\u7EDF\u8BBE\u8BA1\u7684\u7B56\u7565</strong></p><h4 id="ap\u67B6\u6784" tabindex="-1"><a class="header-anchor" href="#ap\u67B6\u6784" aria-hidden="true">#</a> AP\u67B6\u6784</h4><p>\u5F53\u7F51\u7EDC\u5206\u533A\u51FA\u73B0\u540E\uFF0C\u4E3A\u4E86\u4FDD\u8BC1\u53EF\u7528\u6027\uFF0C\u7CFB\u7EDFB\u53EF\u4EE5\u8FD4\u56DE\u65E7\u503C\uFF0C\u4FDD\u8BC1\u7CFB\u7EDF\u7684\u53EF\u7528\u6027\u3002</p><p><strong>\u7ED3\u8BBA\uFF1A\u8FDD\u80CC\u4E86\u4E00\u81F4\u6027C\u7684\u8981\u6C42\uFF0C\u53EA\u6EE1\u8DB3\u53EF\u7528\u6027\u548C\u5206\u533A\u5BB9\u9519\uFF0C\u5373AP</strong></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632139884470-747378e8-5f43-47d4-99f3-2a21d3a5173f.png" alt="img"></p><h4 id="cp\u67B6\u6784" tabindex="-1"><a class="header-anchor" href="#cp\u67B6\u6784" aria-hidden="true">#</a> CP\u67B6\u6784</h4><p>\u5F53\u7F51\u7EDC\u5206\u533A\u51FA\u73B0\u540E\uFF0C\u4E3A\u4E86\u4FDD\u8BC1\u4E00\u81F4\u6027\uFF0C\u5C31\u5FC5\u987B\u62D2\u63A5\u8BF7\u6C42\uFF0C\u5426\u5219\u65E0\u6CD5\u4FDD\u8BC1\u4E00\u81F4\u6027</p><p><strong>\u7ED3\u8BBA\uFF1A\u8FDD\u80CC\u4E86\u53EF\u7528\u6027A\u7684\u8981\u6C42\uFF0C\u53EA\u6EE1\u8DB3\u4E00\u81F4\u6027\u548C\u5206\u533A\u5BB9\u9519\uFF0C\u5373CP</strong></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632139926563-5e85aa66-6b26-45f1-a112-255c1f0d93a1.png" alt="img"></p><ol><li>\u6700\u591A\u53EA\u80FD\u540C\u65F6\u8F83\u597D\u7684\u6EE1\u8DB3\u4E24\u4E2A</li></ol><p>CAP\u7406\u8BBA\u7684\u6838\u5FC3\uFF1A\u4E00\u4E2A\u5206\u5E03\u5F0F\u7CFB\u7EDF\u4E0D\u53EF\u80FD\u540C\u65F6\u5F88\u597D\u7684\u6EE1\u8DB3\u4E09\u4E2A\u9700\u6C42\u3002\u56E0\u6B64\u6839\u636ECAP\u539F\u7406\u5C06 NOSQL\u6570\u636E\u5E93\u5206\u6210\u4E86\u6EE1\u8DB3CA\u539F\u5219\uFF0C\u6EE1\u8DB3CP\u539F\u5219\u548C\u6EE1\u8DB3AP\u539F\u5219\u4E09\u5927\u7C7B\u3002</p><ul><li>CA\uFF1A\u5355\u70B9\u96C6\u7FA4\uFF0C\u6EE1\u8DB3\u4E00\u81F4\u6027\uFF0C\u53EF\u7528\u6027\u7684\u7CFB\u7EDF\uFF0C\u901A\u5E38\u6269\u5C55\u6027\u4E0D\u5F3A\u5927\u3002</li><li>CP\uFF1A\u6EE1\u8DB3\u4E00\u81F4\u6027\uFF0C\u5206\u533A\u5BB9\u9519\u6027\u7684\u7CFB\u7EDF\uFF0C\u5BF9\u6570\u636E\u4E00\u81F4\u6027\u8981\u6C42\u9AD8\uFF0C\u6240\u4EE5\u6027\u80FD\u8D1F\u62C5\u5927\u3002 Zookeeper/Consul \u8981\u6C42\u6570\u636E\u5FC5\u987B\u4E00\u81F4\u6027\u3002</li><li>AP\uFF1A\u6EE1\u8DB3\u53EF\u7528\u6027\uFF0C\u5206\u8BB8\u5BB9\u9519\u6027\u7684\u7CFB\u7EDF\uFF0C\u901A\u5E38\u53EF\u80FD\u5BF9\u4E00\u81F4\u6027\u8981\u6C42\u4F4E\u4E00\u4E9B\u3002 Eureka \u573A\u666F\uFF1A\u5546\u573A\uFF0C\u6682\u65F6\u4E0D\u4E00\u81F4\u9519\u4E00\u70B9\u6CA1\u5173\u7CFB\uFF0C\u53EA\u8981\u80FD\u6B63\u5E38\u8BBF\u95EE\u4E0B\u5355\u5373\u53EF\u3002 Eureka\u901A\u8FC7\u8BBE\u7F6E\u4E00\u4E9B\u5C5E\u6027\uFF0C\u4E5F\u53EF\u4EE5\u901A\u8FC7\u727A\u7272\u9AD8\u53EF\u7528\u6027\u5B9E\u73B0\u4E00\u81F4\u6027\u7684\u8981\u6C42\u3002</li></ul><ol start="2"><li>\u5206\u5E03\u5F0F\u5FC5\u987B\u6EE1\u8DB3:P: Partition tolerance \u5206\u533A\u5BB9\u9519\u6027</li></ol><ul><li>Eureka\u4E3B\u8981\u4FDD\u8BC1\u9AD8\u53EF\u7528\uFF1AAP</li><li>Zookeeper/Consul\u4E3B\u8981\u4FDD\u8BC1\u6570\u636E\u7684\u4E00\u81F4\uFF1ACP</li></ul><h3 id="web\u754C\u9762" tabindex="-1"><a class="header-anchor" href="#web\u754C\u9762" aria-hidden="true">#</a> web\u754C\u9762</h3><ul><li>Eureka/Consul\u90FD\u6709\u4E00\u4E2Aweb\u754C\u9762\u3002</li><li>Zookeeper\u53EA\u6709\u4E00\u4E2Alinux\u5BA2\u6237\u7AEF\u3002</li></ul><h2 id="_5-\u670D\u52A1\u8C03\u7528-ribbon\u8D1F\u8F7D\u5747\u8861\u670D\u52A1\u8C03\u7528" tabindex="-1"><a class="header-anchor" href="#_5-\u670D\u52A1\u8C03\u7528-ribbon\u8D1F\u8F7D\u5747\u8861\u670D\u52A1\u8C03\u7528" aria-hidden="true">#</a> 5.\u670D\u52A1\u8C03\u7528-Ribbon\u8D1F\u8F7D\u5747\u8861\u670D\u52A1\u8C03\u7528</h2><h3 id="\u4E00\u3001ribbon\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001ribbon\u6982\u8FF0" aria-hidden="true">#</a> \u4E00\u3001Ribbon\u6982\u8FF0</h3><p>SpringCloud Ribbon \u662F\u57FA\u4E8ENetflix Ribbon\u5B9E\u73B0\u7684\u4E00\u5957\u5BA2\u6237\u7AEF\uFF0C\u8D1F\u8F7D\u5747\u8861\u7684\u5DE5\u5177\u3002</p><p>\u7B80\u5355\u7684\u8BF4\uFF0CRibbon\u662FNetflix\u53D1\u5E03\u7684\u5F00\u6E90\u9879\u76EE\uFF0C\u4E3B\u8981\u529F\u80FD\u662F\u63D0\u4F9B\u5BA2\u6237\u7AEF\u7684\u8F6F\u4EF6\u8D1F\u8F7D\u5747\u8861\u7B97\u6CD5\u548C\u670D\u52A1\u8C03\u7528\uFF0CRibbon\u5BA2\u6237\u7AEF\u7EC4\u4EF6\u63D0\u4F9B\u4E00\u7CFB\u5217\u5B8C\u5584\u7684\u914D\u7F6E\u9879\u5982\u8FDE\u63A5\u8D85\u65F6\uFF0C\u91CD\u8BD5\u7B49\u3002\u7B80\u5355\u7684\u8BF4\uFF0C\u5C31\u662F\u914D\u7F6E\u6587\u4EF6\u4E2D\u5217\u51FALoad Banlancer (\u7B80\u79F0LB) \u540E\u9762\u6240\u6709\u7684\u673A\u5668\uFF0CRibbon\u90FD\u4F1A\u81EA\u52A8\u7684\u5E2E\u52A9\u4F60\u57FA\u4E8E\u67D0\u79CD\u89C4\u5219\uFF08\u5982\u7B80\u5355\u8F6E\u8BE2\uFF0C\u968F\u673A\u8FDE\u63A5\u7B49\uFF09\u53BB\u8FDE\u63A5\u8FD9\u4E9B\u673A\u5668\u3002\u6211\u4EEC\u5F88\u5BB9\u6613\u4F7F\u7528Ribbon\u5B9E\u73B0\u81EA\u5B9A\u4E49\u7684\u8D1F\u8F7D\u5747\u8861\u7B97\u6CD5\u3002</p>`,57),Rn=a("\u5B98\u7F51\uFF1A "),Mn={href:"https://github.com/Netflix/ribbon/wiki/Getting-Started",target:"_blank",rel:"noopener noreferrer"},Tn=a("https://github.com/Netflix/ribbon/wiki/Getting-Started"),Hn=p(`<p>Ribbon\u5DF2\u7ECF\u8FDB\u5165\u7EF4\u62A4\u6A21\u5F0F\uFF01\u672A\u6765\u7684\u66FF\u6362\u65B9\u6848\uFF1ALoad Banlancer</p><h4 id="_1\u3001ribbon\u80FD\u4F5C\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#_1\u3001ribbon\u80FD\u4F5C\u4EC0\u4E48" aria-hidden="true">#</a> 1\u3001Ribbon\u80FD\u4F5C\u4EC0\u4E48</h4><h5 id="_1-1-lb-\u8D1F\u8F7D\u5747\u8861" tabindex="-1"><a class="header-anchor" href="#_1-1-lb-\u8D1F\u8F7D\u5747\u8861" aria-hidden="true">#</a> 1.1 LB \uFF08\u8D1F\u8F7D\u5747\u8861\uFF09</h5><p><strong>LB \u8D1F\u8F7D\u5747\u8861 Load balance \u662F\u4EC0\u4E48</strong></p><p>\u7B80\u5355\u7684\u8BF4\u5C31\u662F\u5C06\u7528\u6237\u7684\u8BF7\u6C42\u5E73\u644A\u7684\u5206\u914D\u5230\u591A\u4E2A\u670D\u52A1\u4E0A\uFF0C\u4ECE\u800C\u8FBE\u5230\u7CFB\u7EDF\u7684HA\uFF08\u9AD8\u53EF\u7528\uFF09</p><p>\u5E38\u89C1\u7684\u8D1F\u8F7D\u5747\u8861\u6709\u8F6F\u4EF6 Nginx LVS \u786C\u4EF6F5\u7B49</p><p><strong>\u5E38\u89C1\u7684\u8D1F\u8F7D\u5747\u8861\u7B97\u6CD5</strong></p><ul><li><p><strong>\u8F6E\u8BE2</strong>\uFF1A\u4E3A\u7B2C\u4E00\u4E2A\u8BF7\u6C42\u9009\u62E9\u5065\u5EB7\u6C60\u4E2D\u7684\u7B2C\u4E00\u4E2A\u540E\u7AEF\u670D\u52A1\u5668\uFF0C\u7136\u540E\u6309\u987A\u5E8F\u5F80\u540E\u4F9D\u6B21\u9009\u62E9\uFF0C\u76F4\u5230\u6700\u540E\u4E00\u4E2A\uFF0C\u7136\u540E\u5FAA\u73AF\u3002</p></li><li><p><strong>\u6700\u5C0F\u8FDE\u63A5</strong>\uFF1A\u4F18\u5148\u9009\u62E9\u8FDE\u63A5\u6570\u6700\u5C11\uFF0C\u4E5F\u5C31\u662F\u538B\u529B\u6700\u5C0F\u7684\u540E\u7AEF\u670D\u52A1\u5668\uFF0C\u5728\u4F1A\u8BDD\u8F83\u957F\u7684\u60C5\u51B5\u4E0B\u53EF\u4EE5\u8003\u8651\u91C7\u53D6\u8FD9\u79CD\u65B9\u5F0F\u3002</p></li><li><p><strong>\u6563\u5217</strong>\uFF1A\u6839\u636E\u8BF7\u6C42\u6E90\u7684 IP \u7684\u6563\u5217\uFF08hash\uFF09\u6765\u9009\u62E9\u8981\u8F6C\u53D1\u7684\u670D\u52A1\u5668\u3002\u8FD9\u79CD\u65B9\u5F0F\u53EF\u4EE5\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u4FDD\u8BC1\u7279\u5B9A\u7528\u6237\u80FD\u8FDE\u63A5\u5230\u76F8\u540C\u7684\u670D\u52A1\u5668\u3002\u5982\u679C\u4F60\u7684\u5E94\u7528\u9700\u8981\u5904\u7406\u72B6\u6001\u800C\u8981\u6C42\u7528\u6237\u80FD\u8FDE\u63A5\u5230\u548C\u4E4B\u524D\u76F8\u540C\u7684\u670D\u52A1\u5668\uFF0C\u53EF\u4EE5\u8003\u8651\u91C7\u53D6\u8FD9\u79CD\u65B9\u5F0F\u3002</p></li></ul><p><strong>Ribbon\u672C\u5730\u8D1F\u8F7D\u5747\u8861\u5BA2\u6237\u7AEFVS Nginx \u670D\u52A1\u7AEF\u8D1F\u8F7D\u5747\u8861\u533A\u522B</strong></p><ul><li>Nginx\u662F\u670D\u52A1\u5668\u8D1F\u8F7D\u5747\u8861\uFF0C\u5BA2\u6237\u7AEF\u6240\u6709\u8BF7\u6C42\u90FD\u4F1A\u4EA4\u7ED9Nginx\uFF0C\u7136\u540E\u7531Nginx\u5B9E\u73B0\u8F6C\u53D1\u8BF7\u6C42\uFF0C\u5373\u8D1F\u8F7D\u5747\u8861\u662F\u7531\u670D\u52A1\u7AEF\u5B9E\u73B0\u7684</li><li>Ribbon \u672C\u5730\u8D1F\u8F7D\u5747\u8861\uFF0C\u5728\u8C03\u7528\u5FAE\u670D\u52A1\u63A5\u53E3\u65F6\u5019\uFF0C\u4F1A\u5728\u6CE8\u518C\u4E2D\u5FC3\u4E0A\u83B7\u53D6\u6CE8\u518C\u4FE1\u606F\u670D\u52A1\u5217\u8868\u4E4B\u540E\u7F13\u5B58\u5230JVM\u672C\u5730\uFF0C\u4ECE\u800C\u5728\u672C\u5730\u5B9E\u73B0RPC\u8FDC\u7A0B\u670D\u52A1\u8C03\u7528\u6280\u672F</li></ul><p>####### 1.1.2 \u96C6\u4E2D\u5F0F LB</p><ul><li>\u96C6\u4E2D\u5F0FLB\uFF1A\u5373\u5728\u670D\u52A1\u7684\u6D88\u8D39\u65B9\u548C\u63D0\u4F9B\u65B9\u4E4B\u95F4\u4F7F\u7528\u72EC\u7ACB\u7684LB\u8BBE\u65BD\uFF08\u53EF\u4EE5\u662F\u786C\u4EF6\uFF0C\u5982F5\uFF0C\u4E5F\u53EF\u4EE5\u662F\u8F6F\u4EF6\uFF0C\u5982Nginx\uFF09\uFF0C\u7531\u8BE5\u8BBE\u65BD\u8D1F\u8D23\u628A\u8BBF\u95EE\u8BF7\u6C42\u901A\u8FC7\u67D0\u79CD\u7B56\u7565\u8F6C\u53D1\u81F3\u670D\u52A1\u7684\u63D0\u4F9B\u65B9\u3002</li></ul><p>####### 1.1.3 \u8FDB\u7A0B\u5185 LB</p><ul><li>\u5C06LB\u903B\u8F91\u96C6\u6210\u5230\u6D88\u8D39\u65B9\uFF0C\u6D88\u8D39\u65B9\u4ECE\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u83B7\u77E5\u6709\u54EA\u4E9B\u5730\u5740\u53EF\u7528\uFF0C\u7136\u540E\u81EA\u5DF1\u518D\u4ECE\u8FD9\u4E9B\u5730\u5740\u4E2D\u9009\u62E9\u51FA\u4E00\u4E2A\u4F55\u65F6\u7684\u670D\u52A1\u5668\u3002</li><li>Ribbon\u5C31\u5C5E\u4E8E\u662F\u8FDB\u7A0B\u5185LB, \u5B83\u53EA\u662F\u4E00\u4E2A\u7C7B\u5E93\uFF0C\u96C6\u6210\u4E8E\u6D88\u8D39\u65B9\u8FDB\u7A0B\uFF0C\u6D88\u8D39\u65B9\u901A\u8FC7\u5B83\u6765\u83B7\u53D6\u5230\u670D\u52A1\u63D0\u4F9B\u65B9\u7684\u5730\u5740\u3002</li></ul><p>\u4E00\u53E5\u8BDD\u603B\u7ED3Ribbon\uFF1ARibbon\u662F\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861\u7684\u4E00\u5957\u5BA2\u6237\u7AEF\u5DE5\u5177\u7ED3\u5408RestTemplate\u5B9E\u73B0\u8C03\u7528\u3002</p><h3 id="\u4E8C\u3001\u8D1F\u8F7D\u5747\u8861\u6F14\u793A" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001\u8D1F\u8F7D\u5747\u8861\u6F14\u793A" aria-hidden="true">#</a> \u4E8C\u3001\u8D1F\u8F7D\u5747\u8861\u6F14\u793A</h3><h4 id="_2-1-\u67B6\u6784\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#_2-1-\u67B6\u6784\u8BF4\u660E" aria-hidden="true">#</a> 2.1 \u67B6\u6784\u8BF4\u660E</h4><p><strong>\u603B\u7ED3\uFF1ARibbon\u5176\u5B9E\u5C31\u662F\u4E00\u4E2A\u8F6F\u8D1F\u8F7D\u5747\u8861\u7684\u5BA2\u6237\u7AEF\u7EC4\u4EF6\u3002</strong></p><p>\u5B83\u53EF\u4EE5\u548C\u5176\u4ED6\u6240\u9700\u8BF7\u6C42\u7684\u5BA2\u6237\u7AEF\u7ED3\u5408\u4F7F\u7528\uFF0C\u548Ceureka\u7ED3\u5408\u53EA\u662F\u5176\u4E2D\u4E00\u4E2A\u5B9E\u4F8B</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632144649154-01a7d823-0bf7-4ea2-82c5-50f0d1c4642c.png" alt="img"></p><h5 id="_2-1-1-ribbon\u5728\u5DE5\u4F5C\u65F6\u5206\u6210\u4E24\u6B65" tabindex="-1"><a class="header-anchor" href="#_2-1-1-ribbon\u5728\u5DE5\u4F5C\u65F6\u5206\u6210\u4E24\u6B65" aria-hidden="true">#</a> 2.1.1 Ribbon\u5728\u5DE5\u4F5C\u65F6\u5206\u6210\u4E24\u6B65</h5><ul><li>\u7B2C\u4E00\u6B65\u5148\u9009\u62E9EurekaServer\uFF0C\u5B83\u4F18\u5148\u9009\u62E9\u5728\u540C\u4E00\u4E2A\u533A\u57DF\u5185\u8D1F\u8F7D\u8F83\u5C11\u7684server</li><li>\u7B2C\u4E8C\u90E8\u518D\u6839\u636E\u7528\u6237\u6307\u5B9A\u7684\u7B56\u7565\uFF0C\u518D\u4ECEserver\u53D6\u5230\u7684\u670D\u52A1\u6CE8\u518C\u5217\u8868\u4E2D\u9009\u62E9\u4E00\u4E2A\u5730\u5740\u3002</li></ul><p>\u5176\u4E2DRibbon\u63D0\u4F9B\u4E86\u591A\u79CD\u7B56\u7565\uFF1A\u6BD4\u5982 <strong>\u8F6E\u8BE2\uFF0C\u968F\u673A\u548C\u6839\u636E\u54CD\u5E94\u65F6\u95F4\u52A0\u6743\u3002</strong></p><h5 id="_2-1-2-\u4E3A\u4EC0\u4E48\u6CA1\u6709\u5F15\u5165ribbon\u4E5F\u53EF\u4EE5\u5B8C\u6210\u8D1F\u8F7D\u5747\u8861" tabindex="-1"><a class="header-anchor" href="#_2-1-2-\u4E3A\u4EC0\u4E48\u6CA1\u6709\u5F15\u5165ribbon\u4E5F\u53EF\u4EE5\u5B8C\u6210\u8D1F\u8F7D\u5747\u8861" aria-hidden="true">#</a> 2.1.2 \u4E3A\u4EC0\u4E48\u6CA1\u6709\u5F15\u5165Ribbon\u4E5F\u53EF\u4EE5\u5B8C\u6210\u8D1F\u8F7D\u5747\u8861\uFF1F</h5><p>\u4E4B\u524D\u6211\u4EEC\u5199\u6837\u4F8B\u7684\u65F6\u5019\u6CA1\u6709\u5F15\u5165spring-cloud-start-ribbon\u4E5F\u53EF\u4EE5\u4F7F\u7528ribbon\u6211\u4EEC\u901A\u8FC7\u4E00\u4E2A\u6CE8\u89E3\uFF1A@LoadBalanced\u8D4B\u4E88\u4E86RestTemplate\u8D1F\u8F7D\u5747\u8861\u7684\u80FD\u529B\uFF1B</p><p>\u539F\u56E0\u662Fspring-boot-netfix-eureka-client\u81EA\u5E26\u4E86spring-starter-ribbon\u5F15\u7528</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632145058603-a4a456c6-25a1-492c-a88b-bf14167419a0.png" alt="img"></p><p>\u56E0\u6B64\u6211\u4EEC\u4E0D\u9700\u8981\u518D\u6B21\u5656\u65E5Ribbon\u5750\u6807\uFF0C\u56E0\u4E3A\u6211\u4EEC\u5DF2\u7ECF\u5F15\u5165\u4E86spring-boot-netfix-eureka-client\uFF0C\u91CC\u9762\u81EA\u5E26Ribbon\u5305\u3002</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2-\u4E8C\u8BF4resttemplate\u7684\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_2-2-\u4E8C\u8BF4resttemplate\u7684\u4F7F\u7528" aria-hidden="true">#</a> 2.2. \u4E8C\u8BF4RestTemplate\u7684\u4F7F\u7528</h4><p>\u4E3A\u4EC0\u4E48\u8BF4\u5B83\uFF1A \u6240\u8C13\u7684\u8D1F\u8F7D\u5747\u8861\uFF0C\u5C31\u662FRibbon\u7ED3\u5408RestTemplate\u5B9E\u73B0\u8C03\u7528\u5FAE\u670D\u52A1\u4E4B\u95F4\u7684\u8C03\u7528\u3002</p><h5 id="_2-2-1-getforobject\u65B9\u6CD5-getforentity\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_2-2-1-getforobject\u65B9\u6CD5-getforentity\u65B9\u6CD5" aria-hidden="true">#</a> 2.2.1 getForObject\u65B9\u6CD5/getForEntity\u65B9\u6CD5</h5><p><code>getForObject()</code> // \u8FD4\u56DE\u5BF9\u8C61\u4E3A\u54CD\u5E94\u4F53\u4E2D\u6570\u636E\u8F6C\u5316\u6210\u7684\u5BF9\u8C61\uFF0C\u57FA\u672C\u4E0A\u53EF\u4EE5\u7406\u89E3\u4E3AJSON</p><p><code>getForEntity()</code> // \u8FD4\u56DE\u5BF9\u8C61\u4E3AResponseEntity\u5BF9\u8C61\uFF0C\u5305\u542B\u4E86\u54CD\u5E94\u4E2D\u7684\u4E00\u4E9B\u91CD\u8981\u4FE1\u606F\uFF0C\u6BD4\u5982\u54CD\u5E94\u5934\uFF0C\u54CD\u5E94\u72B6\u6001\u7801\uFF0C\u54CD\u5E94\u4F53\u7B49\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632145547899-2f366319-6ea2-4150-8581-fbd638932f68.png" alt="img"></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> <span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/get/{id}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">getPayment</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u8FD4\u56DE\u5BF9\u8C61\u4E3A\u54CD\u5E94\u4F53\u4E2D\u6570\u636E\u8F6C\u5316\u6210\u7684\u5BF9\u8C61\uFF0C\u57FA\u672C\u4E0A\u53EF\u4EE5\u7406\u89E3\u4E3AJSON</span>
    <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span>PAYMENT_URL <span class="token operator">+</span> <span class="token string">&quot;/payment/get/&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">,</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> <span class="token function">getForEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token doc-comment comment">/**
 * \u6D4B\u8BD5getForEntity   cloud-consumer-order80\u6A21\u5757\uFF0COrderController\u7C7B\u4E2D
 */</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/getForEntity/{id}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">getPayment2</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u8FD4\u56DE\u5BF9\u8C61\u4E3AResponseEntity\u5BF9\u8C61\uFF0C\u5305\u542B\u4E86\u54CD\u5E94\u4E2D\u7684\u4E00\u4E9B\u91CD\u8981\u4FE1\u606F\uFF0C\u6BD4\u5982\u54CD\u5E94\u5934\uFF0C\u54CD\u5E94\u72B6\u6001\u7801\uFF0C\u54CD\u5E94\u4F53\u7B49\u3002</span>
    <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CommonResult</span><span class="token punctuation">&gt;</span></span> entity <span class="token operator">=</span>  restTemplate<span class="token punctuation">.</span><span class="token function">getForEntity</span><span class="token punctuation">(</span>PAYMENT_URL <span class="token operator">+</span> <span class="token string">&quot;/payment/get/&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">,</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>entity<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is2xxSuccessful</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>entity<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span> <span class="token operator">+</span> entity<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> entity<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">444</span><span class="token punctuation">,</span> <span class="token string">&quot;\u64CD\u4F5C\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u4E9B\u65B9\u6CD5\u5BF9\u5E94\u7740\u5404\u79CDHTTP\u72B6\u6001\u7801\uFF0C\u53EF\u4EE5\u7528\u6765\u5224\u65AD\u8FD4\u56DE\u7684entity\u5BF9\u8C61\u5305\u542B\u7684\u662F\u54EA\u79CD\u72B6\u6001\u7801\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632146060445-c401b89a-8389-4be8-8657-47c95d97a1e0.png" alt="img"></p><p>\u53EF\u4EE5\u8DD1\u901A\u3002\u53EF\u4EE5\u7528entity\u83B7\u53D6\u66F4\u8BE6\u7EC6\u7684\u4FE1\u606F\uFF0C\u6BD4\u5982\u5934\u4FE1\u606F\uFF0C\u54CD\u5E94\u4F53\uFF0C\u72B6\u6001\u7801\u7B49\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632146280069-a544fe14-3fd8-40d5-a66f-0651d4d81023.png" alt="img"></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>entity<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span> <span class="token operator">+</span> entity<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="_2-2-2-postforobject-postforentity" tabindex="-1"><a class="header-anchor" href="#_2-2-2-postforobject-postforentity" aria-hidden="true">#</a> 2.2.2 postForObject/postForEntity</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>postForObject<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/create&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Payment</span> payment<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;80\u6536\u5230\u7684\u53C2\u6570\uFF1A&quot;</span> <span class="token operator">+</span> payment<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">postForObject</span><span class="token punctuation">(</span>PAYMENT_URL <span class="token operator">+</span> <span class="token string">&quot;/payment/create&quot;</span><span class="token punctuation">,</span> payment<span class="token punctuation">,</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>postForEntity<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token doc-comment comment">/**
 * \u6D4B\u8BD5postForEntity  cloud-consumer-order80\u6A21\u5757\uFF0COrderController\u7C7B\u4E2D
 */</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/postForEntity/create&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">create2</span><span class="token punctuation">(</span><span class="token class-name">Payment</span> payment<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;80\u6536\u5230\u7684\u53C2\u6570\uFF1A&quot;</span> <span class="token operator">+</span> payment<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CommonResult</span><span class="token punctuation">&gt;</span></span> entity <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">postForEntity</span><span class="token punctuation">(</span>PAYMENT_URL <span class="token operator">+</span> <span class="token string">&quot;/payment/create&quot;</span><span class="token punctuation">,</span> payment<span class="token punctuation">,</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>entity<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is2xxSuccessful</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>entity<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span> <span class="token operator">+</span>entity<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> entity<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">,</span> <span class="token string">&quot;\u64CD\u4F5C\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528postman\u6D4B\u8BD5</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632147956124-b78e0a30-7bab-4bb1-b952-7fd41c0fc0be.png" alt="img"></p><p>\u6D4B\u8BD5\u6210\u529F</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632148029855-d8521a36-6910-4d4f-9e76-95ebf67b7b10.png" alt="img"></p><p>\u6570\u636E\u5E93\u4E2D\u4E5F\u589E\u52A0\u4E86\u76F8\u5E94\u6570\u636E<img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632148055255-1c5191b2-78ab-4dd0-a830-13622cd3f88d.png" alt="img"></p><h3 id="\u4E09\u3001ribbon\u6838\u5FC3\u7EC4\u4EF6-irule\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001ribbon\u6838\u5FC3\u7EC4\u4EF6-irule\u63A5\u53E3" aria-hidden="true">#</a> \u4E09\u3001Ribbon\u6838\u5FC3\u7EC4\u4EF6\uFF1AIRule\u63A5\u53E3</h3><h4 id="_3-1-irule\u63A5\u53E3\u7684\u5404\u5B9E\u73B0\u7C7B-\u4EE5\u53CA\u5BF9\u5E94\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#_3-1-irule\u63A5\u53E3\u7684\u5404\u5B9E\u73B0\u7C7B-\u4EE5\u53CA\u5BF9\u5E94\u529F\u80FD" aria-hidden="true">#</a> 3.1. IRule\u63A5\u53E3\u7684\u5404\u5B9E\u73B0\u7C7B\uFF0C\u4EE5\u53CA\u5BF9\u5E94\u529F\u80FD</h4><p>\u6839\u636E\u7279\u5B9A\u7B97\u6CD5\u4ECE\u670D\u52A1\u5217\u8868\u4E2D\u9009\u53D6\u4E00\u4E2A\u8981\u8BBF\u95EE\u7684\u670D\u52A1\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632148711923-8b50c432-98a7-4525-bdf8-ad5f73308bcc.png" alt="img"></p><p><strong>IRule\u63A5\u53E3\u4E3B\u8981\u7684\u5B9E\u73B0\u7C7B\uFF1A</strong></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632148745291-f05e92c8-8e23-46b8-8d7a-72ff6cafb14f.png" alt="img"></p><ul><li><strong>com.netflix.loadbalancer.RoundRobinRule</strong>\uFF1A\u8F6E\u8BE2</li><li><strong>com.netflix.loadbalancer.RandomRule</strong>\uFF1A\u968F\u673A</li><li><strong>com.netflix.loadbalancer.RetryRule</strong>\uFF1A\u5148\u6309\u7167RoundRobinRule\u7684\u7B56\u7565\u83B7\u53D6\u670D\u52A1\uFF0C\u5982\u679C\u83B7\u53D6\u670D\u52A1\u5931\u8D25\u5219\u5728\u6307\u5B9A\u65F6\u95F4\u5185\u4F1A\u8FDB\u884C\u91CD\u8BD5</li><li><strong>WeightedResponseTimeRule</strong>\uFF1A\u5BF9RoundRobinRule\u7684\u6269\u5C55\uFF0C\u54CD\u5E94\u901F\u5EA6\u8D8A\u5FEB\u7684\u5B9E\u4F8B\u9009\u62E9\u6743\u91CD\u8D8A\u5927\uFF0C\u8D8A\u5BB9\u6613\u88AB\u9009\u62E9</li><li><strong>BestAvailableRule</strong>\uFF1A\u4F1A\u5148\u8FC7\u6EE4\u6389\u7531\u4E8E\u591A\u6B21\u8BBF\u95EE\u6545\u969C\u800C\u5904\u4E8E\u65AD\u8DEF\u5668\u8DF3\u95F8\u72B6\u6001\u7684\u670D\u52A1\uFF0C\u7136\u540E\u9009\u62E9\u4E00\u4E2A\u5E76\u53D1\u91CF\u6700\u5C0F\u7684\u670D\u52A1</li><li><strong>AvailabilityFilteringRule</strong>\uFF1A\u5148\u8FC7\u6EE4\u6389\u6545\u969C\u5B9E\u4F8B\uFF0C\u518D\u9009\u62E9\u5E76\u53D1\u8F83\u5C0F\u7684\u5B9E\u4F8B</li><li><strong>ZoneAvoidanceRule</strong>\uFF1A\u9ED8\u8BA4\u89C4\u5219\uFF0C\u590D\u5408\u5224\u65ADserver\u6240\u5728\u533A\u57DF\u7684\u6027\u80FD\u548Cserver\u7684\u53EF\u7528\u6027\u9009\u62E9\u670D\u52A1\u5668</li></ul><h4 id="_3-2-\u5982\u4F55\u66FF\u6362\u8D1F\u8F7D\u5747\u8861\u7B97\u6CD5" tabindex="-1"><a class="header-anchor" href="#_3-2-\u5982\u4F55\u66FF\u6362\u8D1F\u8F7D\u5747\u8861\u7B97\u6CD5" aria-hidden="true">#</a> 3.2. \u5982\u4F55\u66FF\u6362\u8D1F\u8F7D\u5747\u8861\u7B97\u6CD5</h4><h5 id="_1\u4FEE\u6539cloud-consumer-order80" tabindex="-1"><a class="header-anchor" href="#_1\u4FEE\u6539cloud-consumer-order80" aria-hidden="true">#</a> \u2460\u4FEE\u6539cloud-consumer-order80</h5><h5 id="_2\u8D1F\u8F7D\u5747\u8861\u914D\u7F6E\u7C7B\u6CE8\u610F\u4E8B\u9879" tabindex="-1"><a class="header-anchor" href="#_2\u8D1F\u8F7D\u5747\u8861\u914D\u7F6E\u7C7B\u6CE8\u610F\u4E8B\u9879" aria-hidden="true">#</a> \u2461\u8D1F\u8F7D\u5747\u8861\u914D\u7F6E\u7C7B\u6CE8\u610F\u4E8B\u9879</h5><p><strong>\u6CE8\u610F\u914D\u7F6E\u7C7B\u7EC6\u8282</strong>\uFF1A\u5B98\u65B9\u6587\u6863\u660E\u786E\u7ED9\u51FA\u4E86\u8B66\u544A\uFF1A\u8FD9\u4E2A\u81EA\u5B9A\u4E49\u8D1F\u8F7D\u5747\u8861\u914D\u7F6E\u7C7B\u4E0D\u80FD\u653E\u5728@ComponentScan\u6240\u626B\u63CF\u7684\u5F53\u524D\u5305\u4E0B\u4EE5\u53CA\u5B50\u5305\u4E0B\uFF0C\u5426\u5219\u6211\u4EEC\u81EA\u5B9A\u4E49\u7684\u8FD9\u4E2A\u914D\u7F6E\u7C7B\u5C31\u4F1A\u88AB\u6240\u6709\u7684Ribbon\u5BA2\u6237\u7AEF\u6240\u5171\u4EAB\uFF0C\u8FBE\u4E0D\u5230\u7279\u6B8A\u5316\u5B9A\u5236\u7684\u76EE\u7684\u4E86\u3002</p><p>####### \u4EC0\u4E48\u662F@ComponentScan</p><p><strong>@SpringBootApplication</strong>\u6CE8\u89E3\u4E2D\u5305\u542B\u4E86**@ComponentScan**\u6CE8\u89E3</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632149973311-24dbbdee-496d-428c-a39c-531f5553b145.png" alt="img"></p><p>\u4E5F\u5C31\u662F\u8BF4@SpringBootApplication\u6807\u6CE8\u7684\u4E3B\u914D\u7F6E\u7C7B\u6240\u5728\u7684\u5305\uFF0C\u4EE5\u53CA\u6240\u6709\u5B50\u5305\u90FD\u4F1A\u88AB\u626B\u63CF\u5230\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632150249137-c8643d39-4555-4174-86f8-c681dae45b9f.png" alt="img"></p><p>\u6240\u4EE5\u6211\u4EEC\u81EA\u5B9A\u4E49\u7684\u8D1F\u8F7D\u5747\u8861\u914D\u7F6E\u7C7B\u4E0D\u80FD\u8DDF\u4E3B\u542F\u52A8\u7C7B\u5728\u540C\u4E00\u4E2A\u5305\u4E0B\u3002</p><h5 id="_3\u65B0\u5EFAcom-atguigu-myrule\u5305-\u5C06\u81EA\u5B9A\u4E49\u8D1F\u8F7D\u5747\u8861\u914D\u7F6E\u7C7Bmyselfrule\u653E\u5728\u6539\u5305\u4E0B" tabindex="-1"><a class="header-anchor" href="#_3\u65B0\u5EFAcom-atguigu-myrule\u5305-\u5C06\u81EA\u5B9A\u4E49\u8D1F\u8F7D\u5747\u8861\u914D\u7F6E\u7C7Bmyselfrule\u653E\u5728\u6539\u5305\u4E0B" aria-hidden="true">#</a> \u2462\u65B0\u5EFAcom.atguigu.myrule\u5305\uFF0C\u5C06\u81EA\u5B9A\u4E49\u8D1F\u8F7D\u5747\u8861\u914D\u7F6E\u7C7BMySelfRule\u653E\u5728\u6539\u5305\u4E0B</h5><p>\u5199MySelfRule\u914D\u7F6E\u7C7B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>myrule</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>loadbalancer<span class="token punctuation">.</span></span><span class="token class-name">IRule</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>loadbalancer<span class="token punctuation">.</span></span><span class="token class-name">RandomRule</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MySelfRule</span>
<span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">IRule</span> <span class="token function">myRule</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RandomRule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5B9A\u4E49\u4E3A\u968F\u673A\u8D1F\u8F7D\u5747\u8861\u7B97\u6CD5</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4\u4E3B\u542F\u52A8\u7C7B\u6DFB\u52A0-ribboncilent\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_4\u4E3B\u542F\u52A8\u7C7B\u6DFB\u52A0-ribboncilent\u6CE8\u89E3" aria-hidden="true">#</a> \u2463\u4E3B\u542F\u52A8\u7C7B\u6DFB\u52A0@RibbonCilent\u6CE8\u89E3</h5><p>name\u91CC\u9762\u7684\u5185\u5BB9\u8868\u793A\u6307\u660E\u8BBF\u95EExxx\u670D\u52A1\u65F6\u4F7F\u7528\u590D\u6742\u5747\u8861\uFF0Cconfiguration\u8868\u793A\u6307\u660E\u8D1F\u8F7D\u5747\u8861\u7B56\u7565</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token comment">//\u6307\u660E\u8BBF\u95EE\u7684\u670D\u52A1CLOUD-PAYMENT-SERVICE\uFF0C\u4EE5\u53CA\u6307\u5B9A\u8D1F\u8F7D\u5747\u8861\u7B56\u7565</span>
<span class="token annotation punctuation">@RibbonClient</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;CLOUD-PAYMENT-SERVICE&quot;</span><span class="token punctuation">,</span>configuration<span class="token operator">=</span> <span class="token class-name">MySelfRule</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderMain80</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">OrderMain80</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_5\u542F\u52A8cloud-consumer-order80\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_5\u542F\u52A8cloud-consumer-order80\u6D4B\u8BD5" aria-hidden="true">#</a> \u2464\u542F\u52A8cloud-consumer-order80\u6D4B\u8BD5</h5>`,72),On=n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632151096838-d4aa00d9-cf5a-4c82-9dc2-153bc4d7d7ae.png",alt:"img"},null,-1),An=a("\u6D4B\u8BD5\u6210\u529F\uFF0C\u8BBF\u95EE"),Bn={href:"http://localhost/consumer/payment/get/31",target:"_blank",rel:"noopener noreferrer"},Fn=a("http://localhost/consumer/payment/get/31"),Ln=a(" \u4E5F\u53EF\u4EE5"),Vn=p(`<h3 id="\u56DB\u3001\u8D1F\u8F7D\u5747\u8861\u7B97\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u56DB\u3001\u8D1F\u8F7D\u5747\u8861\u7B97\u6CD5" aria-hidden="true">#</a> \u56DB\u3001\u8D1F\u8F7D\u5747\u8861\u7B97\u6CD5</h3><h4 id="_4-1-\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_4-1-\u539F\u7406" aria-hidden="true">#</a> 4.1 \u539F\u7406</h4><p>\u8F6E\u5FAA\u8D1F\u8F7D\u5747\u8861\u7B97\u6CD5\uFF1A<strong>rest\u63A5\u53E3\u7B2C\u51E0\u6B21\u8BF7\u6C42\u6570 % \u670D\u52A1\u5668\u96C6\u7FA4\u603B\u6570\u91CF = \u5B9E\u9645\u8C03\u7528\u670D\u52A1\u5668\u4F4D\u7F6E\u4E0B\u6807</strong>\uFF0C\u6BCF\u6B21\u670D\u52A1\u91CD\u542F\u540Erest\u63A5\u53E3\u8BA1\u6570\u4ECE1\u5F00\u59CB\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServiceInstance</span><span class="token punctuation">&gt;</span></span> instances <span class="token operator">=</span> doscoveryClient<span class="token punctuation">.</span><span class="token function">getInstances</span><span class="token punctuation">(</span><span class="token string">&quot;cloud-payment-service&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
\u6BD4\u5982\u96C6\u7FA4\u4E2D\u6709\u4E24\u53F0\u670D\u52A1\u5668\uFF0C\u5730\u5740\u5206\u522B\u4E3A\uFF1A
<span class="token class-name">List</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> instances <span class="token operator">=</span> <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8002</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> instances <span class="token operator">=</span> <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8001</span><span class="token punctuation">;</span>

<span class="token number">8001</span> <span class="token operator">+</span> <span class="token number">8002</span> \u7EC4\u5408\u4E3A\u96C6\u7FA4\uFF0C\u4ED6\u4EEC\u5171\u8BA1<span class="token number">2</span>\u53F0\u673A\u5668\uFF0C\u96C6\u7FA4\u603B\u6570\u4E3A<span class="token number">2</span>\uFF0C\u6309\u7167\u8F6E\u8BE2\u7B97\u6CD5\u539F\u7406\uFF1A
\u5F53\u603B\u8BF7\u6C42\u6570\u4E3A<span class="token number">1</span>\u65F6\uFF1A<span class="token number">1</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">1</span>\uFF0C\u5BF9\u5E94\u4E0B\u6807\u4E3A <span class="token number">1</span>\uFF0C\u5219\u83B7\u5F97\u670D\u52A1\u5730\u5740\u4E3A <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>\uFF1A<span class="token number">8001</span>
\u5F53\u603B\u8BF7\u6C42\u6570\u4E3A<span class="token number">2</span>\u65F6\uFF1A<span class="token number">2</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">0</span>\uFF0C\u5BF9\u5E94\u4E0B\u6807\u4E3A <span class="token number">0</span>\uFF0C\u5219\u83B7\u5F97\u670D\u52A1\u5730\u5740\u4E3A <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>\uFF1A<span class="token number">8002</span>
\u5F53\u603B\u8BF7\u6C42\u6570\u4E3A<span class="token number">3</span>\u65F6\uFF1A<span class="token number">3</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">1</span>\uFF0C\u5BF9\u5E94\u4E0B\u6807\u4E3A <span class="token number">1</span>\uFF0C\u5219\u83B7\u5F97\u670D\u52A1\u5730\u5740\u4E3A <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>\uFF1A<span class="token number">8001</span>
\u5F53\u603B\u8BF7\u6C42\u6570\u4E3A<span class="token number">4</span>\u65F6\uFF1A<span class="token number">4</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">0</span>\uFF0C\u5BF9\u5E94\u4E0B\u6807\u4E3A <span class="token number">0</span>\uFF0C\u5219\u83B7\u5F97\u670D\u52A1\u5730\u5740\u4E3A <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>\uFF1A<span class="token number">8002</span>
\u5982\u6B64\u7C7B\u63A8
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-2-\u6E90\u7801" tabindex="-1"><a class="header-anchor" href="#_4-2-\u6E90\u7801" aria-hidden="true">#</a> 4.2 \u6E90\u7801</h4><p>\u539F\u7406+JUC(CAS+\u81EA\u65CB\u9501\u7684\u590D\u4E60)</p><h4 id="_4-3-\u624B\u5199\u4E00\u4E2A\u8D1F\u8F7D\u5747\u8861\u7B97\u6CD5" tabindex="-1"><a class="header-anchor" href="#_4-3-\u624B\u5199\u4E00\u4E2A\u8D1F\u8F7D\u5747\u8861\u7B97\u6CD5" aria-hidden="true">#</a> 4.3 \u624B\u5199\u4E00\u4E2A\u8D1F\u8F7D\u5747\u8861\u7B97\u6CD5</h4><h5 id="_18001-8001\u5FAE\u670D\u52A1\u6539\u9020-controller" tabindex="-1"><a class="header-anchor" href="#_18001-8001\u5FAE\u670D\u52A1\u6539\u9020-controller" aria-hidden="true">#</a> \u24608001/8001\u5FAE\u670D\u52A1\u6539\u9020\uFF1Acontroller</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/payment/lb&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getPaymentLB</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> serverPort<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_280\u5FAE\u670D\u52A1\u6539\u9020" tabindex="-1"><a class="header-anchor" href="#_280\u5FAE\u670D\u52A1\u6539\u9020" aria-hidden="true">#</a> \u246180\u5FAE\u670D\u52A1\u6539\u9020</h5><p><strong>ApplicationContextConfig</strong>\u53BB\u6389**@LoadBalance**\u6CE8\u89E3</p><h5 id="_3\u521B\u5EFAloadbalancer\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_3\u521B\u5EFAloadbalancer\u63A5\u53E3" aria-hidden="true">#</a> \u2462\u521B\u5EFALoadBalancer\u63A5\u53E3</h5><p>\u65B0\u5EFAcom.atguigu.springcloud.lb\u5305</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">LoadBalancer</span> <span class="token punctuation">{</span>
    <span class="token class-name">ServiceInstance</span> <span class="token function">instances</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServiceInstance</span><span class="token punctuation">&gt;</span></span> serviceInstances<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4\u521B\u5EFAloadbalancer\u63A5\u53E3\u7684\u5B9E\u73B0\u7C7Bmyloadbalancer" tabindex="-1"><a class="header-anchor" href="#_4\u521B\u5EFAloadbalancer\u63A5\u53E3\u7684\u5B9E\u73B0\u7C7Bmyloadbalancer" aria-hidden="true">#</a> \u2463\u521B\u5EFALoadBalancer\u63A5\u53E3\u7684\u5B9E\u73B0\u7C7BMyLoadBalancer</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyLoadBalancer</span> <span class="token keyword">implements</span> <span class="token class-name">LoadBalancer</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">AtomicInteger</span> atomicInteger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicInteger</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">getAndIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> current<span class="token punctuation">;</span>
        <span class="token keyword">int</span> next<span class="token punctuation">;</span>
        <span class="token comment">//\u4ECE\u4E0B\u9762\u7684\u5206\u6790\u4E2D\u5F97\u77E5\uFF1A\u8BE5\u5FAA\u73AF\u4E3B\u8981\u662F\u5F97\u5230next\u503C\uFF0C\u5355\u673A\u662F\u6BCF\u5FAA\u73AF\u4E00\u6B21\u8FD4\u56DE\u4E00\u6B21next</span>
        <span class="token comment">//\u9AD8\u5E76\u53D1\u65F6\uFF1A\u5C31\u4E0D\u662F\u8FD9\u79CD\u60C5\u51B5\u4E86\u3002\u56E0\u4E3A\u6570\u5B57\u4F1A\u88AB\u62A2\u5360\u3002</span>
        <span class="token comment">//\u81EA\u65CB\u9501</span>
        <span class="token keyword">do</span> <span class="token punctuation">{</span>
            current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>atomicInteger<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//\u8003\u8651\u5230\u6781\u7AEF\u60C5\u51B5\uFF0CatomicInteger\u6700\u5927\u503C\u4E3A2147483647</span>
            <span class="token comment">//\u5F53\u8BF7\u6C42\u6B21\u6570\u8D85\u8FC7\u8FD9\u4E2A\u503C\u7684\u65F6\u5019\uFF0C\u4ECE0\u5F00\u59CB</span>
            next <span class="token operator">=</span> current <span class="token operator">&gt;=</span> <span class="token number">2147483647</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> current <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token comment">//compareAndSet\u65B9\u6CD5\u4F7F\u7528\u4E86CAS\u673A\u5236\uFF0C\u5224\u65ADcurrent\u662F\u5426\u53D8\u5316\uFF0C\u5982\u679C\u53D8\u4E86\u81EA\u65CB\uFF0C\u53CD\u4E4B\u66F4\u65B0current</span>
            <span class="token doc-comment comment">/**
             * \u5F53atomicInteger=0\u65F6\uFF0Ccurrent=0, next=1
             * atomicInteger\u548Ccurrent\u8FDB\u884C\u6BD4\u8F83\uFF0C\u76F8\u7B49\u65F6\u8FD4\u56DEtrue\u5C06atomicInteger\u66F4\u65B0\u4E3Anext\uFF0C1\uFF0C\u53D6\u53CD\u8DF3\u51FA\u5FAA\u73AF\uFF0C\u518D\u8FD4\u56DEnext
             * \u5F53atomicInteger=2147483647\u65F6\uFF0Ccurrent=2147483647\uFF0Cnext=0
             * atomicInteger\u548Ccurrent\u8FDB\u884C\u6BD4\u8F83\uFF0C\u76F8\u7B49\u65F6\u8FD4\u56DEtrue\u5C06atomicInteger\u66F4\u65B0\u4E3Anext, 0\uFF0C\u53D6\u53CD\u8DF3\u51FA\u5FAA\u73AF\uFF0C\u518D\u8FD4\u56DEnext
             *
             * \u5982\u679C\u662F\u9AD8\u5E76\u53D1\u65F6,\u5219\u9700\u8981\u5224\u65AD\u5F53\u524D\u7EBF\u7A0B\u83B7\u5F97\u7684current\u503C\u8DDFatomicInteger\u7684\u503C\u662F\u5426\u76F8\u7B49\uFF0C
             * \u5982\u679C\u4E0D\u76F8\u7B49\u5219\u8868\u793A\u5176\u4ED6\u7EBF\u7A0B\u5DF2\u7ECF\u64CD\u4F5C\u4E86atomicInteger\uFF0C\u81EA\u65CB\u3002
             * \u8FD9\u5C31\u662F\u4E50\u89C2\u9501\u7684\u4E00\u4E2A\u5B9E\u73B0
             */</span>
        <span class="token punctuation">}</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>atomicInteger<span class="token punctuation">.</span><span class="token function">compareAndSet</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> next<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;************\u7B2C\u51E0\u6B21\u8BBF\u95EE\u6B21\u6570:&quot;</span> <span class="token operator">+</span> next<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
	<span class="token comment">//\u8D1F\u8F7D\u5747\u8861\u7B97\u6CD5\uFF1Arest\u63A5\u53E3\u7B2C\u51E0\u6B21\u8BF7\u6C42\u6570 % \u670D\u52A1\u5668\u96C6\u7FA4\u603B\u6570\u91CF = \u5B9E\u9645\u8C03\u7528\u670D\u52A1\u5668\u4F4D\u7F6E\u4E0B\u6807</span>
    <span class="token comment">// \u6BCF\u6B21\u670D\u52A1\u91CD\u542F\u52A8\u540Erest\u63A5\u53E3\u8BA1\u6570\u4ECE1\u5F00\u59CB\u3002</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">ServiceInstance</span> <span class="token function">instances</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServiceInstance</span><span class="token punctuation">&gt;</span></span> serviceInstances<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u8BA1\u7B97\u5F53\u524D\u8BBF\u95EE\u5E94\u8BE5\u5206\u914D\u7ED9\u54EA\u53F0\u670D\u52A1\u5668\u5904\u7406</span>
        <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token function">getAndIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> serviceInstances<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8FD4\u56DE\u76EE\u6807\u670D\u52A1\u5668</span>
        <span class="token keyword">return</span> serviceInstances<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_5\u4FEE\u6539ordercontroller" tabindex="-1"><a class="header-anchor" href="#_5\u4FEE\u6539ordercontroller" aria-hidden="true">#</a> \u2464\u4FEE\u6539OrderController</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Resource</span>  <span class="token comment">//\u81EA\u52A8\u6CE8\u5165\u81EA\u5B9A\u4E49\u7684MyLoadBalancer\u7C7B</span>
<span class="token keyword">private</span> <span class="token class-name">LoadBalancer</span> loadBalancer<span class="token punctuation">;</span>
<span class="token annotation punctuation">@Resource</span>
<span class="token keyword">private</span> <span class="token class-name">DiscoveryClient</span> discoveryClient<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * \u6D4B\u8BD5\u81EA\u5DF1\u7684\u8F6E\u5FAA\u7B97\u6CD5
 */</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/consumer/payment/lb&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getPaymentLB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServiceInstance</span><span class="token punctuation">&gt;</span></span> instances <span class="token operator">=</span> discoveryClient<span class="token punctuation">.</span><span class="token function">getInstances</span><span class="token punctuation">(</span><span class="token string">&quot;CLOUD-PAYMENT-SERVICE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>instances <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> instances<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">ServiceInstance</span> serviceInstance <span class="token operator">=</span> loadBalancer<span class="token punctuation">.</span><span class="token function">instances</span><span class="token punctuation">(</span>instances<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">URI</span> uri <span class="token operator">=</span> serviceInstance<span class="token punctuation">.</span><span class="token function">getUri</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span>uri <span class="token operator">+</span> <span class="token string">&quot;/payment/lb&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_6\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_6\u6D4B\u8BD5" aria-hidden="true">#</a> \u2465\u6D4B\u8BD5</h5><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632230786699-6d536095-9319-4e03-b3a2-294707e8e4e6.png" alt="img"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632230776565-84a7e4f8-a496-49eb-957e-156cf1a4086a.png" alt="img"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632279147415-ac1a003f-fa23-43a0-bac9-dfadac824c7e.png" alt="img"></p><h2 id="_6-\u670D\u52A1\u8C03\u7528-openfeign\u670D\u52A1\u63A5\u53E3\u8C03\u7528" tabindex="-1"><a class="header-anchor" href="#_6-\u670D\u52A1\u8C03\u7528-openfeign\u670D\u52A1\u63A5\u53E3\u8C03\u7528" aria-hidden="true">#</a> 6.\u670D\u52A1\u8C03\u7528-OpenFeign\u670D\u52A1\u63A5\u53E3\u8C03\u7528</h2><h3 id="\u4E00\u3001openfeign\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001openfeign\u6982\u8FF0" aria-hidden="true">#</a> \u4E00\u3001OpenFeign\u6982\u8FF0</h3><h4 id="_1\u3001openfeign\u662F\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#_1\u3001openfeign\u662F\u4EC0\u4E48" aria-hidden="true">#</a> 1\u3001OpenFeign\u662F\u4EC0\u4E48</h4>`,24),Nn={href:"https://cloud.spring.io/spring-cloud-static/Hoxton.SR1/reference/htmlsingle/##spring-cloud-openfeign",target:"_blank",rel:"noopener noreferrer"},zn=a("\u5B98\u7F51"),Gn=a(),Dn={href:"https://github.com/spring-cloud/spring-cloud-openfeign",target:"_blank",rel:"noopener noreferrer"},Un=a("\u6E90\u7801"),Zn=p(`<p>Feign\u662F\u4E00\u4E2A\u58F0\u660E\u5F0FWebService\u5BA2\u6237\u7AEF\uFF0C\u4F7F\u7528Feign\u80FD\u8BA9\u7F16\u5199Web Service\u5BA2\u6237\u7AEF\u66F4\u52A0\u7B80\u5355\uFF0C<strong>\u53EA\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u63A5\u53E3\u5E76\u6DFB\u52A0\u6CE8\u89E3\u5373\u53EF</strong></p><p>\u4ED6\u7684\u4F7F\u7528\u65B9\u6CD5\u662F\u5B9A\u4E49\u4E00\u4E2A\u670D\u52A1\u63A5\u53E3\u7136\u540E\u5728\u4E0A\u9762\u6DFB\u52A0\u6CE8\u89E3\uFF0CFeign\u4E5F\u652F\u6301\u53EF\u63D2\u62D4\u5F0F\u7684\u7F16\u7801\u5668\u548C\u89E3\u7801\u5668\u3002Spring Cloud \u5BF9Feign\u8FDB\u884C\u4E86\u5C01\u88C5\u3002\u4F7F\u5176\u652F\u6301\u4E86SpringMVC \u6807\u51C6\u6CE8\u89E3\u548CHttpMessageConverters\u3002Feign\u53EF\u4EE5\u4E0EEureka\u548CRibbon\u7EC4\u5408\u4F7F\u7528\u4EE5\u652F\u6301\u8D1F\u8F7D\u5747\u8861\u3002</p><h5 id="\u5C0F\u7ED3" tabindex="-1"><a class="header-anchor" href="#\u5C0F\u7ED3" aria-hidden="true">#</a> \u5C0F\u7ED3\uFF1A</h5><ul><li>Feign\u662F\u4E00\u4E2A\u58F0\u660E\u5F0FRest/WebService\u5BA2\u6237\u7AEF\uFF0C\u4F7F\u7528Feign\u80FD\u8BA9WebService\u5BA2\u6237\u7AEF\u66F4\u52A0\u7B80\u5355\u3002</li><li>\u53EA\u9700\u521B\u5EFA\u4E00\u4E2A\u63A5\u53E3\u5E76\u5728\u63A5\u53E3\u4E0A\u6DFB\u52A0\u6CE8\u89E3\u5373\u53EF\u3002</li></ul><h4 id="_2\u3001feign\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#_2\u3001feign\u4F5C\u7528" aria-hidden="true">#</a> 2\u3001Feign\u4F5C\u7528</h4><p><strong>Feign\u65E8\u5728\u4F7F\u7F16\u5199Java Http\u5BA2\u6237\u7AEF\u53D8\u5F97\u66F4\u5BB9\u6613\u3002</strong></p><p>\u58F0\u660E\u5F0F\u8FDC\u7A0B\u65B9\u6CD5\u8C03\u7528</p><p>\u524D\u9762\u5728\u4F7F\u7528Ribbon+RestTemplate\u65F6\uFF0C\u5229\u7528RestTemplate\u5BF9http\u8BF7\u6C42\u7684\u5C01\u88C5\u5904\u7406\uFF0C\u5F62\u6210\u4E86\u4E00\u5957\u6A21\u7248\u5316\u7684\u8C03\u7528\u65B9\u6CD5\u3002\u4F46\u662F\u5728\u5B9E\u9645\u5F00\u53D1\u4E2D\uFF0C\u7531\u4E8E\u5BF9\u670D\u52A1\u4F9D\u8D56\u7684\u8C03\u7528\u53EF\u80FD\u4E0D\u6B62\u4E00\u5904\uFF0C\u5F80\u5F80\u4E00\u4E2A\u63A5\u53E3\u4F1A\u88AB\u591A\u5904\u8C03\u7528\uFF0C\u6240\u4EE5\u901A\u5E38\u90FD\u4F1A\u9488\u5BF9\u6BCF\u4E2A\u5FAE\u670D\u52A1\u81EA\u884C\u5C01\u88C5\u4E00\u4E9B\u5BA2\u6237\u7AEF\u7C7B\u6765\u5305\u88C5\u8FD9\u4E9B\u4F9D\u8D56\u670D\u52A1\u7684\u8C03\u7528\u3002\u6240\u4EE5\uFF0CFeign\u5728\u6B64\u57FA\u7840\u4E0A\u505A\u4E86\u8FDB\u4E00\u6B65\u5C01\u88C5\uFF0C\u7531\u4ED6\u6765\u5E2E\u52A9\u6211\u4EEC\u5B9A\u4E49\u548C\u5B9E\u73B0\u4F9D\u8D56\u670D\u52A1\u63A5\u53E3\u7684\u5B9A\u4E49\u3002\u5728Feign\u7684\u5B9E\u73B0\u4E0B\uFF0C\u6211\u4EEC\u53EA\u9700\u521B\u5EFA\u4E00\u4E2A\u63A5\u53E3\u5E76\u4F7F\u7528\u6CE8\u89E3\u7684\u65B9\u5F0F\u6765\u914D\u7F6E\u5B83(\u4EE5\u524D\u662FDao\u63A5\u53E3\u4E0A\u9762\u6807\u6CE8Mapper\u6CE8\u89E3,\u73B0\u5728\u662F\u4E00\u4E2A\u5FAE\u670D\u52A1\u63A5\u53E3\u4E0A\u9762\u6807\u6CE8\u4E00\u4E2AFeign\u6CE8\u89E3\u5373\u53EF)\uFF0C\u5373\u53EF\u5B8C\u6210\u5BF9\u670D\u52A1\u63D0\u4F9B\u65B9\u7684\u63A5\u53E3\u7ED1\u5B9A\uFF0C\u7B80\u5316\u4E86\u4F7F\u7528Spring cloud Ribbon\u65F6\uFF0C\u81EA\u52A8\u5C01\u88C5\u670D\u52A1\u8C03\u7528\u5BA2\u6237\u7AEF\u7684\u5F00\u53D1\u91CF\u3002</p><p>\u5373\u670D\u52A1\u63D0\u4F9B\u65B9\u6709\u54EA\u4E9B\u63A5\u53E3\uFF0CFeign\u91CC\u9762\u5373\u6709\u4E0E\u4E4B\u5BF9\u5E94\u7684\u65B9\u6CD5\u76F4\u63A5\u8C03\u7528\u3002</p><p><strong>Feign\u96C6\u6210\u4E86Ribbon</strong></p><p>\u5229\u7528Ribbon\u7EF4\u62A4\u4E86Payment\u7684\u670D\u52A1\u5217\u8868\u4FE1\u606F\uFF0C\u5E76\u4E14\u901A\u8FC7\u8F6E\u8BE2\u5B9E\u73B0\u4E86\u5BA2\u6237\u7AEF\u7684\u8D1F\u8F7D\u5747\u8861\u3002\u800C\u4E0ERibbon\u4E0D\u540C\u7684\u662F\uFF0C\u901A\u8FC7feign\u53EA\u9700\u8981\u4EE5\u58F0\u660E\u5F0F\u7684\u65B9\u6CD5\u5B9A\u4E49\u670D\u52A1\u4E14\u7ED1\u5B9A\u63A5\u53E3\uFF0C\u4F18\u96C5\u800C\u7B80\u5355\u7684\u5B9E\u73B0\u4E86\u670D\u52A1\u8C03\u7528</p><h4 id="_3\u3001feign\u4E0Eopenfeign\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_3\u3001feign\u4E0Eopenfeign\u7684\u533A\u522B" aria-hidden="true">#</a> 3\u3001Feign\u4E0EOpenFeign\u7684\u533A\u522B</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632232024609-aa30a8d0-0d09-4340-beb8-cda284c252e1.png" alt="img"></p><h3 id="\u4E8C\u3001openfeign\u4F7F\u7528\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001openfeign\u4F7F\u7528\u6B65\u9AA4" aria-hidden="true">#</a> \u4E8C\u3001OpenFeign\u4F7F\u7528\u6B65\u9AA4</h3><p>\u4EE5\u524D\u6211\u4EEC\u5728\u6D88\u8D39\u8005\u670D\u52A1\u8C03\u7528\u751F\u4EA7\u8005\u670D\u52A1\u65F6\uFF0C\u91C7\u7528Ribbon+restTemplate\u8FDB\u884C\u5BA2\u6237\u7AEF\u670D\u52A1\u8C03\u7528\u548C\u8D1F\u8F7D\u5747\u8861\u3002\u73B0\u5728\u91C7\u7528OpenFeign\u7ED1\u5B9A\u670D\u52A1\u63A5\u53E3\u3002</p><p>Feign \u662F\u4F7F\u7528\u5728\u6D88\u8D39\u7AEF\uFF01</p><p>\u63A5\u53E3+\u6CE8\u89E3 ------ \u5FAE\u670D\u52A1\u8C03\u7528\u63A5\u53E3+<strong>@FeignClient</strong> \u6CE8\u89E3</p><h4 id="_1\u3001\u521B\u5EFAcloud-consumer-openfeign-order80-\u6A21\u5757" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u521B\u5EFAcloud-consumer-openfeign-order80-\u6A21\u5757" aria-hidden="true">#</a> 1\u3001\u521B\u5EFAcloud-consumer-openfeign-order80 \u6A21\u5757</h4><h4 id="_2\u3001\u5199pom" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u5199pom" aria-hidden="true">#</a> 2\u3001\u5199pom</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jdk8cloud2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-consumer-openfeign-order80<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--openfeign   \u65B0\u589E--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--eureka client--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- \u5F15\u5165\u81EA\u5DF1\u5B9A\u4E49\u7684api\u901A\u7528\u5305\uFF0C\u53EF\u4EE5\u4F7F\u7528Payment\u652F\u4ED8Entity --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--web--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--\u4E00\u822C\u57FA\u7840\u901A\u7528\u914D\u7F6E--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632233085752-d65cf0e2-9cd8-4bd3-a688-c64ff082f8ec.png" alt="img"></p><p>OpenFeign\u6574\u5408\u4E86Ribbon\uFF0C\u6240\u4EE5\u5177\u6709\u8D1F\u8F7D\u5747\u8861\u7684\u529F\u80FD</p><h4 id="_3\u3001\u5199yaml" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u5199yaml" aria-hidden="true">#</a> 3\u3001\u5199yaml</h4><p>\u4E0D\u5C06\u5176\u6CE8\u518C\u5230Eureka\u4F5C\u4E3A\u5FAE\u670D\u52A1\uFF0C\u800C\u662F\u4F5C\u4E3A\u4E00\u4E2AFeign\u5BA2\u6237\u7AEF</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token comment">## \u8868\u793A\u4E0D\u5C06\u5176\u6CE8\u5165Eureka\u4F5C\u4E3A\u5FAE\u670D\u52A1\uFF0C\u4E0D\u4F5C\u4E3AEureak\u5BA2\u6237\u7AEF\u4E86\uFF0C\u800C\u662F\u4F5C\u4E3AFeign\u5BA2\u6237\u7AEF</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token comment">## \u96C6\u7FA4\u7248</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//eureka7002.com<span class="token punctuation">:</span>7002/eureka<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//eureka7003.com<span class="token punctuation">:</span>7003/eureka
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4\u3001\u4E3B\u542F\u52A8\u7C7B" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u4E3B\u542F\u52A8\u7C7B" aria-hidden="true">#</a> 4\u3001\u4E3B\u542F\u52A8\u7C7B</h4><p>\u4E3B\u542F\u52A8\u7C7B\u4E0A\u6DFB\u52A0 <code>@EableFeignClients</code>\u6CE8\u89E3</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableFeignClients</span> <span class="token comment">//\u4E0D\u4F5C\u4E3AEureak\u5BA2\u6237\u7AEF\u4E86\uFF0C\u800C\u662F\u4F5C\u4E3AFeign\u5BA2\u6237\u7AEF</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderOpenFeignMain80</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">OrderOpenFeignMain80</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5\u3001\u4E1A\u52A1\u7C7B" tabindex="-1"><a class="header-anchor" href="#_5\u3001\u4E1A\u52A1\u7C7B" aria-hidden="true">#</a> 5\u3001\u4E1A\u52A1\u7C7B</h4><p>\u58F0\u660E\u4E00\u4E2A\u8FDC\u7A0B\u8C03\u7528\u670D\u52A1\u63A5\u53E3\uFF0C\u4E0D\u9700\u8981\u80FD\u88ABSpringboot\u626B\u63CF\u5230</p><h5 id="_5-1-\u4E1A\u52A1\u903B\u8F91\u63A5\u53E3-feignclient\u914D\u7F6E\u8C03\u7528provider\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#_5-1-\u4E1A\u52A1\u903B\u8F91\u63A5\u53E3-feignclient\u914D\u7F6E\u8C03\u7528provider\u670D\u52A1" aria-hidden="true">#</a> 5.1 \u4E1A\u52A1\u903B\u8F91\u63A5\u53E3+@FeignClient\u914D\u7F6E\u8C03\u7528provider\u670D\u52A1</h5><p>\u65B0\u5EFAPaymentFeignService\u63A5\u53E3\u5E76\u65B0\u589E\u6CE8\u89E3**@FeignClient**</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span><span class="token string">&quot;provider\u5FAE\u670D\u52A1\u540D\u5B57&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6CE8\u610F\uFF1A</p><ul><li>\u8FD9\u91CC\u58F0\u660E\u7684\u65B9\u6CD5\u7B7E\u540D\uFF0C\u5FC5\u987B\u548Cprovider\u5FAE\u670D\u52A1\uFF08\u670D\u52A1\u63D0\u4F9B\u8005\u5FAE\u670D\u52A1\uFF09\u4E2D\u7684controller\u4E2D\u65B9\u6CD5\u7684\u7B7E\u540D\u4E00\u81F4</li><li>\u5982\u679C\u9700\u8981\u4F20\u9012\u53C2\u6570\uFF0C\u90A3\u4E48<code>@RequestParam</code> \u548C<code>@RequestBody</code> <code>@PathVariable</code> \u4E0D\u80FD\u7701 \u5FC5\u52A0</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>entities<span class="token punctuation">.</span></span><span class="token class-name">CommonResult</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>entities<span class="token punctuation">.</span></span><span class="token class-name">Payment</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>openfeign<span class="token punctuation">.</span></span><span class="token class-name">FeignClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PathVariable</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;CLOUD-PAYMENT-SERVICE&quot;</span><span class="token punctuation">)</span> <span class="token comment">//\u4F5C\u4E3A\u4E00\u4E2AFeign\u529F\u80FD\u7ED1\u5B9A\u7684\u7684\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PaymentFeignService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/payment/get/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">getPaymentById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u6837\u5C31\u53EF\u4EE5\u627E\u5230CLOUD-PAYMENT-SERVICE\u5FAE\u670D\u52A1\u4E0B\u9762\u7684/payment/get/{id}\u8FD9\u4E2A\u5730\u5740\u3002</p><p>\u8FD9\u4E5F\u5C31\u8BF4\u660E\uFF1A</p><ul><li>PaymentFeignService\u63A5\u53E3+@FeignClient\u6CE8\u89E3\uFF0C\u5B8C\u6210Feign\u7684\u5305\u88C5\u8C03\u7528</li><li>\u6307\u660E\u627E\u54EA\u4E2A\u5FAE\u670D\u52A1\u4E0A\u9762\u7684\u5730\u5740</li></ul><p>\u4E3B\u542F\u52A8\u7C7B\u5F00\u542FFeign\uFF08\u589E\u52A0**@EnableFeignClients<strong>\u6CE8\u89E3\uFF09\uFF0C\u63A5\u53E3\u4E0A\u4F7F\u7528</strong>@FeignClient**\uFF0C\u7EC4\u5408\u4F7F\u7528</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632234249641-1ef57686-a790-4667-8998-aa4f11837d6f.png" alt="img"></p><h5 id="_5-2-consumer\u7684\u63A7\u5236\u5C42controller" tabindex="-1"><a class="header-anchor" href="#_5-2-consumer\u7684\u63A7\u5236\u5C42controller" aria-hidden="true">#</a> 5.2 consumer\u7684\u63A7\u5236\u5C42Controller</h5><p>\u901A\u8FC7\u81EA\u5DF1\u768480 Service\u63A5\u53E3\u5C42\uFF0C\u53BB\u8C03\u7528\u670D\u52A1\u63D0\u4F9B\u8005\u4E2D\u7684\u63A5\u53E3</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderFeignController</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u76F4\u63A5\u5C06PaymentFeignService\u7684\u5BF9\u8C61\u6CE8\u5165</span>
    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">PaymentFeignService</span> paymentFeignService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/get/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">getPaymentById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> paymentFeignService<span class="token punctuation">.</span><span class="token function">getPaymentById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_5-3-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_5-3-\u6D4B\u8BD5" aria-hidden="true">#</a> 5.3 \u6D4B\u8BD5</h5><p>\u5148\u542F\u52A8\u4E24\u4E2AEureka\u96C6\u7FA4 7001/7002</p><p>\u518D\u542F\u52A8\u4E24\u4E2Apaymentprovider\u5FAE\u670D\u52A1 8001/8002</p><p>\u542F\u52A8\u4F7F\u7528OpenFeign\u7684OrderFeign80</p><p>\u6D4B\u8BD5\u6210\u529F\uFF1A</p><p>\u6D88\u8D39\u8005\u5FAE\u670D\u52A1\u6CA1\u6709\u6CE8\u518C\u5728Eureka\u4E2D\uFF1B\u901A\u8FC7\u6D88\u8D39\u8005\u672C\u8EAB\u7684\u63A5\u53E3\u5730\u5740\uFF0C\u53BB\u8C03\u7528\u751F\u4EA7\u8005\u5FAE\u670D\u52A1\u5BF9\u5E94\u7684\u63A5\u53E3\uFF0C\u5E76\u4E14\u53EF\u4EE5\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632274290736-1c38e6b8-c5a9-436f-afcd-9163e9e286df.png" alt="img"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632274409283-1f84fa8a-5425-4ad3-873c-73544c0baf22.png" alt="img"></p><p>\u6BD4\u8F83\u7B26\u5408\u6211\u4EEC\u7684\u7F16\u7A0B\u4E60\u60EF\uFF0C\u572880\u4E2D\u8FD8\u662Fcontroller\u8C03\u7528service\uFF0Cservice\u518D\u53BB\u8C03\u75288001\u7684controller\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632274800711-be8bbbcc-e321-4498-8009-7e333f3e729e.png" alt="img"></p><h3 id="\u4E09\u3001openfeign\u8D85\u65F6\u63A7\u5236" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001openfeign\u8D85\u65F6\u63A7\u5236" aria-hidden="true">#</a> \u4E09\u3001OpenFeign\u8D85\u65F6\u63A7\u5236</h3><h4 id="_1\u3001\u8D85\u65F6\u8BBE\u7F6E-\u6545\u610F\u8BBE\u7F6E\u8D85\u65F6\u6F14\u793A\u51FA\u9519\u60C5\u51B5" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u8D85\u65F6\u8BBE\u7F6E-\u6545\u610F\u8BBE\u7F6E\u8D85\u65F6\u6F14\u793A\u51FA\u9519\u60C5\u51B5" aria-hidden="true">#</a> 1\u3001\u8D85\u65F6\u8BBE\u7F6E\uFF0C\u6545\u610F\u8BBE\u7F6E\u8D85\u65F6\u6F14\u793A\u51FA\u9519\u60C5\u51B5</h4><h5 id="_1-1-\u670D\u52A1\u63D0\u4F9B\u65B98001\u6545\u610F\u5199\u6682\u505C\u7A0B\u5E8F" tabindex="-1"><a class="header-anchor" href="#_1-1-\u670D\u52A1\u63D0\u4F9B\u65B98001\u6545\u610F\u5199\u6682\u505C\u7A0B\u5E8F" aria-hidden="true">#</a> 1.1 \u670D\u52A1\u63D0\u4F9B\u65B98001\u6545\u610F\u5199\u6682\u505C\u7A0B\u5E8F</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/payment/feign/timeout&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentFeignTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> serverPort<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6CE8\u610F\uFF1A\u5047\u5982\u4F608002\u4E5F\u542F\u52A8\u7684\u8BDD \u91CC\u9762\u6CA1\u6709\u5199paymenttimeout\u65B9\u6CD5\uFF0C\u4F1A\u62A5404\u9519\u8BEF\uFF1B\u6211\u8FD9\u91CC\u57288002\u4E5F\u5199\u4E86\u8BE5\u65B9\u6CD5\u3002</p><h5 id="_1-2-\u670D\u52A1\u6D88\u8D39\u65B980\u5728paymentfeignservice\u6DFB\u52A0\u8D85\u65F6\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_1-2-\u670D\u52A1\u6D88\u8D39\u65B980\u5728paymentfeignservice\u6DFB\u52A0\u8D85\u65F6\u65B9\u6CD5" aria-hidden="true">#</a> 1.2 \u670D\u52A1\u6D88\u8D39\u65B980\u5728PaymentFeignService\u6DFB\u52A0\u8D85\u65F6\u65B9\u6CD5</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;CLOUD-PAYMENT-SERVICE&quot;</span><span class="token punctuation">)</span> <span class="token comment">//\u4F5C\u4E3A\u4E00\u4E2AFeign\u529F\u80FD\u7ED1\u5B9A\u7684\u7684\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PaymentFeignService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/payment/get/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">getPaymentById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/payment/feign/timeout&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentFeignTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_1-3-\u6D88\u8D39\u65B980\u6DFB\u52A0\u8D85\u65F6\u65B9\u6CD5\u5230controller" tabindex="-1"><a class="header-anchor" href="#_1-3-\u6D88\u8D39\u65B980\u6DFB\u52A0\u8D85\u65F6\u65B9\u6CD5\u5230controller" aria-hidden="true">#</a> 1.3 \u6D88\u8D39\u65B980\u6DFB\u52A0\u8D85\u65F6\u65B9\u6CD5\u5230controller</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/feign/timeout&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentFeignTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//openfeign-ribbon\uFF0C\u5BA2\u6237\u7AEF\u4E00\u822C\u9ED8\u8BA4\u7B49\u5F851s</span>
    <span class="token keyword">return</span> paymentFeignService<span class="token punctuation">.</span><span class="token function">paymentFeignTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_1-4-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_1-4-\u6D4B\u8BD5" aria-hidden="true">#</a> 1.4 \u6D4B\u8BD5</h5><p>8001\u670D\u52A1\u65B9\u81EA\u6D4B\uFF1A\u6CA1\u6709\u95EE\u9898\uFF083s\u540E\u51FA\u7ED3\u679C\uFF09</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632276850056-8f071756-4481-4a5d-8c0b-8b125be14745.png" alt="img"></p><p>80\u6D88\u8D39\u65B9\u6D4B\u8BD5\uFF1A\u8D85\u65F6\u62A5\u9519 OpenFeign\u9ED8\u8BA4\u7B49\u5F85\u65F6\u95F4\u4E3A1s\uFF0C\u8D85\u8FC7\u540E\u62A5\u9519</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632276878646-c9173773-7367-4fa6-905a-87db839d7e85.png" alt="img"></p><h4 id="_2\u3001\u8D85\u65F6\u62A5\u9519" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u8D85\u65F6\u62A5\u9519" aria-hidden="true">#</a> 2\u3001\u8D85\u65F6\u62A5\u9519</h4><h5 id="_2-1-openfeign\u9ED8\u8BA4\u7B49\u5F85\u65F6\u95F4\u4E3A1\u79D2\u949F-\u8D85\u8FC7\u540E\u62A5\u9519" tabindex="-1"><a class="header-anchor" href="#_2-1-openfeign\u9ED8\u8BA4\u7B49\u5F85\u65F6\u95F4\u4E3A1\u79D2\u949F-\u8D85\u8FC7\u540E\u62A5\u9519" aria-hidden="true">#</a> 2.1 OpenFeign\u9ED8\u8BA4\u7B49\u5F85\u65F6\u95F4\u4E3A1\u79D2\u949F\uFF0C\u8D85\u8FC7\u540E\u62A5\u9519</h5><p>\u9ED8\u8BA4Feign\u5BA2\u6237\u7AEF\u53EA\u7B49\u5F85\u4E00\u79D2\u949F\uFF0C\u4F46\u662F\u670D\u52A1\u6BB5\u5904\u7406\u9700\u8981\u8D85\u8FC71\u79D2\u949F\uFF0C\u5BFC\u81F4Feign\u5BA2\u6237\u7AEF\u4E0D\u60F3\u7B49\u5F85\u4E86\uFF0C\u76F4\u63A5\u8FD4\u56DE\u62A5\u9519\u3002</p><p>\u4E3A\u4E86\u907F\u514D\u8FD9\u79CD\u8BF7\u51B5\uFF0C\u6709\u65F6\u5019\u6211\u4EEC\u9700\u8981\u8BBE\u7F6EFeign\u5BA2\u6237\u7AEF\u7684\u8D85\u65F6\u63A7\u5236\u3002</p><p><strong>Feign \u9ED8\u8BA4\u662F\u652F\u6301Ribbon \uFF0CFeign\u4F9D\u8D56\u91CC\u81EA\u5DF1\u5E26\u4E86Ribbon</strong>\uFF1B<strong>Feign\u5BA2\u6237\u7AEF\u7684\u8D1F\u8F7D\u5747\u8861\u548C\u8D85\u65F6\u63A7\u5236\u90FD\u7531Ribbon\u63A7\u5236</strong></p><h5 id="_2-2-\u914D\u7F6E\u8D85\u65F6\u65F6\u95F4" tabindex="-1"><a class="header-anchor" href="#_2-2-\u914D\u7F6E\u8D85\u65F6\u65F6\u95F4" aria-hidden="true">#</a> 2.2 \u914D\u7F6E\u8D85\u65F6\u65F6\u95F4</h5><p>\u4E3A\u4E86\u907F\u514D\u4E0A\u8FF0\u60C5\u51B5\uFF0C\u6211\u4EEC\u9700\u8981\u8BBE\u7F6EFeign\u5BA2\u6237\u7AEF\u7684\u8D85\u65F6\u7B49\u5F85\u65F6\u95F4\u3002</p><p>yml\u6587\u4EF6\u4E2D\u5F00\u542F\u914D\u7F6E\uFF1A</p><p>\u6CE8\u610F\uFF1A\u6211\u914D\u7F6EReadTimeout/ConnectTimeout\u65F6yml\u6CA1\u6709\u63D0\u793A\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">##\u8BBE\u7F6Efeign\u5BA2\u6237\u7AEF\u8D85\u65F6\u65F6\u95F4(OpenFeign\u9ED8\u8BA4\u652F\u6301ribbon)</span>
<span class="token key atrule">ribbon</span><span class="token punctuation">:</span>
  <span class="token comment">##\u6307\u7684\u662F\u5EFA\u7ACB\u8FDE\u63A5\u540E\u4ECE\u670D\u52A1\u5668\u8BFB\u53D6\u5230\u53EF\u7528\u8D44\u6E90\u6240\u7528\u7684\u65F6\u95F4</span>
  <span class="token key atrule">ReadTimeout</span><span class="token punctuation">:</span> <span class="token number">5000</span>
  <span class="token comment">##\u6307\u7684\u662F\u5EFA\u7ACB\u8FDE\u63A5\u6240\u7528\u7684\u65F6\u95F4\uFF0C\u9002\u7528\u4E8E\u7F51\u7EDC\u72B6\u51B5\u6B63\u5E38\u7684\u60C5\u51B5\u4E0B,\u4E24\u7AEF\u8FDE\u63A5\u6240\u7528\u7684\u65F6\u95F4</span>
  <span class="token key atrule">ConnectTimeout</span><span class="token punctuation">:</span> <span class="token number">5000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.0.3\u7248\u672C</p><p>feign.client.config.default.connect-timeout=5000 feign.client.config.default.read-timeout=5000</p><h5 id="_2-3-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_2-3-\u6D4B\u8BD5" aria-hidden="true">#</a> 2.3 \u6D4B\u8BD5</h5><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632279076157-aaa352a8-ba47-4725-a311-da86dd342a8e.png" alt="img"></p><h3 id="\u56DB\u3001openfeign\u65E5\u5FD7\u6253\u5370\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#\u56DB\u3001openfeign\u65E5\u5FD7\u6253\u5370\u529F\u80FD" aria-hidden="true">#</a> \u56DB\u3001OpenFeign\u65E5\u5FD7\u6253\u5370\u529F\u80FD</h3><p>Feign\u63D0\u4F9B\u4E86\u65E5\u5FD7\u6253\u5370\u529F\u80FD\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u914D\u7F6E\u6765\u8C03\u6574\u65E5\u5FD7\u7EA7\u522B\uFF0C\u4ECE\u800C\u4E86\u89E3Feign\u4E2DHttp\u8BF7\u6C42\u7684\u7EC6\u8282\u3002</p><p>\u8BF4\u767D\u4E86\u5C31\u662F\uFF1A\u5BF9Feign\u63A5\u53E3\u7684\u8C03\u7528\u60C5\u51B5\u8FDB\u884C\u76D1\u63A7\u548C\u8F93\u51FA\u3002</p><h4 id="_1\u3001\u65E5\u5FD7\u7EA7\u522B" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u65E5\u5FD7\u7EA7\u522B" aria-hidden="true">#</a> 1\u3001\u65E5\u5FD7\u7EA7\u522B</h4><table><thead><tr><th>NONE</th><th>\u9ED8\u8BA4\u7684\uFF0C\u4E0D\u663E\u793A\u4EFB\u4F55\u65E5\u5FD7</th></tr></thead><tbody><tr><td>BASIC</td><td>\u4EC5\u8BB0\u5F55\u8BF7\u6C42\u65B9\u6CD5\u3001URL\u3001\u54CD\u5E94\u72B6\u6001\u7801\u53CA\u6267\u884C\u65F6\u95F4</td></tr><tr><td>HEADERS</td><td>\u9664\u4E86BASIC\u4E2D\u5B9A\u4E49\u7684\u4FE1\u606F\u4E4B\u5916\uFF0C\u8FD8\u6709\u8BF7\u6C42\u548C\u54CD\u5E94\u7684\u5934\u4FE1\u606F</td></tr><tr><td>FULL</td><td>\u9664\u4E86HEADERS\u4E2D\u5B9A\u4E49\u7684\u4FE1\u606F\u5916\uFF0C\u8FD8\u6709\u8BF7\u6C42\u548C\u54CD\u5E94\u7684\u6B63\u6587\u53CA\u5143\u6570\u636E\u3002</td></tr></tbody></table><h4 id="_2\u3001\u914D\u7F6E\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u914D\u7F6E\u65E5\u5FD7" aria-hidden="true">#</a> 2\u3001\u914D\u7F6E\u65E5\u5FD7</h4><p>\u914D\u7F6E\u5728\u6D88\u8D39\u7AEF</p><h5 id="_2-1-\u914D\u7F6E\u65E5\u5FD7bean" tabindex="-1"><a class="header-anchor" href="#_2-1-\u914D\u7F6E\u65E5\u5FD7bean" aria-hidden="true">#</a> 2.1 \u914D\u7F6E\u65E5\u5FD7bean</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">feign<span class="token punctuation">.</span></span><span class="token class-name">Logger</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FeignConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token class-name">Logger<span class="token punctuation">.</span>Level</span> <span class="token function">feignLoggerLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Logger<span class="token punctuation">.</span>Level</span><span class="token punctuation">.</span>FULL<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-2-\u914D\u7F6E\u6D88\u8D39\u7AEF\u7684yml\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_2-2-\u914D\u7F6E\u6D88\u8D39\u7AEF\u7684yml\u6587\u4EF6" aria-hidden="true">#</a> 2.2 \u914D\u7F6E\u6D88\u8D39\u7AEF\u7684yml\u6587\u4EF6</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">level</span><span class="token punctuation">:</span>
    <span class="token comment">## feign \u65E5\u5FD7\u4EE5\u4EC0\u4E48\u7EA7\u522B\u76D1\u63A7\u54EA\u4E2A\u63A5\u53E3</span>
    <span class="token key atrule">com.atguigu.springcloud.service.PaymentFeignService</span><span class="token punctuation">:</span> debug
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-3-\u67E5\u770B\u540E\u53F0\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#_2-3-\u67E5\u770B\u540E\u53F0\u65E5\u5FD7" aria-hidden="true">#</a> 2.3 \u67E5\u770B\u540E\u53F0\u65E5\u5FD7</h5><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632279620087-41008962-bb15-4664-86bd-27040b701af8.png" alt="img"></p><h2 id="_7-\u670D\u52A1\u7194\u65AD-\u964D\u7EA7-hystrix\u65AD\u8DEF\u5668" tabindex="-1"><a class="header-anchor" href="#_7-\u670D\u52A1\u7194\u65AD-\u964D\u7EA7-hystrix\u65AD\u8DEF\u5668" aria-hidden="true">#</a> 7.\u670D\u52A1\u7194\u65AD/\u964D\u7EA7-Hystrix\u65AD\u8DEF\u5668</h2><h3 id="\u4E00\u3001\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001\u6982\u8FF0" aria-hidden="true">#</a> \u4E00\u3001\u6982\u8FF0</h3><h4 id="_1\u3001\u5206\u5E03\u5F0F\u7CFB\u7EDF\u9762\u4E34\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u5206\u5E03\u5F0F\u7CFB\u7EDF\u9762\u4E34\u7684\u95EE\u9898" aria-hidden="true">#</a> 1\u3001\u5206\u5E03\u5F0F\u7CFB\u7EDF\u9762\u4E34\u7684\u95EE\u9898</h4><p>\u590D\u6742\u5206\u5E03\u5F0F\u4F53\u7CFB\u7ED3\u6784\u4E2D\u7684\u5E94\u7528\u7A0B\u5E8F\u6709\u6570\u5341\u4E2A\u4F9D\u8D56\u5173\u7CFB\uFF0C\u6BCF\u4E2A\u4F9D\u8D56\u5173\u7CFB\u5728\u67D0\u4E9B\u65F6\u5019\u5C06\u4E0D\u53EF\u907F\u514D\u5730\u5931\u8D25\u3002</p><p>\u51E0\u4E2A\u5FAE\u670D\u52A1\u4E4B\u95F4\u7684\u76F8\u4E92\u8C03\u7528\uFF0C\u4E00\u5B9A\u4F1A\u5BFC\u81F4\u94FE\u8DEF\u8D8A\u6765\u8D8A\u957F\u3002\u4E00\u4E2A\u51FA\u4E8B\u4E86\uFF0C\u5C31\u4F1A\u5BFC\u81F4\u6574\u6761\u94FE\u8DEF\u4E0A\u7684\u670D\u52A1\u90FD\u51FA\u4E8B\u3002</p><h5 id="_1-1-\u670D\u52A1\u96EA\u5D29" tabindex="-1"><a class="header-anchor" href="#_1-1-\u670D\u52A1\u96EA\u5D29" aria-hidden="true">#</a> 1.1 \u670D\u52A1\u96EA\u5D29</h5><p>\u591A\u4E2A\u5FAE\u670D\u52A1\u4E4B\u95F4\u8C03\u7528\u7684\u65F6\u5019\uFF0C\u5047\u8BBE\u5FAE\u670D\u52A1A\u8C03\u7528\u5FAE\u670D\u52A1B\u548C\u5FAE\u670D\u52A1C\uFF0C\u5FAE\u670D\u52A1B\u548C\u5FAE\u670D\u52A1C\u53C8\u8C03\u7528\u5176\u4ED6\u7684\u5FAE\u670D\u52A1\uFF0C\u8FD9\u5C31\u662F\u6240\u8C13\u7684\u201C\u6247\u51FA\u201D\u5982\u679C\u6247\u51FA\u7684\u94FE\u8DEF\u4E0A\u67D0\u4E2A\u5FAE\u670D\u52A1\u7684\u8C03\u7528\u54CD\u5E94\u65F6\u95F4\u8FC7\u957F\u6216\u8005\u4E0D\u53EF\u7528\uFF0C\u5BF9\u5FAE\u670D\u52A1A\u7684\u8C03\u7528\u5C31\u4F1A\u5360\u7528\u8D8A\u6765\u8D8A\u591A\u7684\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u8FDB\u800C\u5F15\u8D77\u7CFB\u7EDF\u5D29\u6E83\uFF0C\u6240\u8C13\u7684\u201C\u96EA\u5D29\u6548\u5E94\u201D\u3002</p><p>\u5BF9\u4E8E\u9AD8\u6D41\u91CF\u7684\u5E94\u7528\u6765\u8BF4\uFF0C\u5355\u4E00\u7684\u540E\u7AEF\u4F9D\u8D56\u53EF\u80FD\u4F1A\u5BFC\u81F4\u6240\u6709\u670D\u52A1\u5668\u4E0A\u7684\u6240\u6709\u8D44\u6E90\u90FD\u5728\u51E0\u79D2\u949F\u5185\u9971\u548C\uFF0C\u6BD4\u5931\u8D25\u66F4\u7CDF\u7CD5\u7684\u662F\uFF0C\u8FD9\u4E9B\u5E94\u7528\u7A0B\u5E8F\u8FD8\u53EF\u80FD\u5BFC\u81F4\u670D\u52A1\u4E4B\u95F4\u7684\u5EF6\u8FDF\u589E\u52A0\uFF0C\u5907\u4EFD\u961F\u5217\uFF0C\u7EBF\u7A0B\u548C\u5176\u4ED6\u7CFB\u7EDF\u8D44\u6E90\u7D27\u5F20\uFF0C\u5BFC\u81F4\u6574\u4E2A\u7CFB\u7EDF\u53D1\u751F\u66F4\u591A\u7684\u7EA7\u8054\u6545\u969C\u3002</p><p>\u8FD9\u4E9B\u90FD\u8868\u793A\u9700\u8981\u5BF9\u6545\u969C\u548C\u5EF6\u8FDF\u8FDB\u884C\u9694\u79BB\u548C\u7BA1\u7406\uFF0C\u4EE5\u4FBF\u5355\u4E2A\u4F9D\u8D56\u5173\u7CFB\u7684\u5931\u8D25\uFF0C\u4E0D\u80FD\u53D6\u6D88\u6574\u4E2A\u5E94\u7528\u7A0B\u5E8F\u6216\u7CFB\u7EDF\u3002</p><p>\u6240\u4EE5\uFF0C</p><p>\u901A\u5E38\u5F53\u4F60\u53D1\u73B0\u4E00\u4E2A\u6A21\u5757\u4E0B\u67D0\u4E2A\u5B9E\u4F8B\u5931\u8D25\u540E\uFF0C\u8FD9\u65F6\u5019\u8FD9\u4E2A\u6A21\u5757\u4F9D\u7136\u8FD8\u4F1A\u63A5\u6536\u6D41\u91CF\uFF0C\u7136\u800C\u8FD9\u4E2A\u6709\u95EE\u9898\u7684\u6A21\u5757\u8FD8\u8C03\u7528\u4E86\u5176\u4ED6\u6A21\u5757\uFF0C\u8FD9\u6837\u5C31\u4F1A\u53D1\u751F\u7EA7\u8054\u6545\u969C\uFF0C\u6216\u8005\u53EB\u96EA\u5D29\u3002</p><h4 id="_2\u3001hystrix-\u662F\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#_2\u3001hystrix-\u662F\u4EC0\u4E48" aria-hidden="true">#</a> 2\u3001Hystrix \u662F\u4EC0\u4E48</h4><p>Hystrix \u662F\u4E00\u4E2A\u7528\u4E8E <code>\u5904\u7406\u5206\u5E03\u5F0F\u7CFB\u7EDF\u7684\u5EF6\u8FDF\u548C\u5BB9\u9519\u7684\u5F00\u6E90\u5E93</code> \uFF0C\u5728\u5206\u5E03\u5F0F\u7CFB\u7EDF\u91CC\uFF0C\u8BB8\u591A\u4F9D\u8D56\u4E0D\u53EF\u907F\u514D\u7684\u4F1A\u8C03\u7528\u5931\u8D25\uFF0C\u6BD4\u5982\u8D85\u65F6\uFF0C\u5F02\u5E38\u7B49\uFF0CHystrix\u80FD\u591F\u4FDD\u8BC1\u5728\u4E00\u4E2A\u4F9D\u8D56\u51FA\u95EE\u9898\u7684\u60C5\u51B5\u4E0B\uFF0C<code>\u4E0D\u4F1A\u5BFC\u81F4\u6574\u4F53\u670D\u52A1\u5931\u8D25\uFF0C\u907F\u514D\u7EA7\u8054\u6545\u969C\uFF0C\u4EE5\u63D0\u9AD8\u5206\u5E03\u5F0F\u7CFB\u7EDF\u7684\u5F39\u6027</code> \u3002</p><p>\u65AD\u8DEF\u5668\u672C\u8EAB\u662F\u4E00\u79CD\u5F00\u5173\u88C5\u7F6E\uFF0C\u5F53\u67D0\u4E2A\u670D\u52A1\u5355\u5143\u53D1\u751F\u6545\u969C\u4E4B\u540E\uFF0C\u901A\u8FC7\u65AD\u8DEF\u5668\u7684\u6545\u969C\u76D1\u63A7\uFF08\u7C7B\u4F3C\u7194\u65AD\u4FDD\u9669\u4E1D\uFF09\uFF0C\u5411\u8C03\u7528\u65B9\u8FD4\u56DE\u4E00\u4E2A\u7B26\u5408\u9884\u671F\u7684\uFF0C\u53EF\u5904\u7406\u7684\u5907\u9009\u54CD\u5E94\uFF08FallBack\uFF09\uFF0C\u800C\u4E0D\u662F\u957F\u65F6\u95F4\u7684\u7B49\u5F85\u6216\u8005\u629B\u51FA\u8C03\u7528\u65B9\u65E0\u6CD5\u5904\u7406\u7684\u5F02\u5E38\uFF0C\u8FD9\u6837\u5C31\u4FDD\u8BC1\u4E86\u670D\u52A1\u8C03\u7528\u65B9\u7684\u7EBF\u7A0B\u4E0D\u4F1A\u88AB\u957F\u65F6\u95F4\u3001\u4E0D\u5FC5\u8981\u5730\u5360\u7528\uFF0C\u4ECE\u800C\u907F\u514D\u4E86\u6545\u969C\u5728\u5206\u5E03\u5F0F\u7CFB\u7EDF\u4E2D\u7684\u8513\u5EF6\uFF0C\u4E43\u81F3\u96EA\u5D29\u3002</p><h4 id="_3\u3001hystrix\u80FD\u505A\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#_3\u3001hystrix\u80FD\u505A\u4EC0\u4E48" aria-hidden="true">#</a> 3\u3001Hystrix\u80FD\u505A\u4EC0\u4E48</h4><ul><li>\u670D\u52A1\u964D\u7EA7</li><li>\u670D\u52A1\u7194\u65AD</li><li>\u63A5\u8FD1\u5B9E\u65F6\u7684\u76D1\u63A7</li><li>\u3002\u3002\u3002\u3002</li></ul><h4 id="_4\u3001hystrix\u5B98\u7F51" tabindex="-1"><a class="header-anchor" href="#_4\u3001hystrix\u5B98\u7F51" aria-hidden="true">#</a> 4\u3001Hystrix\u5B98\u7F51</h4>`,111),Qn={href:"https://github.com/Netflix/Hystrix/wiki/How-To-Use",target:"_blank",rel:"noopener noreferrer"},Xn=a("https://github.com/Netflix/Hystrix/wiki/How-To-Use"),Wn=p(`<h3 id="\u4E8C\u3001hystrix-\u91CD\u8981\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001hystrix-\u91CD\u8981\u6982\u5FF5" aria-hidden="true">#</a> \u4E8C\u3001Hystrix \u91CD\u8981\u6982\u5FF5</h3><h4 id="_1\u3001\u670D\u52A1\u964D\u7EA7-fallback" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u670D\u52A1\u964D\u7EA7-fallback" aria-hidden="true">#</a> 1\u3001\u670D\u52A1\u964D\u7EA7\uFF1Afallback</h4><p>\u52A0\u5165\u5BF9\u65B9\u7684\u7CFB\u7EDF\u4E0D\u53EF\u7528\u4E86\uFF0C\u9700\u8981\u4E00\u4E2A\u515C\u5E95\u7684\u89E3\u51B3\u65B9\u6848\u6216\u5907\u9009\u54CD\u5E94\uFF1B\u5411\u8C03\u7528\u65B9\u8FD4\u56DE\u4E00\u4E2A\u7B26\u5408\u9884\u671F\u7684\u3001\u53EF\u5904\u7406\u7684\u5907\u9009\u54CD\u5E94\u3002</p><p>\u670D\u52A1\u5668\u7E41\u5FD9\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF0C\u4E0D\u8BA9\u5BA2\u6237\u7AEF\u7B49\u5F85\u5E76\u7ACB\u523B\u8FD4\u56DE\u4E00\u4E2A\u597D\u53CB\u63D0\u793A\u3002<code>fallback</code></p><p>\u54EA\u4E9B\u60C5\u51B5\u4F1A\u89E6\u53D1\u964D\u7EA7\uFF1A</p><ul><li>\u7A0B\u5E8F\u8FD0\u884C\u5F02\u5E38</li><li>\u8D85\u65F6</li><li>\u670D\u52A1\u7194\u65AD\u89E6\u53D1\u670D\u52A1\u964D\u7EA7</li><li>\u7EBF\u7A0B\u6C60/\u4FE1\u53F7\u91CF\u6253\u6EE1\u4E5F\u4F1A\u5BFC\u81F4\u670D\u52A1\u964D\u7EA7</li></ul><h4 id="_2\u3001\u670D\u52A1\u7194\u65AD-break" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u670D\u52A1\u7194\u65AD-break" aria-hidden="true">#</a> 2\u3001\u670D\u52A1\u7194\u65AD\uFF1Abreak</h4><p>\u7C7B\u6BD4\u4FDD\u9669\u4E1D\u8FBE\u5230\u6700\u5927\u670D\u52A1\u8BBF\u95EE\u540E\uFF0C\u76F4\u63A5\u62D2\u7EDD\u8BBF\u95EE\uFF0C\u62C9\u95F8\u9650\u7535\uFF0C\u7136\u540E\u8C03\u7528\u670D\u52A1\u964D\u7EA7\u7684\u65B9\u6CD5\u5E76\u8FD4\u56DE\u53CB\u597D\u63D0\u793A <code>break</code></p><p>\u5C31\u662F\u4FDD\u9669\u4E1D || \u670D\u52A1\u7684\u964D\u7EA7---&gt;\u8FDB\u800C\u7194\u65AD---&gt;\u6062\u590D\u8C03\u7528\u94FE\u8DEF</p><h4 id="_3\u3001\u670D\u52A1\u9650\u6D41-flowlimit" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u670D\u52A1\u9650\u6D41-flowlimit" aria-hidden="true">#</a> 3\u3001\u670D\u52A1\u9650\u6D41\uFF1Aflowlimit</h4><p>\u79D2\u6740\u9AD8\u5E76\u53D1\u7B49\u64CD\u4F5C\uFF0C\u4E25\u7981\u4E00\u7A9D\u8702\u7684\u8FC7\u6765\u62E5\u6324\uFF0C\u5927\u5BB6\u6392\u961F\uFF0C\u4E00\u79D2\u949FN\u4E2A\uFF0C\u6709\u5E8F\u8FDB\u884C <code>flowlimit</code></p><h3 id="\u4E09\u3001hystrix\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001hystrix\u6848\u4F8B" aria-hidden="true">#</a> \u4E09\u3001Hystrix\u6848\u4F8B</h3><h4 id="_1\u3001\u6784\u5EFA\u6B63\u786E\u63D0\u4F9B\u8005\u6A21\u5757" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u6784\u5EFA\u6B63\u786E\u63D0\u4F9B\u8005\u6A21\u5757" aria-hidden="true">#</a> 1\u3001\u6784\u5EFA\u6B63\u786E\u63D0\u4F9B\u8005\u6A21\u5757</h4><p><strong>\u8FD9\u91CC\u89C6\u9891\u91CC\u9762\u9996\u5148\u5C06eureka7001\u4ECE\u96C6\u7FA4\u7248\u6539\u6210\u4E86\u5355\u673A\u7248\uFF0C\u6211\u6CA1\u6709\u6539\u3002</strong></p><p>\u642D\u5EFA\u57FA\u7840\u5E73\u53F0\uFF1A\u4ECE\u6B63\u786E---&gt;\u9519\u8BEF---&gt;\u964D\u7EA7\u7194\u65AD---&gt;\u6062\u590D</p><p>\u4EE5\u6B64\u5E73\u53F0 \u6F14\u793A Hystrix \u670D\u52A1\u964D\u7EA7 \u670D\u52A1\u7194\u65AD \u670D\u52A1\u9650\u6D41</p><h5 id="_1-1-\u521B\u5EFAcloud-provider-hystrix-payment8001\u6A21\u5757" tabindex="-1"><a class="header-anchor" href="#_1-1-\u521B\u5EFAcloud-provider-hystrix-payment8001\u6A21\u5757" aria-hidden="true">#</a> 1.1 \u521B\u5EFAcloud-provider-hystrix-payment8001\u6A21\u5757</h5><h5 id="_1-2-\u6539pom" tabindex="-1"><a class="header-anchor" href="#_1-2-\u6539pom" aria-hidden="true">#</a> 1.2 \u6539pom</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jdk8cloud2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-provider-hystrix-payment8001<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--hystrix--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-hystrix<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--eureka client--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--web--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- \u5F15\u5165\u81EA\u5DF1\u5B9A\u4E49\u7684api\u901A\u7528\u5305\uFF0C\u53EF\u4EE5\u4F7F\u7528Payment\u652F\u4ED8Entity --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>yml</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8001</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>provider<span class="token punctuation">-</span>hystrix<span class="token punctuation">-</span>payment

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token comment">##\u96C6\u7FA4\u7248</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//eureka7002.com<span class="token punctuation">:</span>7002/eureka
      <span class="token comment">##\u5355\u673A\u7248</span>
<span class="token comment">##      defaultZone: http://eureka7001.com:7001/eureka</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_1-3-\u4E3B\u542F\u52A8\u7C7B" tabindex="-1"><a class="header-anchor" href="#_1-3-\u4E3B\u542F\u52A8\u7C7B" aria-hidden="true">#</a> 1.3 \u4E3B\u542F\u52A8\u7C7B</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentHystrixMain8001</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">PaymentHystrixMain8001</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_1-4-\u4E1A\u52A1\u7C7B" tabindex="-1"><a class="header-anchor" href="#_1-4-\u4E1A\u52A1\u7C7B" aria-hidden="true">#</a> 1.4 \u4E1A\u52A1\u7C7B</h5><p>####### 1.4.1 Service</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentService</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * \u6B63\u5E38\u8BBF\u95EE\uFF0C\u4E00\u5B9Aok\u7684\u65B9\u6CD5
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Ok</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;\u7EBF\u7A0B\u6C60\uFF1A  &quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;   paymentInfo_OK,  id:  &quot;</span> <span class="token operator">+</span> id
                <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span><span class="token operator">+</span><span class="token string">&quot;O(\u2229_\u2229)O\u54C8\u54C8~&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> timeNumber <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span>timeNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token string">&quot;\u7EBF\u7A0B\u6C60\uFF1A  &quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;   payment_Timeout,  id:  &quot;</span> <span class="token operator">+</span> id
                <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span><span class="token operator">+</span><span class="token string">&quot;O(\u2229_\u2229)O\u54C8\u54C8~\u8017\u65F6(s):&quot;</span> <span class="token operator">+</span> timeNumber<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>####### 1.4.2 Controller</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">PaymentService</span> paymentService<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${server.port}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> serverPort<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/payment/hystrix/ok/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Ok</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> paymentService<span class="token punctuation">.</span><span class="token function">paymentInfo_Ok</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;******ok****result\uFF1A&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/payment/hystrix/timeout/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> paymentService<span class="token punctuation">.</span><span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;******timeout****result\uFF1A&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_1-5-\u6B63\u5E38\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_1-5-\u6B63\u5E38\u6D4B\u8BD5" aria-hidden="true">#</a> 1.5 \u6B63\u5E38\u6D4B\u8BD5</h5><p>\u542F\u52A8eireka7001/7002\uFF1B\u542F\u52A8cloud-provider-hystrix-payment8001</p><p>\u8BBF\u95EE\u6A21\u62DF\u5065\u5EB7\u7684\u65B9\u6CD5\uFF1A ok\u7684\u65B9\u6CD5</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632293734919-3f04b114-3bae-4439-9d3a-cfd104ef18b0.png" alt="img"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632293745177-21890094-e52b-41fa-99e9-c72ab4fe6af7.png" alt="img"></p><p>\u8BBF\u95EE\u6A21\u62DF\u590D\u6742\u4E1A\u52A1\u903B\u8F91\u7684\u65B9\u6CD5\uFF1Atimeout\u7684\u65B9\u6CD5\uFF0C\u8017\u65F63s</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632293817507-388f1cfc-0438-466a-95de-405f787761b4.png" alt="img"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632293827710-17997f2c-0ab2-495d-87f9-b82973e01249.png" alt="img"></p><h5 id="_1-6-\u4EE5\u4E0A\u8FF0\u5E73\u53F0\u4E3A\u6839\u57FA-\u6F14\u793A\u6B63\u786E-\u9519\u8BEF-\u964D\u7EA7\u7194\u65AD-\u6062\u590D" tabindex="-1"><a class="header-anchor" href="#_1-6-\u4EE5\u4E0A\u8FF0\u5E73\u53F0\u4E3A\u6839\u57FA-\u6F14\u793A\u6B63\u786E-\u9519\u8BEF-\u964D\u7EA7\u7194\u65AD-\u6062\u590D" aria-hidden="true">#</a> 1.6 \u4EE5\u4E0A\u8FF0\u5E73\u53F0\u4E3A\u6839\u57FA\uFF0C\u6F14\u793A\u6B63\u786E--&gt;\u9519\u8BEF--&gt;\u964D\u7EA7\u7194\u65AD--&gt;\u6062\u590D</h5><p>####### \u9AD8\u5E76\u53D1\u538B\u6D4B</p>`,38),Yn=a("\u4E0A\u8FF0\u5728\u975E\u9AD8\u5E76\u53D1\u60C5\u51B5\u4E0B\uFF0C\u8FD8\u52C9\u5F3A\u53EF\u4EE5\u6EE1\u8DB3\u3002\u4F7F\u7528jmeter\uFF0C\u8BBE\u7F6E20000\u4E2A\u5E76\u53D1\u538B\u6B7B8001,20000\u4E2A\u8BF7\u6C42\u90FD\u53BB\u8BBF\u95EE"),$n={href:"http://localhost:8001/payment/hystrix/timeout/31",target:"_blank",rel:"noopener noreferrer"},Kn=a("http://localhost:8001/payment/hystrix/timeout/31"),Jn=n("p",null,[n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632296071791-701b786a-5d25-4c21-b5a9-c545ac74c8c6.png",alt:"img"}),n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632296085411-98b8ca31-801c-4fc9-a5c2-8c68355dc6a4.png",alt:"img"})],-1),na=a("\u7ED3\u679C\u53D1\u73B0\u539F\u6765\u53EF\u4EE5\u8FC5\u901F\u54CD\u5E94\u7684"),aa={href:"http://localhost:8001/payment/hystrix/ok/31",target:"_blank",rel:"noopener noreferrer"},sa=a("http://localhost:8001/payment/hystrix/ok/31"),ta=a(" \u53D8\u5F97\u5361\u987F\u3002\u4E24\u4E2A\u90FD\u5728\u8F6C\u5708\u3002"),pa=p(`<p><strong>\u539F\u56E0\uFF1A</strong></p><p>\u56E0\u4E3Aok\u8DDFtimeout\u90FD\u5728\u4E00\u4E2A\u5FAE\u670D\u52A1\u91CC\uFF0C\u73B0\u5728\u5927\u91CF\u7684\u8D44\u6E90\u88ABtimeout\u5360\u7528\uFF0C\u5FAE\u670D\u52A1\u5FC5\u987B\u96C6\u4E2D\u8D44\u6E90\u53BB\u5904\u7406\u8FD9\u4E9B \u9AD8\u5E76\u53D1\u7684\u8BF7\u6C42\u3002\u90A3\u4E48ok\u65B9\u6CD5\uFF0C\u5F97\u5230\u7684\u8D44\u6E90\u5C31\u5C11\uFF0C\u8FDB\u800C\u88AB\u5F71\u54CD\u3002SpringBoot\u9ED8\u8BA4\u96C6\u6210\u7684\u662Ftomcat\u5BB9\u5668\uFF0C\u91CC\u9762\u6709\u4E00\u4E2Atomcat\u7684\u7EBF\u7A0B\u6C60\uFF0C\u9AD8\u5E76\u53D1\u4E0B\u6CA1\u6709\u591A\u4F59\u7684 \u7EBF\u7A0B\u6765\u5206\u89E3\u538B\u529B\u548C\u5904\u7406ok\u65B9\u6CD5\u3002 \u6BCF\u4E2A\u7EBF\u7A0B\u90FD\u8981\u7B49\u5F853\u79D2\u949F\uFF0C\u624D\u80FD\u62FF\u5230timeout\u7684\u7ED3\u679C\u54CD\u5E94\u3002\u90A3\u4E482000\u4E2A\u7EBF\u7A0B\u4E00\u8D77\u8FC7\u6765\uFF0C Tomcat\u6C60\u5B50\u91CC\u7684\u7EBF\u7A0B\uFF0C\u9A6C\u4E0A\u5C31\u4F1A\u88AB\u62A2\u5360\u5B8C\u3002</p><p><strong>Jmeter\u538B\u6D4B\u7ED3\u8BBA\uFF1A</strong></p><p>\u4E0A\u9762\u8FD8\u53EA\u662F\u670D\u52A1\u63D0\u4F9B\u80058001\u81EA\u5DF1\u6D4B\u8BD5\uFF0C\u5047\u5982\u6B64\u65F6\u5916\u90E8\u7684\u6D88\u8D39\u800580\u4E5F\u6765\u8BBF\u95EE\uFF0C\u90A3\u6D88\u8D39\u8005\u53EA\u80FD\u5E72\u7B49\uFF0C \u6700\u7EC8\u5BFC\u81F4\u6D88\u8D39\u7AEF80\u4E0D\u6EE1\u610F\uFF0C\u670D\u52A1\u7AEF8001\u76F4\u63A5\u88AB\u62D6\u6B7B\u3002</p><h4 id="_2\u3001\u65B0\u5EFA\u6D88\u8D39\u8005\u6A21\u5757-cloud-consumer-feign-hystrix-order80" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u65B0\u5EFA\u6D88\u8D39\u8005\u6A21\u5757-cloud-consumer-feign-hystrix-order80" aria-hidden="true">#</a> 2\u3001\u65B0\u5EFA\u6D88\u8D39\u8005\u6A21\u5757\uFF1Acloud-consumer-feign-hystrix-order80</h4><h5 id="_2-1-pom" tabindex="-1"><a class="header-anchor" href="#_2-1-pom" aria-hidden="true">#</a> 2.1 pom</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jdk8cloud2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-consumer-feign-hystrix-order80<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--openfeign--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--hystrix--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-hystrix<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--eureka client--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- \u5F15\u5165\u81EA\u5DF1\u5B9A\u4E49\u7684api\u901A\u7528\u5305\uFF0C\u53EF\u4EE5\u4F7F\u7528Payment\u652F\u4ED8Entity --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--web--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--\u4E00\u822C\u57FA\u7840\u901A\u7528\u914D\u7F6E--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-2-yml" tabindex="-1"><a class="header-anchor" href="#_2-2-yml" aria-hidden="true">#</a> 2.2 yml</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka/<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//eureka7002.com<span class="token punctuation">:</span>7002/eureka/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-3-\u4E3B\u542F\u52A8\u7C7B" tabindex="-1"><a class="header-anchor" href="#_2-3-\u4E3B\u542F\u52A8\u7C7B" aria-hidden="true">#</a> 2.3 \u4E3B\u542F\u52A8\u7C7B</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableFeignClients</span> <span class="token comment">//\u4E0D\u4F5C\u4E3AEureak\u5BA2\u6237\u7AEF\u4E86\uFF0C\u800C\u662F\u4F5C\u4E3AFeign\u5BA2\u6237\u7AEF</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderFeignHystrixMain80</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">OrderFeignHystrixMain80</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-4-\u4E1A\u52A1\u7C7B" tabindex="-1"><a class="header-anchor" href="#_2-4-\u4E1A\u52A1\u7C7B" aria-hidden="true">#</a> 2.4 \u4E1A\u52A1\u7C7B</h5><p>####### 2.4.1 PaymentHystrixService</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;CLOUD-PROVIDER-HYSTRIX-PAYMENT&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PaymentHystrixService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/payment/hystrix/ok/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Ok</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/payment/hystrix/timeout/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>####### 2.4.2 OrderHystirxController</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderHystirxController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Resource</span>
    <span class="token class-name">PaymentHystrixService</span> paymentHystrixService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/hystrix/ok/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Ok</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> paymentHystrixService<span class="token punctuation">.</span><span class="token function">paymentInfo_Ok</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/hystrix/timeout/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> paymentHystrixService<span class="token punctuation">.</span><span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-5-\u6B63\u5E38\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_2-5-\u6B63\u5E38\u6D4B\u8BD5" aria-hidden="true">#</a> 2.5 \u6B63\u5E38\u6D4B\u8BD5</h5>`,17),ea={href:"http://localhost/consumer/payment/hystrix/timeout/31",target:"_blank",rel:"noopener noreferrer"},oa=a("http://localhost/consumer/payment/hystrix/timeout/31"),ca=n("p",null,"\u7531\u4E8E\u4F7F\u7528\u7684\u662FFeign\u4F5C\u4E3A\u5BA2\u6237\u7AEF\uFF0C\u9ED8\u8BA41s\u6CA1\u6709\u5F97\u5230\u54CD\u5E94\u5C31\u4F1A\u62A5\u8D85\u65F6\u9519\u8BEF\u3002\u8FD9\u662F\u6B63\u5E38\u7684\uFF0C\u8FD9\u91CC\u6211\u4EEC\u4E0D\u8FDB\u884C\u6539\u52A8\u3002",-1),la=n("p",null,[n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632299132526-b5214cc0-f220-4a32-a1cf-c89915a1d7af.png",alt:"img"})],-1),ia={href:"http://localhost/consumer/payment/hystrix/ok/31",target:"_blank",rel:"noopener noreferrer"},ua=a("http://localhost/consumer/payment/hystrix/ok/31"),ra=n("p",null,[n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632299703025-9009bec4-75ce-4e5d-8b2b-ab6159b42ce6.png",alt:"img"})],-1),ka=n("h5",{id:"_2-6-\u9AD8\u5E76\u53D1\u6D4B\u8BD5",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2-6-\u9AD8\u5E76\u53D1\u6D4B\u8BD5","aria-hidden":"true"},"#"),a(" 2.6 \u9AD8\u5E76\u53D1\u6D4B\u8BD5")],-1),da=a("2W\u4E2A\u7EBF\u7A0B\u538B8001 \u6D88\u8D39\u7AEF80\u5FAE\u670D\u52A1\u518D\u53BB\u8BBF\u95EE\u6B63\u5E38\u7684OK\u5FAE\u670D\u52A18001\u5730\u5740"),ga={href:"http://localhost/consumer/payment/hystrix/ok/31:",target:"_blank",rel:"noopener noreferrer"},ma=a("http://localhost/consumer/payment/hystrix/ok/31:"),va=a(" \u8981\u4E48\u8F6C\u5708\u5708\u7B49\u5F85\uFF0C\u8981\u4E48\u6D88\u8D39\u7AEF\u62A5\u8D85\u65F6\u9519\u8BEF\u3002"),ba=p(`<p>\u539F\u56E0\uFF1A 8001\u540C\u4E00\u5C42\u6B21\u7684\u5176\u4ED6\u63A5\u53E3\u670D\u52A1\u88AB\u56F0\u6B7B\uFF0C\u56E0\u4E3Atomcat\u7EBF\u7A0B\u6C60\u91CC\u9762\u7684\u5DE5\u4F5C\u7EBF\u7A0B\u5DF2\u7ECF\u88AB\u6324\u5360\u5B8C\u6BD5 \u6240\u4EE580\u6B64\u65F6\u8C03\u75288001\uFF0C\u5BA2\u6237\u7AEF\u8BBF\u95EE\u54CD\u5E94\u7F13\u6162\uFF0C\u8F6C\u5708\u5708\u3002 \u6B63\u56E0\u4E3A\u6709\u4E0A\u8FF0\u6545\u969C\u6216\u4E0D\u4F73\u8868\u73B0\uFF0C\u624D\u6709\u4E86\u6211\u4EEC\u7684\u964D\u7EA7/\u5BB9\u9519/\u9650\u6D41\u7B49\u6280\u672F\u8BDE\u751F\u3002</p><h4 id="_3\u3001hystrix\u5982\u4F55\u89E3\u51B3\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_3\u3001hystrix\u5982\u4F55\u89E3\u51B3\u95EE\u9898" aria-hidden="true">#</a> 3\u3001Hystrix\u5982\u4F55\u89E3\u51B3\u95EE\u9898\uFF1F</h4><p>\u5982\u4F55\u89E3\u51B3\uFF1F\u89E3\u51B3\u7684\u8981\u6C42\uFF1F</p><ul><li><p>\u8D85\u65F6\u5BFC\u81F4\u670D\u52A1\u5668\u53D8\u6162(\u8F6C\u5708)\uFF1A\u8D85\u65F6\u4E0D\u518D\u7B49\u5F85</p></li><li><p>\u51FA\u9519(\u5B95\u673A\u6216\u7A0B\u5E8F\u8FD0\u884C\u51FA\u9519)\uFF1A\u51FA\u9519\u8981\u6709\u515C\u5E95</p></li><li><p>\u89E3\u51B3</p></li><li><ul><li>\u5BF9\u65B9\u670D\u52A1(8001)\u8D85\u65F6\u4E86\uFF0C\u8C03\u7528\u8005(80)\u4E0D\u80FD\u4E00\u76F4\u5361\u6B7B\u7B49\u5F85\uFF0C\u5FC5\u987B\u6709\u670D\u52A1\u964D\u7EA7</li><li>\u5BF9\u65B9\u670D\u52A1(8001)down\u673A\u4E86\uFF0C\u8C03\u7528\u8005(80)\u4E0D\u80FD\u4E00\u76F4\u5361\u6B7B\u7B49\u5F85\uFF0C\u5FC5\u987B\u6709\u670D\u52A1\u964D\u7EA7</li><li>\u5BF9\u65B9\u670D\u52A1(8001)OK\uFF0C\u8C03\u7528\u8005(80)\u81EA\u5DF1\u51FA\u6545\u969C\u6216\u6709\u81EA\u6211\u8981\u6C42\uFF08\u81EA\u5DF1\u7684\u7B49\u5F85\u65F6\u95F4\u5C0F\u4E8E\u670D\u52A1\u63D0\u4F9B\u8005\uFF09\uFF0C\u81EA\u5DF1\u5904\u7406\u964D\u7EA7</li></ul></li></ul><h3 id="\u56DB\u3001\u670D\u52A1\u964D\u7EA7" tabindex="-1"><a class="header-anchor" href="#\u56DB\u3001\u670D\u52A1\u964D\u7EA7" aria-hidden="true">#</a> \u56DB\u3001\u670D\u52A1\u964D\u7EA7</h3><p>\u4E0D\u7BA1\u662F\u5728\u6D88\u8D39\u8005\uFF0C\u8FD8\u662F\u63D0\u4F9B\u8005\uFF0C\u90FD\u53EF\u4EE5\u8FDB\u884C\u670D\u52A1\u964D\u7EA7\uFF0C\u4F7F\u7528\u8FC7**@HystrixCommand**\u6CE8\u89E3\u6307\u5B9A\u964D\u7EA7\u540E\u7684\u65B9\u6CD5</p><p>\u4E00\u822C\u670D\u52A1\u964D\u7EA7 \u662F\u653E\u5728 \u5BA2\u6237\u7AEF</p><h4 id="_1\u3001\u670D\u52A1\u964D\u7EA7-8001\u751F\u4EA7\u8005\u670D\u52A1\u7AEF-\u670D\u52A1\u7AEF" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u670D\u52A1\u964D\u7EA7-8001\u751F\u4EA7\u8005\u670D\u52A1\u7AEF-\u670D\u52A1\u7AEF" aria-hidden="true">#</a> 1\u3001\u670D\u52A1\u964D\u7EA7\uFF1A8001\u751F\u4EA7\u8005\u670D\u52A1\u7AEF \uFF08\u670D\u52A1\u7AEF\uFF09</h4><p><strong>cloud-provider-hystrix-payment8001</strong></p><p>\u670D\u52A1\u964D\u7EA7\uFF1Apayment8001\u652F\u4ED8\u4FA7\uFF08\u751F\u4EA7\u8005\u670D\u52A1\uFF09</p><p>8001\u5148\u4ECE\u81EA\u8EAB\u627E\u95EE\u9898\uFF0C\u8BBE\u7F6E\u81EA\u8EAB\u8C03\u7528\u8D85\u65F6\u65F6\u95F4\u7684\u5CF0\u503C\uFF0C\u5CF0\u503C\u5185\u53EF\u4EE5\u6B63\u5E38\u8FD0\u884C\u3002\u8D85\u8FC7\u4E86\u5C31\u9700\u8981\u6709\u515C\u5E95\u7684\u65B9\u6CD5\uFF0C\u505A\u670D\u52A1\u964D\u7EA7fallback\u3002\u5411\u8C03\u7528\u65B9\u6CD5\u8FD4\u56DE\u4E00\u4E2A\u7B26\u5408\u9884\u671F\u7684\uFF0C\u53EF\u4EE5\u5904\u7406\u7684\u5907\u9009\u54CD\u5E94\uFF08FallBack\uFF09</p><h5 id="_1-1-\u4E1A\u52A1\u7C7B-service-\u65B9\u6CD5\u4E0A\u6DFB\u52A0-hystrixcommand" tabindex="-1"><a class="header-anchor" href="#_1-1-\u4E1A\u52A1\u7C7B-service-\u65B9\u6CD5\u4E0A\u6DFB\u52A0-hystrixcommand" aria-hidden="true">#</a> 1.1 \u4E1A\u52A1\u7C7B(Service)\u65B9\u6CD5\u4E0A\u6DFB\u52A0**@HystrixCommand**</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u6A21\u62DF\u62E5\u5835\u7684\u60C5\u51B5</span>
<span class="token annotation punctuation">@HystrixCommand</span><span class="token punctuation">(</span>fallbackMethod <span class="token operator">=</span> <span class="token string">&quot;paymentInfo_TimeoutHandler&quot;</span><span class="token punctuation">,</span> commandProperties <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u89C4\u5B9A\u8FD9\u4E2A\u7EBF\u7A0B\u7684\u8D85\u65F6\u65F6\u95F4\u662F3s\uFF0C3s\u540E\u5C31\u7531fallbackMethod\u6307\u5B9A\u7684\u65B9\u6CD5\u5E2E\u6211\u201C\u515C\u5E95\u201D\uFF08\u670D\u52A1\u964D\u7EA7\uFF09</span>
    <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;execution.isolation.thread.timeoutInMilliseconds&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;3000&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> timeNumber <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token comment">//int age = 10 / 0;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span>timeNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token string">&quot;\u7EBF\u7A0B\u6C60\uFF1A  &quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;   payment_Timeout,  id:  &quot;</span> <span class="token operator">+</span> id
        <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span><span class="token operator">+</span><span class="token string">&quot;O(\u2229_\u2229)O\u54C8\u54C8~\u8017\u65F6(s):&quot;</span> <span class="token operator">+</span> timeNumber<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_TimeoutHandler</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;\u7EBF\u7A0B\u6C60\uFF1A  &quot;</span><span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;   paymentInfo_TimeoutHandler,  id:  &quot;</span><span class="token operator">+</span>id
        <span class="token operator">+</span><span class="token string">&quot;\\t&quot;</span><span class="token operator">+</span><span class="token string">&quot;o(\u2565\uFE4F\u2565)o&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E00\u65E6\u8C03\u7528\u670D\u52A1\u65B9\u6CD5\u5931\u8D25\u5E76\u629B\u51FA\u4E86\u9519\u8BEF\u4FE1\u606F\u540E\uFF0C\u4F1A\u81EA\u52A8\u8C03\u7528@HystrixCommand\u6807\u6CE8\u597D\u7684fallbackMethod\u8C03\u7528\u7C7B\u4E2D\u7684\u6307\u5B9A\u65B9\u6CD5\uFF0C\u5F53\u524D\u670D\u52A1\u4E0D\u53EF\u7528\u4E86\uFF0C\u505A\u670D\u52A1\u964D\u7EA7\uFF0C\u515C\u5E95\u7684\u65B9\u6848\u90FD\u662F<code>paymentInfo_TimeOutHandler</code>\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632642015919-2d84c635-ca9c-40a4-b737-6ee0d942d332.png" alt="img"></p><h5 id="_1-2-\u4E3B\u542F\u52A8\u7C7B\u6FC0\u6D3B" tabindex="-1"><a class="header-anchor" href="#_1-2-\u4E3B\u542F\u52A8\u7C7B\u6FC0\u6D3B" aria-hidden="true">#</a> 1.2 \u4E3B\u542F\u52A8\u7C7B\u6FC0\u6D3B</h5><p>\u4E3B\u542F\u52A8\u7C7B\u6DFB\u52A0\u65B0\u6CE8\u89E3**@EnableCircuitBreaker**</p><h5 id="_1-3-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_1-3-\u6D4B\u8BD5" aria-hidden="true">#</a> 1.3 \u6D4B\u8BD5</h5><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632643189287-140af173-f769-46b2-b3cc-d7670e43c2e5.png" alt="img"></p><p>\u6211\u4EEC\u6545\u610F\u5236\u9020\u7684\u4E24\u4E2A\u5F02\u5E38\uFF1A 1. int age = 10/0 \u8BA1\u7B97\u5F02\u5E38 2. \u6211\u4EEC\u5B9A\u4E49\u8D85\u65F6\u65F6\u95F43s\uFF0C\u670D\u52A1\u8FD0\u884C5s\u7684\u8D85\u65F6\u5F02\u5E38 \u8FD9\u4E9B\u90FD\u4F1A\u9020\u6210\u5F53\u524D\u670D\u52A1\u4E0D\u53EF\u7528\u4E86\uFF0C\u5C31\u4F1A\u8FDB\u884C\u670D\u52A1\u964D\u7EA7\uFF0C\u6267\u884C\u515C\u5E95\u7684\u65B9\u6848\u3002</p><h4 id="_2\u3001\u670D\u52A1\u964D\u7EA7-80\u6D88\u8D39\u8005\u670D\u52A1\u7AEF-\u5BA2\u6237\u7AEF" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u670D\u52A1\u964D\u7EA7-80\u6D88\u8D39\u8005\u670D\u52A1\u7AEF-\u5BA2\u6237\u7AEF" aria-hidden="true">#</a> 2\u3001\u670D\u52A1\u964D\u7EA7\uFF1A80\u6D88\u8D39\u8005\u670D\u52A1\u7AEF\uFF08\u5BA2\u6237\u7AEF\uFF09</h4><p><strong>cloud-consumer-feign-hystrix-order80</strong></p><p>\u6211\u4EEC\u81EA\u5DF1\u914D\u7F6E\u8FC7\u7684\u70ED\u90E8\u7F72\u65B9\u5F0F\u5BF9java\u4EE3\u7801\u7684\u6539\u52A8\u660E\u663E\uFF0C\u4F46\u5BF9@HystrixCommand\u5185\u5C5E\u6027\u7684\u4FEE\u6539\u5EFA\u8BAE\u91CD\u542F\u5FAE\u670D\u52A1</p><h5 id="_2-1-\u4FEE\u6539yaml" tabindex="-1"><a class="header-anchor" href="#_2-1-\u4FEE\u6539yaml" aria-hidden="true">#</a> 2.1 \u4FEE\u6539yaml</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">feign</span><span class="token punctuation">:</span>
  <span class="token key atrule">hystrix</span><span class="token punctuation">:</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-2-\u4E3B\u542F\u52A8\u7C7B-enablehystrix" tabindex="-1"><a class="header-anchor" href="#_2-2-\u4E3B\u542F\u52A8\u7C7B-enablehystrix" aria-hidden="true">#</a> 2.2 \u4E3B\u542F\u52A8\u7C7B\uFF1A@EnableHystrix</h5><p>\u5F00\u542FHystrix\u652F\u6301</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632655240110-2fbc09f4-8aa7-41e9-96c0-ac6767dd8b99.png" alt="img"></p><h5 id="_2-3-\u4E1A\u52A1\u7C7B\u2014\u2014controller" tabindex="-1"><a class="header-anchor" href="#_2-3-\u4E1A\u52A1\u7C7B\u2014\u2014controller" aria-hidden="true">#</a> 2.3 \u4E1A\u52A1\u7C7B\u2014\u2014Controller</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderHystirxController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Resource</span>
    <span class="token class-name">PaymentHystrixService</span> paymentHystrixService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/hystrix/ok/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Ok</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> paymentHystrixService<span class="token punctuation">.</span><span class="token function">paymentInfo_Ok</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/hystrix/timeout/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@HystrixCommand</span><span class="token punctuation">(</span>fallbackMethod <span class="token operator">=</span> <span class="token string">&quot;paymentTimeOutFallbackMethod&quot;</span><span class="token punctuation">,</span>commandProperties <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;execution.isolation.thread.timeoutInMilliseconds&quot;</span><span class="token punctuation">,</span>
                    value<span class="token operator">=</span><span class="token string">&quot;1500&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> paymentHystrixService<span class="token punctuation">.</span><span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentTimeOutFallbackMethod</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;\u6211\u662F\u6D88\u8D39\u800580,\u5BF9\u65B9\u652F\u4ED8\u7CFB\u7EDF\u7E41\u5FD9\u8BF710\u79D2\u949F\u540E\u518D\u8BD5\u6216\u8005\u81EA\u5DF1\u8FD0\u884C\u51FA\u9519\u8BF7\u68C0\u67E5\u81EA\u5DF1,o(\u2565\uFE4F\u2565)o&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632655537060-e0a7691d-fdd6-4112-bf70-4253c9a8776d.png" alt="img"></p><h5 id="_2-4-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_2-4-\u6D4B\u8BD5" aria-hidden="true">#</a> 2.4 \u6D4B\u8BD5</h5><p>\u628A8001\u670D\u52A1\u7AEF\u7684\u4E1A\u52A1\u5904\u7406\u65F6\u95F4\u8BBE\u7F6E\u4E3A2s\uFF0C\u8BBE\u5B9A3s\u4EE5\u5185\u662F\u6B63\u5E38\u7684\uFF0C\u4FDD\u8BC18001\u670D\u52A1\u7AEF\u80FD\u591F\u6B63\u5E38\u8FD0\u884C\u3002</p><h4 id="_3\u3001\u8FDB\u4E00\u6B65\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u8FDB\u4E00\u6B65\u4F18\u5316" aria-hidden="true">#</a> 3\u3001\u8FDB\u4E00\u6B65\u4F18\u5316</h4><h5 id="_3-1-\u76EE\u524D\u5B58\u5728\u7684\u95EE\u9898\u2014\u2014\u4EE3\u7801\u81C3\u80BF\u3001\u8026\u5408\u5EA6\u9AD8" tabindex="-1"><a class="header-anchor" href="#_3-1-\u76EE\u524D\u5B58\u5728\u7684\u95EE\u9898\u2014\u2014\u4EE3\u7801\u81C3\u80BF\u3001\u8026\u5408\u5EA6\u9AD8" aria-hidden="true">#</a> 3.1 \u76EE\u524D\u5B58\u5728\u7684\u95EE\u9898\u2014\u2014\u4EE3\u7801\u81C3\u80BF\u3001\u8026\u5408\u5EA6\u9AD8</h5><ul><li>\u6211\u4EEC\u73B0\u5728\u670D\u52A1\u964D\u7EA7\u7684\u65B9\u6CD5\u548C\u4E1A\u52A1\u5904\u7406\u7684\u65B9\u6CD5\u6DF7\u6742\u5728\u4E86\u4E00\u5757\uFF0C\u8026\u5408\u5EA6\u5F88\u9AD8\u3002</li><li>\u5982\u679C\u6BCF\u4E2A\u63A5\u53E3\uFF0C\u6BCF\u4E2A\u65B9\u6CD5\u90FD\u9700\u8981\u4E00\u4E2A\u201C\u515C\u5E95\u201D\u65B9\u6CD5\uFF0C\u90A3\u4E48\u5C31\u4F1A\u9020\u6210\u4EE3\u7801\u81C3\u80BF</li></ul><p>\u6240\u4EE5\u6211\u4EEC\u9700\u8981\u4E00\u4E2A\u5168\u5C40\u7684\u670D\u52A1\u964D\u7EA7\uFF1Aglobal fallback\uFF1B\u9700\u8981\u7279\u6B8A\u7167\u987E\u7684\u65B9\u6CD5\uFF0C\u6211\u4EEC\u518D\u8FDB\u884C\u7CBE\u786E\u7684\u914D\u7F6E\u670D\u52A1\u964D\u7EA7\u3002</p><h5 id="_3-2-\u89E3\u51B3\u4EE3\u7801\u81C3\u80BF" tabindex="-1"><a class="header-anchor" href="#_3-2-\u89E3\u51B3\u4EE3\u7801\u81C3\u80BF" aria-hidden="true">#</a> 3.2 \u89E3\u51B3\u4EE3\u7801\u81C3\u80BF</h5><p>1\uFF1A1 \u6BCF\u4E2A\u65B9\u6CD5\u914D\u7F6E\u4E00\u4E2A\u670D\u52A1\u964D\u7EA7\u65B9\u6CD5\uFF0C\u6280\u672F\u4E0A\u53EF\u4EE5\uFF0C\u5B9E\u9645\u4E0A\u50BBX</p><p>1\uFF1AN \u9664\u4E86\u4E2A\u522B\u91CD\u8981\u6838\u5FC3\u4E1A\u52A1\u6709\u4E13\u5C5E\uFF0C\u5176\u5B83\u666E\u901A\u7684\u53EF\u4EE5\u901A\u8FC7@DefaultProperties(defaultFallback = &quot;&quot;) \u7EDF\u4E00\u8DF3\u8F6C\u5230\u7EDF\u4E00\u5904\u7406\u7ED3\u679C\u9875\u9762</p><p>\u901A\u7528\u7684\u548C\u72EC\u4EAB\u7684\u5404\u81EA\u5206\u5F00\uFF0C\u907F\u514D\u4E86\u4EE3\u7801\u81A8\u80C0\uFF0C\u5408\u7406\u51CF\u5C11\u4E86\u4EE3\u7801\u91CF\u3002</p><hr><p><strong>\u4E0B\u9762\u4EE5\u6D88\u8D39\u8005\u670D\u52A1\u7AEF80\u4E3A\u4F8B\uFF1A</strong> <strong>cloud-consumer-feign-hystrix-order80</strong></p><ul><li><strong>\u5728\u4E1A\u52A1\u7C7BController\u4E0A\u52A0 @DefaultProperties(defaultFallback = &quot;method_name&quot;)\u6CE8\u89E3\uFF0C\u5E76\u6307\u660EdefaultFallback</strong></li><li><strong>\u5728\u9700\u8981\u670D\u52A1\u964D\u7EA7\u7684\u65B9\u6CD5\u4E0A\u6807\u6CE8@HystrixCommand\u6CE8\u89E3</strong></li><li>\u5982\u679C**@HystrixCommand<strong>\u91CC\u6CA1\u6709\u6307\u660EfallbackMethod\uFF0C\u5C31\u9ED8\u8BA4\u4F7F\u7528</strong>@DefaultProperties(defaultFallback = &quot;method_name&quot;)**\u4E2D\u6307\u660E\u7684\u964D\u7EA7\u670D\u52A1</li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632711113927-07221290-219e-42f1-8a37-94cd015562e9.png" alt="img"></p><p><strong>\u6D4B\u8BD5</strong></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632713624342-3529a6ab-4202-4e71-b925-4a306d0328f5.png" alt="img"></p><h5 id="_3-3-\u964D\u4F4E\u4EE3\u7801\u8026\u5408\u5EA6" tabindex="-1"><a class="header-anchor" href="#_3-3-\u964D\u4F4E\u4EE3\u7801\u8026\u5408\u5EA6" aria-hidden="true">#</a> 3.3 \u964D\u4F4E\u4EE3\u7801\u8026\u5408\u5EA6</h5><p>\u572880\u5FAE\u670D\u52A1\u4E2D\uFF0C\u5B83\u6CA1\u6709\u6CE8\u518C\u8FDBeureka\u6CE8\u518C\u4E2D\u5FC3\u6210\u4E3Aeureka\u5BA2\u6237\u7AEF\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632715158799-e5237395-e1eb-4623-864e-c8e97f023316.png" alt="img"></p><p>\u800C\u662F\u901A\u8FC7openFeign\uFF0C\u6210\u4E3A\u4E00\u4E2AFeign\u5BA2\u6237\u7AEF\uFF0C\u901A\u8FC7Feign\u6765\u8FDB\u884C\u5FAE\u670D\u52A1\u7684\u8C03\u7528\u548C\u8D1F\u8F7D\u5747\u8861\u3002</p><p>\u76F4\u63A5\u5B9A\u4E49Service\u5C42\u7684\u63A5\u53E3\u901A\u8FC7<code>@FeignClient(value = &quot;CLOUD-PROVIDER-HYSTRIX-PAYMENT&quot;) </code>\u8FD9\u4E2A\u6CE8\u89E3\u627ECLOUD-PROVIDER-HYSTRIX-PAYMENT\u8FD9\u4E2A\u5FAE\u670D\u52A1\u4E2D\u7684\u65B9\u6CD5\u8FDB\u884C\u8C03\u7528\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632715285962-5ddedd07-2ba8-4523-b94b-3adf991f655c.png" alt="img"></p><p>\u5373\uFF1A</p><p>\u53EA\u8981\u662F\u7528Feign\u8FDB\u884C\u5FAE\u670D\u52A1\u7684\u8C03\u7528\uFF0C\u90A3\u4E48\u4E00\u5B9A\u6709\u6807\u6CE8@FeignClient(value = &quot;CLOUD-PROVIDER-HYSTRIX-PAYMENT&quot;)\u7684\u63A5\u53E3\uFF0C\u8FD9\u4E2A\u63A5\u53E3\u5C31\u80FD\u5B9E\u73B0\u8C03\u7528\u5176\u4ED6\u5FAE\u670D\u52A1\u7684\u64CD\u4F5C\uFF0C\u56E0\u6B64\u6211\u4EEC\u5C06\u8FD9\u4E2A\u63A5\u53E3\u4E2D\u7684\u5168\u90E8\u65B9\u6CD5\u8FDB\u884C\u7EDF\u4E00\u7684fallback\u670D\u52A1\u964D\u7EA7\u3002</p><p>####### \u89E3\u8026\u6848\u4F8B\u2014\u2014\u670D\u52A1\u964D\u7EA7\uFF1A\u5BA2\u6237\u7AEF\u8C03\u7528\u670D\u52A1\u7AEF\uFF0C\u9047\u5230\u670D\u52A1\u7AEF\u5B95\u673A\u6216\u5173\u95ED\u7B49\u6781\u7AEF\u60C5\u51B5</p><p>\u672C\u6B21\u6848\u4F8B\u670D\u52A1\u964D\u7EA7\u662F\u5728\u5BA2\u6237\u7AEF80\u5B9E\u73B0\u5B8C\u6210\uFF0C\u4E0E\u670D\u52A1\u7AEF8001\u6CA1\u6709\u5173\u7CFB\u3002</p><p>\u53EA\u9700\u8981\u4E3AFeign\u5BA2\u6237\u7AEF\u5B9A\u4E49\u7684\u63A5\u53E3\u6DFB\u52A0\u4E00\u4E2A\u670D\u52A1\u964D\u7EA7\u5B9E\u73B0\u7C7B\u5373\u53EF\u5B9E\u73B0\u89E3\u8026</p><p>\u672A\u6765\u6211\u4EEC\u9047\u5230\u7684\u5F02\u5E38\u6709\uFF1A\u8FD0\u884C\u65F6\u5F02\u5E38\u3001\u8D85\u65F6\u3001\u5B95\u673A</p><p><strong>\u4FEE\u6539cloud-consumer-feign-hystrix-order80</strong></p><p>\u6839\u636Ecloud-consumer-feign-hystrix-order80\u5DF2\u7ECF\u6709\u7684PaymentHystrixService\u63A5\u53E3\uFF0C\u91CD\u65B0\u65B0\u5EFA\u4E00\u4E2A\u7C7B(PaymentFallbackService)\u5B9E\u73B0\u8BE5\u63A5\u53E3\uFF0C\u7EDF\u4E00\u4E3A\u63A5\u53E3\u91CC\u9762\u7684\u65B9\u6CD5\u8FDB\u884C\u5F02\u5E38\u5904\u7406\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>  <span class="token comment">//\u4E0D\u8981\u5FD8\u8BB0\u8FD9\u4E2A\u6CE8\u89E3</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentFallbackService</span> <span class="token keyword">implements</span> <span class="token class-name">PaymentHystrixService</span><span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Ok</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;------PaymentFallbackService-paymentInfo_Ok, fallback&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;------PaymentFallbackService-paymentInfo_Timeout, fallback&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4FEE\u6539PaymentHystrixService\u63A5\u53E3\uFF0C\u6307\u5B9A\u5176\u670D\u52A1\u5F02\u5E38\u5904\u7406\u7C7B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;CLOUD-PROVIDER-HYSTRIX-PAYMENT&quot;</span><span class="token punctuation">,</span> fallback <span class="token operator">=</span> <span class="token class-name">PaymentFallbackService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PaymentHystrixService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/payment/hystrix/ok/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Ok</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/payment/hystrix/timeout/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u786E\u8BA4yml\u914D\u7F6E\u6587\u4EF6\u4E2D\u5F00\u542F\u4E86hystrix</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">## \u7528\u4E8E\u670D\u52A1\u964D\u7EA7 \u5728\u6CE8\u89E3@FeignClient\u4E2D\u6DFB\u52A0fallbackFactory\u5C5E\u6027\u503C</span>
<span class="token key atrule">feign</span><span class="token punctuation">:</span>
  <span class="token key atrule">hystrix</span><span class="token punctuation">:</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment">##\u5728Feign\u4E2D\u5F00\u542FHystrix</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u76EE\u7684\u662F\u4E3A\u4E86\u5B9E\u73B0\u4EE5\u4E0B\u6548\u679C\uFF1A</p><ul><li>\u6B63\u5E38\u8FD0\u884C\u7684\u8BDD\u5C31\u627E\u6307\u5B9A\u7684\u5FAE\u670D\u52A1\u4E2D\u7684\u65B9\u6CD5\u6267\u884C\uFF1B</li><li>\u5F02\u5E38\u7684\u8BDD\u5C31\u627E<strong>PaymentFallbackService</strong>\uFF0C\u7531\u5B83\u6765\u7EDF\u4E00\u8FDB\u884C\u670D\u52A1\u964D\u7EA7\u7684\u5904\u7406</li></ul><p>\u8FD9\u6837\u7684\u8BDD\u5BA2\u6237\u7AEF\u7684OrderHystirxController\u4E2D\u5C31\u4E0D\u9700\u8981\u518D\u8FDB\u884C\u964D\u7EA7\u5904\u7406\uFF0C\u964D\u7EA7\u5904\u7406\u53EA\u9488\u5BF9\u8981\u8C03\u7528\u7684\u5FAE\u670D\u52A1\uFF0C\u56E0\u6B64\u964D\u4F4E\u4E86\u670D\u52A1\u964D\u7EA7\u548C\u5BA2\u6237\u7AEF\u7684\u8026\u5408\u5EA6\u3002</p><p><strong>\u6D4B\u8BD5</strong></p><p>\u542F\u52A87001\u30017002\uFF08\u6211\u8FD9\u91CC\u7528\u4E86\u96C6\u7FA4\uFF09\u30018001\u300180</p><p>8001\u7AEF\u53E3\u6B63\u5E38\u8FD0\u884C\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632725916414-ede7986d-9b9f-4f7a-ad05-db8f7f088a85.png" alt="img"></p><p>8001\u7AEF\u53E3\u5B95\u673A\uFF1A\u6B64\u65F6\u670D\u52A1\u7AEFprovider\u5DF2\u7ECFdown\u4E86\uFF0C\u4F46\u662F\u6211\u4EEC\u505A\u4E86\u670D\u52A1\u964D\u7EA7\u5904\u7406\uFF0C\u8BA9\u5BA2\u6237\u7AEF\u5728\u670D\u52A1\u7AEF\u4E0D\u53EF\u7528\u65F6\u4E5F\u4F1A\u83B7\u5F97\u63D0\u793A\u4FE1\u606F\u800C\u4E0D\u4F1A\u6302\u8D77\u8017\u6B7B\u670D\u52A1\u5668</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632726565675-a9ae21a7-4da5-4aaf-af8c-767b6e3cb9b0.png" alt="img"></p><h3 id="\u4E94\u3001\u670D\u52A1\u7194\u65AD" tabindex="-1"><a class="header-anchor" href="#\u4E94\u3001\u670D\u52A1\u7194\u65AD" aria-hidden="true">#</a> \u4E94\u3001\u670D\u52A1\u7194\u65AD</h3><p>\u7194\u65AD\u4E5F\u4F1A\u51FA\u53D1\u670D\u52A1\u964D\u7EA7\u3002</p><h4 id="_1\u3001\u7194\u65AD\u673A\u5236\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u7194\u65AD\u673A\u5236\u6982\u8FF0" aria-hidden="true">#</a> 1\u3001\u7194\u65AD\u673A\u5236\u6982\u8FF0</h4><p>\u7194\u65AD\u673A\u5236\u662F\u5E94\u5BF9\u96EA\u5D29\u6548\u5E94\u7684\u4E00\u79CD\u5FAE\u670D\u52A1\u94FE\u8DEF\u4FDD\u62A4\u673A\u5236\u3002\u5F53\u6247\u51FA\u94FE\u8DEF\u7684\u67D0\u4E2A\u5FAE\u670D\u52A1\u51FA\u9519\u4E0D\u53EF\u7528\u6216\u8005\u54CD\u5E94\u65F6\u95F4\u592A\u957F\u65F6\uFF0C\u4F1A\u8FDB\u884C\u670D\u52A1\u7684\u964D\u7EA7\uFF0C\u8FDB\u800C\u7194\u65AD\u8BE5\u8282\u70B9\u5FAE\u670D\u52A1\u7684\u8C03\u7528\uFF0C\u5FEB\u901F\u8FD4\u56DE\u9519\u8BEF\u7684\u54CD\u5E94\u4FE1\u606F\u3002</p><p>\u5F53\u68C0\u6D4B\u5230\u8BE5\u8282\u70B9\u5FAE\u670D\u52A1\u8C03\u7528\u54CD\u5E94\u6B63\u5E38\u540E\uFF0C\u81EA\u52A8\u6062\u590D\u8C03\u7528\u94FE\u8DEF\u3002</p><p>\u7194\u65AD\u72B6\u6001\uFF1A \u5F00\u542F \u5173\u95ED \u534A\u5F00\u542F</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632729761132-5a6fe723-723a-4674-8442-5ea5b742aacb.png" alt="img"></p><p>\u5728SpringCloud\u6846\u67B6\u4E2D\uFF0C\u7194\u65AD\u673A\u5236\u901A\u8FC7Hystrix\u5B9E\u73B0\u3002Hystrix\u4F1A\u76D1\u63A7\u5FAE\u670D\u52A1\u95F4\u8C03\u7528\u7684\u72B6\u51B5\u3002</p><p>\u5F53\u5931\u8D25\u7684\u8C03\u7528\u5230\u4E00\u5B9A\u9608\u503C\uFF0C\u7F3A\u7701\u65F65\u79D2\u518520\u6B21\u8C03\u7528\u5931\u8D25\uFF0C\u5C31\u4F1A\u542F\u52A8\u7194\u65AD\u673A\u5236\uFF0C\u7194\u65AD\u673A\u5236\u7684\u6CE8\u89E3\u662F<code>@HystrixCommand</code></p>`,84),ha=a("\u5927\u795E\u8BBA\u6587\uFF1A"),ya={href:"https://martinfowler.com/bliki/CircuitBreaker.html",target:"_blank",rel:"noopener noreferrer"},fa=a("https://martinfowler.com/bliki/CircuitBreaker.html"),_a=p(`<p>\u534A\u5F00\u72B6\u6001\uFF1A \u6BD4\u5982\u8BF4\u4E00\u4E2A\u5FAE\u670D\u80FD\u627F\u53D7100\u7684\u5E76\u53D1\u91CF\uFF0C\u67D0\u4E00\u65F6\u523B\u6709500\u4EBA\u540C\u65F6\u8BBF\u95EE\u3002\u8BE5\u670D\u52A1\u5C31\u4F1A\u5D29\u6389\uFF0C\u7194\u65AD\uFF0C\u76F4\u63A5\u5F53\u6389\u3002 \u5916\u90E8\u6B64\u65F6\u4E0D\u80FD\u8BBF\u95EE\u4E86\uFF0C\u8FC7\u4E86\u4E00\u4F1A\uFF0C\u53D1\u73B0\u6CA1\u6709\u90A3\u4E48\u9AD8\u7684\u5E76\u53D1\u91CF\u4E86\u3002\u611F\u89C9\u5E76\u53D1\u91CF\u5728\u6211\u7684\u627F\u53D7\u4E4B\u5185\u4E86(100)\u3002 \u6BD4\u59821s/72\u6B21\uFF0C\u90A3\u4E48\u5C31\u8BD5\u7740\u8FD9\u653E\u5F00\u8FD9\u4E9B\u5E76\u53D1\u8BF7\u6C42\u3002 \u653E\u7740\u653E\u7740\u53D1\u73B0\u80FD\u591F\u9002\u5E94\u5F53\u524D\u7684\u5E76\u53D1\u91CF\u4E86\uFF0C\u6211\u518D\u628A\u95F8\u9053\u5408\u4E0A\u3002 \u653E\u7740\u653E\u7740\u7684\u72B6\u6001\u5C31\u662F\u534A\u5F00\u72B6\u6001\uFF0C\u7136\u540E\u518D\u628A\u65AD\u8DEF\u5668\u5173\u95ED\u53D8\u6210\u5173\u95ED\u7684\u72B6\u6001\u3002</p><h4 id="_2\u3001hystrix\u670D\u52A1\u7194\u65AD\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_2\u3001hystrix\u670D\u52A1\u7194\u65AD\u6848\u4F8B" aria-hidden="true">#</a> 2\u3001Hystrix\u670D\u52A1\u7194\u65AD\u6848\u4F8B</h4><h5 id="_2-1-\u5BF98001\u670D\u52A1\u7AEF\u7684service\u5C42\u8FDB\u884C\u6539\u9020-\u589E\u52A0\u7194\u65AD\u673A\u5236" tabindex="-1"><a class="header-anchor" href="#_2-1-\u5BF98001\u670D\u52A1\u7AEF\u7684service\u5C42\u8FDB\u884C\u6539\u9020-\u589E\u52A0\u7194\u65AD\u673A\u5236" aria-hidden="true">#</a> 2.1 \u5BF98001\u670D\u52A1\u7AEF\u7684Service\u5C42\u8FDB\u884C\u6539\u9020 \u589E\u52A0\u7194\u65AD\u673A\u5236</h5><ul><li><strong>circuitBreaker.enabled</strong>\uFF1A\u662F\u5426\u5F00\u542F\u65AD\u8DEF\u5668</li><li><strong>circuitBreaker.requestVolumeThreshold</strong>\uFF1A\u8BE5\u5C5E\u6027\u8BBE\u7F6E\u6EDA\u52A8\u7A97\u53E3\uFF08\u5FEB\u7167\u65F6\u95F4\u7A97\u53E3\uFF0C\u9ED8\u8BA410s\uFF09\u4E2D\u5C06\u4F7F\u65AD\u8DEF\u5668\u8DF3\u95F8\u7684\u6700\u5C0F\u8BF7\u6C42\u6570\u91CF\uFF08\u9ED8\u8BA4\u662F20\uFF09\uFF0C\u5982\u679C10s\u5185\u8BF7\u6C42\u6570\u5C0F\u4E8E\u8BBE\u5B9A\u503C\uFF0C\u5C31\u7B97\u8BF7\u6C42\u5168\u90E8\u5931\u8D25\u4E5F\u4E0D\u4F1A\u89E6\u53D1\u65AD\u8DEF\u5668\u3002</li><li><strong>circuitBreaker.sleepWindowInMilliseconds</strong>\uFF1A\u77ED\u8DEF\u591A\u4E45\u4EE5\u540E\u5F00\u59CB\u5C1D\u8BD5\u662F\u5426\u6062\u590D\uFF0C\u9ED8\u8BA45s</li><li><strong>circuitBreaker.errorThresholdPercentage</strong>\uFF1A\u5931\u8D25\u7387\u8FBE\u5230\u591A\u5C11\u540E\u8DF3\u95F8</li><li><strong>metrics.rollingStats.timeInMilliseconds</strong>\uFF1A\u5FEB\u7167\u65F6\u95F4\u7A97\u3001\u6EDA\u52A8\u7A97\u53E3</li></ul><p>\u603B\u7684\u610F\u601D\u5C31\u662F\u572810s\u7684\u65F6\u95F4\u7A97\u53E3\u671F\u5185\uFF0Cm\u6B21\u8BF7\u6C42\u4E2D\u6709p%\u7684\u8BF7\u6C42\u5931\u8D25\u4E86\uFF0C\u90A3\u4E48\u65AD\u8DEF\u5668\u542F\u52A8\uFF0C\u968F\u540E\u77ED\u8DEFn\u79D2\u540E\u5F00\u59CB\u5C1D\u8BD5\u6062\u590D</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//=============================\u670D\u52A1\u7194\u65AD===============================</span>
<span class="token annotation punctuation">@HystrixCommand</span><span class="token punctuation">(</span>fallbackMethod <span class="token operator">=</span> <span class="token string">&quot;paymentCircuitBreaker_fallback&quot;</span><span class="token punctuation">,</span>commandProperties <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.enabled&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//\u662F\u5426\u5F00\u542F\u65AD\u8DEF\u5668</span>
    <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.requestVolumeThreshold&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">//\u6700\u5C0F\u8BF7\u6C42\u6B21\u6570</span>
    <span class="token comment">//\u77ED\u8DEF\u591A\u4E45\u4EE5\u540E\u5F00\u59CB\u5C1D\u8BD5\u662F\u5426\u6062\u590D\uFF0C\u9ED8\u8BA45s</span>
    <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.sleepWindowInMilliseconds&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;10000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.errorThresholdPercentage&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;60&quot;</span><span class="token punctuation">)</span>  <span class="token comment">//\u5931\u8D25\u7387\u8FBE\u5230\u591A\u5C11\u540E\u8DF3\u95F8</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>   <span class="token comment">//\u603B\u7684\u610F\u601D\u5C31\u662F\u5728n\u6BEB\u79D2\u5185\u7684\u65F6\u95F4\u7A97\u53E3\u671F\u5185\uFF0Cm\u6B21\u8BF7\u6C42\u4E2D\u6709p%\u7684\u8BF7\u6C42\u5931\u8D25\u4E86\uFF0C\u90A3\u4E48\u65AD\u8DEF\u5668\u542F\u52A8</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentCircuitBreaker</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>id <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;******id \u4E0D\u80FD\u8D1F\u6570&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">String</span> serialNumber <span class="token operator">=</span> <span class="token class-name">IdUtil</span><span class="token punctuation">.</span><span class="token function">simpleUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u7B49\u4EF7\u4E8EUUID.randomUUID().toString()</span>

    <span class="token keyword">return</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;\\t&quot;</span><span class="token operator">+</span><span class="token string">&quot;\u8C03\u7528\u6210\u529F\uFF0C\u6D41\u6C34\u53F7: &quot;</span> <span class="token operator">+</span> serialNumber<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentCircuitBreaker_fallback</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;id \u4E0D\u80FD\u8D1F\u6570\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF0C/(\u3112o\u3112)/~~   id: &quot;</span> <span class="token operator">+</span>id<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-2-\u4FEE\u6539\u6A21\u5757cloud-provider-hystrix-payment8001\u7684controller\u5C42" tabindex="-1"><a class="header-anchor" href="#_2-2-\u4FEE\u6539\u6A21\u5757cloud-provider-hystrix-payment8001\u7684controller\u5C42" aria-hidden="true">#</a> 2.2 \u4FEE\u6539\u6A21\u5757cloud-provider-hystrix-payment8001\u7684controller\u5C42</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//===================\u670D\u52A1\u7194\u65AD====================</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/payment/circuit/{id}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentCircuitBreaker</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> paymentService<span class="token punctuation">.</span><span class="token function">paymentCircuitBreaker</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;****result: &quot;</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-3-\u6D4B\u8BD5-1" tabindex="-1"><a class="header-anchor" href="#_2-3-\u6D4B\u8BD5-1" aria-hidden="true">#</a> 2.3 \u6D4B\u8BD5</h5><p>####### 2.3.1 \u6B63\u786E\u8DDF\u9519\u8BEF\u60C5\u51B5\u81EA\u6D4B</p><p>\u542F\u52A87001\u30017002\uFF08\u6211\u8FD9\u91CC\u542F\u52A8\u4E86Eureka\u96C6\u7FA4\uFF09\u548C8001</p>`,11),xa={href:"http://localhost:8001/payment/circuit/-5",target:"_blank",rel:"noopener noreferrer"},qa=a("http://localhost:8001/payment/circuit/-5"),wa=a(),Ia={href:"http://localhost:8001/payment/circuit/5",target:"_blank",rel:"noopener noreferrer"},Sa=a("http://localhost:8001/payment/circuit/5"),Ca=p(`<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632741888213-efd41d0b-7e9d-4188-bdfa-100e16b39861.png" alt="img"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632741896327-da99210f-9271-4d3d-bb8a-5f8de3d3ebc2.png" alt="img"></p><p>####### 2.3.2 \u6D4B\u8BD5\u7194\u65AD\u673A\u5236</p><p>\u6D4B\u8BD5\u4E00\u4E0B\u5355\u4F4D\u65F6\u95F4\u8BF7\u6C42\u8FBE\u523010\u6B21/10s\u4EE5\u4E0A\uFF0C\u572810s\u5185\u6267\u884C\u4E86\u8D85\u8FC710*0.6 = 6\u6B21\u7684\u5F02\u5E38\u8BF7\u6C42\uFF0C\u968F\u540E\u8FDB\u884C\u77ED\u8DEF\u3002\uFF0810\u4E2A/10s \u6CE8\u610F\u5206\u6BCD\u662F10s\u3002 \u9ED8\u8BA420\u4E2A/10s\uFF09 \u77ED\u8DEF10s\u540E\u5C1D\u8BD5\u6062\u590D</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.requestVolumeThreshold&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u89E6\u53D1\u4E86Hystrix\u7684\u65AD\u8DEF\u5668\uFF0C\u5373\u4F7F\u4F20\u5165\u6B63\u786E\u7684\u53C2\u6570\uFF0C\u4E5F\u51FA\u73B0\u670D\u52A1\u964D\u7EA7</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632742150128-db56f776-0b6f-4ee6-bc55-5da7edd4645f.png" alt="img"></p><p>\u9694\u4E86\u4E00\u4F1A\u624D\u6062\u590D</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632742190703-432d76bb-a252-481e-a4e2-d335d8af50e1.png" alt="img"></p><h4 id="_3\u3001hystrix\u670D\u52A1\u7194\u65AD\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#_3\u3001hystrix\u670D\u52A1\u7194\u65AD\u603B\u7ED3" aria-hidden="true">#</a> 3\u3001Hystrix\u670D\u52A1\u7194\u65AD\u603B\u7ED3</h4><h5 id="_3-1-\u7194\u65AD\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#_3-1-\u7194\u65AD\u7C7B\u578B" aria-hidden="true">#</a> 3.1 \u7194\u65AD\u7C7B\u578B</h5><ul><li>\u7194\u65AD\u6253\u5F00\uFF1A\u8BF7\u6C42\u4E0D\u518D\u8FDB\u884C\u8C03\u7528\u5F53\u524D\u670D\u52A1\uFF0C\u518D\u6709\u8BF7\u6C42\u8C03\u7528\u65F6\u5C06\u4E0D\u4F1A\u8C03\u7528\u4E3B\u903B\u8F91\uFF0C\u800C\u662F\u76F4\u63A5\u8C03\u7528\u964D\u7EA7fallback\u3002\u5B9E\u73B0\u4E86\u81EA\u52A8\u7684\u53D1\u73B0\u9519\u8BEF\u5E76\u5C06\u964D\u7EA7\u903B\u8F91\u5207\u6362\u4E3A\u4E3B\u903B\u8F91\uFF0C\u51CF\u5C11\u54CD\u5E94\u5EF6\u8FDF\u6548\u679C\u3002\u5185\u90E8\u8BBE\u7F6E\u65F6\u949F\u4E00\u822C\u4E3AMTTR\uFF08Mean time to repair\uFF0C\u5E73\u5747\u6545\u969C\u5904\u7406\u65F6\u95F4)\uFF0C\u5F53\u6253\u5F00\u65F6\u957F\u8FBE\u5230\u6240\u8BBE\u65F6\u949F\u5219\u8FDB\u5165\u534A\u7194\u65AD\u72B6\u6001\u3002</li><li>\u7194\u65AD\u5173\u95ED\uFF1A\u7194\u65AD\u5173\u95ED\u4E0D\u4F1A\u5BF9\u670D\u52A1\u8FDB\u884C\u7194\u65AD\uFF0C\u670D\u52A1\u6B63\u5E38\u8C03\u7528</li><li>\u7194\u65AD\u534A\u5F00\uFF1A\u90E8\u5206\u8BF7\u6C42\u6839\u636E\u89C4\u5219\u8C03\u7528\u5F53\u524D\u670D\u52A1\uFF0C\u5982\u679C\u8BF7\u6C42\u6210\u529F\u4E14\u7B26\u5408\u89C4\u5219\u5219\u8BA4\u4E3A\u5F53\u524D\u670D\u52A1\u6062\u590D\u6B63\u5E38\uFF0C\u5173\u95ED\u7194\u65AD</li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632751342847-1e2bd8e0-23e6-4fa2-9b4d-7dc6ffb4c87a.png" alt="img"></p><h5 id="_3-2-\u65AD\u8DEF\u5668\u5728\u4EC0\u4E48\u60C5\u51B5\u4E0B\u5F00\u59CB\u8D77\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#_3-2-\u65AD\u8DEF\u5668\u5728\u4EC0\u4E48\u60C5\u51B5\u4E0B\u5F00\u59CB\u8D77\u4F5C\u7528" aria-hidden="true">#</a> 3.2 \u65AD\u8DEF\u5668\u5728\u4EC0\u4E48\u60C5\u51B5\u4E0B\u5F00\u59CB\u8D77\u4F5C\u7528</h5><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632752836555-37da9fe7-81c3-4164-a2d3-d6477ecee547.png" alt="img"></p><p>\u6D89\u53CA\u5230\u65AD\u8DEF\u5668\u7684\u56DB\u4E2A\u91CD\u8981\u53C2\u6570\uFF1A<strong>\u5FEB\u7167\u65F6\u95F4\u7A97\u3001\u8BF7\u6C42\u603B\u6570\u9600\u503C\u3001\u7A97\u53E3\u7761\u7720\u65F6\u95F4\u3001\u9519\u8BEF\u767E\u5206\u6BD4\u9600\u503C</strong>\u3002</p><ul><li><p>1\uFF1A<strong>\u5FEB\u7167\u65F6\u95F4\u7A97\uFF08\u6EDA\u52A8\u7A97\u53E3</strong>**\uFF09**\uFF1A\u65AD\u8DEF\u5668\u786E\u5B9A\u662F\u5426\u6253\u5F00\u9700\u8981\u7EDF\u8BA1\u4E00\u4E9B\u8BF7\u6C42\u548C\u9519\u8BEF\u6570\u636E\uFF0C\u800C\u7EDF\u8BA1\u7684\u65F6\u95F4\u8303\u56F4\u5C31\u662F\u5FEB\u7167\u65F6\u95F4\u7A97\uFF0C\u9ED8\u8BA4\u4E3A\u6700\u8FD1\u768410\u79D2\u3002</p></li><li><ul><li>\u5BF9\u5E94\u7EA2\u6846\u4E2D\u7684<strong>metrics.rollingStats.timeInMilliseconds</strong></li></ul></li><li><p>2\uFF1A<strong>\u8BF7\u6C42\u603B\u6570\u9600\u503C</strong>\uFF1A\u5728\u5FEB\u7167\u65F6\u95F4\u7A97\u5185\uFF0C\u5FC5\u987B\u6EE1\u8DB3\u8BF7\u6C42\u603B\u6570\u9600\u503C\u624D\u6709\u8D44\u683C\u7194\u65AD\u3002\u9ED8\u8BA4\u4E3A20\uFF0C\u610F\u5473\u7740\u572810\u79D2\u5185\uFF0C\u5982\u679C\u8BE5hystrix\u547D\u4EE4\u7684\u8C03\u7528\u6B21\u6570\u4E0D\u8DB320\u6B21\uFF0C\u5373\u4F7F\u6240\u6709\u7684\u8BF7\u6C42\u90FD\u8D85\u65F6\u6216\u5176\u4ED6\u539F\u56E0\u5931\u8D25\uFF0C\u65AD\u8DEF\u5668\u90FD\u4E0D\u4F1A\u6253\u5F00\u3002</p></li><li><ul><li>\u5BF9\u5E94\u7EA2\u6846\u4E2D\u7684<strong>circuitBreaker.requestVolumeThreshold</strong></li></ul></li><li><p>3\uFF1A<strong>\u7A97\u53E3\u7761\u7720\u65F6\u95F4</strong>\uFF1A\u5269\u4E0B\u4E00\u4E2A\u8868\u793A\u7A97\u53E3\u7761\u7720\u65F6\u95F4\uFF0C\u5373\u65AD\u8DEF\u5668\u89E6\u53D1\u591A\u5C11\u79D2\uFF08\u9ED8\u8BA45s\uFF09\u540E\u5C1D\u8BD5\u6062\u590D\uFF0C\u8FDB\u5165\u534A\u5F00\u72B6\u6001\u3002</p></li><li><ul><li>\u5BF9\u5E94\u7EA2\u6846\u4E2D\u7684<strong>circuitBreaker.sleepWindowInMilliseconds</strong></li></ul></li><li><p>4\uFF1A<strong>\u9519\u8BEF\u767E\u5206\u6BD4\u9600\u503C</strong>\uFF1A\u5F53\u8BF7\u6C42\u603B\u6570\u5728\u5FEB\u7167\u65F6\u95F4\u7A97\u5185\u8D85\u8FC7\u4E86\u9600\u503C\uFF0C\u6BD4\u5982\u53D1\u751F\u4E8630\u6B21\u8C03\u7528\uFF0C\u5982\u679C\u5728\u8FD930\u6B21\u8C03\u7528\u4E2D\uFF0C\u670915\u6B21\u53D1\u751F\u4E86\u8D85\u65F6\u5F02\u5E38\uFF0C\u4E5F\u5C31\u662F\u8D85\u8FC750%\u7684\u9519\u8BEF\u767E\u5206\u6BD4\uFF0C\u5728\u9ED8\u8BA4\u8BBE\u5B9A50%\u9600\u503C\u60C5\u51B5\u4E0B\uFF0C\u8FD9\u65F6\u5019\u5C31\u4F1A\u5C06\u65AD\u8DEF\u5668\u6253\u5F00\u3002</p></li><li><ul><li>\u5BF9\u5E94\u7EA2\u6846\u4E2D\u7684<strong>circuitBreaker.errorThresholdPercentage</strong></li></ul></li></ul><h5 id="_3-3-\u65AD\u8DEF\u5668\u5F00\u542F\u6216\u5173\u95ED\u6761\u4EF6" tabindex="-1"><a class="header-anchor" href="#_3-3-\u65AD\u8DEF\u5668\u5F00\u542F\u6216\u5173\u95ED\u6761\u4EF6" aria-hidden="true">#</a> 3.3 \u65AD\u8DEF\u5668\u5F00\u542F\u6216\u5173\u95ED\u6761\u4EF6</h5><p>1\u3001\u5F53\u6EE1\u8DB3\u4E00\u5B9A\u7684\u9608\u503C\u7684\u65F6\u5019\uFF08\u9ED8\u8BA410\u79D2\u5185\u8D85\u8FC720\u4E2A\u8BF7\u6C42\u6B21\u6570\uFF09\uFF1B</p><p>2\u3001\u5F53\u5931\u8D25\u7387\u8FBE\u5230\u4E00\u5B9A\u7684\u65F6\u5019\uFF08\u9ED8\u8BA410\u79D2\u5185\u8D85\u8FC750%\u7684\u8BF7\u6C42\u5931\u8D25\uFF09\uFF1B</p><p>3\u3001\u5230\u8FBE\u4EE5\u4E0A\u9608\u503C\uFF0C\u65AD\u8DEF\u5668\u5C06\u4F1A\u5F00\u542F\uFF1B</p><p>4\u3001\u5F53\u5F00\u542F\u7684\u65F6\u5019\uFF0C\u6240\u6709\u8BF7\u6C42\u90FD\u4E0D\u4F1A\u8FDB\u884C\u8F6C\u53D1\uFF1B</p><p>5\u3001\u4E00\u6BB5\u65F6\u95F4\u4E4B\u540E\uFF08\u9ED8\u8BA4\u662F5\u79D2\uFF09\uFF0C\u8FD9\u4E2A\u65F6\u5019\u65AD\u8DEF\u5668\u662F\u534A\u5F00\u72B6\u6001\uFF0C\u4F1A\u8BA9\u5176\u4E2D\u4E00\u4E2A\u8BF7\u6C42\u8FDB\u884C\u8F6C\u53D1\uFF1B\u5982\u679C\u6210\u529F\uFF0C\u65AD\u8DEF\u5668\u4F1A\u5173\u95ED\uFF0C\u82E5\u5931\u8D25\uFF0C\u7EE7\u7EED\u5F00\u542F\u3002\u91CD\u590D4\u548C5\u3002</p><h5 id="_3-4-\u65AD\u8DEF\u5668\u6253\u5F00\u4E4B\u540E" tabindex="-1"><a class="header-anchor" href="#_3-4-\u65AD\u8DEF\u5668\u6253\u5F00\u4E4B\u540E" aria-hidden="true">#</a> 3.4 \u65AD\u8DEF\u5668\u6253\u5F00\u4E4B\u540E</h5><p>####### 1\uFF1A \u518D\u6709\u8BF7\u6C42\u8C03\u7528\u7684\u65F6\u5019\uFF0C\u8FD8\u4F1A\u8C03\u7528\u4E3B\u903B\u8F91\u5417\uFF1F</p><p>\u5C06\u4E0D\u4F1A\u8C03\u7528\u4E3B\u903B\u8F91\uFF0C\u800C\u662F\u76F4\u63A5\u8C03\u7528\u964D\u7EA7\u7684fallback\u65B9\u6CD5\uFF0C\u901A\u8FC7\u65AD\u8DEF\u5668\uFF0C\u5B9E\u73B0\u4E86\u81EA\u52A8\u7684\u53D1\u73B0\u9519\u8BEF\u5E76\u5C06\u964D\u7EA7\u903B\u8F91\u5347\u7EA7\u4E3A\u4E3B\u903B\u8F91\uFF0C\u51CF\u5C11\u54CD\u5E94\u5EF6\u8FDF\u7684\u6548\u679C\u3002</p><p>####### 2\uFF1A\u539F\u6765\u7684\u4E3B\u903B\u8F91\u8981\u5982\u4F55\u6062\u590D\uFF1F</p><ul><li>\u5BF9\u4E8E\u8FD9\u4E00\u95EE\u9898mhystrix\u4E5F\u4E3A\u6211\u4EEC\u5B9E\u73B0\u4E86\u81EA\u52A8\u6062\u590D\u529F\u80FD\u3002</li><li>\u5F53\u65AD\u8DEF\u5668\u6253\u5F00\uFF0C\u5BF9\u4E3B\u903B\u8F91\u8FDB\u884C\u7194\u65AD\u4E4B\u540E\uFF0Chystrix\u4F1A\u542F\u52A8\u4E00\u4E2A\u4F11\u7720\u65F6\u95F4\u7A97\uFF0C\u5728\u8FD9\u4E2A\u65F6\u95F4\u7A97\u5185\uFF0C\u964D\u7EA7\u903B\u8F91\u662F\u4E34\u65F6\u7684\u6210\u4E3A\u4E3B\u903B\u8F91\u3002</li><li>\u5F53\u4F11\u7720\u65F6\u95F4\u7A97\u5230\u671F\uFF0C\u65AD\u8DEF\u5668\u5C06\u8FDB\u5165\u534A\u5F00\u72B6\u6001\uFF0C\u91CA\u653E\u7ED9\u4E00\u6B21\u8BF7\u6C42\u5230\u539F\u6765\u7684\u4E3B\u903B\u8F91\u4E0A\uFF0C\u5982\u679C\u6B64\u6B21\u8BF7\u6C42\u6B63\u5E38\u8FD4\u56DE\uFF0C\u90A3\u4E48\u65AD\u8DEF\u5668\u5C06\u7EE7\u7EED\u95ED\u5408\u3002</li><li>\u4E3B\u903B\u8F91\u6062\u590D\uFF0C\u5982\u679C\u8FD9\u6B21\u8BF7\u6C42\u4F9D\u7136\u6709\u95EE\u9898\uFF0C\u65AD\u8DEF\u5668\u7EE7\u7EED\u8FDB\u5165\u6253\u5F00\u72B6\u6001\uFF0C\u4F11\u7720\u65F6\u95F4\u7A97\u91CD\u65B0\u8BA1\u65F6\u3002</li></ul><h5 id="_3-5-\u6240\u6709\u7684\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_3-5-\u6240\u6709\u7684\u914D\u7F6E" aria-hidden="true">#</a> 3.5 \u6240\u6709\u7684\u914D\u7F6E</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//========================All</span>
<span class="token annotation punctuation">@HystrixCommand</span><span class="token punctuation">(</span>fallbackMethod <span class="token operator">=</span> <span class="token string">&quot;str_fallbackMethod&quot;</span><span class="token punctuation">,</span>
        groupKey <span class="token operator">=</span> <span class="token string">&quot;strGroupCommand&quot;</span><span class="token punctuation">,</span>
        commandKey <span class="token operator">=</span> <span class="token string">&quot;strCommand&quot;</span><span class="token punctuation">,</span>
        threadPoolKey <span class="token operator">=</span> <span class="token string">&quot;strThreadPool&quot;</span><span class="token punctuation">,</span>

        commandProperties <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token comment">// \u8BBE\u7F6E\u9694\u79BB\u7B56\u7565\uFF0CTHREAD \u8868\u793A\u7EBF\u7A0B\u6C60 SEMAPHORE\uFF1A\u4FE1\u53F7\u6C60\u9694\u79BB</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;execution.isolation.strategy&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;THREAD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u5F53\u9694\u79BB\u7B56\u7565\u9009\u62E9\u4FE1\u53F7\u6C60\u9694\u79BB\u7684\u65F6\u5019\uFF0C\u7528\u6765\u8BBE\u7F6E\u4FE1\u53F7\u6C60\u7684\u5927\u5C0F\uFF08\u6700\u5927\u5E76\u53D1\u6570\uFF09</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;execution.isolation.semaphore.maxConcurrentRequests&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u914D\u7F6E\u547D\u4EE4\u6267\u884C\u7684\u8D85\u65F6\u65F6\u95F4</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;execution.isolation.thread.timeoutinMilliseconds&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u662F\u5426\u542F\u7528\u8D85\u65F6\u65F6\u95F4</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;execution.timeout.enabled&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u6267\u884C\u8D85\u65F6\u7684\u65F6\u5019\u662F\u5426\u4E2D\u65AD</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;execution.isolation.thread.interruptOnTimeout&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u6267\u884C\u88AB\u53D6\u6D88\u7684\u65F6\u5019\u662F\u5426\u4E2D\u65AD</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;execution.isolation.thread.interruptOnCancel&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u5141\u8BB8\u56DE\u8C03\u65B9\u6CD5\u6267\u884C\u7684\u6700\u5927\u5E76\u53D1\u6570</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;fallback.isolation.semaphore.maxConcurrentRequests&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u670D\u52A1\u964D\u7EA7\u662F\u5426\u542F\u7528\uFF0C\u662F\u5426\u6267\u884C\u56DE\u8C03\u51FD\u6570</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;fallback.enabled&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u662F\u5426\u542F\u7528\u65AD\u8DEF\u5668</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.enabled&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u8BE5\u5C5E\u6027\u7528\u6765\u8BBE\u7F6E\u5728\u6EDA\u52A8\u65F6\u95F4\u7A97\u4E2D\uFF0C\u65AD\u8DEF\u5668\u7194\u65AD\u7684\u6700\u5C0F\u8BF7\u6C42\u6570\u3002\u4F8B\u5982\uFF0C\u9ED8\u8BA4\u8BE5\u503C\u4E3A 20 \u7684\u65F6\u5019\uFF0C</span>
                <span class="token comment">// \u5982\u679C\u6EDA\u52A8\u65F6\u95F4\u7A97\uFF08\u9ED8\u8BA410\u79D2\uFF09\u5185\u4EC5\u6536\u5230\u4E8619\u4E2A\u8BF7\u6C42\uFF0C \u5373\u4F7F\u8FD919\u4E2A\u8BF7\u6C42\u90FD\u5931\u8D25\u4E86\uFF0C\u65AD\u8DEF\u5668\u4E5F\u4E0D\u4F1A\u6253\u5F00\u3002</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.requestVolumeThreshold&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;20&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u8BE5\u5C5E\u6027\u7528\u6765\u8BBE\u7F6E\u5728\u6EDA\u52A8\u65F6\u95F4\u7A97\u4E2D\uFF0C\u8868\u793A\u5728\u6EDA\u52A8\u65F6\u95F4\u7A97\u4E2D\uFF0C\u5728\u8BF7\u6C42\u6570\u91CF\u8D85\u8FC7</span>
                <span class="token comment">// circuitBreaker.requestVolumeThreshold \u7684\u60C5\u51B5\u4E0B\uFF0C\u5982\u679C\u9519\u8BEF\u8BF7\u6C42\u6570\u7684\u767E\u5206\u6BD4\u8D85\u8FC750,</span>
                <span class="token comment">// \u5C31\u628A\u65AD\u8DEF\u5668\u8BBE\u7F6E\u4E3A &quot;\u6253\u5F00&quot; \u72B6\u6001\uFF0C\u5426\u5219\u5C31\u8BBE\u7F6E\u4E3A &quot;\u5173\u95ED&quot; \u72B6\u6001\u3002</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.errorThresholdPercentage&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;50&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u8BE5\u5C5E\u6027\u7528\u6765\u8BBE\u7F6E\u5F53\u65AD\u8DEF\u5668\u6253\u5F00\u4E4B\u540E\u7684\u4F11\u7720\u65F6\u95F4\u7A97\u3002 \u4F11\u7720\u65F6\u95F4\u7A97\u7ED3\u675F\u4E4B\u540E\uFF0C</span>
                <span class="token comment">// \u4F1A\u5C06\u65AD\u8DEF\u5668\u7F6E\u4E3A &quot;\u534A\u5F00&quot; \u72B6\u6001\uFF0C\u5C1D\u8BD5\u7194\u65AD\u7684\u8BF7\u6C42\u547D\u4EE4\uFF0C\u5982\u679C\u4F9D\u7136\u5931\u8D25\u5C31\u5C06\u65AD\u8DEF\u5668\u7EE7\u7EED\u8BBE\u7F6E\u4E3A &quot;\u6253\u5F00&quot; \u72B6\u6001\uFF0C</span>
                <span class="token comment">// \u5982\u679C\u6210\u529F\u5C31\u8BBE\u7F6E\u4E3A &quot;\u5173\u95ED&quot; \u72B6\u6001\u3002</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.sleepWindowinMilliseconds&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;5000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u65AD\u8DEF\u5668\u5F3A\u5236\u6253\u5F00</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.forceOpen&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;false&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u65AD\u8DEF\u5668\u5F3A\u5236\u5173\u95ED</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.forceClosed&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;false&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u6EDA\u52A8\u65F6\u95F4\u7A97\u8BBE\u7F6E\uFF0C\u8BE5\u65F6\u95F4\u7528\u4E8E\u65AD\u8DEF\u5668\u5224\u65AD\u5065\u5EB7\u5EA6\u65F6\u9700\u8981\u6536\u96C6\u4FE1\u606F\u7684\u6301\u7EED\u65F6\u95F4</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;metrics.rollingStats.timeinMilliseconds&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;10000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u8BE5\u5C5E\u6027\u7528\u6765\u8BBE\u7F6E\u6EDA\u52A8\u65F6\u95F4\u7A97\u7EDF\u8BA1\u6307\u6807\u4FE1\u606F\u65F6\u5212\u5206&quot;\u6876&quot;\u7684\u6570\u91CF\uFF0C\u65AD\u8DEF\u5668\u5728\u6536\u96C6\u6307\u6807\u4FE1\u606F\u7684\u65F6\u5019\u4F1A\u6839\u636E</span>
                <span class="token comment">// \u8BBE\u7F6E\u7684\u65F6\u95F4\u7A97\u957F\u5EA6\u62C6\u5206\u6210\u591A\u4E2A &quot;\u6876&quot; \u6765\u7D2F\u8BA1\u5404\u5EA6\u91CF\u503C\uFF0C\u6BCF\u4E2A&quot;\u6876&quot;\u8BB0\u5F55\u4E86\u4E00\u6BB5\u65F6\u95F4\u5185\u7684\u91C7\u96C6\u6307\u6807\u3002</span>
                <span class="token comment">// \u6BD4\u5982 10 \u79D2\u5185\u62C6\u5206\u6210 10 \u4E2A&quot;\u6876&quot;\u6536\u96C6\u8FD9\u6837\uFF0C\u6240\u4EE5 timeinMilliseconds \u5FC5\u987B\u80FD\u88AB numBuckets \u6574\u9664\u3002\u5426\u5219\u4F1A\u629B\u5F02\u5E38</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;metrics.rollingStats.numBuckets&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u8BE5\u5C5E\u6027\u7528\u6765\u8BBE\u7F6E\u5BF9\u547D\u4EE4\u6267\u884C\u7684\u5EF6\u8FDF\u662F\u5426\u4F7F\u7528\u767E\u5206\u4F4D\u6570\u6765\u8DDF\u8E2A\u548C\u8BA1\u7B97\u3002\u5982\u679C\u8BBE\u7F6E\u4E3A false, \u90A3\u4E48\u6240\u6709\u7684\u6982\u8981\u7EDF\u8BA1\u90FD\u5C06\u8FD4\u56DE -1\u3002</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;metrics.rollingPercentile.enabled&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;false&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u8BE5\u5C5E\u6027\u7528\u6765\u8BBE\u7F6E\u767E\u5206\u4F4D\u7EDF\u8BA1\u7684\u6EDA\u52A8\u7A97\u53E3\u7684\u6301\u7EED\u65F6\u95F4\uFF0C\u5355\u4F4D\u4E3A\u6BEB\u79D2\u3002</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;metrics.rollingPercentile.timeInMilliseconds&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;60000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u8BE5\u5C5E\u6027\u7528\u6765\u8BBE\u7F6E\u767E\u5206\u4F4D\u7EDF\u8BA1\u6EDA\u52A8\u7A97\u53E3\u4E2D\u4F7F\u7528 \u201C \u6876 \u201D\u7684\u6570\u91CF\u3002</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;metrics.rollingPercentile.numBuckets&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;60000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u8BE5\u5C5E\u6027\u7528\u6765\u8BBE\u7F6E\u5728\u6267\u884C\u8FC7\u7A0B\u4E2D\u6BCF\u4E2A \u201C\u6876\u201D \u4E2D\u4FDD\u7559\u7684\u6700\u5927\u6267\u884C\u6B21\u6570\u3002\u5982\u679C\u5728\u6EDA\u52A8\u65F6\u95F4\u7A97\u5185\u53D1\u751F\u8D85\u8FC7\u8BE5\u8BBE\u5B9A\u503C\u7684\u6267\u884C\u6B21\u6570\uFF0C</span>
                <span class="token comment">// \u5C31\u4ECE\u6700\u521D\u7684\u4F4D\u7F6E\u5F00\u59CB\u91CD\u5199\u3002\u4F8B\u5982\uFF0C\u5C06\u8BE5\u503C\u8BBE\u7F6E\u4E3A100, \u6EDA\u52A8\u7A97\u53E3\u4E3A10\u79D2\uFF0C\u82E5\u572810\u79D2\u5185\u4E00\u4E2A \u201C\u6876 \u201D\u4E2D\u53D1\u751F\u4E86500\u6B21\u6267\u884C\uFF0C</span>
                <span class="token comment">// \u90A3\u4E48\u8BE5 \u201C\u6876\u201D \u4E2D\u53EA\u4FDD\u7559 \u6700\u540E\u7684100\u6B21\u6267\u884C\u7684\u7EDF\u8BA1\u3002\u53E6\u5916\uFF0C\u589E\u52A0\u8BE5\u503C\u7684\u5927\u5C0F\u5C06\u4F1A\u589E\u52A0\u5185\u5B58\u91CF\u7684\u6D88\u8017\uFF0C\u5E76\u589E\u52A0\u6392\u5E8F\u767E\u5206\u4F4D\u6570\u6240\u9700\u7684\u8BA1\u7B97\u65F6\u95F4\u3002</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;metrics.rollingPercentile.bucketSize&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u8BE5\u5C5E\u6027\u7528\u6765\u8BBE\u7F6E\u91C7\u96C6\u5F71\u54CD\u65AD\u8DEF\u5668\u72B6\u6001\u7684\u5065\u5EB7\u5FEB\u7167\uFF08\u8BF7\u6C42\u7684\u6210\u529F\u3001 \u9519\u8BEF\u767E\u5206\u6BD4\uFF09\u7684\u95F4\u9694\u7B49\u5F85\u65F6\u95F4\u3002</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;metrics.healthSnapshot.intervalinMilliseconds&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;500&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u662F\u5426\u5F00\u542F\u8BF7\u6C42\u7F13\u5B58</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;requestCache.enabled&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// HystrixCommand\u7684\u6267\u884C\u548C\u4E8B\u4EF6\u662F\u5426\u6253\u5370\u65E5\u5FD7\u5230 HystrixRequestLog \u4E2D</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;requestLog.enabled&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        threadPoolProperties <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token comment">// \u8BE5\u53C2\u6570\u7528\u6765\u8BBE\u7F6E\u6267\u884C\u547D\u4EE4\u7EBF\u7A0B\u6C60\u7684\u6838\u5FC3\u7EBF\u7A0B\u6570\uFF0C\u8BE5\u503C\u4E5F\u5C31\u662F\u547D\u4EE4\u6267\u884C\u7684\u6700\u5927\u5E76\u53D1\u91CF</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;coreSize&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u8BE5\u53C2\u6570\u7528\u6765\u8BBE\u7F6E\u7EBF\u7A0B\u6C60\u7684\u6700\u5927\u961F\u5217\u5927\u5C0F\u3002\u5F53\u8BBE\u7F6E\u4E3A -1 \u65F6\uFF0C\u7EBF\u7A0B\u6C60\u5C06\u4F7F\u7528 SynchronousQueue \u5B9E\u73B0\u7684\u961F\u5217\uFF0C</span>
                <span class="token comment">// \u5426\u5219\u5C06\u4F7F\u7528 LinkedBlockingQueue \u5B9E\u73B0\u7684\u961F\u5217\u3002</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;maxQueueSize&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// \u8BE5\u53C2\u6570\u7528\u6765\u4E3A\u961F\u5217\u8BBE\u7F6E\u62D2\u7EDD\u9608\u503C\u3002 \u901A\u8FC7\u8BE5\u53C2\u6570\uFF0C \u5373\u4F7F\u961F\u5217\u6CA1\u6709\u8FBE\u5230\u6700\u5927\u503C\u4E5F\u80FD\u62D2\u7EDD\u8BF7\u6C42\u3002</span>
                <span class="token comment">// \u8BE5\u53C2\u6570\u4E3B\u8981\u662F\u5BF9 LinkedBlockingQueue \u961F\u5217\u7684\u8865\u5145,\u56E0\u4E3A LinkedBlockingQueue</span>
                <span class="token comment">// \u961F\u5217\u4E0D\u80FD\u52A8\u6001\u4FEE\u6539\u5B83\u7684\u5BF9\u8C61\u5927\u5C0F\uFF0C\u800C\u901A\u8FC7\u8BE5\u5C5E\u6027\u5C31\u53EF\u4EE5\u8C03\u6574\u62D2\u7EDD\u8BF7\u6C42\u7684\u961F\u5217\u5927\u5C0F\u4E86\u3002</span>
                <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;queueSizeRejectionThreshold&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">strConsumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;hello 2020&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">str_fallbackMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;*****fall back str_fallbackMethod&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u516D\u3001\u670D\u52A1\u9650\u6D41" tabindex="-1"><a class="header-anchor" href="#\u516D\u3001\u670D\u52A1\u9650\u6D41" aria-hidden="true">#</a> //\u516D\u3001\u670D\u52A1\u9650\u6D41</h3><p>\u5728spring cloud alibaba Sentinel\u65F6\u518D\u8BF4\uFF01</p><h3 id="\u4E03\u3001hystrix\u5DE5\u4F5C\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u4E03\u3001hystrix\u5DE5\u4F5C\u6D41\u7A0B" aria-hidden="true">#</a> \u4E03\u3001Hystrix\u5DE5\u4F5C\u6D41\u7A0B</h3>`,32),ja={href:"https://github.com/Netflix/Hystrix/wiki/How-it-Works",target:"_blank",rel:"noopener noreferrer"},Pa=a("https://github.com/Netflix/Hystrix/wiki/How-it-Works"),Ea=p(`<h4 id="\u5DE5\u4F5C\u6D41\u7A0B\u56FE" tabindex="-1"><a class="header-anchor" href="#\u5DE5\u4F5C\u6D41\u7A0B\u56FE" aria-hidden="true">#</a> \u5DE5\u4F5C\u6D41\u7A0B\u56FE</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632753962812-5995b053-e5d5-438a-8310-190ccaff6852.png" alt="img"></p><h4 id="\u6B65\u9AA4\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#\u6B65\u9AA4\u8BF4\u660E" aria-hidden="true">#</a> \u6B65\u9AA4\u8BF4\u660E</h4><table><thead><tr><th>1</th><th>\u521B\u5EFA HystrixCommand\uFF08\u7528\u5728\u4F9D\u8D56\u7684\u670D\u52A1\u8FD4\u56DE\u5355\u4E2A\u64CD\u4F5C\u7ED3\u679C\u7684\u65F6\u5019\uFF09 \u6216 HystrixObserableCommand\uFF08\u7528\u5728\u4F9D\u8D56\u7684\u670D\u52A1\u8FD4\u56DE\u591A\u4E2A\u64CD\u4F5C\u7ED3\u679C\u7684\u65F6\u5019\uFF09 \u5BF9\u8C61\u3002</th></tr></thead><tbody><tr><td>2</td><td>\u547D\u4EE4\u6267\u884C\u3002\u5176\u4E2D HystrixComand \u5B9E\u73B0\u4E86\u4E0B\u9762\u524D\u4E24\u79CD\u6267\u884C\u65B9\u5F0F\uFF1B\u800C HystrixObservableCommand \u5B9E\u73B0\u4E86\u540E\u4E24\u79CD\u6267\u884C\u65B9\u5F0F\uFF1Aexecute()\uFF1A\u540C\u6B65\u6267\u884C\uFF0C\u4ECE\u4F9D\u8D56\u7684\u670D\u52A1\u8FD4\u56DE\u4E00\u4E2A\u5355\u4E00\u7684\u7ED3\u679C\u5BF9\u8C61\uFF0C \u6216\u662F\u5728\u53D1\u751F\u9519\u8BEF\u7684\u65F6\u5019\u629B\u51FA\u5F02\u5E38\u3002queue()\uFF1A\u5F02\u6B65\u6267\u884C\uFF0C \u76F4\u63A5\u8FD4\u56DE \u4E00\u4E2AFuture\u5BF9\u8C61\uFF0C \u5176\u4E2D\u5305\u542B\u4E86\u670D\u52A1\u6267\u884C\u7ED3\u675F\u65F6\u8981\u8FD4\u56DE\u7684\u5355\u4E00\u7ED3\u679C\u5BF9\u8C61\u3002observe()\uFF1A\u8FD4\u56DE Observable \u5BF9\u8C61\uFF0C\u5B83\u4EE3\u8868\u4E86\u64CD\u4F5C\u7684\u591A\u4E2A\u7ED3\u679C\uFF0C\u5B83\u662F\u4E00\u4E2A Hot Obserable\uFF08\u4E0D\u8BBA &quot;\u4E8B\u4EF6\u6E90&quot; \u662F\u5426\u6709 &quot;\u8BA2\u9605\u8005&quot;\uFF0C\u90FD\u4F1A\u5728\u521B\u5EFA\u540E\u5BF9\u4E8B\u4EF6\u8FDB\u884C\u53D1\u5E03\uFF0C\u6240\u4EE5\u5BF9\u4E8E Hot Observable \u7684\u6BCF\u4E00\u4E2A &quot;\u8BA2\u9605\u8005&quot; \u90FD\u6709\u53EF\u80FD\u662F\u4ECE &quot;\u4E8B\u4EF6\u6E90&quot; \u7684\u4E2D\u9014\u5F00\u59CB\u7684\uFF0C\u5E76\u53EF\u80FD\u53EA\u662F\u770B\u5230\u4E86\u6574\u4E2A\u64CD\u4F5C\u7684\u5C40\u90E8\u8FC7\u7A0B\uFF09\u3002toObservable()\uFF1A \u540C\u6837\u4F1A\u8FD4\u56DE Observable \u5BF9\u8C61\uFF0C\u4E5F\u4EE3\u8868\u4E86\u64CD\u4F5C\u7684\u591A\u4E2A\u7ED3\u679C\uFF0C\u4F46\u5B83\u8FD4\u56DE\u7684\u662F\u4E00\u4E2ACold Observable\uFF08\u6CA1\u6709 &quot;\u8BA2\u9605\u8005&quot; \u7684\u65F6\u5019\u5E76\u4E0D\u4F1A\u53D1\u5E03\u4E8B\u4EF6\uFF0C\u800C\u662F\u8FDB\u884C\u7B49\u5F85\uFF0C\u76F4\u5230\u6709 &quot;\u8BA2\u9605\u8005&quot; \u4E4B\u540E\u624D\u53D1\u5E03\u4E8B\u4EF6\uFF0C\u6240\u4EE5\u5BF9\u4E8E Cold Observable \u7684\u8BA2\u9605\u8005\uFF0C\u5B83\u53EF\u4EE5\u4FDD\u8BC1\u4ECE\u4E00\u5F00\u59CB\u770B\u5230\u6574\u4E2A\u64CD\u4F5C\u7684\u5168\u90E8\u8FC7\u7A0B\uFF09\u3002</td></tr><tr><td>3</td><td>\u82E5\u5F53\u524D\u547D\u4EE4\u7684\u8BF7\u6C42\u7F13\u5B58\u529F\u80FD\u662F\u88AB\u542F\u7528\u7684\uFF0C \u5E76\u4E14\u8BE5\u547D\u4EE4\u7F13\u5B58\u547D\u4E2D\uFF0C \u90A3\u4E48\u7F13\u5B58\u7684\u7ED3\u679C\u4F1A\u7ACB\u5373\u4EE5 Observable \u5BF9\u8C61\u7684\u5F62\u5F0F \u8FD4\u56DE\u3002</td></tr><tr><td>4</td><td>\u68C0\u67E5\u65AD\u8DEF\u5668\u662F\u5426\u4E3A\u6253\u5F00\u72B6\u6001\u3002\u5982\u679C\u65AD\u8DEF\u5668\u662F\u6253\u5F00\u7684\uFF0C\u90A3\u4E48Hystrix\u4E0D\u4F1A\u6267\u884C\u547D\u4EE4\uFF0C\u800C\u662F\u8F6C\u63A5\u5230 fallback \u5904\u7406\u903B\u8F91\uFF08\u7B2C 8 \u6B65\uFF09\uFF1B\u5982\u679C\u65AD\u8DEF\u5668\u662F\u5173\u95ED\u7684\uFF0C\u68C0\u67E5\u662F\u5426\u6709\u53EF\u7528\u8D44\u6E90\u6765\u6267\u884C\u547D\u4EE4\uFF08\u7B2C 5 \u6B65\uFF09\u3002</td></tr><tr><td>5</td><td>\u7EBF\u7A0B\u6C60/\u8BF7\u6C42\u961F\u5217/\u4FE1\u53F7\u91CF\u662F\u5426\u5360\u6EE1\u3002\u5982\u679C\u547D\u4EE4\u4F9D\u8D56\u670D\u52A1\u7684\u4E13\u6709\u7EBF\u7A0B\u6C60\u548C\u8BF7\u6C42\u961F\u5217\uFF0C\u6216\u8005\u4FE1\u53F7\u91CF\uFF08\u4E0D\u4F7F\u7528\u7EBF\u7A0B\u6C60\u7684\u65F6\u5019\uFF09\u5DF2\u7ECF\u88AB\u5360\u6EE1\uFF0C \u90A3\u4E48 Hystrix \u4E5F\u4E0D\u4F1A\u6267\u884C\u547D\u4EE4\uFF0C \u800C\u662F\u8F6C\u63A5\u5230 fallback \u5904\u7406\u903B\u8F91\uFF08\u7B2C8\u6B65\uFF09\u3002</td></tr><tr><td>6</td><td>Hystrix \u4F1A\u6839\u636E\u6211\u4EEC\u7F16\u5199\u7684\u65B9\u6CD5\u6765\u51B3\u5B9A\u91C7\u53D6\u4EC0\u4E48\u6837\u7684\u65B9\u5F0F\u53BB\u8BF7\u6C42\u4F9D\u8D56\u670D\u52A1\u3002HystrixCommand.run() \uFF1A\u8FD4\u56DE\u4E00\u4E2A\u5355\u4E00\u7684\u7ED3\u679C\uFF0C\u6216\u8005\u629B\u51FA\u5F02\u5E38\u3002HystrixObservableCommand.construct()\uFF1A \u8FD4\u56DE\u4E00\u4E2AObservable \u5BF9\u8C61\u6765\u53D1\u5C04\u591A\u4E2A\u7ED3\u679C\uFF0C\u6216\u901A\u8FC7 onError \u53D1\u9001\u9519\u8BEF\u901A\u77E5\u3002</td></tr><tr><td>7</td><td>Hystrix\u4F1A\u5C06 &quot;\u6210\u529F&quot;\u3001&quot;\u5931\u8D25&quot;\u3001&quot;\u62D2\u7EDD&quot;\u3001&quot;\u8D85\u65F6&quot; \u7B49\u4FE1\u606F\u62A5\u544A\u7ED9\u65AD\u8DEF\u5668\uFF0C \u800C\u65AD\u8DEF\u5668\u4F1A\u7EF4\u62A4\u4E00\u7EC4\u8BA1\u6570\u5668\u6765\u7EDF\u8BA1\u8FD9\u4E9B\u6570\u636E\u3002\u65AD\u8DEF\u5668\u4F1A\u4F7F\u7528\u8FD9\u4E9B\u7EDF\u8BA1\u6570\u636E\u6765\u51B3\u5B9A\u662F\u5426\u8981\u5C06\u65AD\u8DEF\u5668\u6253\u5F00\uFF0C\u6765\u5BF9\u67D0\u4E2A\u4F9D\u8D56\u670D\u52A1\u7684\u8BF7\u6C42\u8FDB\u884C &quot;\u7194\u65AD/\u77ED\u8DEF&quot;\u3002</td></tr><tr><td>8</td><td>\u5F53\u547D\u4EE4\u6267\u884C\u5931\u8D25\u7684\u65F6\u5019\uFF0C Hystrix \u4F1A\u8FDB\u5165 fallback \u5C1D\u8BD5\u56DE\u9000\u5904\u7406\uFF0C \u6211\u4EEC\u901A\u5E38\u4E5F\u79F0\u8BE5\u64CD\u4F5C\u4E3A &quot;\u670D\u52A1\u964D\u7EA7&quot;\u3002\u800C\u80FD\u591F\u5F15\u8D77\u670D\u52A1\u964D\u7EA7\u5904\u7406\u7684\u60C5\u51B5\u6709\u4E0B\u9762\u51E0\u79CD\uFF1A\u7B2C4\u6B65\uFF1A \u5F53\u524D\u547D\u4EE4\u5904\u4E8E&quot;\u7194\u65AD/\u77ED\u8DEF&quot;\u72B6\u6001\uFF0C\u65AD\u8DEF\u5668\u662F\u6253\u5F00\u7684\u65F6\u5019\u3002\u7B2C5\u6B65\uFF1A \u5F53\u524D\u547D\u4EE4\u7684\u7EBF\u7A0B\u6C60\u3001 \u8BF7\u6C42\u961F\u5217\u6216 \u8005\u4FE1\u53F7\u91CF\u88AB\u5360\u6EE1\u7684\u65F6\u5019\u3002\u7B2C6\u6B65\uFF1AHystrixObservableCommand.construct() \u6216 HystrixCommand.run() \u629B\u51FA\u5F02\u5E38\u7684\u65F6\u5019\u3002</td></tr><tr><td>9</td><td>\u5F53Hystrix\u547D\u4EE4\u6267\u884C\u6210\u529F\u4E4B\u540E\uFF0C \u5B83\u4F1A\u5C06\u5904\u7406\u7ED3\u679C\u76F4\u63A5\u8FD4\u56DE\u6216\u662F\u4EE5Observable \u7684\u5F62\u5F0F\u8FD4\u56DE\u3002</td></tr></tbody></table><p>tips\uFF1A\u5982\u679C\u6211\u4EEC\u6CA1\u6709\u4E3A\u547D\u4EE4\u5B9E\u73B0\u964D\u7EA7\u903B\u8F91\u6216\u8005\u5728\u964D\u7EA7\u5904\u7406\u903B\u8F91\u4E2D\u629B\u51FA\u4E86\u5F02\u5E38\uFF0C Hystrix \u4F9D\u7136\u4F1A\u8FD4\u56DE\u4E00\u4E2A Observable \u5BF9\u8C61\uFF0C \u4F46\u662F\u5B83\u4E0D\u4F1A\u53D1\u5C04\u4EFB\u4F55\u7ED3\u679C\u6570\u636E\uFF0C \u800C\u662F\u901A\u8FC7 onError \u65B9\u6CD5\u901A\u77E5\u547D\u4EE4\u7ACB\u5373\u4E2D\u65AD\u8BF7\u6C42\uFF0C\u5E76\u901A\u8FC7onError()\u65B9\u6CD5\u5C06\u5F15\u8D77\u547D\u4EE4\u5931\u8D25\u7684\u5F02\u5E38\u53D1\u9001\u7ED9\u8C03\u7528\u8005\u3002</p><h3 id="\u516B\u3001\u670D\u52A1\u76D1\u63A7-hystrixdashboard" tabindex="-1"><a class="header-anchor" href="#\u516B\u3001\u670D\u52A1\u76D1\u63A7-hystrixdashboard" aria-hidden="true">#</a> \u516B\u3001\u670D\u52A1\u76D1\u63A7 HystrixDashBoard</h3><p>\u9664\u4E86\u9694\u79BB\u4F9D\u8D56\u670D\u52A1\u7684\u8C03\u7528\u4EE5\u5916\uFF0CHystrix\u8FD8\u63D0\u4F9B\u4E86\u51C6\u5B9E\u65F6\u7684\u8C03\u7528\u76D1\u63A7\uFF08Hystrix Dashboard\uFF09Hystrix\u4F1A\u6301\u7EED\u7684\u8BB0\u5F55\u6240\u6709\u901A\u8FC7Hystrix\u53D1\u8D77\u7684\u8BF7\u6C42\u7684\u6267\u884C\u4FE1\u606F\uFF0C\u5E76\u4EE5\u7EDF\u8BA1\u62A5\u8868\u548C\u56FE\u5F62\u7684\u5F62\u5F0F\u5C55\u793A\u7ED9\u7528\u6237\uFF0C\u5305\u62EC<strong>\u6BCF\u79D2\u6267\u884C\u591A\u5C11\u8BF7\u6C42\u591A\u5C11\u6210\u529F\uFF0C\u591A\u5C11\u5931\u8D25</strong>\u7B49\uFF0CNetflix\u901A\u8FC7<code>hystrix-metrics-event-stream</code>\u9879\u76EE\u5B9E\u73B0\u4E86\u5BF9\u4EE5\u4E0A\u6307\u6807\u7684\u76D1\u63A7\uFF0CSpring Cloud\u63D0\u4F9B\u4E86Hystrix Dashboard\u7684\u6574\u5408\uFF0C\u5BF9\u76D1\u63A7\u5185\u5BB9\u8F6C\u5316\u6210\u53EF\u89C6\u5316\u9875\u9762\u3002</p><h4 id="_8-1-\u65B0\u5EFAcloud-consumer-hystrix-dashboard9001" tabindex="-1"><a class="header-anchor" href="#_8-1-\u65B0\u5EFAcloud-consumer-hystrix-dashboard9001" aria-hidden="true">#</a> 8.1 \u65B0\u5EFAcloud-consumer-hystrix-dashboard9001</h4><h5 id="_8-1-1-pom" tabindex="-1"><a class="header-anchor" href="#_8-1-1-pom" aria-hidden="true">#</a> 8.1.1 pom</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jdk8cloud2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-consumer-hystrix-dashboard9001<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-hystrix-dashboard<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_8-1-2-yaml" tabindex="-1"><a class="header-anchor" href="#_8-1-2-yaml" aria-hidden="true">#</a> 8.1.2 yaml</h5><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632792217201-11413334-f246-4cd8-a71f-d64e9e05ac3d.png" alt="img">\u7ED9\u4E2A\u7AEF\u53E3\u53F7\u5C31\u884C</p><h5 id="_8-1-3-\u4E3B\u542F\u52A8\u7C7B" tabindex="-1"><a class="header-anchor" href="#_8-1-3-\u4E3B\u542F\u52A8\u7C7B" aria-hidden="true">#</a> 8.1.3 \u4E3B\u542F\u52A8\u7C7B</h5><p>HystrixDashboardMain9001+\u65B0\u6CE8\u89E3**@EnableHystrixDashboard**</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableHystrixDashboard</span> <span class="token comment">// \u5F00\u542FHystrix\u4EEA\u8868\u76D8</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HystrixDashboardMain9001</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">HystrixDashboardMain9001</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_8-1-4-\u6240\u6709provider\u5FAE\u670D\u52A1-\u751F\u4EA7\u8005-\u63D0\u4F9B\u7C7B8001-8002-8003\u90FD\u9700\u8981\u76D1\u63A7\u4F9D\u8D56\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_8-1-4-\u6240\u6709provider\u5FAE\u670D\u52A1-\u751F\u4EA7\u8005-\u63D0\u4F9B\u7C7B8001-8002-8003\u90FD\u9700\u8981\u76D1\u63A7\u4F9D\u8D56\u914D\u7F6E" aria-hidden="true">#</a> 8.1.4 \u6240\u6709provider\u5FAE\u670D\u52A1\uFF08\u751F\u4EA7\u8005\uFF09\u63D0\u4F9B\u7C7B8001/8002/8003\u90FD\u9700\u8981\u76D1\u63A7\u4F9D\u8D56\u914D\u7F6E</h5><p>\u786E\u4FDD\u6240\u6709\u751F\u4EA7\u8005\u5FAE\u670D\u52A1\u4E2D\u5747\u5305\u542B<strong>spring-boot-starter-actuator</strong>\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_8-1-5-\u542F\u52A8\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_8-1-5-\u542F\u52A8\u6D4B\u8BD5" aria-hidden="true">#</a> 8.1.5 \u542F\u52A8\u6D4B\u8BD5</h5>`,19),Ra={href:"http://localhost:9001/hystrix",target:"_blank",rel:"noopener noreferrer"},Ma=a("http://localhost:9001/hystrix"),Ta=p(`<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632794192509-d66eaa66-56be-41f3-b46b-46b41c633944.png" alt="img"></p><h4 id="_8-2-\u65AD\u8DEF\u5668\u6F14\u793A-\u670D\u52A1\u76D1\u63A7hystrixdashboard" tabindex="-1"><a class="header-anchor" href="#_8-2-\u65AD\u8DEF\u5668\u6F14\u793A-\u670D\u52A1\u76D1\u63A7hystrixdashboard" aria-hidden="true">#</a> 8.2 \u65AD\u8DEF\u5668\u6F14\u793A(\u670D\u52A1\u76D1\u63A7hystrixDashboard)</h4><p>\u5FAE\u670D\u52A1\u60F3\u8981\u88AB\u76D1\u63A7\u5FC5\u987B\u8981\u6709spring-boot-starter-actuator\u4F9D\u8D56</p><h5 id="_8-2-1-\u6CE8\u610F\u4E8B\u9879" tabindex="-1"><a class="header-anchor" href="#_8-2-1-\u6CE8\u610F\u4E8B\u9879" aria-hidden="true">#</a> 8.2.1 \u6CE8\u610F\u4E8B\u9879</h5><p>\u6CE8\u610F:\u65B0\u7248\u672CHystrix\u9700\u8981\u5728\u9700\u8981\u76D1\u63A7\u7684\u5FAE\u670D\u52A1\u7AEF\u7684\u4E3B\u542F\u52A8\u7C7B\u4E2D\u6307\u5B9A\u76D1\u63A7\u8DEF\u5F84\uFF0C\u4E0D\u7136\u4F1A\u62A5\u9519\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1617857687374-16f965d1-6a21-4ace-b2eb-d785400e8d3a.png" alt="img"></p><p>\u5728\u88AB\u76D1\u63A7\u7684\u670D\u52A1\u7AEF\u4E3B\u542F\u52A8\u7C7B\u4E2D\u6DFB\u52A0\u4EE5\u4E0B\u4EE3\u7801\uFF0C\u8FD9\u91CC\u4EE5\u3010PaymentHystrixMain8001\u3011\u4E3A\u793A\u4F8B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>  <span class="token comment">//\u672C\u670D\u52A1\u542F\u52A8\u540E\u4F1A\u81EA\u52A8\u6CE8\u518C\u8FDBeureka\u670D\u52A1\u4E2D</span>
<span class="token annotation punctuation">@EnableCircuitBreaker</span>  <span class="token comment">//\u5BF9hystrixR\u7194\u65AD\u673A\u5236\u7684\u652F\u6301</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentHystrixMain8001</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">PaymentHystrixMain8001</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/** ======================================\u9700\u8981\u6DFB\u52A0\u7684\u4EE3\u7801==================
     *\u6B64\u914D\u7F6E\u662F\u4E3A\u4E86\u670D\u52A1\u76D1\u63A7\u800C\u914D\u7F6E\uFF0C\u4E0E\u670D\u52A1\u5BB9\u9519\u672C\u8EAB\u65E0\u5173\uFF0Cspringcloud\u5347\u7EA7\u540E\u7684\u5751
     *ServletRegistrationBean\u56E0\u4E3Aspringboot\u7684\u9ED8\u8BA4\u8DEF\u5F84\u4E0D\u662F&quot;/hystrix.stream&quot;\uFF0C
     *\u53EA\u8981\u5728\u81EA\u5DF1\u7684\u9879\u76EE\u91CC\u914D\u7F6E\u4E0A\u4E0B\u9762\u7684servlet\u5C31\u53EF\u4EE5\u4E86
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">ServletRegistrationBean</span> <span class="token function">getServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">HystrixMetricsStreamServlet</span> streamServlet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HystrixMetricsStreamServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ServletRegistrationBean</span> registrationBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServletRegistrationBean</span><span class="token punctuation">(</span>streamServlet<span class="token punctuation">)</span><span class="token punctuation">;</span>
        registrationBean<span class="token punctuation">.</span><span class="token function">setLoadOnStartup</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        registrationBean<span class="token punctuation">.</span><span class="token function">addUrlMappings</span><span class="token punctuation">(</span><span class="token string">&quot;/hystrix.stream&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        registrationBean<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;HystrixMetricsStreamServlet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> registrationBean<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_8-2-2-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_8-2-2-\u6D4B\u8BD5" aria-hidden="true">#</a> 8.2.2 \u6D4B\u8BD5</h5><ul><li>\u542F\u52A8Eureka7001\u3001Eureka7002\uFF08\u6211\u8FD9\u91CC\u7528\u7684\u662F\u4E24\u4E2AEureka\u7684\u96C6\u7FA4\uFF0C\u89C6\u9891\u91CC\u662F\u5355\u4E2A\uFF09\u30018001\u30019001</li><li>9001\u76D1\u63A78001</li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632795076911-ffb941c2-e19a-4aaa-9dde-4b4e840770b2.png" alt="img"></p>`,11),Ha=a("\u81EA\u6D4B8001\u7AEF\u53E3\uFF1A"),Oa={href:"http://localhost:8001/payment/circuit/-5,http://localhost:8001/payment/circuit/5",target:"_blank",rel:"noopener noreferrer"},Aa=a("http://localhost:8001/payment/circuit/-5,http://localhost:8001/payment/circuit/5"),Ba=n("p",null,[n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632796042132-149f09ce-3002-4932-abbe-5cb785261601.png",alt:"img"}),n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632796050920-aea45d39-ea5e-47be-a991-2e4b17950cf1.png",alt:"img"})],-1),Fa=n("ul",null,[n("li",null,"\u6253\u5F00\u76D1\u63A7\u9875\u9762")],-1),La=n("p",null,[n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632795741344-c355fb69-0f1a-45fe-ab20-36457e020114.png",alt:"img"})],-1),Va=n("p",null,[n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632795830199-ab69e0ab-5458-4d1e-bc97-b1ac43c53201.png",alt:"img"})],-1),Na=a("\u591A\u6B21\u5237\u65B0"),za={href:"http://localhost:8001/payment/circuit/5",target:"_blank",rel:"noopener noreferrer"},Ga=a("http://localhost:8001/payment/circuit/5"),Da=n("li",null,[n("ul",null,[n("li",null,"\u5706\u5708\u53D8\u5927\u4E86\uFF0C\u6298\u7EBF\u4E0A\u5347\uFF0C\u8868\u793A\u8BF7\u6C42\u6570\u91CF\u53D8\u591A\uFF0C\u56E0\u4E3A\u8BF7\u6C42\u90FD\u662F\u6B63\u5E38\u7684\uFF0C\u6240\u4EE5\u65AD\u8DEF\u5668\u5904\u4E8E\u5173\u95ED\u72B6\u6001")])],-1),Ua=n("p",null,[n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632796121692-2c1edcb8-d6a3-4e59-a5bd-790a14f04bf5.png",alt:"img"})],-1),Za=a("\u7C7B\u4F3C\u7684\uFF0C\u591A\u6B21\u5237\u65B0"),Qa={href:"http://localhost:8001/payment/circuit/-5",target:"_blank",rel:"noopener noreferrer"},Xa=a("http://localhost:8001/payment/circuit/-5"),Wa=n("li",null,[n("ul",null,[n("li",null,"\u53EF\u4EE5\u770B\u5230\u65AD\u8DEF\u5668\u5904\u4E8E\u5F00\u542F\u72B6\u6001")])],-1),Ya=p('<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632796267798-c19d0db4-9308-4ec6-b6ee-a7e6996a3685.png" alt="img"></p><h5 id="_8-2-3-\u76D1\u63A7\u9875\u7684\u5404\u4E2A\u5730\u65B9\u8868\u793A\u4EC0\u4E48\u610F\u601D" tabindex="-1"><a class="header-anchor" href="#_8-2-3-\u76D1\u63A7\u9875\u7684\u5404\u4E2A\u5730\u65B9\u8868\u793A\u4EC0\u4E48\u610F\u601D" aria-hidden="true">#</a> 8.2.3 \u76D1\u63A7\u9875\u7684\u5404\u4E2A\u5730\u65B9\u8868\u793A\u4EC0\u4E48\u610F\u601D\uFF1F</h5><p>7\u82721\u5708</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632796801455-9170325a-0607-40b0-91df-194a755e5fef.png" alt="img"></p><p>\u5B9E\u5FC3\u5706\uFF1A\u5171\u6709\u4E24\u79CD\u542B\u4E49\u3002\u5B83\u901A\u8FC7\u989C\u8272\u7684\u53D8\u5316\u4EE3\u8868\u4E86\u5B9E\u4F8B\u7684\u5065\u5EB7\u7A0B\u5EA6\uFF0C\u5B83\u7684\u5065\u5EB7\u5EA6\u4ECE\u7EFF\u8272&lt;\u9EC4\u8272&lt;\u6A59\u8272&lt;\u7EA2\u8272\u9012\u51CF\u3002</p><p>\u8BE5\u5B9E\u5FC3\u5706\u9664\u4E86\u989C\u8272\u7684\u53D8\u5316\u4E4B\u5916\uFF0C\u5B83\u7684\u5927\u5C0F\u4E5F\u4F1A\u6839\u636E\u5B9E\u4F8B\u7684\u8BF7\u6C42\u6D41\u91CF\u53D1\u751F\u53D8\u5316\uFF0C\u6D41\u91CF\u8D8A\u5927\u8BE5\u5B9E\u5FC3\u5706\u5C31\u8D8A\u5927\u3002\u6240\u4EE5\u901A\u8FC7\u8BE5\u5B9E\u5FC3\u5706\u7684\u5C55\u793A\uFF0C\u5C31\u53EF\u4EE5\u5728\u5927\u91CF\u7684\u5B9E\u4F8B\u4E2D\u5FEB\u901F\u7684\u53D1\u73B0\u6545\u969C\u5B9E\u4F8B\u548C\u9AD8\u538B\u529B\u5B9E\u4F8B\u3002</p><p>\u66F2\u7EBF\uFF1A\u7528\u6765\u8BB0\u5F552\u5206\u949F\u5185\u6D41\u91CF\u7684\u76F8\u5BF9\u53D8\u5316\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5B83\u6765\u89C2\u5BDF\u5230\u6D41\u91CF\u7684\u4E0A\u5347\u548C\u4E0B\u964D\u8D8B\u52BF\u3002</p><p>\u56FE\u7247\u8BF4\u660E\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632796657189-31177fb5-7a9c-438e-8fef-908e4e65dcb1.png" alt="img"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632796677709-57bed43a-3fc3-4e26-8ed1-3e692ab87b0d.png" alt="img"></p><h2 id="_8-\u670D\u52A1\u7F51\u5173-gateway\u65B0\u4E00\u4EE3\u7F51\u5173" tabindex="-1"><a class="header-anchor" href="#_8-\u670D\u52A1\u7F51\u5173-gateway\u65B0\u4E00\u4EE3\u7F51\u5173" aria-hidden="true">#</a> 8.\u670D\u52A1\u7F51\u5173-gateway\u65B0\u4E00\u4EE3\u7F51\u5173</h2><h3 id="\u4E00\u3001gateway\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001gateway\u6982\u8FF0" aria-hidden="true">#</a> \u4E00\u3001Gateway\u6982\u8FF0</h3><p>\u5B98\u7F51\uFF1A</p>',13),$a=a("\u4E0A\u4E00\u4EE3zuul 1.X "),Ka={href:"https://github.com/Netflix/zuul/wiki",target:"_blank",rel:"noopener noreferrer"},Ja=a("https://github.com/Netflix/zuul/wiki"),ns=a("\u5F53\u524Dgateway \uFF1A "),as={href:"https://spring.io/projects/spring-cloud-gateway##learn",target:"_blank",rel:"noopener noreferrer"},ss=a("\u6700\u65B0\u7248"),ts=a(" \uFF0C"),ps={href:"https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/",target:"_blank",rel:"noopener noreferrer"},es=a("2.2.1.RELEASE"),os=p('<h4 id="_1\u3001gateway\u662F\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#_1\u3001gateway\u662F\u4EC0\u4E48" aria-hidden="true">#</a> 1\u3001Gateway\u662F\u4EC0\u4E48</h4><p>Cloud\u5168\u5BB6\u6876\u4E2D\u6709\u4E2A\u5F88\u91CD\u8981\u7684\u7EC4\u4EF6\u5C31\u662F\u7F51\u5173\uFF0C\u57281.x\u7248\u672C\u4E2D\u90FD\u662F\u91C7\u7528Zuul\u7F51\u5173\uFF1B</p><p>\u4F46\u57282.x\u7248\u672C\u4E2D\uFF0Czuul\u7684\u5347\u7EA7\u5C31\u662F\u4E00\u76F4\u8DF3\u7968\uFF0CSpringCloud\u6700\u540E\u81EA\u5DF1\u7814\u53D1\u4E86\u4E00\u4E2A\u7F51\u5173\u4EE3\u66FFZuul</p><p>\u90A3\u5C31\u662F SpringCloud Gateway \uFF0Cgateway\u662Fzuul 1.x\u7248\u672C\u7684\u66FF\u4EE3\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632809950569-9d0e8382-c673-4191-9245-299a2ff4f767.png" alt="img"></p><p>Gateway\u662F\u5728Spring\u751F\u6001\u7CFB\u7EDF\u4E4B\u4E0A\u67B6\u6784\u7684API\u7F51\u5173\u670D\u52A1\uFF0C\u57FA\u4E8ESpring 5,Spring Boot2 \u548CProject Reactor\u6280\u672F\u3002</p><p>Gateway\u65E8\u5728\u63D0\u4F9B\u4E00\u79CD\u7B80\u5355\u800C\u6709\u6548\u7684\u65B9\u5F0F\u6765\u5BF9API\u8FDB\u884C\u8DEF\u7531\uFF0C\u4EE5\u53CA\u63D0\u4F9B\u4E00\u4E9B\u5F3A\u5927\u7684\u8FC7\u6EE4\u5668\u529F\u80FD\uFF0C\u4F8B\u5982\uFF1A\u7194\u65AD\u3001\u9650\u6D41\u3001\u91CD\u8BD5\u7B49\u3002</p><h5 id="_1-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_1-1-\u6982\u8FF0" aria-hidden="true">#</a> 1.1 \u6982\u8FF0</h5><ul><li>SpringCloud Gateway \u662F Spring Cloud \u7684\u4E00\u4E2A\u5168\u65B0\u9879\u76EE\uFF0C\u57FA\u4E8E Spring 5.0+Spring Boot 2.0 \u548C Project Reactor \u7B49\u6280\u672F\u5F00\u53D1\u7684\u7F51\u5173\uFF0C\u5B83\u65E8\u5728\u4E3A\u5FAE\u670D\u52A1\u67B6\u6784\u63D0\u4F9B\u4E00\u79CD\u7B80\u5355\u6709\u6548\u7684\u7EDF\u4E00\u7684 API \u8DEF\u7531\u7BA1\u7406\u65B9\u5F0F\u3002</li><li>SpringCloud Gateway\u4F5C\u4E3ASpring cloud\u751F\u6001\u7CFB\u7EDF\u4E2D\u7684\u7F51\u5173\uFF0C\u76EE\u6807\u662F\u4EE3\u66FF Zuul\uFF0C\u5728SpringCloud2.0\u4EE5\u4E0A\u7248\u672C\u4E2D\uFF0C\u6CA1\u6709\u5BF9\u65B0\u7248\u672C\u7684Zuul 2.0\u4EE5\u4E0A\u5B9E\u73B0\u6700\u65B0\u9AD8\u6027\u80FD\u7248\u672C\u8FDB\u884C\u96C6\u6210\uFF0C\u4ECD\u7136\u8FD8\u662F\u4F7F\u7528\u7684Zuul 1.x\u975EReactor\u6A21\u5F0F\u7684\u8001\u7248\u672C\u3002\u800C\u4E3A\u4E86\u63D0\u5347\u7F51\u5173\u7684\u6027\u80FD\uFF0CSpringCloud Gateway\u662F\u57FA\u4E8EWebFlux\u6846\u67B6\u5B9E\u73B0\u7684\uFF0C\u800CWebFlux\u6846\u67B6\u5E95\u5C42\u5219\u4F7F\u7528\u4E86\u9AD8\u6027\u80FD\u7684Reactor\u6A21\u5F0F\u901A\u4FE1\u6846\u67B6Netty\uFF0C\u3010\u8BF4\u7A7F\u4E86\u5C31\u662F SpringCloud Gateway\u662F\u5F02\u6B65\u975E\u963B\u585E\u5F0F\uFF0C\u54CD\u5E94\u5F0F\u7684\u6846\u67B6\u3011</li><li>Spring Cloud Gateway\u7684\u76EE\u6807\u63D0\u4F9B\u7EDF\u4E00\u7684\u8DEF\u7531\u65B9\u5F0F\u4E14\u57FA\u4E8E Filter \u94FE\u7684\u65B9\u5F0F\u63D0\u4F9B\u4E86\u7F51\u5173\u57FA\u672C\u7684\u529F\u80FD\uFF0C\u4F8B\u5982\uFF1A\u5B89\u5168\uFF0C\u76D1\u63A7/\u6307\u6807\uFF0C\u548C\u9650\u6D41\u3002</li></ul><p><strong>\u4E00\u53E5\u8BDD</strong>\uFF1ASpringCloud Gateway \u4F7F\u7528\u7684Webflux\u4E2D\u7684reactor-netty\u54CD\u5E94\u5F0F\u7F16\u7A0B\u7EC4\u4EF6\uFF0C\u5E95\u5C42\u4F7F\u7528\u4E86Netty\u901A\u8BAF\u6846\u67B6\u3002</p><p><strong>\u6E90\u7801\u67B6\u6784</strong>\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632810300552-97d7e40c-06ba-4e2e-9dc4-09f84ac7f13b.png" alt="img"></p><h4 id="_2\u3001-\u80FD\u5E72\u561B" tabindex="-1"><a class="header-anchor" href="#_2\u3001-\u80FD\u5E72\u561B" aria-hidden="true">#</a> 2\u3001 \u80FD\u5E72\u561B</h4><p>\u53CD\u5411\u4EE3\u7406\u3001\u9274\u6743\u3001\u6D41\u91CF\u63A7\u5236\u3001\u7194\u65AD\u3001\u65E5\u5FD7\u76D1\u63A7\u7B49</p><h4 id="_3\u3001\u5FAE\u670D\u52A1\u67B6\u6784\u4E2D\u7F51\u5173\u5728\u54EA\u91CC" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u5FAE\u670D\u52A1\u67B6\u6784\u4E2D\u7F51\u5173\u5728\u54EA\u91CC" aria-hidden="true">#</a> 3\u3001\u5FAE\u670D\u52A1\u67B6\u6784\u4E2D\u7F51\u5173\u5728\u54EA\u91CC</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632810706535-71a5e3e9-f84c-4543-9bbe-5da3d0c070e2.png" alt="img"></p><h4 id="_4\u3001\u4E3A\u4EC0\u4E48\u9009\u62E9gateway" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u4E3A\u4EC0\u4E48\u9009\u62E9gateway" aria-hidden="true">#</a> 4\u3001\u4E3A\u4EC0\u4E48\u9009\u62E9gateway\uFF1F</h4><p>\u4E00\u65B9\u9762\u56E0\u4E3AZuul1.0\u5DF2\u7ECF\u8FDB\u5165\u4E86\u7EF4\u62A4\u9636\u6BB5\uFF0C\u540C\u65F6Zuul2.0\u75AF\u72C2\u8DF3\u7968\u3002\u800C\u4E14Gateway\u662FSpringCloud\u56E2\u961F\u7814\u53D1\u7684\uFF0C\u662F\u4EB2\u513F\u5B50\u4EA7\u54C1\uFF0C\u503C\u5F97\u4FE1\u8D56\u3002</p><p>\u800C\u4E14\u5F88\u591A\u529F\u80FDZuul\u90FD\u6CA1\u6709\u7528\u8D77\u6765\u4E5F\u975E\u5E38\u7684\u7B80\u5355\u4FBF\u6377\u3002</p><p>Gateway\u662F\u57FA\u4E8E\u5F02\u6B65\u975E\u963B\u585E\u6A21\u578B\u4E0A\u8FDB\u884C\u5F00\u53D1\u7684\uFF0C\u6027\u80FD\u65B9\u9762\u4E0D\u9700\u8981\u62C5\u5FC3\u3002\u867D\u7136Netflix\u65E9\u5C31\u53D1\u5E03\u4E86\u6700\u65B0\u7684 Zuul 2.x\uFF0C</p><p>\u4F46 Spring Cloud \u8C8C\u4F3C\u6CA1\u6709\u6574\u5408\u8BA1\u5212\u3002\u800C\u4E14Netflix\u76F8\u5173\u7EC4\u4EF6\u90FD\u5BA3\u5E03\u8FDB\u5165\u7EF4\u62A4\u671F\uFF1B\u4E0D\u77E5\u524D\u666F\u5982\u4F55\uFF1F</p><p>\u591A\u65B9\u9762\u7EFC\u5408\u8003\u8651Gateway\u662F\u5F88\u7406\u60F3\u7684\u7F51\u5173\u9009\u62E9\u3002</p><h5 id="_4-1-springcloud-gateway\u5177\u6709\u5982\u4E0B\u7279\u6027" tabindex="-1"><a class="header-anchor" href="#_4-1-springcloud-gateway\u5177\u6709\u5982\u4E0B\u7279\u6027" aria-hidden="true">#</a> 4.1 SpringCloud Gateway\u5177\u6709\u5982\u4E0B\u7279\u6027</h5><ul><li>\u57FA\u4E8ESpring Frameword5 ,Project Reactor \u548C SpringBoot 2.0\u8FDB\u884C\u6784\u5EFA\uFF1B</li><li>\u52A8\u6001\u8DEF\u7531\uFF1A\u80FD\u591F\u5339\u914D\u4EFB\u4F55\u8BF7\u6C42\u5C5E\u6027</li><li>\u53EF\u4EE5\u5BF9\u8DEF\u7531\u6307\u5B9APredicate(\u65AD\u8A00)\u548CFilter\uFF08\u8FC7\u6EE4\u5668\uFF09</li><li>\u96C6\u6210Hystrix\u7684\u65AD\u8DEF\u5668\u529F\u80FD\uFF1B</li><li>\u96C6\u6210Spring Cloud\u7684\u670D\u52A1\u53D1\u73B0\u529F\u80FD</li><li>\u6613\u4E8E\u7F16\u5199\u7684Predicate\uFF08\u65AD\u8A00\uFF09\u548CFilter\uFF08\u8FC7\u6EE4\u5668\uFF09</li><li>\u8BF7\u6C42\u9650\u6D41\u529F\u80FD\uFF1B</li><li>\u652F\u6301\u8DEF\u5F84\u91CD\u5199</li></ul><h5 id="_4-2-springcloud-gateway-\u4E0E-zuul\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_4-2-springcloud-gateway-\u4E0E-zuul\u7684\u533A\u522B" aria-hidden="true">#</a> 4.2 SpringCloud Gateway \u4E0E Zuul\u7684\u533A\u522B</h5><p>\u5728SpringCloud Finchley \u6B63\u5F0F\u7248\u4E4B\u524D\uFF08\u73B0\u5728H\u7248\uFF09\uFF0CSpringCloud\u63A8\u8350\u7684\u7F51\u5173\u662FNetflix\u63D0\u4F9B\u7684zuul\u3002</p><ol><li><p>Zuul1.x \u662F\u4E00\u4E2A\u57FA\u4E8E\u963B\u585E I/O\u7684API\u7F51\u5173</p></li><li><p>Zuul1.x \u57FA\u4E8EServlet2.5\u4F7F\u7528\u963B\u585E\u67B6\u6784\u5B83\u4E0D\u652F\u6301\u4EFB\u4F55\u957F\u8FDE\u63A5 \uFF08\u5982WebSocket\uFF09Zuul\u7684\u8BBE\u8BA1\u6A21\u5F0F\u548CNginx\u8F83\u50CF\uFF0C\u6BCF\u6B21I/O\u64CD\u4F5C\u90FD\u662F\u4ECE\u5DE5\u4F5C\u7EBF\u7A0B\u4E2D\u9009\u62E9\u4E00\u4E2A\u6267\u884C\uFF0C\u8BF7\u6C42\u7EBF\u7A0B\u88AB\u963B\u585E\u5230\u5DE5\u4F5C\u7EBF\u7A0B\u5B8C\u6210\uFF0C\u4F46\u662F\u5DEE\u522B\u662FNginx\u7528C++\u5B9E\u73B0\uFF0CZuul\u7528java\u5B9E\u73B0\uFF0C\u800CJVM\u672C\u8EAB\u4F1A\u6709\u7B2C\u4E00\u6B21\u52A0\u8F7D\u8F83\u6162\u7684\u60C5\u51B5\uFF0C\u4F7F\u5F97Zuul\u7684\u6027\u80FD\u76F8\u5BF9\u8F83\u5DEE\u3002</p></li><li><p>Zuul 2.x\u7406\u5FF5\u66F4\u52A0\u5148\u8FDB\uFF0C\u50CF\u57FA\u4E8ENetty\u975E\u963B\u585E\u548C\u652F\u6301\u957F\u8FDE\u63A5\uFF0C\u4F46SpringCloud\u76EE\u524D\u8FD8\u6CA1\u6709\u6574\u5408\u3002Zuul2.x\u7684\u6027\u80FD\u8F83Zuul 1.x\u6709\u8F83\u5927\u7684\u63D0\u5347\u3002\u5728\u6027\u80FD\u65B9\u9762\uFF0C\u6839\u636E\u5B98\u65B9\u63D0\u4F9B\u7684\u57FA\u51C6\u6D4B\u8BD5\uFF0CSpring Cloud Gateway\u7684RPS\uFF08\u6BCF\u79D2\u8BF7\u6C42\u6B21\u6570\uFF09\u662FZuul\u76841.6\u500D\u3002</p></li><li><p>Spring Cloud Gateway\u5EFA\u7ACB\u5728Spring Framework 5\u3001project Reactor\u548CSpring Boot2 \u4E4B\u4E0A\uFF0C\u4F7F\u7528\u975E\u963B\u585EAPI</p></li><li><p>Spring Cloud Gateway \u8FD8\u652F\u6301WebSocket\uFF0C\u5E76\u4E14\u4E0ESpring\u7D27\u5BC6\u96C6\u6210\u62E5\u6709\u66F4\u597D\u7684\u5F00\u53D1\u4F53\u9A8C\u3002</p></li></ol><h4 id="_5\u3001zuul1-x\u6A21\u578B" tabindex="-1"><a class="header-anchor" href="#_5\u3001zuul1-x\u6A21\u578B" aria-hidden="true">#</a> 5\u3001Zuul1.x\u6A21\u578B</h4><p>Springcloud\u4E2D\u6240\u96C6\u6210\u7684Zuul\u7248\u672C\uFF0C\u91C7\u7528\u7684\u662FTomcat\u5BB9\u5668\uFF0C\u4F7F\u7528\u7684\u662F\u4F20\u7EDF\u7684Servlet IO\u5904\u7406\u6A21\u578B\u3002</p><p>Servlet\u7684\u751F\u547D\u5468\u671F?servlet\u7531servlet container\u8FDB\u884C\u751F\u547D\u5468\u671F\u7BA1\u7406\u3002</p><p>container\u542F\u52A8\u65F6\u6784\u9020servlet\u5BF9\u8C61\u5E76\u8C03\u7528servlet init()\u8FDB\u884C\u521D\u59CB\u5316\uFF1B</p><p>container\u8FD0\u884C\u65F6\u63A5\u53D7\u8BF7\u6C42\uFF0C\u5E76\u4E3A\u6BCF\u4E2A\u8BF7\u6C42\u5206\u914D\u4E00\u4E2A\u7EBF\u7A0B\uFF08\u4E00\u822C\u4ECE\u7EBF\u7A0B\u6C60\u4E2D\u83B7\u53D6\u7A7A\u95F2\u7EBF\u7A0B\uFF09\u7136\u540E\u8C03\u7528service()\u3002</p><p>container\u5173\u95ED\u65F6\u8C03\u7528servlet destory()\u9500\u6BC1servlet\uFF1B</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632811268454-33791eff-eede-43f5-bb23-a3409274793a.png" alt="img"></p><p>\u4E0A\u8FF0\u6A21\u5F0F\u7684\u7F3A\u70B9\uFF1A</p><p>servlet\u662F\u4E00\u4E2A\u7B80\u5355\u7684\u7F51\u7EDCIO\u6A21\u578B\uFF0C\u5F53\u8BF7\u6C42\u8FDB\u5165servlet container\u65F6\uFF0Cservlet container\u5C31\u4F1A\u4E3A\u5176\u7ED1\u5B9A\u4E00\u4E2A\u7EBF\u7A0B\uFF0C\u5728\u5E76\u53D1\u4E0D\u9AD8\u7684\u573A\u666F\u4E0B\u8FD9\u79CD\u6A21\u578B\u662F\u9002\u7528\u7684\u3002\u4F46\u662F\u4E00\u65E6\u9AD8\u5E76\u53D1(\u6BD4\u5982\u62BD\u98CE\u7528jemeter\u538B)\uFF0C\u7EBF\u7A0B\u6570\u91CF\u5C31\u4F1A\u4E0A\u6DA8\uFF0C\u800C\u7EBF\u7A0B\u8D44\u6E90\u4EE3\u4EF7\u662F\u6602\u8D35\u7684\uFF08\u4E0A\u7EBF\u6587\u5207\u6362\uFF0C\u5185\u5B58\u6D88\u8017\u5927\uFF09\u4E25\u91CD\u5F71\u54CD\u8BF7\u6C42\u7684\u5904\u7406\u65F6\u95F4\u3002\u5728\u4E00\u4E9B\u7B80\u5355\u4E1A\u52A1\u573A\u666F\u4E0B\uFF0C\u4E0D\u5E0C\u671B\u4E3A\u6BCF\u4E2Arequest\u5206\u914D\u4E00\u4E2A\u7EBF\u7A0B\uFF0C\u53EA\u9700\u89811\u4E2A\u6216\u51E0\u4E2A\u7EBF\u7A0B\u5C31\u80FD\u5E94\u5BF9\u6781\u5927\u5E76\u53D1\u7684\u8BF7\u6C42\uFF0C\u8FD9\u79CD\u4E1A\u52A1\u573A\u666F\u4E0Bservlet\u6A21\u578B\u6CA1\u6709\u4F18\u52BF</p><p>\u6240\u4EE5Zuul 1.X\u662F\u57FA\u4E8Eservlet\u4E4B\u4E0A\u7684\u4E00\u4E2A\u963B\u585E\u5F0F\u5904\u7406\u6A21\u578B\uFF0C\u5373spring\u5B9E\u73B0\u4E86\u5904\u7406\u6240\u6709request\u8BF7\u6C42\u7684\u4E00\u4E2Aservlet\uFF08DispatcherServlet\uFF09\u5E76\u7531\u8BE5servlet\u963B\u585E\u5F0F\u5904\u7406\u5904\u7406\u3002\u6240\u4EE5Springcloud Zuul\u65E0\u6CD5\u6446\u8131servlet\u6A21\u578B\u7684\u5F0A\u7AEF</p><h4 id="_6\u3001gateway\u6A21\u578B" tabindex="-1"><a class="header-anchor" href="#_6\u3001gateway\u6A21\u578B" aria-hidden="true">#</a> 6\u3001gateway\u6A21\u578B</h4>',38),cs={href:"https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html##webflux-new-framework",target:"_blank",rel:"noopener noreferrer"},ls=a("https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html##webflux-new-framework"),is=p(`<p>\u4F20\u7EDF\u7684Web\u6846\u67B6\uFF0C\u6BD4\u5982\u8BF4\uFF1Astruts2\uFF0Cspringmvc\u7B49\u90FD\u662F\u57FA\u4E8EServlet API\u4E0EServlet\u5BB9\u5668\u57FA\u7840\u4E4B\u4E0A\u8FD0\u884C\u7684\u3002</p><p>\u4F46\u662F</p><p>\u5728Servlet3.1\u4E4B\u540E\u6709\u4E86\u5F02\u6B65\u975E\u963B\u585E\u7684\u652F\u6301\u3002\u800CWebFlux\u662F\u4E00\u4E2A\u5178\u578B\u975E\u963B\u585E\u5F02\u6B65\u7684\u6846\u67B6\uFF0C\u5B83\u7684\u6838\u5FC3\u662F\u57FA\u4E8EReactor\u7684\u76F8\u5173API\u5B9E\u73B0\u7684\u3002\u76F8\u5BF9\u4E8E\u4F20\u7EDF\u7684web\u6846\u67B6\u6765\u8BF4\uFF0C\u5B83\u53EF\u4EE5\u8FD0\u884C\u5728\u8BF8\u5982Netty\uFF0CUndertow\u53CA\u652F\u6301Servlet3.1\u7684\u5BB9\u5668\u4E0A\u3002\u975E\u963B\u585E\u5F0F+\u51FD\u6570\u5F0F\u7F16\u7A0B\uFF08Spring5\u5FC5\u987B\u8BA9\u4F60\u4F7F\u7528java8\uFF09</p><p>Spring WebFlux \u662F Spring 5.0 \u5F15\u5165\u7684\u65B0\u7684\u54CD\u5E94\u5F0F\u6846\u67B6\uFF0C\u533A\u522B\u4E8E Spring MVC\uFF0C\u5B83\u4E0D\u9700\u8981\u4F9D\u8D56Servlet API\uFF0C\u5B83\u662F\u5B8C\u5168\u5F02\u6B65\u975E\u963B\u585E\u7684\uFF0C\u5E76\u4E14\u57FA\u4E8E Reactor \u6765\u5B9E\u73B0\u54CD\u5E94\u5F0F\u6D41\u89C4\u8303\u3002</p><h3 id="\u4E8C\u3001gateway\u7684\u4E09\u5927\u6838\u5FC3\u6982\u5FF5\u4E0E\u5DE5\u4F5C\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001gateway\u7684\u4E09\u5927\u6838\u5FC3\u6982\u5FF5\u4E0E\u5DE5\u4F5C\u6D41\u7A0B" aria-hidden="true">#</a> \u4E8C\u3001Gateway\u7684\u4E09\u5927\u6838\u5FC3\u6982\u5FF5\u4E0E\u5DE5\u4F5C\u6D41\u7A0B</h3><h4 id="_1\u3001route-\u8DEF\u7531" tabindex="-1"><a class="header-anchor" href="#_1\u3001route-\u8DEF\u7531" aria-hidden="true">#</a> 1\u3001Route(\u8DEF\u7531)</h4><p>\u8DEF\u7531\u662F\u6784\u5EFA\u7F51\u5173\u7684\u57FA\u672C\u6A21\u5757\uFF0C\u5B83\u7531ID\uFF0C\u76EE\u6807URI\uFF08Uniform Resource Identifier\uFF0C\u7EDF\u4E00\u8D44\u6E90\u6807\u8BC6\u7B26\uFF09\uFF0C\u4E00\u7CFB\u5217\u7684\u65AD\u8A00\u548C\u8FC7\u6EE4\u5668\u7EC4\u6210\uFF0C\u5982\u679C\u65AD\u8A00\u4E3Atrue\u5219\u5339\u914D\u8BE5\u8DEF\u7531\u3002</p><h4 id="_2\u3001predicate-\u65AD\u8A00" tabindex="-1"><a class="header-anchor" href="#_2\u3001predicate-\u65AD\u8A00" aria-hidden="true">#</a> 2\u3001Predicate(\u65AD\u8A00)</h4><p>\u5F00\u53D1\u4EBA\u5458\u53EF\u4EE5\u5339\u914DHttp\u8BF7\u6C42\u4E2D\u7684\u6240\u6709\u5185\u5BB9\uFF08\u4F8B\u5982\u8BF7\u6C42\u5934\u6216\u8005\u8BF7\u6C42\u53C2\u6570\uFF09\uFF0C\u5982\u679C\u8BF7\u6C42\u53C2\u6570\u4E0E\u65AD\u8A00\u76F8\u5339\u914D\u5219\u8FDB\u884C\u8DEF\u7531\u3002</p><h4 id="_3\u3001filter-\u8FC7\u6EE4" tabindex="-1"><a class="header-anchor" href="#_3\u3001filter-\u8FC7\u6EE4" aria-hidden="true">#</a> 3\u3001Filter(\u8FC7\u6EE4)</h4><p>\u6307\u7684\u662FSpring\u6846\u67B6\u4E2D\u7684GatewayFilter\u7684\u5B9E\u4F8B\uFF0C\u4F7F\u7528\u8FC7\u6EE4\u5668\uFF0C\u53EF\u4EE5\u5728\u8BF7\u6C42\u88AB\u8DEF\u7531\u524D\u6216\u8005\u4E4B\u540E\u5BF9\u8BF7\u6C42\u8FDB\u884C\u4FEE\u6539\u3002</p><h4 id="_4\u3001\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u603B\u7ED3" aria-hidden="true">#</a> 4\u3001\u603B\u7ED3</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632811965373-bba8c0f8-c6ed-4fbb-97d0-796f73410f6c.png" alt="img"></p><ul><li>web \u8BF7\u6C42\uFF0C\u901A\u8FC7\u4E00\u4E9B\u5339\u914D\u6761\u4EF6\uFF0C\u5B9A\u4F4D\u5230\u771F\u6B63\u7684\u670D\u52A1\u8282\u70B9\uFF0C\u5E76\u5728\u8FD9\u4E2A\u8F6C\u53D1\u8FC7\u7A0B\u7684\u524D\u540E\uFF0C\u8FDB\u884C\u4E00\u4E9B\u7CBE\u7EC6\u5316\u63A7\u5236</li><li>predicate \u5C31\u662F\u6211\u4EEC\u7684\u5339\u914D\u6761\u4EF6</li><li>filter\uFF1A\u5C31\u53EF\u4EE5\u7406\u89E3\u4E3A\u4E00\u4E2A\u65E0\u6240\u4E0D\u80FD\u7684\u62E6\u622A\u5668\uFF0C\u6709\u4E86\u8FD9\u4E24\u4E2A\u5143\u7D20\uFF0C\u518D\u52A0\u4E0A\u76EE\u6807\u7684uri\uFF0C\u5C31\u53EF\u4EE5\u5B9E\u73B0\u4E00\u4E2A\u5177\u4F53\u7684\u8DEF\u7531\u4E86\u3002</li></ul><h4 id="_5\u3001\u5DE5\u4F5C\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#_5\u3001\u5DE5\u4F5C\u6D41\u7A0B" aria-hidden="true">#</a> 5\u3001\u5DE5\u4F5C\u6D41\u7A0B</h4><ul><li><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632812491354-6516ee5d-8dd1-4a81-b02e-7d3b4d6fc625.png" alt="img"></li><li>\u5BA2\u6237\u7AEF\u5411 Spring Cloud Gateway \u53D1\u51FA\u8BF7\u6C42\u3002\u7136\u540E\u5728 Gateway Handler Mapping \u4E2D\u627E\u5230\u4E0E\u8BF7\u6C42\u76F8\u5339\u914D\u7684\u8DEF\u7531\uFF0C\u5C06\u5176\u53D1\u9001\u5230 Gateway Web Handler\u3002</li><li>Handler \u518D\u901A\u8FC7\u6307\u5B9A\u7684\u8FC7\u6EE4\u5668\u94FE\u6765\u5C06\u8BF7\u6C42\u53D1\u9001\u5230\u6211\u4EEC\u5B9E\u9645\u7684\u670D\u52A1\u6267\u884C\u4E1A\u52A1\u903B\u8F91\uFF0C\u7136\u540E\u8FD4\u56DE\u3002</li><li>\u8FC7\u6EE4\u5668\u4E4B\u95F4\u7528\u865A\u7EBF\u5206\u5F00\u662F\u56E0\u4E3A\u8FC7\u6EE4\u5668\u53EF\u80FD\u4F1A\u5728\u53D1\u9001\u4EE3\u7406\u8BF7\u6C42\u4E4B\u524D\uFF08\u201Cpre\u201D\uFF09\u6216\u4E4B\u540E\uFF08\u201Cpost\u201D\uFF09\u6267\u884C\u4E1A\u52A1\u903B\u8F91\u3002</li><li>Filter\u5728\u201Cpre\u201D\u7C7B\u578B\u7684\u8FC7\u6EE4\u5668\u53EF\u4EE5\u505A\u53C2\u6570\u6821\u9A8C\u3001\u6743\u9650\u6821\u9A8C\u3001\u6D41\u91CF\u76D1\u63A7\u3001\u65E5\u5FD7\u8F93\u51FA\u3001\u534F\u8BAE\u8F6C\u6362\u7B49\uFF0C\u5728\u201Cpost\u201D\u7C7B\u578B\u7684\u8FC7\u6EE4\u5668\u4E2D\u53EF\u4EE5\u505A\u54CD\u5E94\u5185\u5BB9\u3001\u54CD\u5E94\u5934\u7684\u4FEE\u6539\uFF0C\u65E5\u5FD7\u7684\u8F93\u51FA\uFF0C\u6D41\u91CF\u76D1\u63A7\u7B49\u6709\u7740\u975E\u5E38\u91CD\u8981\u7684\u4F5C\u7528\u3002</li></ul><p><strong>\u6838\u5FC3\u903B\u8F91</strong>\uFF1A\u8DEF\u7531\u8F6C\u53D1+\u6267\u884C\u8FC7\u6EE4\u5668\u94FE</p><h3 id="\u56DB\u3001\u5165\u95E8\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u56DB\u3001\u5165\u95E8\u914D\u7F6E" aria-hidden="true">#</a> \u56DB\u3001\u5165\u95E8\u914D\u7F6E</h3><h4 id="_1\u3001\u521B\u5EFAcloud-gateway-gateway-9527-\u6A21\u5757" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u521B\u5EFAcloud-gateway-gateway-9527-\u6A21\u5757" aria-hidden="true">#</a> 1\u3001\u521B\u5EFAcloud-gateway-gateway-9527 \u6A21\u5757</h4><h4 id="_2\u3001pom" tabindex="-1"><a class="header-anchor" href="#_2\u3001pom" aria-hidden="true">#</a> 2\u3001pom</h4><p>\u505A\u7F51\u5173\u4E0D\u9700\u8981\u6DFB\u52A0 web starter \u5426\u5219\u4F1A\u62A5\u9519</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jdk8cloud2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-gateway-gateway-9527<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--gateway--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-gateway<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--eureka-client--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- \u5F15\u5165\u81EA\u5DF1\u5B9A\u4E49\u7684api\u901A\u7528\u5305\uFF0C\u53EF\u4EE5\u4F7F\u7528Payment\u652F\u4ED8Entity --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--\u4E00\u822C\u57FA\u7840\u914D\u7F6E\u7C7B--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3\u3001yml" tabindex="-1"><a class="header-anchor" href="#_3\u3001yml" aria-hidden="true">#</a> 3\u3001yml</h4><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9527</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>gateway

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>gateway<span class="token punctuation">-</span>service
  <span class="token key atrule">client</span><span class="token punctuation">:</span> <span class="token comment">##\u670D\u52A1\u63D0\u4F9B\u8005provider\u6CE8\u518C\u8FDBeureka\u670D\u52A1\u5217\u8868\u5185</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token comment">##      defaultZone: http://eureka7001.com:7001/eureka ## \u5355\u673A\u7248</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//eureka7002.com<span class="token punctuation">:</span>7002/eureka <span class="token comment">##\u96C6\u7FA4\u7248</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4\u3001\u4E3B\u542F\u52A8\u7C7B-\u7F51\u5173\u4E0D\u9700\u8981\u4E1A\u52A1\u7C7B" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u4E3B\u542F\u52A8\u7C7B-\u7F51\u5173\u4E0D\u9700\u8981\u4E1A\u52A1\u7C7B" aria-hidden="true">#</a> 4\u3001\u4E3B\u542F\u52A8\u7C7B(\u7F51\u5173\u4E0D\u9700\u8981\u4E1A\u52A1\u7C7B)</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>srpingcloud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>eureka<span class="token punctuation">.</span></span><span class="token class-name">EnableEurekaClient</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GateWayMain9527</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">GateWayMain9527</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-gateaway9527\u7F51\u5173\u5982\u4F55\u505A\u8DEF\u7531\u6620\u5C04\u5462" tabindex="-1"><a class="header-anchor" href="#_5-gateaway9527\u7F51\u5173\u5982\u4F55\u505A\u8DEF\u7531\u6620\u5C04\u5462" aria-hidden="true">#</a> 5. Gateaway9527\u7F51\u5173\u5982\u4F55\u505A\u8DEF\u7531\u6620\u5C04\u5462\uFF1F</h4><p>\u6211\u4EEC\u4EE5\u524D\u8BBF\u95EEcloud-provider-payment8001\u4E2D\u7684controller\u65B9\u6CD5,\u901A\u8FC7\uFF1A</p><p>localhost:8001/payment/get/id \u548C localhost:8001/payment/lb \u5C31\u80FD\u8BBF\u95EE\u5230\u76F8\u5E94\u7684\u65B9\u6CD5\u3002</p><p>\u73B0\u5728\u6211\u4EEC\u4E0D\u60F3\u66B4\u97328001\u7AEF\u53E3\u53F7\uFF0C\u5E0C\u671B\u57288001\u5916\u9762\u5957\u4E00\u5C429527</p><h5 id="yml\u65B0\u589E\u7F51\u5173\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#yml\u65B0\u589E\u7F51\u5173\u914D\u7F6E" aria-hidden="true">#</a> yml\u65B0\u589E\u7F51\u5173\u914D\u7F6E</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9527</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>gateway
//=====================\u65B0\u589E====================
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> payment_routh <span class="token comment">##payment_route    ##\u8DEF\u7531\u7684ID\uFF0C\u6CA1\u6709\u56FA\u5B9A\u89C4\u5219\u4F46\u8981\u6C42\u552F\u4E00\uFF0C\u5EFA\u8BAE\u914D\u5408\u670D\u52A1\u540D</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8001</span>          <span class="token comment">##\u5339\u914D\u540E\u63D0\u4F9B\u670D\u52A1\u7684\u8DEF\u7531\u5730\u5740</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/payment/get/<span class="token important">**</span>         <span class="token comment">## \u65AD\u8A00\uFF0C\u8DEF\u5F84\u76F8\u5339\u914D\u7684\u8FDB\u884C\u8DEF\u7531</span>

        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> payment_routh2 <span class="token comment">##payment_route    ##\u8DEF\u7531\u7684ID\uFF0C\u6CA1\u6709\u56FA\u5B9A\u89C4\u5219\u4F46\u8981\u6C42\u552F\u4E00\uFF0C\u5EFA\u8BAE\u914D\u5408\u670D\u52A1\u540D</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8001</span>          <span class="token comment">##\u5339\u914D\u540E\u63D0\u4F9B\u670D\u52A1\u7684\u8DEF\u7531\u5730\u5740</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/payment/lb/<span class="token important">**</span>         <span class="token comment">## \u65AD\u8A00\uFF0C\u8DEF\u5F84\u76F8\u5339\u914D\u7684\u8FDB\u884C\u8DEF\u7531</span>
//===================================================

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>gateway<span class="token punctuation">-</span>service
  <span class="token key atrule">client</span><span class="token punctuation">:</span> <span class="token comment">##\u670D\u52A1\u63D0\u4F9B\u8005provider\u6CE8\u518C\u8FDBeureka\u670D\u52A1\u5217\u8868\u5185</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token comment">##      defaultZone: http://eureka7001.com:7001/eureka ## \u5355\u673A\u7248</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//eureka7002.com<span class="token punctuation">:</span>7002/eureka <span class="token comment">##\u96C6\u7FA4\u7248</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,32),us=n("li",null,[n("strong",null,"routes"),a("\uFF1A\u53EF\u4EE5\u4E3Acontroller\u4E2D\u6240\u6709\u7684rest\u63A5\u53E3\u505A\u8DEF\u7531")],-1),rs=n("strong",null,"uri + predicate",-1),ks=a("\u62FC\u63A5\uFF1A"),ds={href:"http://localhost:8001/payment/get/",target:"_blank",rel:"noopener noreferrer"},gs=a("http://localhost:8001/payment/get/"),ms=a("** \u5C31\u662F\u5177\u4F53\u7684\u63A5\u53E3\u8BF7\u6C42\u8DEF\u5F84\u3002\u5176\u4E2Duri\u662F\u9700\u8981\u901A\u8FC7localhost:9527 \u6620\u5C04\u7684\u5730\u5740\uFF0C\u5373\u8BBF\u95EElocalhost:9527\u4F1A\u8F6C\u53D1\u5230 localhost:8001"),vs=n("li",null,[n("strong",null,"predicate"),a("\uFF1A\u65AD\u8A00http://localhost:8001\u4E0B\u9762\u6709\u4E00\u4E2A/payment/get/**\u8FD9\u6837\u7684\u5730\u5740\u3002\u5982\u679C\u627E\u5230\u4E86\u8FD9\u4E2A\u5730\u5740\u5C31\u8FD4\u56DEtrue\uFF0C\u53EF\u4EE5\u75289527\u7AEF\u53E3\u8BBF\u95EE\uFF0C\u8FDB\u884C\u7AEF\u53E3\u7684\u9002\u914D\uFF1B\u627E\u4E0D\u5230\u5C31\u8FD4\u56DEfalse\uFF0C\u4E0D\u80FD\u75289527\u8FD9\u4E2A\u7AEF\u53E3\u9002\u914D\u3002\u6162\u6162\u7684\u5C31\u4E0D\u518D\u66B4\u9732\u5FAE\u670D\u52A1\u672C\u6765\u7684\u63A5\u53E38001\uFF0C\u8F6C\u800C\u4F7F\u7528\u7EDF\u4E00\u7F51\u51739527\u3002")],-1),bs=p('<p id="">/get/** \u4E2D**\u8868\u793A\u901A\u914D\u7B26\uFF0C\u56E0\u4E3A\u8FD9\u91CC\u662F\u4E00\u4E2A\u4E0D\u786E\u5B9A\u7684\u53C2\u6570\uFF1A/get/</p><p>\u8FD9\u6837\u5C31\u4E3A\u8FD9\u4E24\u4E2A\u65B9\u6CD5\u505A\u4E86\u8DEF\u7531\u5339\u914D</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632815268348-1e0ea7e2-df01-4364-b93e-48e5f5483fea.png" alt="img"></p><h4 id="_6\u3001\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_6\u3001\u6D4B\u8BD5" aria-hidden="true">#</a> 6\u3001\u6D4B\u8BD5</h4><p>\u542F\u52A87001\u30017002\u3001cloud-provider-payment8001\u30019527</p><p><strong>\u8E29\u5751\u63D0\u793A</strong>\uFF1Agateway\u4E0D\u9700\u8981spring-boot-starter-web\u4F9D\u8D56\uFF0C\u5426\u5728\u4F1A\u62A5\u9519\uFF1B\u539F\u56E0\u662Fgateway\u5E95\u5C42\u4F7F\u7528\u7684\u662Fwebflux\u4F1A\u4E0Eweb\u51B2\u7A81\u3002</p><p>eureka\u96C6\u7FA4\u4E2D\u6CE8\u518C\u4E869527\u548Cpayment8001</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632815811539-2ac28394-2ac5-4767-a977-f94bbc321886.png" alt="img"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632815795133-c5310fe2-a974-4d5b-a642-3903e11e2552.png" alt="img"></p><p>\u76F4\u63A5\u901A\u8FC78001\u8BBF\u95EE\uFF1A\u6210\u529F</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632815648958-716bee37-ee9e-4a81-a67f-a0b9b164b6f3.png" alt="img"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632815688966-44895962-a251-4c7a-8c05-f99a43820a2d.png" alt="img"></p><p>\u901A\u8FC79527\u7F51\u5173\u8BBF\u95EE\uFF1A\u6210\u529F</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632815725167-64418fce-db2d-433f-99f5-27ac2b377692.png" alt="img"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632815712273-5650203f-a64b-4417-9e6c-e670aae19c99.png" alt="img"></p><h4 id="_6\u3001gateway\u7F51\u5173\u8DEF\u7531\u6709\u4E24\u79CD\u914D\u7F6E\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6\u3001gateway\u7F51\u5173\u8DEF\u7531\u6709\u4E24\u79CD\u914D\u7F6E\u65B9\u5F0F" aria-hidden="true">#</a> 6\u3001Gateway\u7F51\u5173\u8DEF\u7531\u6709\u4E24\u79CD\u914D\u7F6E\u65B9\u5F0F</h4><h5 id="_6-1-\u5728yml\u4E2D\u914D\u7F6E\u2014\u2014\u4E4B\u524D\u7684\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-1-\u5728yml\u4E2D\u914D\u7F6E\u2014\u2014\u4E4B\u524D\u7684\u65B9\u5F0F" aria-hidden="true">#</a> 6.1 \u5728yml\u4E2D\u914D\u7F6E\u2014\u2014\u4E4B\u524D\u7684\u65B9\u5F0F</h5><h5 id="_6-2-\u4EE3\u7801\u4E2D\u6CE8\u5165routelocator\u7684bean" tabindex="-1"><a class="header-anchor" href="#_6-2-\u4EE3\u7801\u4E2D\u6CE8\u5165routelocator\u7684bean" aria-hidden="true">#</a> 6.2 \u4EE3\u7801\u4E2D\u6CE8\u5165RouteLocator\u7684Bean</h5><p>\u5B98\u7F51\u6848\u4F8B\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632816227861-68d60508-b605-4b28-8763-5fc1e9ac48fe.png" alt="img"></p>',18),hs=n("strong",null,"\u4E1A\u52A1\u9700\u6C42",-1),ys=a("\uFF1A \u901A\u8FC79527\u7F51\u5173\u8BBF\u95EE\u5230\u767E\u5EA6\u65B0\u95FB\u7684\u7F51\u5740\uFF1B"),fs={href:"http://news.baidu.com/guonei",target:"_blank",rel:"noopener noreferrer"},_s=a("http://news.baidu.com/guonei"),xs=a("\u5728config\u5305\u4E0B\u521B\u5EFA\u4E00\u4E2A\u914D\u7F6E\u7C7B \u8DEF\u7531\u89C4\u5219\u662F\uFF1A\u6211\u73B0\u5728\u8BBF\u95EE/guonei\uFF0C\u5C06\u4F1A\u8F6C\u53D1\u5230"),qs={href:"http://news.baidu.com/guonei",target:"_blank",rel:"noopener noreferrer"},ws=a("http://news.baidu.com/guonei"),Is=p(`<div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>srpingcloud<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>route<span class="token punctuation">.</span></span><span class="token class-name">RouteLocator</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>route<span class="token punctuation">.</span>builder<span class="token punctuation">.</span></span><span class="token class-name">RouteLocatorBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GatewayConfig</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * \u914D\u7F6E\u4E86\u4E00\u4E2Aid\u4E3Apath_route_atguigu\u7684\u8DEF\u7531\u89C4\u5219\uFF0C
     * \u5F53\u8BBF\u95EE\u5730\u5740 http://localhost:9527/guonei\u65F6\u4F1A\u81EA\u52A8\u8F6C\u53D1\u5230\u5730\u5740\uFF1Ahttp://news.baidu.com/guonei
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">RouteLocator</span> <span class="token function">customRouteLocator</span><span class="token punctuation">(</span><span class="token class-name">RouteLocatorBuilder</span> routeLocatorBuilder<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//\u6784\u5EFA\u4E00\u4E2A\u8DEF\u7531\u5668\uFF0C\u8FD9\u4E2Aroutes\u76F8\u5F53\u4E8Eyml\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684routes</span>
        <span class="token class-name">RouteLocatorBuilder<span class="token punctuation">.</span>Builder</span> routes <span class="token operator">=</span> routeLocatorBuilder<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8DEF\u7531\u5668\u7684id\u662F\uFF1Apath_route_atguigu\uFF0C\u89C4\u5219\u662F\u6211\u73B0\u5728\u8BBF\u95EE/guonei\uFF0C\u5C06\u4F1A\u8F6C\u53D1\u5230http://news.baidu.com/guonei</span>
        <span class="token comment">// \u8FD9\u91CC\u7684id\u3001path\u3001uri\u90FD\u53EF\u4EE5\u8DDFyml\u4E2D\u7684\u914D\u7F6E\u5BF9\u4E0A</span>
        <span class="token comment">// \u901A\u8FC7localhost:9527 \u6620\u5C04 http://news.baidu.com</span>
        routes<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&quot;path_route_atguigu&quot;</span><span class="token punctuation">,</span>
                r <span class="token operator">-&gt;</span> r<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">&quot;/guonei&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">&quot;http://news.baidu.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> routes<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0E\u4E4B\u5BF9\u5E94\u7684yml\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632818767233-06847f14-ef2e-49f9-be0c-97b0158718ce.png" alt="img"></p><h5 id="_6-3-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_6-3-\u6D4B\u8BD5" aria-hidden="true">#</a> 6.3 \u6D4B\u8BD5</h5><p>\u8BBF\u95EElocalhost:9527/guonei</p><p>\u6210\u529F\uFF01</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632817007200-c9bee5d1-1afc-4bd4-96d3-7b654cafbfe9.png" alt="img"></p><h3 id="\u4E94\u3001\u8FDB\u9636" tabindex="-1"><a class="header-anchor" href="#\u4E94\u3001\u8FDB\u9636" aria-hidden="true">#</a> \u4E94\u3001\u8FDB\u9636</h3><h4 id="_5-1-\u901A\u8FC7\u5FAE\u670D\u52A1\u540D\u5B9E\u73B0\u52A8\u6001\u8DEF\u7531" tabindex="-1"><a class="header-anchor" href="#_5-1-\u901A\u8FC7\u5FAE\u670D\u52A1\u540D\u5B9E\u73B0\u52A8\u6001\u8DEF\u7531" aria-hidden="true">#</a> 5.1 \u901A\u8FC7\u5FAE\u670D\u52A1\u540D\u5B9E\u73B0\u52A8\u6001\u8DEF\u7531</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632818997126-0ba4875b-d603-4146-a489-a1e7029c4114.png" alt="img"></p><h5 id="_5-1-1-\u76EE\u524D\u9762\u4E34\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_5-1-1-\u76EE\u524D\u9762\u4E34\u7684\u95EE\u9898" aria-hidden="true">#</a> 5.1.1 \u76EE\u524D\u9762\u4E34\u7684\u95EE\u9898</h5><p>\u4E00\u4E2A\u8DEF\u7531\u89C4\u5219\u4EC5\u4EC5\u53EA\u5BF9\u5E94\u4E00\u4E2A\u63A5\u53E3\u65B9\u6CD5\uFF0C\u5373\u6211\u4EEC\u5C06\u8BF7\u6C42\u5730\u5740\u5199\u6B7B\u4E86\u3002 \u8BD5\u60F3\u4E00\u4E0B\uFF1A\u5728\u5206\u5E03\u5F0F\u96C6\u7FA4\u7684\u60C5\u51B5\u4E0B\uFF0C\u4F1A\u6709\u591A\u5C11\u4E2A\u4E3B\u673A\uFF0C\u591A\u5C11\u4E2A\u7AEF\u53E3\uFF0C\u591A\u5C11\u4E2A\u63A5\u53E3\uFF1F \u96BE\u9053\u6211\u4EEC\u8981\u4E3A\u6BCF\u4E00\u4E2A\u63A5\u53E3\u90FD\u5B9A\u4E49\u4E00\u4E2A\u8DEF\u7531\u89C4\u5219\u5417\uFF1F</p><p>\u89E3\u51B3\u601D\u8DEF\uFF1A\u6211\u4EEC\u524D\u9762\u752880\u8C03\u75288001\u548C8002\u4E2D\u7684\u63A5\u53E3\u65F6\uFF0C\u53EA\u8BA4\u5FAE\u670D\u52A1\u540D\u3002\u8BBF\u95EE\u63A5\u53E3\u65F6\u6CA1\u6709\u6307\u5B9A\u54EA\u4E2A\u7AEF\u53E3\u3002 \u90A3\u4E48\u6211\u4EEC\u5728\u5B9A\u4E49\u8DEF\u7531\u89C4\u5219\u65F6\u4E5F\u53EF\u4EE5\u901A\u8FC7\u5FAE\u670D\u52A1\u540D\u5B9E\u73B0\u52A8\u6001\u8DEF\u7531\u548C\u8D1F\u8F7D\u5747\u8861\u3002</p><h5 id="_5-1-2-\u4FEE\u65399527\u5B9E\u73B0\u52A8\u6001\u8DEF\u7531" tabindex="-1"><a class="header-anchor" href="#_5-1-2-\u4FEE\u65399527\u5B9E\u73B0\u52A8\u6001\u8DEF\u7531" aria-hidden="true">#</a> 5.1.2 \u4FEE\u65399527\u5B9E\u73B0\u52A8\u6001\u8DEF\u7531</h5><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0BGateway\u4F1A\u6839\u636E\u6CE8\u518C\u4E2D\u5FC3\u6CE8\u518C\u7684\u670D\u52A1\u5217\u8868\uFF0C\u4EE5\u6CE8\u518C\u4E2D\u5FC3\u4E0A\u5FAE\u670D\u52A1\u540D\u4E3A\u8DEF\u5F84\u521B\u5EFA\u52A8\u6001\u8DEF\u7531\u8FDB\u884C\u8F6C\u53D1\uFF0C\u4ECE\u800C\u5B9E\u73B0\u52A8\u6001\u8DEF\u7531\u7684\u529F\u80FD\u3002</p><p><strong>pom\uFF1A</strong></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>//\u4E4B\u524D\u5DF2\u7ECF\u6DFB\u52A0\u8FC7\u4E86
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>yml\uFF1A</strong><code>spring.cloud.gateway.discovery.locator.enabled:true;</code></p><p>\u5728\u6DFB\u52A0uri\u7684\u65F6\u5019\uFF0C\u5F00\u59CB\u662Flb://\u5FAE\u670D\u52A1\u540D</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>gateway
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">locator</span><span class="token punctuation">:</span>
          <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">##\u5F00\u542F\u4ECE\u6CE8\u518C\u4E2D\u5FC3\u52A8\u6001\u521B\u5EFA\u8DEF\u7531\u7684\u529F\u80FD\uFF0C\u5229\u7528\u5FAE\u670D\u52A1\u540D\u8FDB\u884C\u8DEF\u7531</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> payment_routh <span class="token comment">##payment_route    ##\u8DEF\u7531\u7684ID\uFF0C\u6CA1\u6709\u56FA\u5B9A\u89C4\u5219\u4F46\u8981\u6C42\u552F\u4E00\uFF0C\u5EFA\u8BAE\u914D\u5408\u670D\u52A1\u540D</span>
<span class="token comment">##          uri: http://localhost:8001          ##\u5339\u914D\u540E\u63D0\u4F9B\u670D\u52A1\u7684\u8DEF\u7531\u5730\u5740</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//cloud<span class="token punctuation">-</span>payment<span class="token punctuation">-</span>service   <span class="token comment">##\u5339\u914D\u540E\u63D0\u4F9B\u670D\u52A1\u7684\u8DEF\u7531\u5730\u5740</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/payment/get/<span class="token important">**</span>         <span class="token comment">## \u65AD\u8A00\uFF0C\u8DEF\u5F84\u76F8\u5339\u914D\u7684\u8FDB\u884C\u8DEF\u7531</span>

        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> payment_routh2 <span class="token comment">##payment_route    ##\u8DEF\u7531\u7684ID\uFF0C\u6CA1\u6709\u56FA\u5B9A\u89C4\u5219\u4F46\u8981\u6C42\u552F\u4E00\uFF0C\u5EFA\u8BAE\u914D\u5408\u670D\u52A1\u540D</span>
<span class="token comment">##          uri: http://localhost:8001          ##\u5339\u914D\u540E\u63D0\u4F9B\u670D\u52A1\u7684\u8DEF\u7531\u5730\u5740</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//cloud<span class="token punctuation">-</span>payment<span class="token punctuation">-</span>service  <span class="token comment">##\u5339\u914D\u540E\u63D0\u4F9B\u670D\u52A1\u7684\u8DEF\u7531\u5730\u5740</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/payment/lb/<span class="token important">**</span>         <span class="token comment">## \u65AD\u8A00\uFF0C\u8DEF\u5F84\u76F8\u5339\u914D\u7684\u8FDB\u884C\u8DEF\u7531</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6CE8\u610F</strong>\uFF1A</p><p>uri: lb://cloud-payment-service</p><p>lb://\u5F00\u5934\u4EE3\u8868\u4ECE\u6CE8\u518C\u4E2D\u5FC3\u4E2D\u83B7\u53D6\u670D\u52A1\uFF0C\u540E\u9762\u63A5\u7684\u5C31\u662F\u4F60\u9700\u8981\u8F6C\u53D1\u5230\u7684\u670D\u52A1\u540D\u79F0\uFF0C\u800C\u4E14\u627E\u5230\u7684\u670D\u52A1\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861\u3002</p><p>\u914D\u7F6E\u597D\u540E\u7684\u8DEF\u7531\u89C4\u5219\uFF1A</p><p>\u53D1\u9001localhost:9527/xx/xxx\u8BF7\u6C42\uFF0C\u4F1A\u53BB\u627Ecloud-payment-service\u670D\u52A1\u540D\u4E2D\u5BF9\u5E94\u5FAE\u670D\u52A1\u5B9E\u4F8B\u3002 \u518D\u6839\u636E\u5177\u4F53\u7684\u8DEF\u5F84\uFF0C\u627E\u7684\u5177\u4F53\u7684\u65B9\u6CD5\u63A5\u53E3\uFF0C\u5E76\u4E14\u5F00\u542F\u4E86\u8D1F\u8F7D\u5747\u8861\u3002</p><h5 id="_5-1-3-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_5-1-3-\u6D4B\u8BD5" aria-hidden="true">#</a> 5.1.3 \u6D4B\u8BD5</h5>`,26),Ss={href:"http://localhost:9527/payment/lb",target:"_blank",rel:"noopener noreferrer"},Cs=a("http://localhost:9527/payment/lb"),js=p('<p>8001\u30018002\u4EA4\u66FF\uFF0C\u8D1F\u8F7D\u5747\u8861\u7684\u8F6E\u5FAA\u7B97\u6CD5</p><h3 id="\u516D\u3001predicate-\u65AD\u8A00\u7684\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u516D\u3001predicate-\u65AD\u8A00\u7684\u4F7F\u7528" aria-hidden="true">#</a> \u516D\u3001Predicate \u65AD\u8A00\u7684\u4F7F\u7528</h3><p>\u6211\u4EEC\u6CE8\u610F\uFF1APredicates \u8FD9\u662F\u4E00\u4E2A\u590D\u6570\uFF0C\u5176\u5B9E\u6709\u591A\u79CDPredicate\u3002 \u6211\u4EEC\u8FD9\u91CC\u7528\u7684Predicate\u7684\u662F[Path]\uFF0C\u5B83\u662F\u8DEF\u7531\u89C4\u5219\u7684\u5176\u4E2D\u4E00\u4E2A\u3002\u4F5C\u7528\u662F\uFF0C\u5982\u679Ccloud-payment-service \u7684\u5FAE\u670D\u52A1\u5B9E\u4F8B\u4E2D\u6709/payment/get**\u7684\u63A5\u53E3\uFF0C\u5C31\u4F1A\u8FD4\u56DEtrue\uFF0C\u8DEF\u7531\u89C4\u5219\u751F\u6548\u3002</p><p>\u4F46\u5B9E\u9645\u4E0A\u5B58\u5728\u591A\u79CDPredicate\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632827110649-f7368feb-dc0e-49fd-8e8e-5b13f5f1d2b6.png" alt="img"></p><p>\u6BCF\u4E00\u4E2A\u65AD\u8A00Predicate\u90FD\u6709\u5B83\u72EC\u7279\u7684\u89C4\u5219\uFF0C\u591A\u4E2APredicate\u65AD\u8A00\u662F\u4E00\u4E2A\u4E0E&amp;\u7EC4\u5408\u3002</p><ul><li>Spring Cloud Gateway \u5C06\u8DEF\u7531\u5339\u914D\u4F5C\u4E3ASpring WebFlux Handler Mapping\u57FA\u7840\u67B6\u6784\u7684\u4E00\u90E8\u5206\u3002</li><li>Spring Cloud Gateway \u5305\u62EC\u8BB8\u591A\u5185\u7F6E\u7684Route Predicate \u5DE5\u5382\uFF0C\u6240\u6709\u7684\u8FD9\u4E9BPredicate\u90FD\u548CHttp\u8BF7\u6C42\u7684\u4E0D\u540C\u5C5E\u6027\u5339\u914D\uFF0C\u591A\u4E2ARoute Predicate\u53EF\u4EE5\u8FDB\u884C\u7EC4\u5408\u3002</li><li>Spring Cloud Gateway \u521B\u5EFAroute\u5BF9\u8C61\u65F6\uFF0C\u4F7F\u7528RoutePredicateFactory\u521B\u5EFAPredicate\u5BF9\u8C61\uFF0CPredicate\u5BF9\u8C61\u53EF\u4EE5\u8D4B\u503C\u7ED9Route\uFF0CSpringCloud Gateway\u5305\u542B\u8BB8\u591A\u5185\u7F6E\u7684Route Predicate Factories.</li><li>\u6240\u6709\u7684 \u8FD9\u4E9B\u8C13\u8BCD\u90FD\u5339\u914DHttp\u7684\u8BF7\u6C42\u7684\u5404\u79CD\u5C5E\u6027\uFF0C\u591A\u79CD\u8C13\u8BCD\u5DE5\u5382\u53EF\u4EE5\u7EC4\u5408\uFF0C\u5E76\u901A\u8FC7\u903B\u8F91and</li></ul>',7),Ps=a("\u5B98\u7F51\u5BF9gateway\u7684\u65AD\u8A00\u6BCF\u4E2A\u90FD\u5199\u4E86\u4F8B\u5B50\uFF1A"),Es={href:"https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/##the-after-route-predicate-factory",target:"_blank",rel:"noopener noreferrer"},Rs=a("https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/##the-after-route-predicate-factory"),Ms=p(`<h4 id="_1\u3001\u5E38\u7528\u7684predicate-\u65AD\u8A00" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u5E38\u7528\u7684predicate-\u65AD\u8A00" aria-hidden="true">#</a> 1\u3001\u5E38\u7528\u7684Predicate \u65AD\u8A00</h4><h5 id="_1-after-route-predicate" tabindex="-1"><a class="header-anchor" href="#_1-after-route-predicate" aria-hidden="true">#</a> 1. After Route Predicate\uFF1A</h5><ul><li>\u5339\u914D\u6539\u65AD\u8A00\u65F6\u95F4\u4E4B\u540E\u7684uri\u8BF7\u6C42</li><li><code>- After=2021-09-28T19:14:51.514+08:00[Asia/Shanghai]</code></li></ul><p>\u5982\u4F55\u83B7\u5F97\u4E0A\u8FF0\u683C\u5F0F\u7684\u65F6\u95F4\u5462\uFF1F</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TimeTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ZonedDateTime</span> zbj <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u9ED8\u8BA4\u65F6\u533A</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>zbj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//2021-09-28T19:14:51.514+08:00[Asia/Shanghai]</span>
<span class="token comment">//        ZonedDateTime zny = ZonedDateTime.now(ZoneId.of(&quot;America/New_York&quot;)); // \u7528\u6307\u5B9A\u65F6\u533A\u83B7\u53D6\u5F53\u524D\u65F6\u95F4</span>
<span class="token comment">//        System.out.println(zny);</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u914D\u7F6Eyml</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632827933056-82dc1db5-504b-46d9-ab84-b95638a3eeff.png" alt="img"></p><p><strong>\u6D4B\u8BD5</strong>\uFF1A</p><p>\u6210\u529F</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632827968809-067c9642-7660-43a2-b5ee-37c6508e6f22.png" alt="img"></p><p>\u5C06\u65F6\u95F4\u4FEE\u6539\u5230\u4E00\u5C0F\u65F6\u540E\uFF1A\u62A5\u9519</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632828083339-0c8f2b02-483a-4a63-ab5c-bd057ab9d629.png" alt="img"></p><h5 id="_2-before-route-predicate" tabindex="-1"><a class="header-anchor" href="#_2-before-route-predicate" aria-hidden="true">#</a> 2.Before Route Predicate\uFF1A</h5><ul><li>\u5339\u914D\u6539\u65AD\u8A00\u65F6\u95F4\u4E4B\u524D\u7684uri\u8BF7\u6C42</li></ul><h5 id="_3-between-route-predicate" tabindex="-1"><a class="header-anchor" href="#_3-between-route-predicate" aria-hidden="true">#</a> 3.Between Route Predicate\uFF1A</h5><ul><li>\u5339\u914D\u6539\u65AD\u8A00\u65F6\u95F4\u4E4B\u95F4\u7684uri\u8BF7\u6C42</li><li><code>Between=2020-02-02T17:45:06.206+08:00[Asia/Shanghai],2020-03-25T18:59:06.206+08:00[Asia/Shanghai]</code></li></ul><h5 id="_4-cookie-route-predicate" tabindex="-1"><a class="header-anchor" href="#_4-cookie-route-predicate" aria-hidden="true">#</a> 4.Cookie Route Predicate\uFF1A</h5><p><code>- Cookie=chocolate, ch.p</code> Cookie Route Predicate\u9700\u8981\u4E24\u4E2A\u53C2\u6570\uFF0C\u4E00\u4E2A\u662FCookie name\uFF0C\u4E00\u4E2A\u662F\u6B63\u5219\u8868\u8FBE\u5F0F\u3002 \u8DEF\u7531\u89C4\u5219\u4F1A\u901A\u8FC7\u83B7\u53D6\u5BF9\u5E94\u7684Cookie name \u503C\u548C\u6B63\u5219\u8868\u8FBE\u5F0F\u53BB\u5339\u914D\uFF0C\u5982\u679C\u5339\u914D\u4E0A\u5C31\u4F1A\u6267\u884C\u8DEF\u7531\uFF0C \u5982\u679C\u6CA1\u6709\u5339\u914D\u4E0A\u5219\u4E0D\u6267\u884C\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632830284067-bcb6cfea-d13f-404f-8ec7-a56a60146e12.png" alt="img"></p><p>\u8868\u793A\u53EA\u6709\u53D1\u9001\u7684\u8BF7\u6C42\u6709cookie\uFF0C\u800C\u4E14\u91CC\u9762\u6709username=zzyy\u8FD9\u4E2A\u6570\u636E\u624D\u80FD\u8BBF\u95EE</p><p>####### 4.1 \u5229\u7528curl\u547D\u4EE4\u53D1\u9001POST/GET\u8BF7\u6C42</p><ul><li>\u4E0D\u5E26cookie\u53D1\u9001\u8BF7\u6C42</li></ul><p>cmd\u76F4\u63A5\u8F93\u5165\uFF1A</p><p><code>curl http://localhost:9527/payment/lb</code> : \u53EA\u53D1\u4E86\u4E00\u4E2AGET\u8BF7\u6C42\uFF0C\u6CA1\u6709\u5E26Cookie</p><p>\u62A5\u9519\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632830432717-1c3d1d5e-c64f-4ea1-b7d0-b8fc8fcc13ab.png" alt="img"></p><ul><li>\u5E26cookie\u53D1\u9001\u8BF7\u6C42</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>curl http://localhost:9527/payment/lb --cookie &quot;username=zzyy&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6210\u529F\uFF1A<img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632830622771-95caf7f3-65e4-43c5-9325-441fb1bbdf32.png" alt="img"></p>`,29),Ts={href:"https://blog.csdn.net/leedee/article/details/82685636",target:"_blank",rel:"noopener noreferrer"},Hs=a("\u52A0\u5165curl\u8FD4\u56DE\u4E2D\u6587\u4E71\u7801"),Os=p(`<h5 id="_5-header-route-predicate" tabindex="-1"><a class="header-anchor" href="#_5-header-route-predicate" aria-hidden="true">#</a> 5.Header Route Predicate\uFF1A</h5><p><code>- Header=X-Request-Id, \\d+</code>\uFF1A\u5E26\u7740\u8FD9\u6837\u7684\u8BF7\u6C42\u5934\u624D\u6267\u884C\uFF1A\u8BF7\u6C42\u5934\u8981\u6709X-Request-Id\u5C5E\u6027\uFF0C\u5E76\u4E14\u503C\u4E3A\u6574\u6570\u7684\u6B63\u5219\u8868\u8FBE\u5F0F</p><p>\u6D4B\u8BD5\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>curl http://localhost:9527/payment/lb -H &quot;X-Request-Id:123&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632830942567-50db34cb-bc8f-47ea-a68f-757769609d38.png" alt="img"></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>curl http://localhost:9527/payment/lb -H &quot;X-Request-Id:-123&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632831013791-dc0e7f68-fa2a-4817-84d1-b8e8b180bc26.png" alt="img"></p><h5 id="_6-host-route-predicate" tabindex="-1"><a class="header-anchor" href="#_6-host-route-predicate" aria-hidden="true">#</a> 6.Host Route Predicate\uFF1A</h5><p><code>- Host=**.atguigu.com</code>\uFF1A\u53EA\u6709\u6307\u5B9A\u4E3B\u673A\u53EF\u4EE5\u8BBF\u95EE\uFF0C\u53EF\u4EE5\u6307\u5B9A\u591A\u4E2A\u7528\u201C\uFF0C\u201D\u5206\u9694\u5F00\u3002</p><p>\u6D4B\u8BD5\uFF1A</p><ul><li><p><code>curl http://localhost:9527/payment/lb -H &quot;Host: www.atguigu.com&quot;</code></p></li><li><ul><li>\u6B63\u786E</li></ul></li><li><p><code>curl http://localhost:9527/payment/lb -H &quot;Host: java.atguigu.com&quot;</code></p></li><li><ul><li>\u6B63\u786E</li></ul></li><li><p><code>curl http://localhost:9527/payment/lb -H &quot;Host: java.atguigu.net&quot;</code></p></li><li><ul><li>\u9519\u8BEF</li></ul></li></ul><h5 id="_7-method-route-predicate" tabindex="-1"><a class="header-anchor" href="#_7-method-route-predicate" aria-hidden="true">#</a> 7.Method Route Predicate\uFF1A</h5><p><code>- Method=GET</code> ##\u53EA\u6709get\u8BF7\u6C42\u624D\u80FD\u8BBF\u95EE</p><ul><li>GET\u8BF7\u6C42\uFF1A<code>curl http://localhost:9527/payment/lb</code></li><li>POST\u8BF7\u6C42\uFF1A<code>curl -X -POST http://localhost:9527/payment/lb</code></li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632831400643-4a4bed6c-61a8-4535-864e-d6894fb96b53.png" alt="img"></p><h5 id="_8-path-route-predicate" tabindex="-1"><a class="header-anchor" href="#_8-path-route-predicate" aria-hidden="true">#</a> 8.Path Route Predicate\uFF1A</h5><p>\u5339\u914D\u8DEF\u5F84\uFF0C\u6700\u5F00\u59CB\u5C31\u662F\u7528\u7684\u8FD9\u4E2A</p><h5 id="_9-query-route-predicate" tabindex="-1"><a class="header-anchor" href="#_9-query-route-predicate" aria-hidden="true">#</a> 9.Query Route Predicate\uFF1A</h5><p><code>- Query=username, \\d+</code> ## \u8981\u6709\u53C2\u6570\u540Dusername\u5E76\u4E14\u503C\u8FD8\u8981\u662F\u6574\u6570\u624D\u80FD\u8DEF\u7531</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632831559864-dde11e05-e259-4320-8655-f44e5b4b8ee1.png" alt="img"></p><h4 id="_2\u3001\u5C0F\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u5C0F\u603B\u7ED3" aria-hidden="true">#</a> 2\u3001\u5C0F\u603B\u7ED3</h4><p>\u8BF4\u767D\u4E86\uFF0CPredicate\u5C31\u662F\u4E3A\u4E86\u5B9E\u73B0\u4E00\u7EC4\u5339\u914D\u89C4\u5219\uFF0C\u8BA9\u8BF7\u6C42\u8FC7\u6765\u627E\u5230\u5BF9\u5E94\u7684Route\u8FDB\u884C\u5904\u7406\u3002</p><h3 id="\u4E03\u3001filter\u7684\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u4E03\u3001filter\u7684\u4F7F\u7528" aria-hidden="true">#</a> \u4E03\u3001Filter\u7684\u4F7F\u7528</h3><h4 id="_1\u3001filter\u662F\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#_1\u3001filter\u662F\u4EC0\u4E48" aria-hidden="true">#</a> 1\u3001Filter\u662F\u4EC0\u4E48</h4><p>\u6307\u7684\u662FSpring\u6846\u67B6\u4E2DGatewayFilter\u7684\u5B9E\u4F8B\uFF0C\u4F7F\u7528\u8FC7\u6EE4\u5668\uFF0C\u53EF\u4EE5\u5728\u8BF7\u6C42\u88AB\u8DEF\u7531\u524D\u6216\u8005\u4E4B\u540E\u5BF9\u8BF7\u6C42\u8FDB\u884C\u4FEE\u6539\u3002 Filter\u94FE\uFF1A\u540C\u65F6\u6EE1\u8DB3\u4E00\u7CFB\u5217\u7684\u8FC7\u6EE4\u94FE\u3002</p><p>\u8DEF\u7531\u8FC7\u6EE4\u5668\u53EF\u7528\u4E8E\u4FEE\u6539\u8FDB\u5165\u7684HTTP\u8BF7\u6C42\u548C\u8FD4\u56DE\u7684HTTP\u54CD\u5E94\uFF0C\u8DEF\u7531\u8FC7\u6EE4\u5668\u53EA\u80FD\u6307\u5B9A\u8DEF\u7531\u8FDB\u884C\u4F7F\u7528\u3002Spring Cloud Gateway \u5185\u7F6E\u4E86\u591A\u79CD\u8DEF\u7531\u8FC7\u6EE4\u5668\uFF0C\u4ED6\u4EEC\u90FD\u7531GatewayFilter\u7684\u5DE5\u5382\u7C7B\u6765\u4EA7\u751F\u3002</p>`,26),As=a("\u5B98\u7F51\uFF1A"),Bs={href:"https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/##gatewayfilter-factories",target:"_blank",rel:"noopener noreferrer"},Fs=a("https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/##gatewayfilter-factories"),Ls=p(`<p><strong>\u751F\u547D\u5468\u671F \uFF1A</strong></p><p><strong>pre \u5728\u4E1A\u52A1\u903B\u8F91\u4E4B\u524D</strong></p><p><strong>post \u5728\u4E1A\u52A1\u903B\u8F91\u4E4B\u540E</strong></p><p><strong>\u79CD\u7C7B\uFF1A</strong></p><p><strong>\u5355\u4E00\u7684\uFF1AGatewayFilter</strong></p><p><strong>\u5168\u5C40\u7684\uFF1AGlobalFilter</strong></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632833571758-97f52f9d-6022-4ef9-9dd5-5535e8ccf1e6.png" alt="img"></p><h4 id="_2\u3001\u81EA\u5B9A\u4E49\u5168\u5C40\u8FC7\u6EE4\u5668-globalfilter" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u81EA\u5B9A\u4E49\u5168\u5C40\u8FC7\u6EE4\u5668-globalfilter" aria-hidden="true">#</a> 2\u3001\u81EA\u5B9A\u4E49\u5168\u5C40\u8FC7\u6EE4\u5668\uFF08GlobalFilter\uFF09</h4><p>\u4E24\u4E2A\u4E3B\u8981\u63A5\u53E3\u4ECB\u7ECD\uFF1Aimplements GlobalFilter, Ordered</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyLogGateWayFilter</span> <span class="token keyword">implements</span> <span class="token class-name">GlobalFilter</span><span class="token punctuation">,</span> <span class="token class-name">Ordered</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;*********************come in MyLogGateWayFilter:  &quot;</span><span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u53D6\u51FA\u8BF7\u6C42\u53C2\u6570\u7684uname\u5BF9\u5E94\u7684\u503C</span>
        <span class="token class-name">String</span> uname <span class="token operator">=</span> exchange<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getQueryParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token string">&quot;uname&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5982\u679Cuanme\u4E3A\u7A7A\uFF0C\u5C31\u76F4\u63A5\u8FC7\u6EE4\u6389\uFF0C\u4E0D\u8D70\u8DEF\u7531</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>uname <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;************* \u7528\u6237\u540D\u4E3ANull \u975E\u6CD5\u7528\u6237 o(\u2565\uFE4F\u2565)o&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//\u5224\u65AD\u8BE5\u8BF7\u6C42\u4E0D\u901A\u8FC7\u65F6\uFF1A\u7ED9\u4E00\u4E2A\u56DE\u5E94\uFF0C\u8FD4\u56DE</span>
            exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setStatusCode</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>NOT_ACCEPTABLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//\u53CD\u4E4B\uFF0C\u8C03\u7528\u4E0B\u4E00\u4E2A\u8FC7\u6EE4\u5668\uFF0C\u4E5F\u5C31\u662F\u653E\u884C\uFF1A\u5728\u8BE5\u73AF\u8282\u5224\u65AD\u901A\u8FC7\u7684exchange\u653E\u884C\uFF0C\u4EA4\u7ED9\u4E0B\u4E00\u4E2Afilter\u5224\u65AD</span>
        <span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u8FD9\u4E2A\u8FC7\u6EE4\u5668\u7684\u52A0\u8F7D\u987A\u5E8F\uFF0C\u6570\u5B57\u8D8A\u5C0F\uFF0C\u4F18\u5148\u7EA7\u8D8A\u9AD8
     * \u8BBE\u7F6E\u8FD9\u4E2A\u8FC7\u6EE4\u5668\u5728Filter\u94FE\u4E2D\u7684\u52A0\u8F7D\u987A\u5E8F\u3002
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6D4B\u8BD5</strong>\uFF1A</p>`,11),Vs={href:"http://localhost:9527/payment/lb?uname=z3",target:"_blank",rel:"noopener noreferrer"},Ns=a("http://localhost:9527/payment/lb?uname=z3"),zs=n("p",null,"\u53D1\u73B0\u62A5\u9519\u4E86\uFF1A",-1),Gs=n("p",null,[n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632835968869-29a31ab5-5979-4af5-9c09-942a98329452.png",alt:"img"})],-1),Ds=n("p",null,"\u68C0\u67E5yml\u914D\u7F6E\u6587\u4EF6\uFF0C\u53D1\u73B0predicates \u65AD\u8A00\u8BBE\u7F6E\u4E86Query",-1),Us=n("p",null,[n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632836010578-43031c63-77f4-45d4-a18c-8102568b26c1.png",alt:"img"})],-1),Zs=n("p",null,"\u52A0\u4E0AQuery\u9700\u8981\u7684\u53C2\u6570 username\uFF0C\u6216\u8005\u5C06Query\u6CE8\u91CA\u6389",-1),Qs={href:"http://localhost:9527/payment/lb?uname=z3&username=33",target:"_blank",rel:"noopener noreferrer"},Xs=a("http://localhost:9527/payment/lb?uname=z3&username=33"),Ws=n("p",null,"\u6210\u529F\uFF1A",-1),Ys=n("p",null,[n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632836035624-2b2c9f91-84e2-4d2a-903c-f0afe156608b.png",alt:"img"})],-1),$s=a("\u6D4B\u8BD5\uFF1A"),Ks={href:"http://localhost:9527/payment/lb",target:"_blank",rel:"noopener noreferrer"},Js=a("http://localhost:9527/payment/lb"),nt=a(" \u6CA1\u6709\u52A0uname\uFF0C\u88AB\u8FC7\u6EE4\u6389\u4E86"),at=p('<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632836682678-87279565-c12e-4961-8a8d-4a12df80e78a.png" alt="img"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1632836706812-7413690d-0f9b-4412-a15d-4783bda59e5c.png" alt="img"></p><h2 id="_9-\u670D\u52A1\u914D\u7F6E\u2014\u2014springcloud-config\u5206\u5E03\u5F0F\u914D\u7F6E\u4E2D\u5FC3" tabindex="-1"><a class="header-anchor" href="#_9-\u670D\u52A1\u914D\u7F6E\u2014\u2014springcloud-config\u5206\u5E03\u5F0F\u914D\u7F6E\u4E2D\u5FC3" aria-hidden="true">#</a> 9.\u670D\u52A1\u914D\u7F6E\u2014\u2014SpringCloud Config\u5206\u5E03\u5F0F\u914D\u7F6E\u4E2D\u5FC3</h2><h3 id="\u4E00\u3001\u6982\u8FF0-1" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001\u6982\u8FF0-1" aria-hidden="true">#</a> \u4E00\u3001\u6982\u8FF0</h3><h4 id="_1-1-\u5206\u5E03\u5F0F\u7CFB\u7EDF\u9762\u4E34\u7684-\u914D\u7F6E\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_1-1-\u5206\u5E03\u5F0F\u7CFB\u7EDF\u9762\u4E34\u7684-\u914D\u7F6E\u95EE\u9898" aria-hidden="true">#</a> 1.1 \u5206\u5E03\u5F0F\u7CFB\u7EDF\u9762\u4E34\u7684---\u914D\u7F6E\u95EE\u9898</h4><ul><li>\u6211\u4EEC\u7684\u6A21\u5757\u8D8A\u6765\u8D8A\u591A\uFF0C\u6BCF\u4E2A\u6A21\u5757\u90FD\u8981\u5199\u4E00\u4E2A<code>application.yml</code>\u3002 \u6211\u4EEC\u60F3\u8C61\u8FD9\u6837\u4E00\u79CD\u60C5\u51B5\uFF1A 10\u4E2A\u5FAE\u670D\u52A1\u90FD\u8981\u8FDE\u63A5\u540C\u4E00\u4E2A\u6570\u636E\u5E93\uFF0C\u6211\u4EEC\u5728\u8FD910\u4E2A\u5FAE\u670D\u52A1\u90FD\u914D\u7F6E\u4E86\u8FDE\u63A5\u6570\u636E\u5E93yml\u3002 \u5F53\u8FD9\u4E2A\u6570\u636E\u5E93\u53D1\u751F\u4E86\u53D8\u5316\uFF0C\u600E\u4E48\u529E\uFF1F \u4FEE\u653910\u4E2Ayml\u3002 \u5982\u679C\u662F100\u4E2A\u5FAE\u670D\u52A1\u90FD\u8FDE\u63A5\u8FD9\u4E2A\u6570\u636E\u5E93\u5462\uFF1F \u4E1C\u897F\u591A\u4E86\uFF0C\u5C31\u8981\u6709\u7EDF\u4E00\u4E2A\u7BA1\u7406\u3002</li><li>\u4E0A\u7EBF\u540E\uFF0C\u53D1\u5E03\u7248\u672C\u4E86\u3002\u6709\u751F\u4EA7\u73AF\u5883\uFF0C\u6709\u6D4B\u8BD5\u73AF\u5883\uFF0C\u9884\u53D1\u5E03\u7248\u672C\u73AF\u5883\u3002 \u90A3\u4E48\u5C31\u662F3\u5957\u7684\u914D\u7F6E\u7684\u7BA1\u7406\u7CFB\u7EDF\u548C\u4E1A\u52A1\u8981\u6C42\uFF0C\u4E00\u4E2A\u914D\u7F6E\u6587\u4EF6\u4E0D\u80FD\u540C\u65F6\u6EE1\u8DB3\u4E09\u79CD\u73AF\u5883\u3002</li><li>\u96C6\u4E2D\u5F0F\u7684\u7BA1\u7406\u8FD9\u4E9B\u914D\u7F6E\u3002\u5FAE\u670D\u52A1\u610F\u5473\u7740\u8981\u5C06\u5355\u4F53\u5E94\u7528\u4E2D\u7684\u4E1A\u52A1\u62C6\u5206\u6210\u4E00\u4E2A\u4E2A\u5B50\u670D\u52A1\uFF0C\u6BCF\u4E2A\u670D\u52A1\u7684\u7C92\u5EA6\u76F8\u5BF9\u8F83\u5C0F\uFF0C\u56E0\u6B64\u7CFB\u7EDF\u4E2D\u4F1A \u51FA\u73B0\u5927\u91CF\u7684\u670D\u52A1\u3002 \u7531\u4E8E\u6BCF\u4E2A\u670D\u52A1\u90FD\u9700\u8981\u5FC5\u8981\u7684\u914D\u7F6E\u4FE1\u606F\u624D\u80FD\u8FD0\u884C\uFF0C\u6240\u4EE5\u4E00\u5957\u96C6\u4E2D\u5F0F\uFF0C\u52A8\u6001\u7684\u914D\u7F6E\u7BA1\u7406\u8BBE\u65BD\u662F\u5FC5\u4E0D\u53EF\u5C11\u7684\u3002 \u6211\u4EEC\u6BCF\u4E2A\u5FAE\u670D\u52A1\u81EA\u5DF1\u5E26\u7740\u4E00\u4E2A<code>application.yml</code>\uFF0C\u4E0A\u767E\u4E2A\u914D\u7F6E\u6587\u4EF6\u7684\u7BA1\u7406... SpringCloud\u63D0\u4F9B\u4E86ConfigServer\u6765\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\u3002</li></ul><h4 id="_1-2-config\u662F\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#_1-2-config\u662F\u4EC0\u4E48" aria-hidden="true">#</a> 1.2 Config\u662F\u4EC0\u4E48</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1617944672184-6de7e8ee-7aa3-4ecc-8382-3ba31434c109.png" alt="img"></p><p>SpringCloud Config\u4E3A\u5FAE\u670D\u52A1\u67B6\u6784\u4E2D\u7684\u5FAE\u670D\u52A1\u63D0\u4F9B\u96C6\u4E2D\u5316\u7684\u5916\u90E8\u914D\u7F6E\u652F\u6301\uFF08Git/GitHub\uFF09\uFF08\u610F\u601D\u5C31\u662F\u53EF\u4EE5\u914D\u7F6E\u8FDC\u7A0B\u7684\u914D\u7F6E\u6587\u4EF6\uFF1F\uFF09\uFF0C\u914D\u7F6E\u670D\u52A1\u5668\u4E3A\u5404\u4E2A\u4E0D\u540C\u5FAE\u670D\u52A1\u5E94\u7528\u7684\u6240\u6709\u73AF\u5883\u63D0\u4F9B\u4E86\u4E00\u4E2A\u4E2D\u5FC3\u5316\u7684\u5916\u90E8\u914D\u7F6E\uFF08Config Server\uFF09\u3002</p><p>\u7EDF\u4E00\u5171\u7528\u7684\u653E\u5728\u914D\u7F6E\u4E2D\u5FC3\uFF0C\u5404\u81EA\u7279\u6709\u7684\u518D\u5355\u72EC\u914D\u7F6E\u3002</p>',9),st=a("\u5B98\u7F51\uFF1A "),tt={href:"https://cloud.spring.io/spring-cloud-static/spring-cloud-config/2.2.1.RELEASE/reference/html/",target:"_blank",rel:"noopener noreferrer"},pt=a("https://cloud.spring.io/spring-cloud-static/spring-cloud-config/2.2.1.RELEASE/reference/html/"),et=p('<p>\u7531\u4E8ESpringCloud Config\u9ED8\u8BA4\u4F7F\u7528Git\u6765\u5B58\u50A8\u914D\u7F6E\u6587\u4EF6\uFF0C\u6700\u63A8\u8350\u4E0Egithub\u6574\u5408\u3002</p><h4 id="_1-3-\u600E\u4E48\u7528" tabindex="-1"><a class="header-anchor" href="#_1-3-\u600E\u4E48\u7528" aria-hidden="true">#</a> 1.3 \u600E\u4E48\u7528</h4><p>SpringCloud Config \u5206\u4E3A\u670D\u52A1\u7AEF\u548C\u5BA2\u6237\u7AEF\u4E24\u90E8\u5206\u3002</p><p>\u670D\u52A1\u7AEF\u4E5F\u79F0\u4E3A\u5206\u5E03\u5F0F\u914D\u7F6E\u4E2D\u5FC3\uFF0C\u4ED6\u662F\u4E00\u4E2A\u72EC\u7ACB\u7684\u5FAE\u670D\u52A1\u5E94\u7528\uFF0C\u7528\u6765\u8FDE\u63A5\u914D\u7F6E\u670D\u52A1\u5668\u5E76\u4E3A\u5BA2\u6237\u7AEF\u63D0\u4F9B\u83B7\u53D6\u914D\u7F6E\u4FE1\u606F\uFF0C\u52A0\u5BC6/\u89E3\u5BC6\u7B49\u4FE1\u606F\u8BBF\u95EE\u63A5\u53E3\u3002</p><p>\u5BA2\u6237\u7AEF\u5219\u662F\u901A\u8FC7\u6307\u5B9A\u7684\u914D\u7F6E\u4E2D\u5FC3\u6765\u7BA1\u7406\u5E94\u7528\u8D44\u6E90\uFF0C\u4EE5\u53CA\u4E0E\u4E1A\u52A1\u76F8\u5173\u7684\u914D\u7F6E\u5185\u5BB9\uFF0C\u5E76\u5728\u542F\u52A8\u7684\u65F6\u5019\u4ECE\u914D\u7F6E\u4E2D\u5FC3\u83B7\u53D6\u548C\u52A0\u8F7D\u914D\u7F6E\u4FE1\u606F\uFF0C\u914D\u7F6E\u670D\u52A1\u5668\u9ED8\u8BA4\u91C7\u7528git\u6765\u5B58\u50A8\u914D\u7F6E\u4FE1\u606F\uFF0C\u8FD9\u6837\u65E2\u6709\u52A9\u4E8E\u5BF9\u73AF\u5883\u914D\u7F6E\u8FDB\u884C\u7248\u672C\u7BA1\u7406\uFF0C\u5E76\u4E14\u53EF\u4EE5\u901A\u8FC7git\u5BA2\u6237\u7AEF\u6765\u65B9\u4FBF\u7684\u7BA1\u7406\u548C\u8BBF\u95EE\u914D\u7F6E\u5185\u5BB9\u3002</p><h4 id="_1-4-\u80FD\u5E72\u561B" tabindex="-1"><a class="header-anchor" href="#_1-4-\u80FD\u5E72\u561B" aria-hidden="true">#</a> 1.4 \u80FD\u5E72\u561B</h4><ul><li><strong>\u96C6\u4E2D\u7BA1\u7406\u914D\u7F6E\u6587\u4EF6</strong></li><li>\u4E0D\u540C\u73AF\u5883\u4E0D\u540C\u914D\u7F6E\uFF0C\u52A8\u6001\u5316\u7684\u914D\u7F6E\u66F4\u65B0\uFF0C\u5206\u73AF\u5883\u90E8\u7F72\u6BD4\u5982 dev/test/prod/beta/release</li><li>\u8FD0\u884C\u671F\u95F4\u52A8\u6001\u8C03\u6574\u914D\u7F6E\uFF0C\u4E0D\u518D\u9700\u8981\u5728\u6BCF\u4E2A\u670D\u52A1\u90E8\u7F72\u7684\u673A\u5668\u4E0A\u7F16\u5199\u914D\u7F6E\u6587\u4EF6\uFF0C\u670D\u52A1\u56DE\u60F3\u914D\u7F6E\u4E2D\u5FC3\u7EDF\u4E00\u62C9\u53D6\u914D\u7F6E\u81EA\u5DF1\u7684\u4FE1\u606F\u3002</li><li><strong>\u5F53\u914D\u7F6E\u53D1\u751F\u53D8\u52A8\u65F6\uFF0C\u670D\u52A1\u4E0D\u9700\u8981\u91CD\u542F\u5373\u53EF\u611F\u77E5\u5230\u914D\u7F6E\u7684\u53D8\u5316\u5E76\u5E94\u7528\u65B0\u7684\u914D\u7F6E\u3002</strong></li><li><strong>\u5C06\u914D\u7F6E\u4FE1\u606F\u4EE5Rest\u63A5\u53E3\u7684\u5F62\u5F0F\u66B4\u9732\u3002</strong></li><li>\u4E0EGitHub\u6574\u5408\u914D\u7F6E\uFF0C\u7531\u4E8ESpringCloud Config\u9ED8\u8BA4\u4F7F\u7528Git\u6765\u5B58\u50A8\u914D\u7F6E\u6587\u4EF6\uFF0C\u867D\u7136\u4E5F\u652F\u6301SVN\u3002\u4F46\u662F\u6700\u63A8\u8350\u7684\u8FD8\u662F Git\uFF0C\u800C\u4E14\u4F7F\u7528\u7684\u662Fhttp/https\u8BBF\u95EE\u7684\u5F62\u5F0F\u3002</li></ul>',7),ot={href:"https://cloud.spring.io/spring-cloud-static/spring-cloud-config/2.2.1.RELEASE/reference/html/",target:"_blank",rel:"noopener noreferrer"},ct=a("https://cloud.spring.io/spring-cloud-static/spring-cloud-config/2.2.1.RELEASE/reference/html/"),lt=p('<h3 id="\u4E8C\u3001-config\u670D\u52A1\u7AEF\u914D\u7F6E\u4E0E\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001-config\u670D\u52A1\u7AEF\u914D\u7F6E\u4E0E\u6D4B\u8BD5" aria-hidden="true">#</a> \u4E8C\u3001 Config\u670D\u52A1\u7AEF\u914D\u7F6E\u4E0E\u6D4B\u8BD5</h3><h4 id="_2-1-\u7528\u4F60\u81EA\u5DF1\u7684\u8D26\u53F7\u5728github\u4E0A\u65B0\u5EFA\u4E00\u4E2A\u540D\u4E3Aspringcloud-config\u7684\u65B0repository" tabindex="-1"><a class="header-anchor" href="#_2-1-\u7528\u4F60\u81EA\u5DF1\u7684\u8D26\u53F7\u5728github\u4E0A\u65B0\u5EFA\u4E00\u4E2A\u540D\u4E3Aspringcloud-config\u7684\u65B0repository" aria-hidden="true">#</a> 2.1 \u7528\u4F60\u81EA\u5DF1\u7684\u8D26\u53F7\u5728GitHub\u4E0A\u65B0\u5EFA\u4E00\u4E2A\u540D\u4E3Aspringcloud-config\u7684\u65B0Repository</h4><p>Repository\u4E2D\u521B\u5EFA\u4EE5\u4E0B\u6587\u4EF6\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634045938282-baa4f769-298a-40a1-bade-5e1e45429fe3.png" alt="img"></p>',4),it=a("\u8BE5\u6587\u4EF6\u53EF\u4EE5\u4ECE\u5468\u9633\u8001\u5E08\u7684github\u4ED3\u5E93\u514B\u9686\u4E00\u4EFD\uFF0C\u590D\u5236\u5230\u81EA\u5DF1\u7684\u4ED3\u5E93 "),ut={href:"https://github.com/zzyybs/springcloud-config",target:"_blank",rel:"noopener noreferrer"},rt=a("https://github.com/zzyybs/springcloud-config"),kt=n("h4",{id:"_2-2-\u7531\u4E0A\u4E00\u6B65\u83B7\u5F97\u521A\u65B0\u5EFA\u7684git\u5730\u5740",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2-2-\u7531\u4E0A\u4E00\u6B65\u83B7\u5F97\u521A\u65B0\u5EFA\u7684git\u5730\u5740","aria-hidden":"true"},"#"),a(" 2.2 \u7531\u4E0A\u4E00\u6B65\u83B7\u5F97\u521A\u65B0\u5EFA\u7684git\u5730\u5740")],-1),dt=n("p",null,"SSH\uFF1Agit@github.com:Bear-Lx/springcloud-config.git",-1),gt=a("Https\uFF1A"),mt={href:"https://github.com/Bear-Lx/springcloud-config.git",target:"_blank",rel:"noopener noreferrer"},vt=a("https://github.com/Bear-Lx/springcloud-config.git"),bt=a(" \uFF08\u63A8\u8350\uFF09"),ht=n("h4",{id:"_2-3-\u672C\u5730\u786C\u76D8\u76EE\u5F55\u4E0A\u65B0\u5EFAgit\u4ED3\u5E93\u5E76clone",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2-3-\u672C\u5730\u786C\u76D8\u76EE\u5F55\u4E0A\u65B0\u5EFAgit\u4ED3\u5E93\u5E76clone","aria-hidden":"true"},"#"),a(" 2.3 \u672C\u5730\u786C\u76D8\u76EE\u5F55\u4E0A\u65B0\u5EFAgit\u4ED3\u5E93\u5E76clone")],-1),yt=n("p",null,[a("\u6211\u521B\u5EFA\u7684\u4ED3\u5E93\u5728\uFF1A"),n("code",null,"H:\\SpringCloud2020"),a(" \u5728\u6B64\u53F3\u952E\u9F20\u6807\uFF0C\u70B9\u51FBGit Bash Here")],-1),ft=a("\u6CE8\u610F\uFF1A\u73B0\u5728git clone\u547D\u4EE4\u8FDB\u884Cclone\u65F6\u9700\u8981\u9A8C\u8BC1\u4E2A\u4EBA\u8BBF\u95EE\u4EE4\u724C\uFF0C"),_t={href:"https://blog.csdn.net/qq_46941656/article/details/119737804",target:"_blank",rel:"noopener noreferrer"},xt=a("\u4E2A\u4EBA\u8BBF\u95EE\u4EE4\u724C\u7684\u8BBE\u7F6E"),qt=p(`<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634046181382-4fefebc9-9fd0-4bd1-8413-dbf046bacc99.png" alt="img"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634046313555-fd3b6726-b356-4193-a61c-7e6eec9defbb.png" alt="img"></p><p>\u8868\u793A\u591A\u4E2A\u73AF\u5883\u7684\u914D\u7F6E\uFF1B\u4FDD\u5B58\u683C\u5F0F\u5FC5\u987B\u662Futf-8</p><p>\u5982\u679C\u9700\u8981\u5BF9\u672C\u5730\u4ED3\u7684\u6587\u4EF6\u8FDB\u884C\u4E86\u4FEE\u6539\uFF0C\u540C\u6B65\u5230\u8FDC\u7A0B\u4ED3\u5E93\uFF0C\u6B64\u5904\u6A21\u62DF\u8FD0\u7EF4\u4EBA\u5458\u64CD\u4F5Cgit\u548Cgithub</p><p>git add</p><p>git commit -m &quot;init yml&quot;</p><p>git push origin master</p><h4 id="_2-4-\u65B0\u5EFAmodule\u6A21\u5757-cloud-config-center-3344-\u5B83\u5C31\u662Fcloud\u7684\u914D\u7F6E\u4E2D\u5FC3\u6A21\u5757-cloudconfig-center" tabindex="-1"><a class="header-anchor" href="#_2-4-\u65B0\u5EFAmodule\u6A21\u5757-cloud-config-center-3344-\u5B83\u5C31\u662Fcloud\u7684\u914D\u7F6E\u4E2D\u5FC3\u6A21\u5757-cloudconfig-center" aria-hidden="true">#</a> 2.4 \u65B0\u5EFAModule\u6A21\u5757 cloud-config-center-3344,\u5B83\u5C31\u662FCloud\u7684\u914D\u7F6E\u4E2D\u5FC3\u6A21\u5757 cloudConfig Center</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634095958447-c6db1073-9b68-42d0-8122-47252f0a2ce5.png" alt="img"></p><h4 id="_2-5-pom" tabindex="-1"><a class="header-anchor" href="#_2-5-pom" aria-hidden="true">#</a> 2.5 pom</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jdk8cloud2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-config-center-3344<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--springCloud Config Server--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-config-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-6-yml" tabindex="-1"><a class="header-anchor" href="#_2-6-yml" aria-hidden="true">#</a> 2.6 yml</h4><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">3344</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span>  cloud<span class="token punctuation">-</span>config<span class="token punctuation">-</span>center <span class="token comment">##\u6CE8\u518C\u8FDBEureka\u670D\u52A1\u5668\u7684\u5FAE\u670D\u52A1\u540D</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">server</span><span class="token punctuation">:</span>
        <span class="token key atrule">git</span><span class="token punctuation">:</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/Bear<span class="token punctuation">-</span>Lx/springcloud<span class="token punctuation">-</span>config.git  <span class="token comment">##GitHub\u4E0A\u9762\u7684git\u4ED3\u5E93\u540D\u5B57 \u8FD9\u91CC\u53EF\u4EE5\u5199https\u5730\u5740\u8DDFssh\u5730\u5740\uFF0Chttps\u5730\u5740\u9700\u8981\u914D\u7F6Eusername\u548Cpassword</span>
          <span class="token key atrule">default-label</span><span class="token punctuation">:</span> main
          <span class="token comment">#####\u641C\u7D22\u76EE\u5F55</span>
          <span class="token key atrule">search-paths</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> springcloud<span class="token punctuation">-</span>config
      <span class="token comment">#####\u8BFB\u53D6\u5206\u652F</span>
      <span class="token key atrule">label</span><span class="token punctuation">:</span> main   <span class="token comment">## \u4EE5\u524D\u662Fmaster</span>

<span class="token comment">##\u670D\u52A1\u6CE8\u518C\u5230eureka\u5730\u5740</span>
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
<span class="token comment">##      defaultZone: http://localhost:7001/eureka ##\u5355\u673A\u7248</span>
    <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7001/eureka<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7002/eureka <span class="token comment">##\u96C6\u7FA4\u7248</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>uri\u5730\u5740\u5982\u679C\u7528https\u7684\u522B\u5FD8\u4E86\u914D\u7F6Eusername\u548Cpassword</p><p>\u6CE8\u610F\u8FD9\u91CC<strong>cloud.config.server.git</strong>\u4E0B\u9762<strong>uri</strong>\u548C<strong>search-paths</strong>\u4EE5\u53CA<strong>label</strong>\u7684\u542B\u4E49</p><p>uri\u5C31\u662F\u6211\u4EEC\u8FDC\u7A0B\u4ED3\u5E93\u7684\u5730\u5740\uFF0Csearch-paths\u8868\u793A\u8FDC\u7A0B\u4ED3\u5E93\u4E0B\u6709\u4E00\u4E2A\u53EB\u505Aspringcloud-config\u7684\uFF0Clabel\u5219\u8868\u793A\u8BFB\u53D6master\u5206\u652F\u91CC\u9762\u7684\u5185\u5BB9\uFF082020-10\u6708\u5F00\u59CBmaster\u5206\u652F\u53D8\u4E3Amain\u5206\u652F\uFF09</p><p>\u65B0\u5EFA\u7684github\u5206\u652F\u5DF2\u7ECF\u9ED8\u8BA4\u4E3Amain\uFF0C\u6240\u4EE5\u6B64\u5904\u9700\u6307\u5B9A spring.cloud.config.server.git.default-label=main</p><h4 id="_2-7-\u4E3B\u542F\u52A8\u7C7B" tabindex="-1"><a class="header-anchor" href="#_2-7-\u4E3B\u542F\u52A8\u7C7B" aria-hidden="true">#</a> 2.7 \u4E3B\u542F\u52A8\u7C7B</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>springcloud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>config<span class="token punctuation">.</span>server<span class="token punctuation">.</span></span><span class="token class-name">EnableConfigServer</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableConfigServer</span>   <span class="token comment">//\u5F00\u542FSpringCloud\u7684</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigCenterMain3344</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ConfigCenterMain3344</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u8FD9\u91CC\u6CE8\u610F\u4E00\u4E0B-\u6211\u6CA1\u6709\u52A0-enableeurekaclient\u6CE8\u89E3-\u8FD9\u4E2A\u670D\u52A1\u4F9D\u7136\u6CE8\u518C\u8FDBeureka\u6CE8\u518C\u4E2D\u5FC3\u4E86\u3002" tabindex="-1"><a class="header-anchor" href="#\u8FD9\u91CC\u6CE8\u610F\u4E00\u4E0B-\u6211\u6CA1\u6709\u52A0-enableeurekaclient\u6CE8\u89E3-\u8FD9\u4E2A\u670D\u52A1\u4F9D\u7136\u6CE8\u518C\u8FDBeureka\u6CE8\u518C\u4E2D\u5FC3\u4E86\u3002" aria-hidden="true">#</a> \u8FD9\u91CC\u6CE8\u610F\u4E00\u4E0B\uFF1A\u6211\u6CA1\u6709\u52A0@EnableEurekaClient\u6CE8\u89E3\uFF0C\u8FD9\u4E2A\u670D\u52A1\u4F9D\u7136\u6CE8\u518C\u8FDBeureka\u6CE8\u518C\u4E2D\u5FC3\u4E86\u3002</h5><p>\u539F\u56E0\uFF1A\u901A\u8FC7</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F9D\u8D56\uFF0C\u53EF\u4EE5\u7701\u7565@EnableEurekaClient\uFF0C\u800C\u6839\u636Eyml\u914D\u7F6E\u6587\u4EF6\u60F3eureka\u91CC\u9762\u6CE8\u518C\u3002</p><h4 id="_2-8-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_2-8-\u6D4B\u8BD5" aria-hidden="true">#</a> 2.8 \u6D4B\u8BD5</h4><h5 id="_2-8-1-https" tabindex="-1"><a class="header-anchor" href="#_2-8-1-https" aria-hidden="true">#</a> 2.8.1 Https</h5><p>\u4F7F\u7528https\u6CA1\u6709\u6307\u660E\u8D26\u53F7\u5BC6\u7801\u4F1A\u62A5\u9519\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634201765289-83ade229-8a49-44ee-8921-76cdbd14cdf0.png" alt="img"></p><p>\u6307\u660E\u8D26\u53F7\u5BC6\u7801\u8BBF\u95EE\u6210\u529F\uFF1A</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/22423156/1634203182995-c3da68aa-9602-4cc3-a6bf-4e5a1cbf9a17.png" alt="img"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634217197853-aa21c82b-69b9-438f-b8c9-306342caf065.png" alt="img"></p><h5 id="_2-8-2-ssh" tabindex="-1"><a class="header-anchor" href="#_2-8-2-ssh" aria-hidden="true">#</a> 2.8.2 SSH</h5><p>\u8FD9\u91CC\u5E94\u8BE5\u4F7F\u7528 <code>ssh-keygen -m PEM -t rsa -b 4096 -C &quot;\u586B\u81EA\u5DF1\u7684\u63CF\u8FF0&quot;</code> \u751F\u6210</p><p>ssh key</p><p>\u800C\u4E0D\u662F\u4F7F\u7528 <code>ssh-keygen -t rsa -C &quot;\u586B\u81EA\u5DF1\u7684\u63CF\u8FF0&quot;</code> \u751F\u6210ssh key</p><p>\u7B2C\u4E00\u79CD\u65B9\u5F0F\u751F\u6210\u7684\u79C1\u94A5\u662F\u4EE5<strong>BEGIN</strong> <strong>RSA</strong> <strong>PRIVATE KEY</strong>\u5F00\u5934\uFF0C<strong>END RSA PRIVATE KEY</strong>\u7ED3\u5C3E\uFF1B\u7B2C\u4E8C\u79CD\u65B9\u5F0F\u751F\u6210\u7684\u79C1\u94A5\u662F\u4EE5<strong>BEGIN</strong> <strong>OPENSSH</strong> <strong>PRIVATE KEY</strong>\u5F00\u5934\uFF0C<strong>END OPENSSH PRIVATE KEY</strong>\u7ED3\u5C3E\uFF0C<strong>SpringCloud\u8BBF\u95EEgit</strong>\u7684\u7EC4\u4EF6<strong>\u4E0D\u652F\u6301****openssh</strong>\u8FD9\u79CD\u683C\u5F0F\u7684\u5BC6\u94A5\u3002</p><p>\u6211\u6CA1\u6709\u6D4B\u8BD5SSH\u9A8C\u8BC1\u662F\u5426\u80FD\u591F\u901A\u8FC7\u3002</p><p>\u8981\u4E48\u4F60\u4ED3\u5E93\u516C\u5F00 \u5C31\u50CF\u8001\u5E08\u8FD9\u6837\uFF0C\u79C1\u6709\u4ED3\u5E93\u7684\u8BDDuri\u53EF\u4EE5\u6362https\u7136\u540E\u914D\u7F6E\u5E10\u53F7\u5BC6\u7801\uFF0C\u6216\u8005\u4F9D\u65E7\u7528ssh,\u7136\u540E\u591A\u914D\u4E2A\u79C1\u94A5\u90FD\u53EF\u4EE5</p><h5 id="_2-8-3-\u6620\u5C04\u89C4\u5219" tabindex="-1"><a class="header-anchor" href="#_2-8-3-\u6620\u5C04\u89C4\u5219" aria-hidden="true">#</a> 2.8.3 \u6620\u5C04\u89C4\u5219</h5><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634219331433-52e9e86d-a8b5-4161-a54a-32b945870eb9.png" alt="img"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634219564098-fc7b068f-1f96-4f0e-acb9-6ce33c614cd2.png" alt="img"></p><h4 id="_2-9-\u914D\u7F6E\u7684\u8BFB\u53D6\u89C4\u5219" tabindex="-1"><a class="header-anchor" href="#_2-9-\u914D\u7F6E\u7684\u8BFB\u53D6\u89C4\u5219" aria-hidden="true">#</a> 2.9 \u914D\u7F6E\u7684\u8BFB\u53D6\u89C4\u5219</h4><p>\u5B98\u7F51\u4E0A\u6709\u4E94\u79CD\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634220024866-2a5e007e-1374-4493-bd79-de7def85e72c.png" alt="img"></p><p>\u6211\u4EEC\u8FD9\u91CC\u53EA\u8BB2\u5E38\u7528\u7684\u4E09\u79CD\uFF0C\u5176\u5B9E\u90FD\u5DEE\u4E0D\u591A</p><h5 id="_2-9-1-label-application-profile-yml" tabindex="-1"><a class="header-anchor" href="#_2-9-1-label-application-profile-yml" aria-hidden="true">#</a> 2.9.1 /{label}/{application}-{profile}.yml</h5><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634222762566-c412644d-751b-4f58-99cc-1aa5a34f2328.png" alt="img"></p><p>####### \u8BFB\u53D6main(master)\u5206\u652F</p>`,47),wt={href:"http://localhost:3344/master/config-dev.yaml",target:"_blank",rel:"noopener noreferrer"},It=a("http://localhost:3344/master/config-dev.yaml"),St={href:"http://localhost:3344/master/config-test.yaml",target:"_blank",rel:"noopener noreferrer"},Ct=a("http://localhost:3344/master/config-test.yaml"),jt={href:"http://localhost:3344/master/config-prod.yaml",target:"_blank",rel:"noopener noreferrer"},Pt=a("http://localhost:3344/master/config-prod.yaml"),Et=n("p",null,"####### \u8BFB\u53D6dev\u5206\u652F",-1),Rt={href:"http://localhost:3344/dev/config-dev.yaml",target:"_blank",rel:"noopener noreferrer"},Mt=a("http://localhost:3344/dev/config-dev.yaml"),Tt={href:"http://localhost:3344/dev/config-dev.yaml",target:"_blank",rel:"noopener noreferrer"},Ht=a("http://localhost:3344/dev/config-dev.yaml"),Ot={href:"http://localhost:3344/dev/config-dev.yaml",target:"_blank",rel:"noopener noreferrer"},At=a("http://localhost:3344/dev/config-dev.yaml"),Bt=p('<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634222821477-8dae4b88-0f8e-4952-92fa-cd2fbf639a38.png" alt="img"></p><h5 id="_2-9-2-application-profile-yml" tabindex="-1"><a class="header-anchor" href="#_2-9-2-application-profile-yml" aria-hidden="true">#</a> 2.9.2 /{application}-{profile}.yml</h5><p>\u9ED8\u8BA4\u53BBmaster\u5206\u652F\u627E\uFF0C\u6240\u4EE5\u8FD9\u91CC\u4E0D\u5199\u5206\u652F</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634222797922-7cf048b2-0ee8-47ad-b584-58e0a8fc9cd5.png" alt="img"></p><p>\u8FD9\u91CC\u9700\u8981\u5728yml\u6587\u4EF6\u4E2D\u8BBE\u7F6Espring.cloud.config.server.git.default-label=main\uFF08github\u66F4\u65B0\u540Emaster\u5206\u652F\u90FD\u6210\u4E86main\u5206\u652F\uFF09</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634223100882-8523948c-8bd5-4ec2-824d-1ae4a6aa4350.png" alt="img"></p>',6),Ft={href:"http://localhost:3344/config-dev.yaml",target:"_blank",rel:"noopener noreferrer"},Lt=a("http://localhost:3344/config-dev.yaml"),Vt={href:"http://localhost:3344/config-test.yaml",target:"_blank",rel:"noopener noreferrer"},Nt=a("http://localhost:3344/config-test.yaml"),zt={href:"http://localhost:3344/config-prod.yaml",target:"_blank",rel:"noopener noreferrer"},Gt=a("http://localhost:3344/config-prod.yaml"),Dt=n("p",null,[n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634223029528-0078c39f-6a4c-4ffd-b51b-e38042746962.png",alt:"img"})],-1),Ut=n("h5",{id:"_2-9-3-application-profile-label",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2-9-3-application-profile-label","aria-hidden":"true"},"#"),a(" 2.9.3 /{application}/{profile}[/{label}]")],-1),Zt=n("p",null,"\u9006\u5199\u6CD5",-1),Qt=n("p",null,[n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634259393645-06bff65f-946d-4f01-8ff2-53b5239861dc.png",alt:"img"})],-1),Xt={href:"http://localhost:3344/config/dev/master",target:"_blank",rel:"noopener noreferrer"},Wt=a("http://localhost:3344/config/dev/master"),Yt={href:"http://localhost:3344/config/test/master",target:"_blank",rel:"noopener noreferrer"},$t=a("http://localhost:3344/config/test/master"),Kt={href:"http://localhost:3344/config/prod/master",target:"_blank",rel:"noopener noreferrer"},Jt=a("http://localhost:3344/config/prod/master"),np=p(`<p>\u5F97\u5230\u7684\u7ED3\u679C\u662FJson\u5B57\u7B26\u4E32</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634263956940-d04543c0-66fd-42f2-bc47-feac8bba26aa.png" alt="img"></p><h4 id="_2-10-\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#_2-10-\u603B\u7ED3" aria-hidden="true">#</a> 2.10 \u603B\u7ED3</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634264581928-7fe9bca6-f957-4f4c-8728-153a0a05ef87.png" alt="img"></p><p><strong>\u6210\u529F\u5B9E\u73B0\u4E86SpringCloud\u901A\u8FC7GitHub\u83B7\u53D6\u914D\u7F6E\u4FE1\u606F</strong></p><h3 id="\u4E09\u3001config\u5BA2\u6237\u7AEF\u914D\u7F6E\u4E0E\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001config\u5BA2\u6237\u7AEF\u914D\u7F6E\u4E0E\u6D4B\u8BD5" aria-hidden="true">#</a> \u4E09\u3001Config\u5BA2\u6237\u7AEF\u914D\u7F6E\u4E0E\u6D4B\u8BD5</h3><p>\u4E0A\u9762\u6211\u4EEC\u7684ConfigServer\u8FDE\u63A5\u4E0A\u4E86GitHub\uFF0C\u6210\u529F\u7684\u4ECEGitHub\u4E0A\u83B7\u53D6\u5230\u4E86config\u4FE1\u606F</p><p>\u73B0\u5728\u6211\u4EEC\u914D\u7F6E\u5BA2\u6237\u7AEF\uFF0C\u5BA2\u6237\u7AEF\u4ECE\u914D\u7F6E\u4E2D\u5FC3\uFF08Config Server\uFF09\u83B7\u53D6\u914D\u7F6E\u4FE1\u606F</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634269802115-7358c0e9-e95e-4d14-a931-6cb20e2ab41a.png" alt="img"></p><h4 id="_3-1-\u65B0\u5EFAcloud-config-client-3355" tabindex="-1"><a class="header-anchor" href="#_3-1-\u65B0\u5EFAcloud-config-client-3355" aria-hidden="true">#</a> 3.1 \u65B0\u5EFAcloud-config-client-3355</h4><h4 id="_3-2-pom-2" tabindex="-1"><a class="header-anchor" href="#_3-2-pom-2" aria-hidden="true">#</a> 3.2 pom</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jdk8cloud2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-config-client-3355<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--\u8FD9\u91CC\u5C31\u662F\u5BA2\u6237\u7AEF\u7684SpringCloud config \u56E0\u4E3A\u662F\u5BA2\u6237\u7AEF\u6240\u4EE5\u6CA1\u6709server--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
      
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
      
      	<span class="token comment">&lt;!--web/actuator\u8FD9\u4E24\u4E2A\u4E00\u822C\u4E00\u8D77\u4F7F\u7528\uFF0C\u5199\u5728\u4E00\u8D77--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
      
				<span class="token comment">&lt;!--\u901A\u7528\u914D\u7F6E--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3344\u662Fserver\u7AEF\u6240\u4EE5\u4F9D\u8D56<code>spring-cloud-starter-config-server</code>\u540E\u9762\u6709\u4E00\u4E2Aserver\uFF0C\u800C3355\u5B9A\u4F4D\u662F\u5BA2\u6237\u7AEF\uFF0C\u6240\u4EE5\u53EA\u6709<code>spring-cloud-starter-config</code></p><h4 id="_3-3-bootstrap-yml" tabindex="-1"><a class="header-anchor" href="#_3-3-bootstrap-yml" aria-hidden="true">#</a> 3.3 bootstrap.yml</h4><p>\u4E3A\u4E86\u914D\u7F6E\u6587\u4EF6\u7684\u52A0\u8F7D\u987A\u5E8F\u548C\u5206\u7EA7\u7BA1\u7406\uFF0C\u6211\u4EEC\u8FD9\u91CC\u4F7F\u7528boostrap.yml</p><ul><li>application.yml\u662F\u7528\u6237\u7EA7\u7684\u8D44\u6E90\u914D\u7F6E\u9879</li><li>boostrap.yml\u662F\u7CFB\u7EDF\u7EA7\u7684\uFF0C\u4F18\u5148\u7EA7\u66F4\u9AD8</li></ul><p>Spring Cloud\u4F1A\u521B\u5EFA\u4E00\u4E2A\u201CBootstrap Context\u201D\uFF0C\u4F5C\u4E3ASpring\u5E94\u7528\u7684<code>Application Context</code>\u7684\u7236\u4E0A\u4E0B\u6587\u3002\u521D\u59CB\u5316\u7684\u65F6\u5019\uFF0C<code>Bootstrap Context</code>\u8D1F\u8D23\u4ECE\u5916\u90E8\u6E90\u52A0\u8F7D\u914D\u7F6E\u5C5E\u6027\u5E76\u89E3\u6790\u914D\u7F6E\u3002\u8FD9\u4E24\u4E2A\u4E0A\u4E0B\u6587\u5171\u4EAB\u4E00\u4E2A\u4ECE\u5916\u90E8\u83B7\u53D6\u7684<code>Environment</code>\u3002</p><p>\u8981\u5C06Client\u6A21\u5757\u4E0B\u7684application.yml\u6587\u4EF6\u6539\u4E3Abootstrap.yml,\u8FD9\u662F\u5F88\u5173\u952E\u7684\uFF0C\u56E0\u4E3Abootstrap.yml\u662F\u6BD4application.yml\u5148\u52A0\u8F7D\u7684\u3002bootstrap.yml\u4F18\u5148\u7EA7\u9AD8\u4E8Eapplication.yml.</p><p>\u4F7F\u7528spring cloud 2020\u7684\u540C\u5B66 \u9700\u8981\u5F00\u542Fbootstrap\u652F\u6301 \u8981\u52A0\u4E00\u4E2Abootstrap\u7684\u4F9D\u8D56\uFF0C\u542F\u52A8\u62A5\u9519\u7684\u5F15\u5165spring-cloud-starter-bootstrap</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">3355</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>client
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token comment">##Config\u5BA2\u6237\u7AEF\u914D\u7F6E</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">label</span><span class="token punctuation">:</span> main <span class="token comment">##\u5206\u652F\u540D\u79F0 \u4EE5\u524D\u662Fmaster</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> config <span class="token comment">##\u914D\u7F6E\u6587\u4EF6\u540D\u79F0</span>
      <span class="token key atrule">profile</span><span class="token punctuation">:</span> dev <span class="token comment">##\u8BFB\u53D6\u540E\u7F00\u540D\u79F0   \u4E0A\u8FF03\u4E2A\u7EFC\u5408\uFF1Amain\u5206\u652F\u4E0Aconfig-dev.yml\u7684\u914D\u7F6E\u6587\u4EF6\u88AB\u8BFB\u53D6http://config-3344.com:3344/master/config-dev.yml</span>
      <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">3344</span> <span class="token comment">##\u914D\u7F6E\u4E2D\u5FC3\u5730\u5740k</span>

<span class="token comment">##\u670D\u52A1\u6CE8\u518C\u5230eureka\u5730\u5740</span>
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7001/eureka<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7002/eureka
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634280406602-aadd5584-96ce-4605-8ef6-6d82642ba31e.png" alt="img"></p><h4 id="_3-4-\u4E3B\u542F\u52A8\u7C7B-2" tabindex="-1"><a class="header-anchor" href="#_3-4-\u4E3B\u542F\u52A8\u7C7B-2" aria-hidden="true">#</a> 3.4 \u4E3B\u542F\u52A8\u7C7B</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>springcloud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>eureka<span class="token punctuation">.</span></span><span class="token class-name">EnableEurekaClient</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigClientMain3355</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ConfigClientMain3355</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-5-\u4E1A\u52A1\u7C7B" tabindex="-1"><a class="header-anchor" href="#_3-5-\u4E1A\u52A1\u7C7B" aria-hidden="true">#</a> 3.5 \u4E1A\u52A1\u7C7B</h4><p>SpringCloud Config\u80FD\u591F\u5C06\u914D\u7F6E\u4FE1\u606F\u4EE5REST\u7A97\u53E3\u7684\u5F62\u5F0F\u66B4\u9732</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Value</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigClientController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${config.info}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> configInfo<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/configInfo&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getConfigInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> configInfo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-6-\u6D4B\u8BD5-1" tabindex="-1"><a class="header-anchor" href="#_3-6-\u6D4B\u8BD5-1" aria-hidden="true">#</a> 3.6 \u6D4B\u8BD5</h4><p>\u914D\u7F6E\u4E2D\u5FC3\u548C\u5BA2\u6237\u7AEF\u90FD\u6CE8\u518C\u8FDB\u4E86eureka</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634282238575-c9429e0b-c8de-4ab5-8fdd-cd664f81eda4.png" alt="img"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634282438652-02e0202b-eaaf-4710-b6b2-8e390c7497eb.png" alt="img">\u6D4B\u8BD5\u6210\u529F</p><p><strong>\u6210\u529F\u5B9E\u73B0\u4E86\u5BA2\u6237\u7AEF3355\u8BBF\u95EESpringCloud Config3344\u901A\u8FC7GitHub\u83B7\u53D6\u914D\u7F6E\u4FE1\u606F</strong></p>`,31),ap=a("\u8FD9\u91CC\u5176\u4ED6\u535A\u4E3B\u6709\u51FA\u73B0\u95EE\u9898"),sp={href:"https://juejin.cn/post/6850418112773734407##heading-11",target:"_blank",rel:"noopener noreferrer"},tp=a("SpringCloud-Config\u914D\u7F6E"),pp=a("\uFF0C\u53C2\u770B\u535A\u5BA2\u4E0A\u7684\u89E3\u51B3\u529E\u6CD5\uFF0C\u6211\u5E76\u6CA1\u6709\u9047\u5230\u76F8\u540C\u7684\u95EE\u9898\uFF0C\u76F4\u63A5\u6210\u529F\u3002"),ep=p(`<h4 id="_3-7-\u95EE\u9898\u968F\u4E4B\u800C\u6765\u2014\u2014\u5206\u5E03\u5F0F\u914D\u7F6E\u7684\u52A8\u6001\u5237\u65B0\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_3-7-\u95EE\u9898\u968F\u4E4B\u800C\u6765\u2014\u2014\u5206\u5E03\u5F0F\u914D\u7F6E\u7684\u52A8\u6001\u5237\u65B0\u95EE\u9898" aria-hidden="true">#</a> 3.7 \u95EE\u9898\u968F\u4E4B\u800C\u6765\u2014\u2014\u5206\u5E03\u5F0F\u914D\u7F6E\u7684\u52A8\u6001\u5237\u65B0\u95EE\u9898</h4><p>\u6211\u4EEC\u5B9E\u73B0\u4E86\u5BA2\u6237\u7AEF3355\u901A\u8FC7Config3344\u83B7\u53D6GithHub\u4E0A\u7684\u914D\u7F6E\u4FE1\u606F\uFF0C\u90A3\u4E48\u73B0\u5728\u9762\u4E34\u53E6\u5916\u4E00\u4E2A\u95EE\u9898\uFF1A</p><p>Linux\u8FD0\u7EF4\u4FEE\u6539GitHub\u4E0A\u7684\u914D\u7F6E\u6587\u4EF6\u5185\u5BB9\u505A\u8C03\u6574</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634283066407-b42e64a7-432f-4385-b5c9-00740ce3d0a3.png" alt="img"></p><p>\u5237\u65B03344\uFF0C\u53D1\u73B0ConfigServer\u914D\u7F6E\u4E2D\u5FC3\u7ACB\u523B\u54CD\u5E94</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634283074981-481f3ea4-6e00-45a9-a052-126d4aa38972.png" alt="img"></p><p>\u5237\u65B03355\uFF0C\u53D1\u73B0ConfigClient\u5BA2\u6237\u7AEF\u6CA1\u6709\u4EFB\u4F55\u54CD\u5E94</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634283081828-ebe93ddd-edf3-46ef-bd94-5d7930532970.png" alt="img">3355\u6CA1\u6709\u53D8\u5316\u9664\u975E\u81EA\u5DF1\u91CD\u542F\u6216\u8005\u91CD\u65B0\u52A0\u8F7D\uFF0C\u96BE\u5230\u6BCF\u6B21\u8FD0\u7EF4\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6\uFF0C\u5BA2\u6237\u7AEF\u90FD\u9700\u8981\u91CD\u542F\uFF1F\uFF1F\u5669\u68A6</p><h3 id="\u56DB\u3001config\u5BA2\u6237\u7AEF\u4E4B\u52A8\u6001\u5237\u65B0" tabindex="-1"><a class="header-anchor" href="#\u56DB\u3001config\u5BA2\u6237\u7AEF\u4E4B\u52A8\u6001\u5237\u65B0" aria-hidden="true">#</a> \u56DB\u3001Config\u5BA2\u6237\u7AEF\u4E4B\u52A8\u6001\u5237\u65B0</h3><p>\u907F\u514D\u6BCF\u6B21\u66F4\u65B0\u914D\u7F6E\u90FD\u8981\u91CD\u542F\u5BA2\u6237\u7AEF\u5FAE\u670D\u52A13355\uFF0C\u9700\u8981\u4FEE\u65393355\u6A21\u5757</p><h4 id="_4-1-pom\u5F15\u5165actuator\u76D1\u63A7" tabindex="-1"><a class="header-anchor" href="#_4-1-pom\u5F15\u5165actuator\u76D1\u63A7" aria-hidden="true">#</a> 4.1 pom\u5F15\u5165actuator\u76D1\u63A7</h4><p>\u4E00\u822C\u6211\u4EEC\u5728\u65B0\u5EFA\u5FAE\u670D\u52A1\u6A21\u5757\u7684\u65F6\u5019\u90FD\u4F1A\u5F15\u5165web\u8DDFactuator\u8FD9\u4E24\u4E2A\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--web/actuator\u8FD9\u4E24\u4E2A\u4E00\u822C\u4E00\u8D77\u4F7F\u7528\uFF0C\u5199\u5728\u4E00\u8D77--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-2-\u4FEE\u6539yml-\u66B4\u9732\u76D1\u63A7\u7AEF\u53E3" tabindex="-1"><a class="header-anchor" href="#_4-2-\u4FEE\u6539yml-\u66B4\u9732\u76D1\u63A7\u7AEF\u53E3" aria-hidden="true">#</a> 4.2 \u4FEE\u6539yml\uFF0C\u66B4\u9732\u76D1\u63A7\u7AEF\u53E3</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634283643811-03fea168-5d6c-4491-8326-df99dd72c744.png" alt="img"></p><p>2.0.0\u7248\u672C\u7684SpringBoot\u7684actuator\u542F\u52A8\u7AEF\u70B9\u76D1\u63A7web\u7AEF\u9ED8\u8BA4\u52A0\u8F7D\u9ED8\u8BA4\u53EA\u6709\u4E24\u4E2Ainfo, health\u53EF\u89C1\u7684\u9875\u9762\u8282\u70B9\u3002 \u5982\u679C\u9700\u8981\u663E\u793A\u66F4\u591A\u9700\u8981\u5728application.properties\u914D\u7F6E\u6587\u4EF6\u4E2D\u6DFB\u52A0 management.endpoints.web.exposure.include=* management.endpoints.web.exposure.exclude=env,beans</p><p>include=* \u8868\u793A\u5305\u542B\u6240\u6709\u8282\u70B9\u9875\u9762 \uFF0Cexclude=env,beans \u8868\u793A\u6392\u9664env\u3001beans</p><h4 id="_4-3-\u5728\u4E1A\u52A1\u7C7B\u4E0A\u52A0\u4E00\u4E2A-refreshscope\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_4-3-\u5728\u4E1A\u52A1\u7C7B\u4E0A\u52A0\u4E00\u4E2A-refreshscope\u6CE8\u89E3" aria-hidden="true">#</a> 4.3 \u5728\u4E1A\u52A1\u7C7B\u4E0A\u52A0\u4E00\u4E2A@RefreshScope\u6CE8\u89E3</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Value</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>context<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RefreshScope</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RefreshScope</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigClientController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${config.info}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> configInfo<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/configInfo&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getConfigInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> configInfo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-4-\u6D4B\u8BD5-3355\u8FD8\u662F\u6CA1\u6709\u52A8\u6001\u5237\u65B0" tabindex="-1"><a class="header-anchor" href="#_4-4-\u6D4B\u8BD5-3355\u8FD8\u662F\u6CA1\u6709\u52A8\u6001\u5237\u65B0" aria-hidden="true">#</a> 4.4 \u6D4B\u8BD5\uFF1A3355\u8FD8\u662F\u6CA1\u6709\u52A8\u6001\u5237\u65B0</h4><p>\u53D1\u73B0GitHub\u4E0A\u4FEE\u6539\u540E\uFF0C3355\u8FD8\u662F\u6CA1\u6709\u5237\u65B0</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634284046376-2dddb1c2-7595-4b56-9100-d92ca2550595.png" alt="img"></p><h4 id="_4-5-\u9700\u8981\u8FD0\u7EF4\u4EBA\u5458\u53D1\u9001post\u8BF7\u6C42\u5237\u65B03355" tabindex="-1"><a class="header-anchor" href="#_4-5-\u9700\u8981\u8FD0\u7EF4\u4EBA\u5458\u53D1\u9001post\u8BF7\u6C42\u5237\u65B03355" aria-hidden="true">#</a> 4.5 \u9700\u8981\u8FD0\u7EF4\u4EBA\u5458\u53D1\u9001Post\u8BF7\u6C42\u5237\u65B03355</h4><p>\u6211\u4EEC\u8FD8\u9700\u8981\u8BA9\u8FD0\u7EF4\u4EBA\u5458\u53D1\u9001\u4E00\u4E0BPOST\u8BF7\u6C42\uFF0C\u5237\u65B0\u4E00\u4E0B3355 \u5FC5\u987B\u662FPost\u8BF7\u6C42</p>`,24),op=a('curl -X POST "'),cp={href:"http://localhost:3355/actuator/refresh",target:"_blank",rel:"noopener noreferrer"},lp=a("http://localhost:3355/actuator/refresh"),ip=a('"'),up=p('<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634284223700-dfb6230f-7f30-44ce-a173-9c8d9ef1067b.png" alt="img"></p><p>\u53D1\u9001post\u8BF7\u6C42\u5237\u65B0\u540E\uFF0C\u5BA2\u6237\u7AEF3355\u6B63\u5E38</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634284233565-4b49e467-1c0a-4f09-9ed6-75d3417556c7.png" alt="img"></p><h4 id="_4-6-\u591A\u4E2A\u5FAE\u670D\u52A1\u5BA2\u6237\u7AEF-\u96BE\u9053\u6BCF\u4E2A\u5FAE\u670D\u52A1\u90FD\u8981\u624B\u52A8\u5237\u65B0" tabindex="-1"><a class="header-anchor" href="#_4-6-\u591A\u4E2A\u5FAE\u670D\u52A1\u5BA2\u6237\u7AEF-\u96BE\u9053\u6BCF\u4E2A\u5FAE\u670D\u52A1\u90FD\u8981\u624B\u52A8\u5237\u65B0" aria-hidden="true">#</a> 4.6 \u591A\u4E2A\u5FAE\u670D\u52A1\u5BA2\u6237\u7AEF\uFF0C\u96BE\u9053\u6BCF\u4E2A\u5FAE\u670D\u52A1\u90FD\u8981\u624B\u52A8\u5237\u65B0\uFF1F</h4><ul><li>\u5728\u5FAE\u670D\u52A1\u591A\u7684\u60C5\u51B5\u4E0B\uFF0C\u6BCF\u4E2A\u5FAE\u670D\u52A1\u90FD\u9700\u8981\u6267\u884C\u4E00\u4E2Apost\u8BF7\u6C42\uFF0C\u624B\u52A8\u5237\u65B0\uFF1F</li><li>\u53EF\u5426\u5E7F\u64AD\uFF0C\u4E00\u6B21\u901A\u77E5\uFF0C\u5904\u5904\u751F\u6548\uFF1F \u5927\u8303\u56F4\u7684\u5B9E\u73B0\u81EA\u52A8\u5237\u65B0</li><li>\u53EF\u80FD\u6709\u8FD9\u79CD\u60C5\u51B5\uFF1A100\u53F0\u673A\u5668\uFF0C\u6709\u5F97\u4E0D\u8981\u6C42\u5B9E\u65F6\u5237\u65B0\u3002\u6211\u4EEC\u60F3\u5B9E\u73B0\u8BE5\u5237\u65B0\u7684\u5237\u65B0\uFF0C\u4E0D\u60F3\u5237\u65B0\u7684\u4E0D\u5237\u65B0\uFF0C\u600E\u4E48\u5B9E\u73B0\uFF1F</li></ul><p>\u89E3\u51B3\u65B9\u6CD5\u2014\u2014<strong>Bus\u603B\u7EBF</strong>\u3002</p><h2 id="_10-\u670D\u52A1\u6D88\u606F\u603B\u7EBF\u2014\u2014springcloud-bus" tabindex="-1"><a class="header-anchor" href="#_10-\u670D\u52A1\u6D88\u606F\u603B\u7EBF\u2014\u2014springcloud-bus" aria-hidden="true">#</a> 10.\u670D\u52A1\u6D88\u606F\u603B\u7EBF\u2014\u2014SpringCloud Bus</h2><p>\u4E0A\u4E00\u7AE0\u6211\u4EEC\u8BB2\u4E86Config\uFF0C\u5176\u6240\u80FD\u8FBE\u5230\u7684\u6781\u9650\u4E5F\u53EA\u662F\u901A\u8FC7\u53D1\u9001\u4E00\u4E2APOST\u8BF7\u6C42\uFF0C\u624B\u52A8\u7248\u7684\u5B9E\u73B0\u52A8\u6001\u5237\u65B0\u3002 \u6211\u4EEC\u60F3\u89E3\u51B3\u8FD9\u6837\u7684\u51E0\u4E2A\u60C5\u5F62\uFF1A</p><ul><li>GitHub\u4E0A\u7684\u914D\u7F6E\u6587\u4EF6\u4FEE\u6539\u540E\uFF0C\u53EF\u5426\u5E7F\u64AD\u4E00\u4E0B\uFF0C\u4E0D\u7528\u6BCF\u4E2A\u5FAE\u670D\u52A1\u90FD\u901A\u8FC7\u53D1\u9001POST\u8BF7\u6C42\u52A8\u6001\u5237\u65B0\u3002</li><li>\u53EF\u4E0D\u53EF\u4EE5\u8BE5\u5237\u65B0\u7684\u5237\u65B0\uFF0C\u4E0D\u60F3\u5237\u65B0\u7684\u4E0D\u5237\u65B0\u3002</li></ul><p>\u5E26\u7740\u8FD9\u4E9B\u95EE\u9898\uFF0C\u6211\u4EEC\u6765\u5230\u672C\u7AE0Bus\u7684\u5B66\u4E60\uFF0C\u4ED6\u662F\u5BF9Config\u7684\u589E\u5F3A\u3002</p><p>\u4E3B\u8981\u5185\u5BB9\uFF1A</p><ol><li>\u6982\u8FF0</li><li>RabbitMQ\u73AF\u5883\u914D\u7F6E</li><li>SpringCloud Bus\u52A8\u6001\u5237\u65B0\u5168\u5C40\u5E7F\u64AD</li><li>SpringCloud Bus\u52A8\u6001\u5237\u65B0\u9876\u70B9\u901A\u77E5\u3002</li></ol><h3 id="_1\u3001\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u6982\u8FF0" aria-hidden="true">#</a> 1\u3001\u6982\u8FF0</h3><h4 id="_1-1-\u662F\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#_1-1-\u662F\u4EC0\u4E48" aria-hidden="true">#</a> 1.1 \u662F\u4EC0\u4E48</h4><p>\u6211\u4EEC\u60F3\u5B9E\u73B0\u5206\u5E03\u5F0F\u7684\u81EA\u52A8\u5237\u65B0\u914D\u7F6E\u529F\u80FD\uFF0C\u4E0D\u662F\u901A\u8FC7\u624B\u52A8\u53D1\u9001POST\u8BF7\u6C42\u5B9E\u73B0\u5237\u65B0\u3002 SpringCloudBus\u914D\u5408SpringCloudConfig\u4F7F\u7528\u53EF\u4EE5\u5B9E\u73B0\u914D\u7F6E\u7684\u52A8\u6001\u5237\u65B0\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634306160215-ee2d543b-c798-4984-bb2d-7b76316528a6.png" alt="img"></p><p>\u914D\u7F6E\u66F4\u65B0\u540E\uFF0C\u5C06A\u5237\u65B0\u4E00\u4E0B\uFF08\u63A8\u7ED9A\uFF09\uFF0C\u7136\u540E\u901A\u8FC7\u603B\u7EBF\u201C\u4F20\u67D3\u201D\u7ED9\u4E86\u5176\u4ED6\u7684\u5FAE\u670D\u52A1\u3002</p><p>Bus\u652F\u6301\u4E24\u79CD\u6D88\u606F\u4EE3\u7406\uFF1ARabbitMQ\u548CKafka</p><h4 id="_1-2-\u80FD\u5E72\u561B" tabindex="-1"><a class="header-anchor" href="#_1-2-\u80FD\u5E72\u561B" aria-hidden="true">#</a> 1.2 \u80FD\u5E72\u561B</h4><p>Spring Cloud Bus\u80FD\u7BA1\u7406\u548C\u4F20\u64AD\u5206\u5E03\u5F0F\u7CFB\u7EDF\u95F4\u7684\u6D88\u606F\uFF0C\u5C31\u50CF\u4E00\u4E2A\u5206\u5E03\u5F0F\u6267\u884C\u5668\uFF0C\u53EF\u7528\u4E8E\u5E7F\u64AD\u72B6\u6001\u66F4\u6539\u3001\u4E8B\u4EF6\u63A8\u9001\u7B49\uFF0C\u4E5F\u53EF\u4EE5\u5F53\u4F5C\u5FAE\u670D\u52A1\u95F4\u7684\u901A\u4FE1\u901A\u9053\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634306374683-61fd06d3-efb8-4339-8872-2531018a0bf0.png" alt="img"></p><p>\u8FD9\u91CC\u662F\u63A8\u9001\u7ED9ConfigServer\uFF0C\u8DDF\u4E0A\u9762\u63A8\u9001\u7ED9\u5BA2\u6237\u7AEF\u662F\u4E0D\u4E00\u6837\u7684\u3002</p><h4 id="_1-3-\u4E3A\u4EC0\u4E48\u88AB\u79F0\u4E3A\u603B\u7EBF" tabindex="-1"><a class="header-anchor" href="#_1-3-\u4E3A\u4EC0\u4E48\u88AB\u79F0\u4E3A\u603B\u7EBF" aria-hidden="true">#</a> 1.3 \u4E3A\u4EC0\u4E48\u88AB\u79F0\u4E3A\u603B\u7EBF</h4><p>**\u4EC0\u4E48\u662F\u603B\u7EBF\uFF1A**\u5728\u5FAE\u670D\u52A1\u67B6\u6784\u7684\u7CFB\u7EDF\u4E2D\uFF0C\u901A\u5E38\u4F1A\u4F7F\u7528\u8F7B\u91CF\u7EA7\u7684\u6D88\u606F\u4EE3\u7406\u6765\u6784\u5EFA\u4E00\u4E2A\u5171\u7528\u7684\u6D88\u606F\u4E3B\u9898\uFF0C\u5E76\u8BA9\u7CFB\u7EDF\u4E2D\u6240\u6709\u5FAE\u670D\u52A1\u5B9E\u4F8B\u90FD\u8FDE\u63A5\u4E0A\u6765\u3002\u7531\u4E8E\u8BE5\u4E3B\u9898\u4E2D\u4EA7\u751F\u7684\u6D88\u606F\u4F1A\u88AB\u6240\u6709\u5B9E\u4F8B\u76D1\u542C\u548C\u6D88\u8D39\uFF0C\u6240\u4EE5\u79F0\u5B83\u4E3A\u6D88\u606F\u603B\u7EBF\u3002\u5728\u603B\u7EBF\u4E0A\u7684\u5404\u4E2A\u5B9E\u4F8B\uFF0C\u90FD\u53EF\u4EE5\u65B9\u4FBF\u5730\u5E7F\u64AD\u4E00\u4E9B\u9700\u8981\u8BA9\u5176\u4ED6\u8FDE\u63A5\u5728\u8BE5\u4E3B\u9898\u4E0A\u7684\u5B9E\u4F8B\u90FD\u77E5\u9053\u7684\u6D88\u606F\u3002</p><p>**\u57FA\u672C\u539F\u7406\uFF1A**ConfigClient\u5B9E\u4F8B\u90FD\u76D1\u542CMQ\u4E2D\u540C\u4E00\u4E2Atopic(\u9ED8\u8BA4\u662FspringCloudBus)\u3002\u5F53\u4E00\u4E2A\u670D\u52A1\u5237\u65B0\u6570\u636E\u7684\u65F6\u5019\uFF0C\u5B83\u4F1A\u628A\u8FD9\u4E2A\u4FE1\u606F\u653E\u5165\u5230Topic\u4E2D\uFF0C\u8FD9\u6837\u5176\u5B83\u76D1\u542C\u540C\u4E00Topic\u7684\u670D\u52A1\u5C31\u80FD\u5F97\u5230\u901A\u77E5\uFF0C\u7136\u540E\u53BB\u66F4\u65B0\u81EA\u8EAB\u7684\u914D\u7F6E\u3002</p><h3 id="_2\u3001rabbitmq\u73AF\u5883\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_2\u3001rabbitmq\u73AF\u5883\u914D\u7F6E" aria-hidden="true">#</a> 2\u3001RabbitMQ\u73AF\u5883\u914D\u7F6E</h3><h4 id="_2-1-\u5B89\u88C5erlang" tabindex="-1"><a class="header-anchor" href="#_2-1-\u5B89\u88C5erlang" aria-hidden="true">#</a> 2.1 \u5B89\u88C5Erlang</h4>',27),rp={href:"https://www.erlang-solutions.com/downloads/",target:"_blank",rel:"noopener noreferrer"},kp=a("https://www.erlang-solutions.com/downloads/"),dp=a(" \u4E0B\u8F7D\u5730\u5740"),gp=n("p",null,"\u5B89\u88C5Erlang\u540E\u4F1A\u81EA\u52A8\u4FEE\u6539\u7CFB\u7EDF\u53D8\u91CF\uFF0C\u4F46\u662F\u9700\u8981\u91CD\u542F\u7CFB\u7EDF\u624D\u80FD\u751F\u6548\u3002\u6211\u4EEC\u53EF\u4EE5\u624B\u52A8\u8BBE\u7F6E\u7CFB\u7EDF\u53D8\u91CF\u4E0D\u91CD\u542F\u3002",-1),mp=n("p",null,"cmd\u4E2D\u8F93\u5165\u4EE5\u4E0B\u547D\u4EE4\uFF1A",-1),vp=n("p",null,"C:\\Users\\Administrator>set ERLANG_HOME=H:\\DevelopmentTools\\erl-24.1 \uFF08\u81EA\u5DF1\u7684\u5B89\u88C5\u8DEF\u5F84\uFF09",-1),bp=n("p",null,"\u6216\u8005\u662F\u5728\u7CFB\u7EDF\u73AF\u5883\u53D8\u91CF\u4E2D\u624B\u52A8\u6DFB\u52A0",-1),hp=n("h4",{id:"_2-2-\u5B89\u88C5rabbitmq",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2-2-\u5B89\u88C5rabbitmq","aria-hidden":"true"},"#"),a(" 2.2 \u5B89\u88C5RabbitMQ")],-1),yp={href:"https://rabbitmq.com/install-windows.html##installer",target:"_blank",rel:"noopener noreferrer"},fp=a("https://rabbitmq.com/install-windows.html##installer"),_p=n("p",null,"\u8FDB\u5165RabbitMQ\u5B89\u88C5\u76EE\u5F55\u4E0B\u7684sbin\u76EE\u5F55\uFF1AH:\\DevelopmentTools\\RabbitMQ Server\\rabbitmq_server-3.9.7\\sbin \uFF0C\u6253\u5F00cmd\u8F93\u5165\u5982\u4E0B\u547D\u4EE4\uFF1A",-1),xp=n("p",null,"rabbitmq-plugins enable rabbitmq_management",-1),qp=n("p",null,[n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634367363780-b516d2c3-7a7f-490e-9fe2-e3569afceaa9.png",alt:"img"})],-1),wp=n("p",null,"\u8FD9\u6837\u5C31\u53EF\u4EE5\u6DFB\u52A0\u53EF\u89C6\u5316\u63D2\u4EF6\u4E86",-1),Ip=n("p",null,[n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634367491623-215945e1-bec2-47ab-9294-14e43cf2d3e4.png",alt:"img"})],-1),Sp=a("\u4EE5\u7BA1\u7406\u5458\u8EAB\u4EFD\u542F\u52A8start\uFF0C\u4E0D\u7136\u4F1A\u62A5\u9519\u3002\u7136\u540E\u6D4B\u8BD5\u662F\u5426\u5B89\u88C5\u6210\u529F\uFF1A"),Cp={href:"http://localhost:15672/",target:"_blank",rel:"noopener noreferrer"},jp=a("http://localhost:15672/"),Pp=a(" \u8D26\u53F7\u5BC6\u7801\u90FD\u662Fguest\u3002\u5B89\u88C5\u6210\u529F\uFF01"),Ep=p(`<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634367660727-81da6f18-cd65-4f70-9f11-049346f59334.png" alt="img"></p><h3 id="_3\u3001springcloud-bus\u52A8\u6001\u5237\u65B0\u5168\u5C40\u5E7F\u64AD" tabindex="-1"><a class="header-anchor" href="#_3\u3001springcloud-bus\u52A8\u6001\u5237\u65B0\u5168\u5C40\u5E7F\u64AD" aria-hidden="true">#</a> 3\u3001SpringCloud Bus\u52A8\u6001\u5237\u65B0\u5168\u5C40\u5E7F\u64AD</h3><p><strong>\u5FC5\u987B\u5148\u5177\u5907\u826F\u597D\u7684RabbitMQ\u73AF\u5883</strong></p><h4 id="_3-1-bus\u52A8\u6001\u5237\u65B0\u5168\u5C40\u5E7F\u64AD\u7684\u8BBE\u8BA1\u601D\u60F3\u548C\u9009\u578B" tabindex="-1"><a class="header-anchor" href="#_3-1-bus\u52A8\u6001\u5237\u65B0\u5168\u5C40\u5E7F\u64AD\u7684\u8BBE\u8BA1\u601D\u60F3\u548C\u9009\u578B" aria-hidden="true">#</a> 3.1 Bus\u52A8\u6001\u5237\u65B0\u5168\u5C40\u5E7F\u64AD\u7684\u8BBE\u8BA1\u601D\u60F3\u548C\u9009\u578B</h4><ul><li>1\u3001\u5229\u7528\u6D88\u606F\u603B\u7EBF\u51FA\u53D1\u4E00\u4E2A\u5BA2\u6237\u7AEF/bus/refresh\uFF0C\u4ECE\u800C\u5237\u65B0\u6240\u6709\u5BA2\u6237\u7AEF\u7684\u914D\u7F6E</li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634368540821-30663224-a42b-4fb6-94b8-c9a686fad746.png" alt="img"></p><ul><li>2\u3001\u5229\u7528\u6D88\u606F\u603B\u7EBF\u63A5\u89E6\u4E00\u4E2A\u670D\u52A1\u7AEFConfigServer\u7684/bus/refresh\u65AD\u70B9\uFF0C\u4ECE\u800C\u5237\u65B0\u6240\u6709\u5BA2\u6237\u7AEF\u7684\u914D\u7F6E</li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634368549852-79390f2a-02f8-4d4a-99f4-ddca8c761e25.png" alt="img"></p><p>\u56FE\u4E8C\u7684\u6846\u67B6\u663E\u7136\u66F4\u5408\u7406\u4E00\u4E9B\uFF0C\u56FE\u4E00\u4E0D\u9002\u5408\u7684\u539F\u56E0\u5982\u4E0B\uFF1A</p><ol><li>\u7834\u574F\u4E86\u5FAE\u670D\u52A1\u7684\u804C\u8D23\u5355\u4E00\u6027\uFF0C\u56E0\u4E3A\u5FAE\u670D\u52A1\u672C\u8EAB\u662F\u4E1A\u52A1\u6A21\u5757\uFF0C\u5B83\u4E0D\u5E94\u8BE5\u627F\u62C5\u914D\u7F6E\u5237\u65B0\u7684\u529F\u80FD</li><li>\u7834\u574F\u4E86\u5FAE\u670D\u52A1\u5404\u7ED3\u70B9\u7684\u5BF9\u7B49\u6027</li><li>\u6709\u4E00\u5B9A\u7684\u5C40\u9650\u6027\uFF1A \u5FAE\u670D\u52A1\u8FC1\u79FB\u65F6\uFF0C\u5B83\u7684\u7F51\u7EDC\u5730\u5740\u5E38\u5E38\u4F1A\u53D1\u751F\u53D8\u5316\uFF0C\u6B64\u65F6\u5982\u679C\u60F3\u8981\u505A\u5230\u81EA\u52A8\u5237\u65B0\uFF0C\u90A3\u5C31\u56DE\u589E\u52A0\u66F4\u591A\u7684\u4FEE\u6539\u3002</li></ol><p>\u6240\u4EE5\u6211\u4EEC\u4F7F\u7528\u7B2C\u4E8C\u79CD\uFF1A\u901A\u77E5\u603B\u7EBF\uFF0C\u603B\u7EBF\u518D\u901A\u77E5\u6240\u6709\u5BA2\u6237\u7AEF\u3002</p><h4 id="_3-2-\u6DFB\u52A0\u4E00\u4E2A\u65B0\u7684cloud-config-client-3366" tabindex="-1"><a class="header-anchor" href="#_3-2-\u6DFB\u52A0\u4E00\u4E2A\u65B0\u7684cloud-config-client-3366" aria-hidden="true">#</a> 3.2 \u6DFB\u52A0\u4E00\u4E2A\u65B0\u7684cloud-config-client-3366</h4><p>\u6F14\u793A\u5E7F\u64AD\u6548\u679C\uFF0C\u589E\u52A0\u590D\u6742\u5EA6\uFF0C\u518D\u4EE53355\u4E3A\u6A21\u677F\u518D\u5236\u4F5C\u4E00\u4E2A3366</p><h5 id="_3-2-1-pom" tabindex="-1"><a class="header-anchor" href="#_3-2-1-pom" aria-hidden="true">#</a> 3.2.1 pom</h5><p>\u4E0E3355\u76F8\u540C</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jdk8cloud2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-config-client-3366<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--\u8FD9\u91CC\u5C31\u662F\u5BA2\u6237\u7AEF\u7684SpringCloud config \u56E0\u4E3A\u662F\u5BA2\u6237\u7AEF\u6240\u4EE5\u6CA1\u6709server--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--web/actuator\u8FD9\u4E24\u4E2A\u4E00\u822C\u4E00\u8D77\u4F7F\u7528\uFF0C\u5199\u5728\u4E00\u8D77--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--\u901A\u7528\u914D\u7F6E--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-2-2-yml" tabindex="-1"><a class="header-anchor" href="#_3-2-2-yml" aria-hidden="true">#</a> 3.2.2 yml</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">3366</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>client
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token comment">##Config\u5BA2\u6237\u7AEF\u914D\u7F6E</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">label</span><span class="token punctuation">:</span> main <span class="token comment">##\u5206\u652F\u540D\u79F0</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> config <span class="token comment">##\u914D\u7F6E\u6587\u4EF6\u540D\u79F0</span>
      <span class="token key atrule">profile</span><span class="token punctuation">:</span> dev <span class="token comment">##\u8BFB\u53D6\u540E\u7F00\u540D\u79F0   \u4E0A\u8FF03\u4E2A\u7EFC\u5408\uFF1Amaster\u5206\u652F\u4E0Aconfig-dev.yml\u7684\u914D\u7F6E\u6587\u4EF6\u88AB\u8BFB\u53D6http://config-3344.com:3344/master/config-dev.yml</span>
      <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">3344</span> <span class="token comment">##\u914D\u7F6E\u4E2D\u5FC3\u5730\u5740</span>

<span class="token comment">##\u670D\u52A1\u6CE8\u518C\u5230eureka\u5730\u5740</span>
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7001/eureka<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7002/eureka

<span class="token comment">## \u66B4\u9732\u76D1\u63A7\u7AEF\u70B9</span>
<span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-2-3-\u4E3B\u542F\u52A8" tabindex="-1"><a class="header-anchor" href="#_3-2-3-\u4E3B\u542F\u52A8" aria-hidden="true">#</a> 3.2.3 \u4E3B\u542F\u52A8</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>springcloud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>eureka<span class="token punctuation">.</span></span><span class="token class-name">EnableEurekaClient</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigClientMain3366</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ConfigClientMain3366</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-2-4-\u4E1A\u52A1\u7C7Bcontroller" tabindex="-1"><a class="header-anchor" href="#_3-2-4-\u4E1A\u52A1\u7C7Bcontroller" aria-hidden="true">#</a> 3.2.4 \u4E1A\u52A1\u7C7Bcontroller</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Value</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>context<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RefreshScope</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RefreshScope</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigClientController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${server.port}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> serverPort<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${config.info}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> configInfo<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/configInfo&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">configInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;serverPort: &quot;</span><span class="token operator">+</span>serverPort<span class="token operator">+</span><span class="token string">&quot;\\t\\n\\n configInfo: &quot;</span><span class="token operator">+</span>configInfo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#\u5206\u6790" aria-hidden="true">#</a> \u5206\u6790</h5>`,23),Rp=a('@Value("'),Mp=n("span",{class:"katex"},[n("span",{class:"katex-mathml"},[n("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[n("semantics",null,[n("mrow",null,[n("mrow",null,[n("mi",null,"s"),n("mi",null,"e"),n("mi",null,"r"),n("mi",null,"v"),n("mi",null,"e"),n("mi",null,"r"),n("mi",{mathvariant:"normal"},"."),n("mi",null,"p"),n("mi",null,"o"),n("mi",null,"r"),n("mi",null,"t")]),n("mi",{mathvariant:"normal"},'"'),n("mo",{stretchy:"false"},")"),n("mtext",null,"\u4ECE\u914D\u7F6E\u6587\u4EF6\u4E2D\u53D6\u524D\u7F00\u4E3A"),n("mo",null,"\u2217"),n("mo",null,"\u2217"),n("mi",null,"s"),n("mi",null,"e"),n("mi",null,"r"),n("mi",null,"v"),n("mi",null,"e"),n("mi",null,"r"),n("mi",{mathvariant:"normal"},"."),n("mi",null,"p"),n("mi",null,"o"),n("mi",null,"r"),n("mi",null,"t"),n("mo",null,"\u2217"),n("mo",null,"\u2217"),n("mtext",null,"\u7684\u503C\uFF1A\u6CE8\u610F\u8FD9\u4E2A\u6A21\u5757\u5173\u8054\u4E86\u4E24\u4E2A"),n("mi",null,"y"),n("mi",null,"m"),n("mi",null,"l"),n("mtext",null,"\u4E00\u4E2A\u662F\u6211\u4EEC"),n("mo",null,"\u2217"),n("mo",null,"\u2217"),n("mtext",null,"\u672C\u5730\u914D\u7F6E\u7684"),n("mi",null,"b"),n("mi",null,"o"),n("mi",null,"o"),n("mi",null,"t"),n("mi",null,"s"),n("mi",null,"t"),n("mi",null,"r"),n("mi",null,"a"),n("mi",null,"p"),n("mi",{mathvariant:"normal"},"."),n("mi",null,"y"),n("mi",null,"m"),n("mi",null,"l"),n("mo",null,"\u2217"),n("mo",null,"\u2217"),n("mtext",null,"\uFF0C\u53E6\u4E00\u4E2A\u662F\u901A\u8FC7"),n("mi",null,"b"),n("mi",null,"o"),n("mi",null,"o"),n("mi",null,"t"),n("mi",null,"s"),n("mi",null,"t"),n("mi",null,"r"),n("mi",null,"a"),n("mi",null,"p"),n("mi",{mathvariant:"normal"},"."),n("mi",null,"y"),n("mi",null,"m"),n("mi",null,"l"),n("mtext",null,"\u5173\u8054\u5230"),n("mn",null,"3344"),n("mtext",null,"\uFF0C\u518D\u5173\u8054\u5230"),n("mo",null,"\u2217"),n("mo",null,"\u2217"),n("mi",null,"G"),n("mi",null,"i"),n("mi",null,"t"),n("mi",null,"H"),n("mi",null,"u"),n("mi",null,"b"),n("mtext",null,"\u4E0A\u7684"),n("mi",null,"c"),n("mi",null,"o"),n("mi",null,"n"),n("mi",null,"f"),n("mi",null,"i"),n("mi",null,"g"),n("mo",null,"\u2212"),n("mi",null,"t"),n("mi",null,"e"),n("mi",null,"x"),n("mi",null,"t"),n("mi",{mathvariant:"normal"},"."),n("mi",null,"y"),n("mi",null,"m"),n("mi",null,"l"),n("mo",null,"\u2217"),n("mo",null,"\u2217"),n("mtext",null,"\u3002\u6240\u4EE5"),n("mi",{mathvariant:"normal"},"@"),n("mi",null,"V"),n("mi",null,"a"),n("mi",null,"l"),n("mi",null,"u"),n("mi",null,"e"),n("mo",{stretchy:"false"},"("),n("mi",{mathvariant:"normal"},'"')]),n("annotation",{encoding:"application/x-tex"},'{server.port}")\u4ECE\u914D\u7F6E\u6587\u4EF6\u4E2D\u53D6\u524D\u7F00\u4E3A**server.port**\u7684\u503C\uFF1A\u6CE8\u610F\u8FD9\u4E2A\u6A21\u5757\u5173\u8054\u4E86\u4E24\u4E2Ayml \u4E00\u4E2A\u662F\u6211\u4EEC**\u672C\u5730\u914D\u7F6E\u7684bootstrap.yml**\uFF0C\u53E6\u4E00\u4E2A\u662F\u901A\u8FC7bootstrap.yml\u5173\u8054\u52303344\uFF0C\u518D\u5173\u8054\u5230**GitHub\u4E0A\u7684config-text.yml**\u3002\u6240\u4EE5@Value("')])])]),n("span",{class:"katex-html","aria-hidden":"true"},[n("span",{class:"base"},[n("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),n("span",{class:"mord"},[n("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"ser"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"v"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"er"),n("span",{class:"mord"},"."),n("span",{class:"mord mathnormal"},"p"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"or"),n("span",{class:"mord mathnormal"},"t")]),n("span",{class:"mord"},'"'),n("span",{class:"mclose"},")"),n("span",{class:"mord cjk_fallback"},"\u4ECE\u914D\u7F6E\u6587\u4EF6\u4E2D\u53D6\u524D\u7F00\u4E3A"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"\u2217"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.8095em","vertical-align":"-0.1944em"}}),n("span",{class:"mord"},"\u2217"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"ser"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"v"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"er"),n("span",{class:"mord"},"."),n("span",{class:"mord mathnormal"},"p"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"or"),n("span",{class:"mord mathnormal"},"t"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"\u2217"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),n("span",{class:"mord"},"\u2217"),n("span",{class:"mord cjk_fallback"},"\u7684\u503C\uFF1A\u6CE8\u610F\u8FD9\u4E2A\u6A21\u5757\u5173\u8054\u4E86\u4E24\u4E2A"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"y"),n("span",{class:"mord mathnormal"},"m"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),n("span",{class:"mord cjk_fallback"},"\u4E00\u4E2A\u662F\u6211\u4EEC"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"\u2217"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),n("span",{class:"mord"},"\u2217"),n("span",{class:"mord cjk_fallback"},"\u672C\u5730\u914D\u7F6E\u7684"),n("span",{class:"mord mathnormal"},"b"),n("span",{class:"mord mathnormal"},"oo"),n("span",{class:"mord mathnormal"},"t"),n("span",{class:"mord mathnormal"},"s"),n("span",{class:"mord mathnormal"},"t"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"r"),n("span",{class:"mord mathnormal"},"a"),n("span",{class:"mord mathnormal"},"p"),n("span",{class:"mord"},"."),n("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"y"),n("span",{class:"mord mathnormal"},"m"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"\u2217"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),n("span",{class:"mord"},"\u2217"),n("span",{class:"mord cjk_fallback"},"\uFF0C\u53E6\u4E00\u4E2A\u662F\u901A\u8FC7"),n("span",{class:"mord mathnormal"},"b"),n("span",{class:"mord mathnormal"},"oo"),n("span",{class:"mord mathnormal"},"t"),n("span",{class:"mord mathnormal"},"s"),n("span",{class:"mord mathnormal"},"t"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"r"),n("span",{class:"mord mathnormal"},"a"),n("span",{class:"mord mathnormal"},"p"),n("span",{class:"mord"},"."),n("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"y"),n("span",{class:"mord mathnormal"},"m"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),n("span",{class:"mord cjk_fallback"},"\u5173\u8054\u5230"),n("span",{class:"mord"},"3344"),n("span",{class:"mord cjk_fallback"},"\uFF0C\u518D\u5173\u8054\u5230"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"\u2217"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),n("span",{class:"mord"},"\u2217"),n("span",{class:"mord mathnormal"},"G"),n("span",{class:"mord mathnormal"},"i"),n("span",{class:"mord mathnormal"},"t"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.08125em"}},"H"),n("span",{class:"mord mathnormal"},"u"),n("span",{class:"mord mathnormal"},"b"),n("span",{class:"mord cjk_fallback"},"\u4E0A\u7684"),n("span",{class:"mord mathnormal"},"co"),n("span",{class:"mord mathnormal"},"n"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f"),n("span",{class:"mord mathnormal"},"i"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"g"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"\u2212"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),n("span",{class:"mord mathnormal"},"t"),n("span",{class:"mord mathnormal"},"e"),n("span",{class:"mord mathnormal"},"x"),n("span",{class:"mord mathnormal"},"t"),n("span",{class:"mord"},"."),n("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"y"),n("span",{class:"mord mathnormal"},"m"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),n("span",{class:"mbin"},"\u2217"),n("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),n("span",{class:"mord"},"\u2217"),n("span",{class:"mord cjk_fallback"},"\u3002\u6240\u4EE5"),n("span",{class:"mord"},"@"),n("span",{class:"mord mathnormal"},"Va"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),n("span",{class:"mord mathnormal"},"u"),n("span",{class:"mord mathnormal"},"e"),n("span",{class:"mopen"},"("),n("span",{class:"mord"},'"')])])],-1),Tp=a('{server.port}")\u4ECEbootstrap.yml\u53D6\u5230\u4E86server.port\u7684\u503C\uFF1B@Value("${'),Hp={href:"http://config.info",target:"_blank",rel:"noopener noreferrer"},Op=a("config.info"),Ap=a('}")\u4ECE\u5173\u8054\u7684'),Bp=n("strong",null,"config-{profile}.yml",-1),Fp=a("\u53D6\u5230\u4E86"),Lp=n("strong",null,"info",-1),Vp=a("\u7684\u503C"),Np=p(`<h4 id="_3-3-\u914D\u7F6E\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_3-3-\u914D\u7F6E\u6848\u4F8B" aria-hidden="true">#</a> 3.3 \u914D\u7F6E\u6848\u4F8B</h4><h5 id="_3-3-1-\u7ED9cloud-config-center-3344\u914D\u7F6E\u4E2D\u5FC3\u670D\u52A1\u7AEF\u6DFB\u52A0\u6D88\u606F\u603B\u7EBF\u652F\u6301" tabindex="-1"><a class="header-anchor" href="#_3-3-1-\u7ED9cloud-config-center-3344\u914D\u7F6E\u4E2D\u5FC3\u670D\u52A1\u7AEF\u6DFB\u52A0\u6D88\u606F\u603B\u7EBF\u652F\u6301" aria-hidden="true">#</a> 3.3.1 \u7ED9cloud-config-center-3344\u914D\u7F6E\u4E2D\u5FC3\u670D\u52A1\u7AEF\u6DFB\u52A0\u6D88\u606F\u603B\u7EBF\u652F\u6301</h5><p>pom:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u6DFB\u52A0\u6D88\u606F\u603B\u7EBFRabbitMQ\u652F\u6301--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-bus-amqp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>yml\uFF1A \u6CE8\u610F\u5BF9\u9F50</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634370899980-1c243a17-6667-413a-8db8-e78f42637d95.png" alt="img"></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">3344</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span>  cloud<span class="token punctuation">-</span>config<span class="token punctuation">-</span>center <span class="token comment">##\u6CE8\u518C\u8FDBEureka\u670D\u52A1\u5668\u7684\u5FAE\u670D\u52A1\u540D</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">server</span><span class="token punctuation">:</span>
        <span class="token key atrule">git</span><span class="token punctuation">:</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/Bear<span class="token punctuation">-</span>Lx/springcloud<span class="token punctuation">-</span>config.git  <span class="token comment">##GitHub\u4E0A\u9762\u7684git\u4ED3\u5E93\u540D\u5B57</span>
<span class="token comment">##          uri: git@github.com:Bear-Lx/springcloud-config.git</span>
          <span class="token comment">## uri \u8FD9\u91CC\u53EF\u4EE5\u5199https\u5730\u5740\u8DDFssh\u5730\u5740\uFF0Chttps\u5730\u5740\u9700\u8981\u914D\u7F6Eusername\u548Cpassword</span>
          <span class="token comment">#####\u641C\u7D22\u76EE\u5F55</span>
          <span class="token key atrule">search-paths</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> springcloud<span class="token punctuation">-</span>config
          <span class="token key atrule">username</span><span class="token punctuation">:</span> Bear<span class="token punctuation">-</span>Lx
          <span class="token key atrule">password</span><span class="token punctuation">:</span> pangtou10086..
          <span class="token key atrule">default-label</span><span class="token punctuation">:</span> main
<span class="token comment">##          skip-ssl-validation: true    ##</span>
      <span class="token comment">#####\u8BFB\u53D6\u5206\u652F</span>
      <span class="token key atrule">label</span><span class="token punctuation">:</span> main   <span class="token comment">## \u4EE5\u524D\u662Fmaster</span>

  <span class="token comment">##rabbitmq\u76F8\u5173\u914D\u7F6E</span>
  <span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">5672</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> guest
    <span class="token key atrule">password</span><span class="token punctuation">:</span> guest

<span class="token comment">###rabbitmq\u76F8\u5173\u914D\u7F6E,\u66B4\u9732bus\u5237\u65B0\u914D\u7F6E\u7684\u7AEF\u70B9</span>
<span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span> <span class="token comment">##\u66B4\u9732bus\u5237\u65B0\u914D\u7F6E\u7684\u7AEF\u70B9</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&#39;bus-refresh&#39;</span>

<span class="token comment">##\u670D\u52A1\u6CE8\u518C\u5230eureka\u5730\u5740</span>
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
<span class="token comment">##      defaultZone: http://localhost:7001/eureka ##\u5355\u673A\u7248</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7001/eureka<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7002/eureka <span class="token comment">##\u96C6\u7FA4\u7248</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-3-2-\u7ED9cloud-config-client-3355\u5BA2\u6237\u7AEF\u6DFB\u52A0\u6D88\u606F\u603B\u7EBF\u652F\u6301" tabindex="-1"><a class="header-anchor" href="#_3-3-2-\u7ED9cloud-config-client-3355\u5BA2\u6237\u7AEF\u6DFB\u52A0\u6D88\u606F\u603B\u7EBF\u652F\u6301" aria-hidden="true">#</a> 3.3.2 \u7ED9cloud-config-client-3355\u5BA2\u6237\u7AEF\u6DFB\u52A0\u6D88\u606F\u603B\u7EBF\u652F\u6301</h5><p>pom:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u6DFB\u52A0\u6D88\u606F\u603B\u7EBFRabbitMQ\u652F\u6301--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-bus-amqp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>yml\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634370972930-bdc880b9-4bf1-4cf4-b92c-e0df3e2b31ff.png" alt="img"></p><h5 id="_3-3-3-\u7ED9cloud-config-client-3366\u5BA2\u6237\u7AEF\u6DFB\u52A0\u6D88\u606F\u603B\u7EBF\u652F\u6301" tabindex="-1"><a class="header-anchor" href="#_3-3-3-\u7ED9cloud-config-client-3366\u5BA2\u6237\u7AEF\u6DFB\u52A0\u6D88\u606F\u603B\u7EBF\u652F\u6301" aria-hidden="true">#</a> 3.3.3 \u7ED9cloud-config-client-3366\u5BA2\u6237\u7AEF\u6DFB\u52A0\u6D88\u606F\u603B\u7EBF\u652F\u6301</h5><p>pom:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u6DFB\u52A0\u6D88\u606F\u603B\u7EBFRabbitMQ\u652F\u6301--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-bus-amqp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>yml\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634370975559-250215a2-26fd-46de-9e1c-f668ff783ae4.png" alt="img"></p><h4 id="_3-4-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_3-4-\u6D4B\u8BD5" aria-hidden="true">#</a> 3.4 \u6D4B\u8BD5</h4><p>\u542F\u52A87001\u30017002\uFF08\u6211\u914D\u4E86eureka\u96C6\u7FA4\uFF09\u30013344\u30013355\u30013366</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634371578967-5e1ad324-66e2-497b-be01-13a0566f639c.png" alt="img"></p><p>\u81EA\u6D4B\u901A\u8FC7</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634371696890-6157fd5a-62b9-49e2-82ed-c9260675391d.png" alt="img"></p><p>\u4FEE\u6539GitHub\u4E0A\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u56E0\u4E3A3355\u548C3366\u90FD\u548Cconfig-dev.yml\u7ED1\u5B9A\uFF0C\u6240\u4EE5\u6211\u4EEC\u4FEE\u6539\u8BE5\u914D\u7F6E\u6587\u4EF6\uFF0C\u7248\u672C\u53F7\u4FEE\u6539\u62106</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634371850099-1ca882eb-cf50-442c-8c19-e632b31c9d3d.png" alt="img"></p><p>\u7ED93344Config-Server\u53D1\u9001Post\u8BF7\u6C42\uFF0C\u5237\u65B03344</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>curl -X POST &quot;http://localhost:3344/actuator/bus-refresh&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634371997308-7e40e5ab-db8a-44cb-8722-67d54fc013dd.png" alt="img"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634372052442-72078a37-43f3-4713-b31f-633aae83139b.png" alt="img"></p><p>\u4E00\u5904\u5237\u65B0\uFF0C\u5904\u5904\u751F\u6548\uFF01</p><h4 id="\u57FA\u672C\u539F\u7406\u56DE\u987E" tabindex="-1"><a class="header-anchor" href="#\u57FA\u672C\u539F\u7406\u56DE\u987E" aria-hidden="true">#</a> \u57FA\u672C\u539F\u7406\u56DE\u987E</h4><p>ConfigClient\u5B9E\u4F8B\u90FD\u76D1\u542CMQ\u4E2D\u540C\u4E00\u4E2Atopic\uFF08\u9ED8\u8BA4\u662FSpringCloudBus\uFF09\u3002 \u5728RabbitMQ\u4E2D\u627E\u5230\u4E86\u8FD9\u4E2Atopic\u8BA2\u9605\u4E3B\u9898/exchange\u8DEF\u7531\u4EA4\u6362\u673A\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634372447044-7569e91e-5ec7-46d2-b562-598c26be87cc.png" alt="img"></p><p>\u5F53\u4E00\u4E2A\u670D\u52A1\u5237\u65B0\u6570\u636E\u65F6\uFF0C\u5B83\u4F1A\u628A\u8FD9\u4E2A\u4FE1\u606F\u653E\u5230Topic\u4E2D\uFF0C\u8FD9\u6837\u5176\u4ED6\u76D1\u542C\u540C\u4E00Topic\u7684\u670D\u52A1\u5C31\u80FD\u5F97\u5230\u901A\u77E5\uFF0C \u7136\u540E\u53BB\u66F4\u65B0\u81EA\u8EAB\u7684\u914D\u7F6E\u3002</p><h3 id="_4\u3001springcloud-bus\u52A8\u6001\u5237\u65B0\u5B9A\u70B9\u901A\u77E5" tabindex="-1"><a class="header-anchor" href="#_4\u3001springcloud-bus\u52A8\u6001\u5237\u65B0\u5B9A\u70B9\u901A\u77E5" aria-hidden="true">#</a> 4\u3001SpringCloud Bus\u52A8\u6001\u5237\u65B0\u5B9A\u70B9\u901A\u77E5</h3><p>\u53EA\u901A\u77E5\u6307\u5B9A\u7684\u5FAE\u670D\u52A1\u3002\u6BD4\u5982\uFF1A\u53EA\u901A\u77E53355\uFF0C\u4E0D\u901A\u77E53366\uFF0C\u6307\u5B9A\u5177\u4F53\u67D0\u4E00\u4E2A\u5B9E\u4F8B\u751F\u6548\uFF0C\u800C\u4E0D\u662F\u5168\u90E8\u3002</p>`,35),zp=a("\u516C\u5F0F\uFF1A"),Gp={href:"http://localhost",target:"_blank",rel:"noopener noreferrer"},Dp=a("http://localhost"),Up=a(":\u914D\u7F6E\u4E2D\u5FC3\u7684\u7AEF\u53E3\u53F7/actuator/bus-refresh/{destination}\uFF0C"),Zp=p(`<p>/bus/refresh\u8BF7\u6C42\u4E0D\u518D\u53D1\u9001\u5230\u5177\u4F53\u7684\u670D\u52A1\u5B9E\u4F8B\u4E0A\uFF0C\u800C\u662F\u53D1\u7ED9config server\u5E76\u901A\u8FC7destination\u53C2\u6570\u7C7B\u6307\u5B9A\u9700\u8981\u66F4\u65B0\u914D\u7F6E\u7684\u670D\u52A1\u6216\u5B9E\u4F8B\u3002</p><h4 id="_4-1-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_4-1-\u6848\u4F8B" aria-hidden="true">#</a> 4.1 \u6848\u4F8B</h4><p>\u6211\u4EEC\u8FD9\u91CC\u4EE5\u5237\u65B0\u8FD0\u884C\u57283355\u7AEF\u53E3\u4E0A\u7684config-client\u4E3A\u4F8B\uFF0C\u53EA\u901A\u77E53355\uFF0C\u4E0D\u901A\u77E53366</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>curl -X POST &quot;http://localhost:3344/actuator/bus-refresh/config-client:3355&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634384131225-61292297-090d-4c89-a6cd-2dafc8a354fc.png" alt="img"></p><p>\u6210\u529F\uFF1A3355\u5237\u65B0\uFF0C3366\u672A\u5237\u65B0</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634384167053-e206c846-4bc5-4575-8000-c409580a5d78.png" alt="img"></p><h3 id="_5\u3001\u6D41\u7A0B\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#_5\u3001\u6D41\u7A0B\u603B\u7ED3" aria-hidden="true">#</a> 5\u3001\u6D41\u7A0B\u603B\u7ED3</h3><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634384269518-feae05a5-17cd-433d-85df-fbd6c933f046.png" alt="img"></p><h2 id="_11-springcloud-stream\u6D88\u606F\u9A71\u52A8" tabindex="-1"><a class="header-anchor" href="#_11-springcloud-stream\u6D88\u606F\u9A71\u52A8" aria-hidden="true">#</a> 11.SpringCloud Stream\u6D88\u606F\u9A71\u52A8</h2><h3 id="\u4E00\u3001stream\u6D88\u606F\u9A71\u52A8\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001stream\u6D88\u606F\u9A71\u52A8\u6982\u8FF0" aria-hidden="true">#</a> \u4E00\u3001Stream\u6D88\u606F\u9A71\u52A8\u6982\u8FF0</h3><h4 id="_1-1-\u4E3A\u4EC0\u4E48\u5F15\u5165cloud-stream-\u89E3\u51B3\u7684\u75DB\u70B9\u662F\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#_1-1-\u4E3A\u4EC0\u4E48\u5F15\u5165cloud-stream-\u89E3\u51B3\u7684\u75DB\u70B9\u662F\u4EC0\u4E48" aria-hidden="true">#</a> 1.1 \u4E3A\u4EC0\u4E48\u5F15\u5165cloud stream\uFF1F\u89E3\u51B3\u7684\u75DB\u70B9\u662F\u4EC0\u4E48\uFF1F</h4><ol><li>\u5E02\u9762\u4E0A\u5B58\u5728\u7740\u591A\u79CD\u6D88\u606F\u4E2D\u95F4\u4EF6\u6280\u672F</li></ol><p>\u200B ActiveMQ\uFF0CRabbitMQ\uFF0CRocketMQ\uFF0CKafka</p><p>\u200B \u90A3\u4E48\u6BCF\u591A\u51FA\u6765\u4E00\u79CD\u65B0\u7684\u6280\u672F\uFF0C\u5C31\u8981\u4ED8\u51FA\u54CD\u5E94\u7684\u5B66\u4E60\u6210\u672C</p><p>\u200B \u6D88\u606F\u4E2D\u95F4\u4EF6\u6280\u672F\u7684\u591A\u6837\u5BFC\u81F4\u5F00\u53D1\u8005\u7684\u5B66\u4E60\u6210\u672C\u5F88\u5927</p><ol start="2"><li>\u4E0D\u540C\u7684\u7CFB\u7EDF\u4E2D\u4F1A\u7528\u5230\u4E0D\u540C\u7684\u6D88\u606F\u4E2D\u95F4\u4EF6\uFF0C\u90A3\u4E48\u5F53\u9700\u8981\u7CFB\u7EDF\u8FDB\u884C\u6574\u5408\u65F6\uFF0C\u6216\u8005\u7CFB\u7EDF\u8FDB\u884C\u5207\u6362\u65F6</li></ol><p>\u200B \u7531\u4E8E\u7528\u7684\u662F\u4E0D\u540C\u7684\u4E2D\u95F4\u4EF6\u6280\u672F\uFF0C\u8BE5\u600E\u4E48\u6574\u5408\u5207\u6362\u3002</p><p>\u5B58\u5728\u591A\u79CDMQ\u7684\u60C5\u51B5\u65F6\uFF0C\u5982\u4F55\u8FDB\u884C\u5207\u6362\u3001\u7EF4\u62A4\u548C\u5F00\u53D1\uFF1F</p><p>\u5177\u4F53\u7684\u5B9E\u73B0\uFF0C\u9700\u8981\u7684\u6210\u672C\u5F88\u5927\u3002</p><ol start="3"><li>\u90A3\u4E48\u6709\u6CA1\u6709\u4E00\u79CD\u65B0\u7684\u6280\u672F\uFF0C\u8BA9\u6211\u4EEC\u4E0D\u518D\u5173\u6CE8\u5177\u4F53\u7684MQ\u7684\u7EC6\u8282\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u7528\u4E00\u79CD\u9002\u914D\u7ED1\u5B9A\u7684\u65B9\u5F0F\uFF0C\u81EA\u52A8\u7684\u7ED9\u6211\u4EEC\u5728\u5404\u79CDMQ\u5185\u5207\u6362\u3002</li></ol><p>\u200B</p><ol start="4"><li>\u5F15\u51FA\u4E86SpringCloud Stream</li></ol><p>\u200B <code>\u5C4F\u853D\u5E95\u5C42\u7684\u7EC6\u8282\u5DEE\u5F02\uFF0C\u8BA9\u6211\u53EA\u9700\u8981\u64CD\u4F5C\u4E00\u4E2ACloud Stream\uFF0C\u5C31\u53EF\u4EE5\u64CD\u4F5C\u5E95\u5C42\u4E0B\u9762\u5404\u79CD\u5404\u6837\u4E0D\u540C\u7684MQ</code> \u3002\u8FBE\u5230\u6211\u4EEC\u4EE5\u66F4\u5C0F\u7684\u4EE3\u4EF7\u5B9E\u73B0\u5207\u6362\uFF0C\u7EF4\u62A4\uFF0C\u5F00\u53D1\u3002</p><h4 id="_1-2-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_1-2-\u6982\u8FF0" aria-hidden="true">#</a> 1.2 \u6982\u8FF0</h4><h5 id="\u4EC0\u4E48\u662Fspringcloudstream" tabindex="-1"><a class="header-anchor" href="#\u4EC0\u4E48\u662Fspringcloudstream" aria-hidden="true">#</a> \u4EC0\u4E48\u662FSpringCloudStream\uFF1F</h5><p>\u5B98\u65B9\u5B9A\u4E49 Spring Cloud Stream \u662F\u4E00\u4E2A\u6784\u5EFA\u6D88\u606F\u9A71\u52A8\u5FAE\u670D\u52A1\u7684\u6846\u67B6\u3002</p><p>\u5E94\u7528\u7A0B\u5E8F\u901A\u8FC7 inputs \u6216\u8005 outputs \u6765\u4E0E Spring Cloud Stream\u4E2D <strong>binder\u5BF9\u8C61</strong> \u4EA4\u4E92\u3002</p><p>\u901A\u8FC7\u6211\u4EEC\u914D\u7F6E\u6765binding(\u7ED1\u5B9A) \uFF0C\u800C Spring Cloud Stream \u7684 <strong>binder\u5BF9\u8C61\u8D1F\u8D23\u4E0E\u6D88\u606F\u4E2D\u95F4\u4EF6\u4EA4\u4E92</strong>\u3002</p><p>\u6240\u4EE5\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u641E\u6E05\u695A\u5982\u4F55\u4E0E Spring Cloud Stream \u4EA4\u4E92\u5C31\u53EF\u4EE5\u65B9\u4FBF\u4F7F\u7528\u6D88\u606F\u9A71\u52A8\u7684\u65B9\u5F0F\u3002</p><p>\u901A\u8FC7\u4F7F\u7528Spring Integration\u6765\u8FDE\u63A5\u6D88\u606F\u4EE3\u7406\u4E2D\u95F4\u4EF6\u4EE5\u5B9E\u73B0\u6D88\u606F\u4E8B\u4EF6\u9A71\u52A8\u3002</p><p>Spring Cloud Stream \u4E3A\u4E00\u4E9B\u4F9B\u5E94\u5546\u7684\u6D88\u606F\u4E2D\u95F4\u4EF6\u4EA7\u54C1\u63D0\u4F9B\u4E86\u4E2A\u6027\u5316\u7684\u81EA\u52A8\u5316\u914D\u7F6E\u5B9E\u73B0\uFF0C\u5F15\u7528\u4E86\u53D1\u5E03-\u8BA2\u9605\u3001\u6D88\u8D39\u7EC4\u3001\u5206\u533A\u7684\u4E09\u4E2A\u6838\u5FC3\u6982\u5FF5\u3002</p><p>\u76EE\u524D <strong>\u4EC5\u652F\u6301</strong> RabbitMQ\u3001Kafka\u3002</p><p>**\u4E00\u53E5\u8BDD\uFF1A**SpringCloud Stream <code>\u5C4F\u853D\u5E95\u5C42\u6D88\u606F\u4E2D\u95F4\u4EF6\u7684\u5DEE\u5F02\uFF0C\u964D\u4F4E\u5207\u6362\u6210\u672C\uFF0C\u7EDF\u4E00\u6D88\u606F\u7684\u7F16\u7A0B\u6A21\u578B\u3002</code></p><h5 id="\u5B98\u7F51" tabindex="-1"><a class="header-anchor" href="#\u5B98\u7F51" aria-hidden="true">#</a> \u5B98\u7F51</h5>`,35),Qp={href:"https://link.juejin.cn/?target=https%3A%2F%2Fspring.io%2Fprojects%2Fspring-cloud-stream",target:"_blank",rel:"noopener noreferrer"},Xp=a("\u5B98\u7F51"),Wp=a(),Yp={href:"https://link.juejin.cn/?target=https%3A%2F%2Fcloud.spring.io%2Fspring-cloud-static%2Fspring-cloud-stream%2F3.0.6.RELEASE%2Freference%2Fhtml%2F",target:"_blank",rel:"noopener noreferrer"},$p=a("\u6587\u6863"),Kp=a(),Jp={href:"https://link.juejin.cn/?target=https%3A%2F%2Fm.wang1314.com%2Fdoc%2Fwebapp%2Ftopic%2F20971999.html",target:"_blank",rel:"noopener noreferrer"},ne=a("\u4E2D\u6587\u6307\u5BFC\u624B\u518C"),ae=p(`<p>\u7248\u672C\u8981\u6C42</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634386943593-08e3aa4f-afb8-4c8f-ae66-0df1864c33e5.png" alt="img"></p><p><strong>\u7ED1\u5B9A\u5668\u5BF9\u8C61\uFF1ABinder Implementations</strong></p><p>\u5C31\u662F\u9760\u5B83\u5C4F\u853D\u4E86\u6211\u4EEC\u5E95\u5C42\u7684MQ\u7684\u5DEE\u5F02\u3002</p><h4 id="_1-3-\u8BBE\u8BA1\u601D\u60F3" tabindex="-1"><a class="header-anchor" href="#_1-3-\u8BBE\u8BA1\u601D\u60F3" aria-hidden="true">#</a> 1.3 \u8BBE\u8BA1\u601D\u60F3</h4><h5 id="_1-3-1-\u4F20\u7EDF\u7684\u6D88\u606F\u4E2D\u95F4\u4EF6\u7684\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#_1-3-1-\u4F20\u7EDF\u7684\u6D88\u606F\u4E2D\u95F4\u4EF6\u7684\u6D41\u7A0B" aria-hidden="true">#</a> 1.3.1 \u4F20\u7EDF\u7684\u6D88\u606F\u4E2D\u95F4\u4EF6\u7684\u6D41\u7A0B</h5><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634388483196-82972ce2-caa5-4949-96cb-b027abc23bb7.png" alt="img"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634388493327-d62c14d7-ca7a-4298-88fe-4a0448404958.png" alt="img"></p><h5 id="_1-3-2-\u4E3A\u4EC0\u4E48\u7528cloud-stream" tabindex="-1"><a class="header-anchor" href="#_1-3-2-\u4E3A\u4EC0\u4E48\u7528cloud-stream" aria-hidden="true">#</a> 1.3.2 \u4E3A\u4EC0\u4E48\u7528Cloud Stream</h5><p>\u6BD4\u65B9\u8BF4\u6211\u4EEC\u540C\u65F6\u7528\u5230\u4E86RabbitMQ\u548CKafka\uFF0C\u7531\u4E8E\u8FD9\u4E24\u4E2A\u6D88\u606F\u4E2D\u95F4\u4EF6\u7684\u67B6\u6784\u4E0A\u7684\u4E0D\u540C\uFF0C\u6574\u5408\u548C\u5207\u6362\u5C31\u4F1A\u6709\u5F88\u5927\u7684\u6210\u672C\u3002\u50CFRabbitMQ\u6709exchange\uFF0Ckafka\u6709Topic\u548CPartitions\u5206\u533A\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634388652792-89f6d104-879c-432d-99ae-23d1f571a420.png" alt="img"></p><p>\u8FD9\u4E9B\u4E2D\u95F4\u4EF6\u7684\u5DEE\u5F02\u6027\u5BFC\u81F4\u6211\u4EEC\u5B9E\u9645\u9879\u76EE\u5F00\u53D1\u7ED9\u6211\u4EEC\u9020\u6210\u4E86\u4E00\u5B9A\u7684\u56F0\u6270\uFF0C\u6211\u4EEC\u5982\u679C\u7528\u4E86\u4E24\u4E2A\u6D88\u606F\u961F\u5217\u7684\u5176\u4E2D\u4E00\u79CD\uFF0C\u540E\u9762\u7684\u4E1A\u52A1\u9700\u6C42\uFF0C\u6211\u60F3\u5F80\u53E6\u5916\u4E00\u79CD\u6D88\u606F\u961F\u5217\u8FDB\u884C\u8FC1\u79FB\uFF0C\u8FD9\u65F6\u5019\u65E0\u7591\u5C31\u662F\u4E00\u4E2A\u707E\u96BE\u6027\u7684\uFF0C<strong>\u4E00\u5927\u5806\u4E1C\u897F\u90FD\u8981\u91CD\u65B0\u63A8\u5012\u91CD\u65B0\u505A</strong>\uFF0C\u56E0\u4E3A\u5B83\u8DDF\u6211\u4EEC\u7684\u7CFB\u7EDF\u8026\u5408\u4E86\uFF0C\u8FD9\u65F6\u5019springcloud Stream\u7ED9\u6211\u4EEC\u63D0\u4F9B\u4E86\u4E00\u79CD\u89E3\u8026\u5408\u7684\u65B9\u5F0F\u3002</p><h5 id="_1-3-3-stream\u662F\u600E\u4E48\u7EDF\u4E00\u5E95\u5C42\u5DEE\u5F02\u7684" tabindex="-1"><a class="header-anchor" href="#_1-3-3-stream\u662F\u600E\u4E48\u7EDF\u4E00\u5E95\u5C42\u5DEE\u5F02\u7684" aria-hidden="true">#</a> 1.3.3 stream\u662F\u600E\u4E48\u7EDF\u4E00\u5E95\u5C42\u5DEE\u5F02\u7684\uFF1F</h5><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634389105603-f30a69e2-f46d-4562-b859-762bea5a5c4f.png" alt="img"></p><h5 id="_1-3-4-binder" tabindex="-1"><a class="header-anchor" href="#_1-3-4-binder" aria-hidden="true">#</a> 1.3.4 Binder</h5><p>\u5728\u6CA1\u6709\u7ED1\u5B9A\u5668\u8FD9\u4E2A\u6982\u5FF5\u7684\u60C5\u51B5\u4E0B\uFF0C\u6211\u4EEC\u7684SpringBoot\u5E94\u7528\u8981\u76F4\u63A5\u4E0E\u6D88\u606F\u4E2D\u95F4\u4EF6\u8FDB\u884C\u4FE1\u606F\u4EA4\u4E92\u7684\u65F6\u5019\uFF0C\u7531\u4E8E\u5404\u6D88\u606F\u4E2D\u95F4\u4EF6\u6784\u5EFA\u7684\u521D\u8877\u4E0D\u540C\uFF0C\u5B83\u4EEC\u7684\u5B9E\u73B0\u7EC6\u8282\u4E0A\u4F1A\u6709\u8F83\u5927\u7684\u5DEE\u5F02\u6027\uFF0C\u901A\u8FC7\u5B9A\u4E49\u7ED1\u5B9A\u5668\u4F5C\u4E3A\u4E2D\u95F4\u5C42\uFF0C\u5B8C\u7F8E\u5730\u5B9E\u73B0\u4E86\u5E94\u7528\u7A0B\u5E8F\u4E0E\u6D88\u606F\u4E2D\u95F4\u4EF6\u7EC6\u8282\u4E4B\u95F4\u7684\u9694\u79BB\u3002Stream\u5BF9\u6D88\u606F\u4E2D\u95F4\u4EF6\u7684\u8FDB\u4E00\u6B65\u5C01\u88C5\uFF0C\u53EF\u4EE5\u505A\u5230\u4EE3\u7801\u5C42\u9762\u5BF9\u4E2D\u95F4\u4EF6\u7684\u65E0\u611F\u77E5\uFF0C\u751A\u81F3\u4E8E\u52A8\u6001\u7684\u5207\u6362\u4E2D\u95F4\u4EF6(rabbitmq\u5207\u6362\u4E3Akafka)\uFF0C\u4F7F\u5F97\u5FAE\u670D\u52A1\u5F00\u53D1\u7684\u9AD8\u5EA6\u89E3\u8026\uFF0C\u670D\u52A1\u53EF\u4EE5\u5173\u6CE8\u66F4\u591A\u81EA\u5DF1\u7684\u4E1A\u52A1\u6D41\u7A0B\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634456766627-0875c285-8a17-4288-9883-3b428650b692.png" alt="img"></p><p><strong>\u901A\u8FC7\u5B9A\u4E49\u7ED1\u5B9A\u5668Binder\u4F5C\u4E3A\u4E2D\u95F4\u5C42\uFF0C\u5B9E\u73B0\u4E86\u5E94\u7528\u7A0B\u5E8F\u4E0E\u6D88\u606F\u4E2D\u95F4\u4EF6\u7EC6\u8282\u4E4B\u95F4\u7684\u9694\u79BB\u3002</strong></p><p>Binder\u53EF\u4EE5\u751F\u6210Binding\uFF0CBinding\u7528\u6765\u7ED1\u5B9A\u6D88\u606F\u5BB9\u5668\u7684\u751F\u4EA7\u8005\u548C\u6D88\u8D39\u8005\uFF0C\u5B83\u6709\u4E24\u79CD\u7C7B\u578B\uFF0CINPUT\u548COUTPUT\uFF0C<strong>input\u5BF9\u5E94\u4E8E\u6D88\u8D39\u8005\uFF08\u6D88\u8D39\u8005\u4ECEStream\u63A5\u6536\u6D88\u606F\uFF09\uFF0Coutput\u5BF9\u5E94\u4E8E\u751F\u4EA7\u8005\uFF08\u751F\u4EA7\u8005\u4ECEStream\u53D1\u5E03\u6D88\u606F\uFF09\u3002</strong></p><p>Stream\u4E2D\u7684\u6D88\u606F\u901A\u4FE1\u65B9\u5F0F\u9075\u5FAA\u4E86\u53D1\u5E03-\u8BA2\u9605\u6A21\u5F0F\u3002Topic\u4E3B\u9898\u8FDB\u884C\u5E7F\u64AD\uFF1A\u5728RabbitMQ\u5C31\u662FExchange\uFF1B\u5728Kakfa\u4E2D\u5C31\u662FTopic</p><h4 id="_1-4-spring-cloud-stream\u6807\u51C6\u6D41\u7A0B\u5957\u8DEF" tabindex="-1"><a class="header-anchor" href="#_1-4-spring-cloud-stream\u6807\u51C6\u6D41\u7A0B\u5957\u8DEF" aria-hidden="true">#</a> 1.4 Spring Cloud Stream\u6807\u51C6\u6D41\u7A0B\u5957\u8DEF</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634456548379-d4f21d8d-dde8-4c1d-9920-024ffd9c7891.png" alt="img"></p><ul><li>Binder\uFF1A\u5F88\u65B9\u4FBF\u7684\u8FDE\u63A5\u4E2D\u95F4\u4EF6\uFF0C\u5C4F\u853D\u5DEE\u5F02\uFF08\u7528\u4E8E\u8FDE\u63A5\u4E2D\u95F4\u4EF6\u4E0E\u751F\u4EA7/\u6D88\u8D39\u8005\uFF09</li><li>Channel\uFF1A\u901A\u9053\uFF0C\u662F\u961F\u5217Queue\u7684\u4E00\u79CD\u62BD\u8C61\uFF0C\u5728\u6D88\u606F\u901A\u8BAF\u7CFB\u7EDF\u4E2D\u5C31\u662F\u5B9E\u73B0\u5B58\u50A8\u548C\u8F6C\u53D1\u7684\u5A92\u4ECB\uFF0C\u901A\u8FC7Channel\u5BF9\u961F\u5217\u8FDB\u884C\u914D\u7F6E</li><li>Source\u548CSink\uFF1A\u7B80\u5355\u7684\u53EF\u7406\u89E3\u4E3A\u53C2\u7167\u5BF9\u8C61\u662FSpring Cloud Stream\u81EA\u8EAB\uFF0C<strong>\u4ECEStream\u53D1\u5E03\u6D88\u606F\u5C31\u662F\u8F93\u51FA\uFF08output\uFF09\uFF0C\u63A5\u53D7\u6D88\u606F\u5C31\u662F\u8F93\u5165\uFF08input\uFF09</strong>\u3002\uFF08\u7B80\u5355\u7684\u7406\u89E3\u4E3A\u8F93\u51FA/\u8F93\u5982\uFF09</li></ul><h4 id="_1-5-\u7F16\u7801api\u548C\u5E38\u7528\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_1-5-\u7F16\u7801api\u548C\u5E38\u7528\u6CE8\u89E3" aria-hidden="true">#</a> 1.5 \u7F16\u7801API\u548C\u5E38\u7528\u6CE8\u89E3</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634390359654-718a010e-2ac1-4d5d-9b31-044b26921f6f.png" alt="img"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634390369137-ecdefe55-7c32-497f-aad0-adfaa59c35d0.png" alt="img"></p><h3 id="\u4E8C\u3001\u5165\u95E8\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001\u5165\u95E8\u6848\u4F8B" aria-hidden="true">#</a> \u4E8C\u3001\u5165\u95E8\u6848\u4F8B</h3><h4 id="_2-1-\u6848\u4F8B\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#_2-1-\u6848\u4F8B\u8BF4\u660E" aria-hidden="true">#</a> 2.1 \u6848\u4F8B\u8BF4\u660E</h4><p>RabbitMQ\u73AF\u5883\u5DF2\u7ECFOK\uFF1B</p><p>\u5DE5\u7A0B\u4E2D\u65B0\u5EFA\u4E09\u4E2A\u5B50\u6A21\u5757\uFF1A</p><ul><li>cloud-stream-rabbitmq-provider8801\uFF0C \u4F5C\u4E3A\u751F\u4EA7\u8005\u8FDB\u884C\u53D1\u6D88\u606F\u6A21\u5757</li><li>cloud-stream-rabbitmq-consumer8802\uFF0C\u4F5C\u4E3A\u6D88\u606F\u63A5\u6536\u6A21\u5757</li><li>cloud-stream-rabbitmq-consumer8803 \u4F5C\u4E3A\u6D88\u606F\u63A5\u6536\u6A21\u5757</li></ul><h4 id="_2-2-\u6D88\u606F\u9A71\u52A8\u4E4B\u751F\u4EA7\u80058801" tabindex="-1"><a class="header-anchor" href="#_2-2-\u6D88\u606F\u9A71\u52A8\u4E4B\u751F\u4EA7\u80058801" aria-hidden="true">#</a> 2.2 \u6D88\u606F\u9A71\u52A8\u4E4B\u751F\u4EA7\u80058801</h4><h5 id="_2-2-1-\u65B0\u5EFAmodule" tabindex="-1"><a class="header-anchor" href="#_2-2-1-\u65B0\u5EFAmodule" aria-hidden="true">#</a> 2.2.1 \u65B0\u5EFAmodule</h5><p>cloud-stream-rabbitmq-provider8801\uFF1A\u4F5C\u4E3A\u751F\u4EA7\u8005\u53D1\u9001\u6D88\u606F\u6A21\u5757</p><h5 id="_2-2-2-pom" tabindex="-1"><a class="header-anchor" href="#_2-2-2-pom" aria-hidden="true">#</a> 2.2.2 pom</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jdk8cloud2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-stream-rabbitmq-provider8801<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--rabbitMQ--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-stream-rabbit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--eureka client--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--web/actuator\u8FD9\u4E24\u4E2A\u4E00\u822C\u4E00\u8D77\u4F7F\u7528\uFF0C\u5199\u5728\u4E00\u8D77--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--\u57FA\u7840\u914D\u7F6E--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-2-3-application-yml" tabindex="-1"><a class="header-anchor" href="#_2-2-3-application-yml" aria-hidden="true">#</a> 2.2.3 application.yml</h5><p>\u8FD9\u91CC\u6709\u4E2A\u62A5\u9519\uFF0C\u4F46\u662F\u6B63\u5E38\u4F7F\u7528</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634451712587-5bfc6601-083d-4f92-88cd-ac52d82ce337.png" alt="img"></p><p>\u62A5\u7EA2\u89E3\u51B3\u65B9\u6CD5\uFF1A</p><ul><li>output\u524D\u9762\u52A0&quot;- &quot;\uFF1A</li><li>defaultRabbit\u7528\u5927\u62EC\u53F7{}\u62EC\u8D77\u6765\uFF1A</li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8801</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>stream<span class="token punctuation">-</span>provider
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">stream</span><span class="token punctuation">:</span>
      <span class="token key atrule">binders</span><span class="token punctuation">:</span> <span class="token comment">## \u5728\u6B64\u5904\u914D\u7F6E\u8981\u7ED1\u5B9A\u7684rabbitmq\u7684\u670D\u52A1\u4FE1\u606F\uFF1B</span>
        <span class="token key atrule">defaultRabbit</span><span class="token punctuation">:</span> <span class="token comment">## \u8868\u793A\u5B9A\u4E49\u7684\u540D\u79F0\uFF0C\u7528\u4E8E\u4E8Ebinding\u6574\u5408</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> rabbit <span class="token comment">## \u6D88\u606F\u7EC4\u4EF6\u7C7B\u578B</span>
          <span class="token key atrule">environment</span><span class="token punctuation">:</span> <span class="token comment">## \u8BBE\u7F6Erabbitmq\u7684\u76F8\u5173\u7684\u73AF\u5883\u914D\u7F6E</span>
            <span class="token key atrule">spring</span><span class="token punctuation">:</span>
              <span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>
                <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
                <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">5672</span>
                <span class="token key atrule">username</span><span class="token punctuation">:</span> guest
                <span class="token key atrule">password</span><span class="token punctuation">:</span> guest
      <span class="token key atrule">bindings</span><span class="token punctuation">:</span> <span class="token comment">## \u670D\u52A1\u7684\u6574\u5408\u5904\u7406</span>
        <span class="token key atrule">output</span><span class="token punctuation">:</span> <span class="token comment">## \u8FD9\u4E2A\u540D\u5B57\u662F\u4E00\u4E2A\u901A\u9053\u7684\u540D\u79F0</span>
          <span class="token key atrule">destination</span><span class="token punctuation">:</span> studyExchange <span class="token comment">## \u8868\u793A\u8981\u4F7F\u7528\u7684Exchange\u540D\u79F0\u5B9A\u4E49</span>
          <span class="token key atrule">content-type</span><span class="token punctuation">:</span> application/json <span class="token comment">## \u8BBE\u7F6E\u6D88\u606F\u7C7B\u578B\uFF0C\u672C\u6B21\u4E3Ajson\uFF0C\u6587\u672C\u5219\u8BBE\u7F6E\u201Ctext/plain\u201D</span>
          <span class="token key atrule">binder</span><span class="token punctuation">:</span> defaultRabbit <span class="token comment">## \u8BBE\u7F6E\u8981\u7ED1\u5B9A\u7684\u6D88\u606F\u670D\u52A1\u7684\u5177\u4F53\u8BBE\u7F6E</span>

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span> <span class="token comment">## \u5BA2\u6237\u7AEF\u8FDB\u884CEureka\u6CE8\u518C\u7684\u914D\u7F6E</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7001/eureka<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7002/eureka
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">lease-renewal-interval-in-seconds</span><span class="token punctuation">:</span> <span class="token number">2</span> <span class="token comment">## \u8BBE\u7F6E\u5FC3\u8DF3\u7684\u65F6\u95F4\u95F4\u9694\uFF08\u9ED8\u8BA4\u662F30\u79D2\uFF09</span>
    <span class="token key atrule">lease-expiration-duration-in-seconds</span><span class="token punctuation">:</span> <span class="token number">5</span> <span class="token comment">## \u5982\u679C\u73B0\u5728\u8D85\u8FC7\u4E865\u79D2\u7684\u95F4\u9694\uFF08\u9ED8\u8BA4\u662F90\u79D2\uFF09</span>
    <span class="token key atrule">instance-id</span><span class="token punctuation">:</span> send<span class="token punctuation">-</span>8801.com  <span class="token comment">## \u5728\u4FE1\u606F\u5217\u8868\u65F6\u663E\u793A\u4E3B\u673A\u540D\u79F0</span>
    <span class="token key atrule">prefer-ip-address</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>     <span class="token comment">## \u8BBF\u95EE\u7684\u8DEF\u5F84\u53D8\u4E3AIP\u5730\u5740</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-2-4-\u4E3B\u542F\u52A8\u7C7B" tabindex="-1"><a class="header-anchor" href="#_2-2-4-\u4E3B\u542F\u52A8\u7C7B" aria-hidden="true">#</a> 2.2.4 \u4E3B\u542F\u52A8\u7C7B</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>springcloud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>eureka<span class="token punctuation">.</span></span><span class="token class-name">EnableEurekaClient</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamMQMain8801</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">StreamMQMain8801</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-2-5-\u4E1A\u52A1\u7C7B" tabindex="-1"><a class="header-anchor" href="#_2-2-5-\u4E1A\u52A1\u7C7B" aria-hidden="true">#</a> 2.2.5 \u4E1A\u52A1\u7C7B</h5><p>\u6211\u4EEC\u6B64\u65F6\u8981\u5199\u7684\u4EE3\u7801\uFF0C\u8981\u6CE8\u610F\u662F\u548CMQ\u4EA4\u4E92\uFF0C\u800C\u4E0D\u662F\u4F20\u7EDF\u7684controller\u8C03\u7528service\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634390359654-718a010e-2ac1-4d5d-9b31-044b26921f6f.png" alt="img"></p><p>\u6211\u4EEC\u73B0\u5728\u5199\u7684\u4EE3\u7801\u662F\u57FA\u4E8ESpringCloudStream\uFF0C\u7136\u540E\u505Aoutput\u6307\u5B9A\u901A\u9053\uFF0C\u5F00\u542F\u4EA4\u4E92\u7ED1\u5B9A\u5668\uFF0C\u518D\u548C\u4E2D\u95F4\u4EF6\u8FDB\u884C\u4EA4\u4E92\u3002</p><p>####### \u53D1\u9001\u6D88\u606F\u63A5\u53E3:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IMessageProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>####### \u53D1\u9001\u6D88\u606F\u63A5\u53E3\u5B9E\u73B0\u7C7B:</p><ol><li><strong>Source \u5B9A\u4E49\u6D88\u606F\u7684\u53D1\u9001\u7BA1\u9053\uFF1A</strong></li></ol><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634457088861-dd291424-9bde-4044-9dbb-b51eb9bd0f83.png" alt="img"></p><p>\u8FD9\u4E2ASource\u54EA\u6765\u7684\u5462\uFF1F \u7B80\u5355\u7684\u53EF\u7406\u89E3\u4E3A\u53C2\u7167\u5BF9\u8C61\u662FSpringCloudStream\u81EA\u8EAB\uFF0C \u4ECEStream\u53D1\u51FA\u6D88\u606F\u5C31\u662F\u8F93\u51FA\uFF0C\u63A5\u6536\u6D88\u606F\u5C31\u662F\u8F93\u5165\u3002 \u8FD9\u91CC\u6211\u4EEC\u53EF\u4EE5\u7406\u89E3\u4E3A\u6211\u4EEC\u5B9A\u4E49\u4E00\u4E2A\u6D88\u606F\u751F\u4EA7\u8005\u7684\u53D1\u9001\u7BA1\u9053\uFF1A\u6D88\u606F\u6E90\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634456548379-d4f21d8d-dde8-4c1d-9920-024ffd9c7891.png" alt="img"></p><ol><li><strong>\u521B\u5EFA\u5E76\u53D1\u9001\u6D88\u606F</strong></li></ol><p>\u8FD9\u91CCMessageChannel\u7684\u5B9E\u4F8B\u540D\u5FC5\u987B\u662Foutput\uFF0C\u8981\u4E0D\u7136\u65E0\u6CD5\u542F\u52A8</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634457941052-8eda1e9b-965f-4a80-8f84-9a097a9d1c37.png" alt="img"></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">IMessageProvider</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">EnableBinding</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>messaging<span class="token punctuation">.</span></span><span class="token class-name">Source</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>integration<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">MessageBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>messaging<span class="token punctuation">.</span></span><span class="token class-name">Message</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>messaging<span class="token punctuation">.</span></span><span class="token class-name">MessageChannel</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">UUID</span></span><span class="token punctuation">;</span>

<span class="token comment">//\u53EF\u4EE5\u7406\u89E3\u4E3A\u5B9A\u4E49\u6D88\u606F\u7684\u53D1\u9001\u7BA1\u9053Source\u5BF9\u5E94output(\u751F\u4EA7\u8005)\uFF0CSink\u5BF9\u5E94input(\u6D88\u8D39\u8005)</span>
<span class="token annotation punctuation">@EnableBinding</span><span class="token punctuation">(</span><span class="token class-name">Source</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token comment">//@Service\uFF1A\u8FD9\u91CC\u4E0D\u9700\u8981\u4E86\uFF0C\u8FD9\u91CC\u4E0D\u662F\u4F20\u7EDF\u7684controller\u8C03\u7528service\u3002\u8FD9\u4E2Aservice\u662F\u548CrabbitMQ\u6253\u4EA4\u9053\u7684</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageProviderImpl</span> <span class="token keyword">implements</span> <span class="token class-name">IMessageProvider</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">MessageChannel</span> output<span class="token punctuation">;</span> <span class="token comment">// \u6D88\u606F\u7684\u53D1\u9001\u7BA1\u9053\uFF0CMessageChannel\u5BF9\u8C61\u7684\u5B9E\u4F8B\u540D\u5FC5\u987B\u662Foutput</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> serial <span class="token operator">=</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//\u521B\u5EFA\u6D88\u606F\uFF0C\u901A\u8FC7output\u8FD9\u4E2A\u7BA1\u9053\u5411\u6D88\u606F\u4E2D\u95F4\u4EF6\u53D1\u6D88\u606F</span>
<span class="token comment">//        Message&lt;String&gt; message = MessageBuilder.withPayload(serial).build();</span>
<span class="token comment">//        output.send(message);</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>output<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">MessageBuilder</span><span class="token punctuation">.</span><span class="token function">withPayload</span><span class="token punctuation">(</span>serial<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u521B\u5EFA\u5E76\u53D1\u9001\u6D88\u606F</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;***serial: &quot;</span><span class="token operator">+</span>serial<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> serial<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Controller:</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">IMessageProvider</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SendMessageController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">IMessageProvider</span> messageProvider<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/sendMessage&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> messageProvider<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-2-6-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_2-2-6-\u6D4B\u8BD5" aria-hidden="true">#</a> 2.2.6 \u6D4B\u8BD5</h5><p>\u542F\u52A87001\u30017002\u30018801</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634459434614-a94baefb-b3d4-48e8-b9cc-eca6dac527b9.png" alt="img"></p>`,63),se=a("\u591A\u6B21\u8BBF\u95EE"),te={href:"http://localhost:8801/sendMessage",target:"_blank",rel:"noopener noreferrer"},pe=a("http://localhost:8801/sendMessage"),ee=p(`<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634459578397-9a8bca5a-cabd-45b0-926b-72d3af4f48de.png" alt="img"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634459516082-ba39ad61-e1ca-488d-bffb-122d6e653709.png" alt="img"></p><h4 id="_2-3-\u6D88\u606F\u9A71\u52A8\u4E4B\u6D88\u8D39\u80058802" tabindex="-1"><a class="header-anchor" href="#_2-3-\u6D88\u606F\u9A71\u52A8\u4E4B\u6D88\u8D39\u80058802" aria-hidden="true">#</a> 2.3 \u6D88\u606F\u9A71\u52A8\u4E4B\u6D88\u8D39\u80058802</h4><h5 id="_2-3-1-\u65B0\u5EFAcloud-stream-rabbitmq-consumer8802" tabindex="-1"><a class="header-anchor" href="#_2-3-1-\u65B0\u5EFAcloud-stream-rabbitmq-consumer8802" aria-hidden="true">#</a> 2.3.1 \u65B0\u5EFAcloud-stream-rabbitmq-consumer8802</h5><h5 id="_2-3-2-pom" tabindex="-1"><a class="header-anchor" href="#_2-3-2-pom" aria-hidden="true">#</a> 2.3.2 pom</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jdk8cloud2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-stream-rabbitmq-consumer8802<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--rabbitMQ--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-stream-rabbit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--eureka client--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--web/actuator\u8FD9\u4E24\u4E2A\u4E00\u822C\u4E00\u8D77\u4F7F\u7528\uFF0C\u5199\u5728\u4E00\u8D77--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--\u57FA\u7840\u914D\u7F6E--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-3-3-application-yml" tabindex="-1"><a class="header-anchor" href="#_2-3-3-application-yml" aria-hidden="true">#</a> 2.3.3 application.yml</h5><p>8801\u662F\u751F\u4EA7\u8005\u662Foutput\uFF0C8802\u662F\u6D88\u8D39\u8005\u662Finput</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1634463381855-8eef0232-d21c-4b60-8aae-206647c45c8f.png" alt="img"></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8802</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>stream<span class="token punctuation">-</span>consumer
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">stream</span><span class="token punctuation">:</span>
      <span class="token key atrule">binders</span><span class="token punctuation">:</span> <span class="token comment">## \u5728\u6B64\u5904\u914D\u7F6E\u8981\u7ED1\u5B9A\u7684rabbitmq\u7684\u670D\u52A1\u4FE1\u606F\uFF1B</span>
        <span class="token key atrule">defaultRabbit</span><span class="token punctuation">:</span> <span class="token comment">## \u8868\u793A\u5B9A\u4E49\u7684\u540D\u79F0\uFF0C\u7528\u4E8E\u4E8Ebinding\u6574\u5408</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> rabbit <span class="token comment">## \u6D88\u606F\u7EC4\u4EF6\u7C7B\u578B</span>
          <span class="token key atrule">environment</span><span class="token punctuation">:</span> <span class="token comment">## \u8BBE\u7F6Erabbitmq\u7684\u76F8\u5173\u7684\u73AF\u5883\u914D\u7F6E</span>
            <span class="token key atrule">spring</span><span class="token punctuation">:</span>
              <span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>
                <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
                <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">5672</span>
                <span class="token key atrule">username</span><span class="token punctuation">:</span> guest
                <span class="token key atrule">password</span><span class="token punctuation">:</span> guest
      <span class="token key atrule">bindings</span><span class="token punctuation">:</span> <span class="token comment">## \u670D\u52A1\u7684\u6574\u5408\u5904\u7406 </span>
        <span class="token key atrule">input</span><span class="token punctuation">:</span> <span class="token comment">## \u8FD9\u4E2A\u540D\u5B57\u662F\u4E00\u4E2A\u901A\u9053\u7684\u540D\u79F0  </span>
          <span class="token key atrule">destination</span><span class="token punctuation">:</span> studyExchange <span class="token comment">## \u8868\u793A\u8981\u4F7F\u7528\u7684Exchange\u540D\u79F0\u5B9A\u4E49</span>
          <span class="token key atrule">content-type</span><span class="token punctuation">:</span> application/json <span class="token comment">## \u8BBE\u7F6E\u6D88\u606F\u7C7B\u578B\uFF0C\u672C\u6B21\u4E3A\u5BF9\u8C61json\uFF0C\u5982\u679C\u662F\u6587\u672C\u5219\u8BBE\u7F6E\u201Ctext/plain\u201D</span>
          <span class="token key atrule">binder</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> defaultRabbit <span class="token punctuation">}</span> <span class="token comment">## \u8BBE\u7F6E\u8981\u7ED1\u5B9A\u7684\u6D88\u606F\u670D\u52A1\u7684\u5177\u4F53\u8BBE\u7F6E</span>

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span> <span class="token comment">## \u5BA2\u6237\u7AEF\u8FDB\u884CEureka\u6CE8\u518C\u7684\u914D\u7F6E</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7001/eureka\uFF0Chttp<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7002/eureka
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">lease-renewal-interval-in-seconds</span><span class="token punctuation">:</span> <span class="token number">2</span> <span class="token comment">## \u8BBE\u7F6E\u5FC3\u8DF3\u7684\u65F6\u95F4\u95F4\u9694\uFF08\u9ED8\u8BA4\u662F30\u79D2\uFF09</span>
    <span class="token key atrule">lease-expiration-duration-in-seconds</span><span class="token punctuation">:</span> <span class="token number">5</span> <span class="token comment">## \u5982\u679C\u73B0\u5728\u8D85\u8FC7\u4E865\u79D2\u7684\u95F4\u9694\uFF08\u9ED8\u8BA4\u662F90\u79D2\uFF09</span>
    <span class="token key atrule">instance-id</span><span class="token punctuation">:</span> receive<span class="token punctuation">-</span>8802.com  <span class="token comment">## \u5728\u4FE1\u606F\u5217\u8868\u65F6\u663E\u793A\u4E3B\u673A\u540D\u79F0</span>
    <span class="token key atrule">prefer-ip-address</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>     <span class="token comment">## \u8BBF\u95EE\u7684\u8DEF\u5F84\u53D8\u4E3AIP\u5730\u5740</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-3-4-\u4E3B\u542F\u52A8\u7C7B" tabindex="-1"><a class="header-anchor" href="#_2-3-4-\u4E3B\u542F\u52A8\u7C7B" aria-hidden="true">#</a> 2.3.4 \u4E3B\u542F\u52A8\u7C7B</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>springcloud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>eureka<span class="token punctuation">.</span></span><span class="token class-name">EnableEurekaClient</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamMQMain8802</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">StreamMQMain8802</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-3-5-\u4E1A\u52A1\u7C7B" tabindex="-1"><a class="header-anchor" href="#_2-3-5-\u4E1A\u52A1\u7C7B" aria-hidden="true">#</a> 2.3.5 \u4E1A\u52A1\u7C7B</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Value</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">EnableBinding</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">StreamListener</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>messaging<span class="token punctuation">.</span></span><span class="token class-name">Sink</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>messaging<span class="token punctuation">.</span></span><span class="token class-name">Message</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@EnableBinding</span><span class="token punctuation">(</span><span class="token class-name">Sink</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">//\u53EF\u4EE5\u7406\u89E3\u4E3A\u6211\u4EEC\u5B9A\u4E49\u4E00\u4E2A\u6D88\u606F\u6D88\u8D39\u8005\u7684\u63A5\u6536\u7BA1\u9053</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReceiveMessageListener</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${server.port}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> serverPort<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@StreamListener</span><span class="token punctuation">(</span><span class="token class-name">Sink</span><span class="token punctuation">.</span>INPUT<span class="token punctuation">)</span> <span class="token comment">//\u8F93\u5165\u6E90\uFF1A\u4F5C\u4E3A\u4E00\u4E2A\u6D88\u606F\u76D1\u542C\u8005</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">input</span><span class="token punctuation">(</span><span class="token class-name">Message</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6\u5230\u6D88\u606F</span>
        <span class="token class-name">String</span> messageStr <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">getPayload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u6D88\u8D39\u80051\u53F7\uFF0C-------&gt;\u63A5\u6536\u5230\u7684\u6D88\u606F\uFF1A&quot;</span> <span class="token operator">+</span> messageStr <span class="token operator">+</span> <span class="token string">&quot;\\t port: &quot;</span><span class="token operator">+</span>serverPort<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-3-6-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_2-3-6-\u6D4B\u8BD5" aria-hidden="true">#</a> 2.3.6 \u6D4B\u8BD5</h5><p>\u542F\u52A87001\u30017002\u30018801\u30018802</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635257483936-85a6e736-6f6e-420e-ac71-68b687b1f6a5.png" alt="img"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635257736723-9ba7cc81-5555-4130-a8dd-31ef03082ea4.png" alt="img"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635257631085-8e9ffc7f-5a7a-45e6-9260-d501ae0c75f7.png" alt="img"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635257822396-520b0583-f32b-4845-a117-f59133e42480.png" alt="img"></p><p>\u6D4B\u8BD5\u6210\u529F</p><h3 id="\u4E09\u3001\u9AD8\u7EA7\u7279\u6027-\u5206\u7EC4\u6D88\u8D39\u4E0E\u6301\u4E45\u5316" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001\u9AD8\u7EA7\u7279\u6027-\u5206\u7EC4\u6D88\u8D39\u4E0E\u6301\u4E45\u5316" aria-hidden="true">#</a> \u4E09\u3001\u9AD8\u7EA7\u7279\u6027\uFF1A\u5206\u7EC4\u6D88\u8D39\u4E0E\u6301\u4E45\u5316</h3><h4 id="_3-1-\u4F9D\u71678802-clone\u51FA\u4E00\u4EFDcloud-stream-rabbitmq-consumer8803" tabindex="-1"><a class="header-anchor" href="#_3-1-\u4F9D\u71678802-clone\u51FA\u4E00\u4EFDcloud-stream-rabbitmq-consumer8803" aria-hidden="true">#</a> 3.1 \u4F9D\u71678802\uFF0Cclone\u51FA\u4E00\u4EFDcloud-stream-rabbitmq-consumer8803</h4><h5 id="_3-1-1-pom" tabindex="-1"><a class="header-anchor" href="#_3-1-1-pom" aria-hidden="true">#</a> 3.1.1 pom</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jdk8cloud2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-stream-rabbitmq-consumer8803<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--rabbitMQ--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-stream-rabbit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--eureka client--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--web/actuator\u8FD9\u4E24\u4E2A\u4E00\u822C\u4E00\u8D77\u4F7F\u7528\uFF0C\u5199\u5728\u4E00\u8D77--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--\u57FA\u7840\u914D\u7F6E--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-1-2-application-yml" tabindex="-1"><a class="header-anchor" href="#_3-1-2-application-yml" aria-hidden="true">#</a> 3.1.2 application.yml</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8803</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>stream<span class="token punctuation">-</span>consumer
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">stream</span><span class="token punctuation">:</span>
      <span class="token key atrule">binders</span><span class="token punctuation">:</span> <span class="token comment">## \u5728\u6B64\u5904\u914D\u7F6E\u8981\u7ED1\u5B9A\u7684rabbitmq\u7684\u670D\u52A1\u4FE1\u606F\uFF1B</span>
        <span class="token key atrule">defaultRabbit</span><span class="token punctuation">:</span> <span class="token comment">## \u8868\u793A\u5B9A\u4E49\u7684\u540D\u79F0\uFF0C\u7528\u4E8E\u4E8Ebinding\u6574\u5408</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> rabbit <span class="token comment">## \u6D88\u606F\u7EC4\u4EF6\u7C7B\u578B</span>
          <span class="token key atrule">environment</span><span class="token punctuation">:</span> <span class="token comment">## \u8BBE\u7F6Erabbitmq\u7684\u76F8\u5173\u7684\u73AF\u5883\u914D\u7F6E</span>
            <span class="token key atrule">spring</span><span class="token punctuation">:</span>
              <span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>
                <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
                <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">5672</span>
                <span class="token key atrule">username</span><span class="token punctuation">:</span> guest
                <span class="token key atrule">password</span><span class="token punctuation">:</span> guest
      <span class="token key atrule">bindings</span><span class="token punctuation">:</span> <span class="token comment">## \u670D\u52A1\u7684\u6574\u5408\u5904\u7406</span>
        <span class="token key atrule">input</span><span class="token punctuation">:</span> <span class="token comment">## \u8FD9\u4E2A\u540D\u5B57\u662F\u4E00\u4E2A\u901A\u9053\u7684\u540D\u79F0</span>
          <span class="token key atrule">destination</span><span class="token punctuation">:</span> studyExchange <span class="token comment">## \u8868\u793A\u8981\u4F7F\u7528\u7684Exchange\u540D\u79F0\u5B9A\u4E49</span>
          <span class="token key atrule">content-type</span><span class="token punctuation">:</span> application/json <span class="token comment">## \u8BBE\u7F6E\u6D88\u606F\u7C7B\u578B\uFF0C\u672C\u6B21\u4E3A\u5BF9\u8C61json\uFF0C\u5982\u679C\u662F\u6587\u672C\u5219\u8BBE\u7F6E\u201Ctext/plain\u201D</span>
          <span class="token key atrule">binder</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> defaultRabbit <span class="token punctuation">}</span> <span class="token comment">## \u8BBE\u7F6E\u8981\u7ED1\u5B9A\u7684\u6D88\u606F\u670D\u52A1\u7684\u5177\u4F53\u8BBE\u7F6E</span>

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span> <span class="token comment">## \u5BA2\u6237\u7AEF\u8FDB\u884CEureka\u6CE8\u518C\u7684\u914D\u7F6E</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7001/eureka<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7002/eureka
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">lease-renewal-interval-in-seconds</span><span class="token punctuation">:</span> <span class="token number">2</span> <span class="token comment">## \u8BBE\u7F6E\u5FC3\u8DF3\u7684\u65F6\u95F4\u95F4\u9694\uFF08\u9ED8\u8BA4\u662F30\u79D2\uFF09</span>
    <span class="token key atrule">lease-expiration-duration-in-seconds</span><span class="token punctuation">:</span> <span class="token number">5</span> <span class="token comment">## \u5982\u679C\u73B0\u5728\u8D85\u8FC7\u4E865\u79D2\u7684\u95F4\u9694\uFF08\u9ED8\u8BA4\u662F90\u79D2\uFF09</span>
    <span class="token key atrule">instance-id</span><span class="token punctuation">:</span> receive<span class="token punctuation">-</span>8803.com  <span class="token comment">## \u5728\u4FE1\u606F\u5217\u8868\u65F6\u663E\u793A\u4E3B\u673A\u540D\u79F0</span>
    <span class="token key atrule">prefer-ip-address</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>     <span class="token comment">## \u8BBF\u95EE\u7684\u8DEF\u5F84\u53D8\u4E3AIP\u5730\u5740</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-1-3-\u4E3B\u542F\u52A8\u7C7B" tabindex="-1"><a class="header-anchor" href="#_3-1-3-\u4E3B\u542F\u52A8\u7C7B" aria-hidden="true">#</a> 3.1.3 \u4E3B\u542F\u52A8\u7C7B</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>springcloud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>eureka<span class="token punctuation">.</span></span><span class="token class-name">EnableEurekaClient</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamMQMain8803</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">StreamMQMain8803</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-1-4-\u4E1A\u52A1\u7C7B" tabindex="-1"><a class="header-anchor" href="#_3-1-4-\u4E1A\u52A1\u7C7B" aria-hidden="true">#</a> 3.1.4 \u4E1A\u52A1\u7C7B</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Value</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">StreamListener</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>messaging<span class="token punctuation">.</span></span><span class="token class-name">Sink</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>messaging<span class="token punctuation">.</span></span><span class="token class-name">Message</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReceiveMessageListener</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${server.port}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> serverPort<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@StreamListener</span><span class="token punctuation">(</span><span class="token class-name">Sink</span><span class="token punctuation">.</span>INPUT<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">input</span><span class="token punctuation">(</span><span class="token class-name">Message</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> message<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u6D88\u8D39\u80052\u53F7\uFF0C-------&gt;\u63A5\u6536\u5230\u7684\u6D88\u606F\uFF1A&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">.</span><span class="token function">getPayload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;\\t port: &quot;</span><span class="token operator">+</span>serverPort<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-\u542F\u52A8\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_3-2-\u542F\u52A8\u6D4B\u8BD5" aria-hidden="true">#</a> 3.2 \u542F\u52A8\u6D4B\u8BD5</h4><p>\u542F\u52A87001\u30017002\u30018801\uFF08\u6D88\u606F\u751F\u4EA7\uFF09\u30018802\uFF08\u6D88\u606F\u6D88\u8D39\uFF09\u30018803\uFF08\u6D88\u606F\u6D88\u8D39\uFF09</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635319959177-e76f21a5-739b-4ea6-bc8b-b4b77561f46b.png" alt="img"></p><p>\u6B64\u65F6studyexchange\u6709\u4E24\u4E2A\u8BA2\u9605\u8005\uFF1A8802\u30018803</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635321761119-a50b91e1-305a-40e1-938b-f21e91ce6b8e.png" alt="img"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635321817330-0a1acb8e-2fde-4d18-bdd3-7222adeb9f6c.png" alt="img"></p><p>\u6D4B\u8BD5\u6210\u529F</p><h4 id="_3-3-\u8FD0\u884C\u540E\u7684\u95EE\u98981-\u91CD\u590D\u6D88\u8D39\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_3-3-\u8FD0\u884C\u540E\u7684\u95EE\u98981-\u91CD\u590D\u6D88\u8D39\u95EE\u9898" aria-hidden="true">#</a> 3.3 \u8FD0\u884C\u540E\u7684\u95EE\u98981\uFF1A\u91CD\u590D\u6D88\u8D39\u95EE\u9898</h4><p>\u76EE\u524D8801\u53D1\u9001\u4E00\u6761\u6D88\u606F\u540E\uFF0C8802\u548C8803\u4F1A\u540C\u65F6\u6536\u52308801\u7684\u6D88\u606F\uFF0C\u5B58\u5728\u91CD\u590D\u6D88\u8D39\u95EE\u9898\u3002</p><h5 id="_3-3-1-\u4E3A\u4EC0\u4E48\u8981\u89E3\u51B3\u91CD\u590D\u6D88\u8D39\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_3-3-1-\u4E3A\u4EC0\u4E48\u8981\u89E3\u51B3\u91CD\u590D\u6D88\u8D39\u95EE\u9898" aria-hidden="true">#</a> 3.3.1 \u4E3A\u4EC0\u4E48\u8981\u89E3\u51B3\u91CD\u590D\u6D88\u8D39\u95EE\u9898</h5><p>\u6BD4\u59828801\u4E0B\u4E00\u4E2A\u8BA2\u5355\uFF0C\u4F46\u662F\u88AB\u4E24\u4E2A\u670D\u52A1\u83B7\u53D6\u6D88\u8D39\uFF0C\u4F1A\u591A\u6263\u4E00\u6B21\u6B3E\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635322067945-865a0070-e0ea-408a-ae23-715ecf531c79.png" alt="img"></p><p>\u9ED8\u8BA4\u5206\u7EC4\uFF1A\u6D41\u6C34\u53F7</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635332610573-d3dd8ee9-e213-45b4-a576-4a466bab5bb1.png" alt="img"></p><p>8802\u548C8803\u9ED8\u8BA4\u662F\u4E24\u4E2A\u4E0D\u540C\u7684\u5206\u7EC4\u3002\u4E0D\u540C\u7684\u5FAE\u670D\u52A1\uFF0C\u9ED8\u8BA4\u5206\u7EC4\u662F\u4E0D\u540C\u7684\uFF0C\u4E0D\u540C\u7684\u7EC4\u53EF\u4EE5\u6D88\u8D39\u540C\u4E00\u4E2A\u6D88\u606F</p><h5 id="_3-3-2-\u89E3\u51B3-\u6D88\u606F\u5206\u7EC4" tabindex="-1"><a class="header-anchor" href="#_3-3-2-\u89E3\u51B3-\u6D88\u606F\u5206\u7EC4" aria-hidden="true">#</a> 3.3.2 \u89E3\u51B3\uFF1A\u6D88\u606F\u5206\u7EC4</h5><p>\u5FAE\u670D\u52A1\u5E94\u7528\u653E\u7F6E\u4E8E\u540C\u4E00\u4E2Agroup\u4E2D\uFF0C\u5C31\u80FD\u591F\u4FDD\u8BC1\u6D88\u606F\u53EA\u4F1A\u88AB\u5176\u4E2D\u4E00\u4E2A\u5E94\u7528\u6D88\u8D39\u4E00\u6B21\u3002\u4E0D\u540C\u7684\u7EC4\u662F\u53EF\u4EE5\u5168\u9762\u6D88\u8D39\u7684\uFF08\u91CD\u590D\u6D88\u8D39\uFF09\uFF0C\u540C\u4E00\u4E2A\u7EC4\u5185\u7684\u591A\u4E2A\u6D88\u8D39\u8005\u4F1A\u53D1\u751F\u7ADE\u4E89\u5173\u7CFB\uFF0C\u53EA\u6709\u5176\u4E2D\u4E00\u4E2A\u53EF\u4EE5\u6D88\u8D39\u3002</p><p>\u5148\u81EA\u5B9A\u4E49\u5206\u7EC4\uFF0C\u7136\u540E\u81EA\u5B9A\u4E49\u914D\u7F6E\u5206\u4E3A\u540C\u4E00\u4E2A\u7EC4\uFF0C\u89E3\u51B3\u91CD\u590D\u6D88\u8D39\u95EE\u9898\u3002</p><h5 id="_3-3-3-\u81EA\u5B9A\u4E49\u5206\u7EC4" tabindex="-1"><a class="header-anchor" href="#_3-3-3-\u81EA\u5B9A\u4E49\u5206\u7EC4" aria-hidden="true">#</a> 3.3.3 \u81EA\u5B9A\u4E49\u5206\u7EC4</h5><p>\u5C068802\u548C8803\u5206\u4E3A\u4E24\u4E2A\u4E0D\u540C\u7684\u7EC4\uFF0CatguiguA\u548CatguiguB</p><p>\u4FEE\u65398802\u548C8803\u7684yml</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635335639617-54867623-0f61-4940-8732-9c7326232189.png" alt="img"></p><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u5206\u7EC4\u5DF2\u7ECF\u53D8\u6210\u6211\u4EEC\u81EA\u5B9A\u4E49\u7684atguiguA\u548CatguiguB\u4E86</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635335757515-683d694c-9d7c-455e-8281-3ca3a7f0e1b3.png" alt="img"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635335868100-c470b540-8f9e-4d87-b037-c9606afceac3.png" alt="img"></p><p>\u867D\u7136\u5B9E\u73B0\u4E86\u81EA\u5B9A\u4E49\u5206\u7EC4\uFF0C\u4F46\u662F\u91CD\u590D\u6D88\u8D39\u7684\u95EE\u9898\u4F9D\u7136\u5B58\u5728\u3002</p><p>\u5206\u5E03\u5F0F\u5FAE\u670D\u52A1\u5E94\u7528\u4E3A\u4E86\u5B9E\u73B0\u9AD8\u53EF\u7528\u548C\u8D1F\u8F7D\u5747\u8861\uFF0C\u5B9E\u9645\u4E0A\u90FD\u4F1A\u90E8\u7F72\u591A\u4E2A\u5B9E\u4F8B\uFF0C\u672C\u4F8B\u9633\u54E5\u542F\u52A8\u4E86\u4E24\u4E2A\u6D88\u8D39\u5FAE\u670D\u52A1(8802/8803)</p><p>\u591A\u6570\u60C5\u51B5\uFF0C\u751F\u4EA7\u8005\u53D1\u9001\u6D88\u606F\u7ED9\u67D0\u4E2A\u5177\u4F53\u5FAE\u670D\u52A1\u65F6\u53EA\u5E0C\u671B\u88AB\u6D88\u8D39\u4E00\u6B21\uFF0C\u6309\u7167\u4E0A\u9762\u6211\u4EEC\u542F\u52A8\u4E24\u4E2A\u5E94\u7528\u7684\u4F8B\u5B50\uFF0C\u867D\u7136\u5B83\u4EEC\u540C\u5C5E\u4E00\u4E2A\u5E94\u7528\uFF0C\u4F46\u662F\u8FD9\u4E2A\u6D88\u606F\u51FA\u73B0\u4E86\u88AB\u91CD\u590D\u6D88\u8D39\u4E24\u6B21\u7684\u60C5\u51B5\u3002\u4E3A\u4E86\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\uFF0C\u5728Spring Cloud Stream\u4E2D\u63D0\u4F9B\u4E86\u6D88\u8D39\u7EC4\u7684\u6982\u5FF5\u3002</p><h5 id="_3-3-4-\u6D88\u8D39\u7EC4" tabindex="-1"><a class="header-anchor" href="#_3-3-4-\u6D88\u8D39\u7EC4" aria-hidden="true">#</a> 3.3.4 \u6D88\u8D39\u7EC4</h5><p>\u5C068802\u548C8803\u5206\u4E3A\u540C\u4E00\u4E2A\u7EC4atguiguA\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635336507339-9c869958-4d72-4822-9c58-867fc28ca041.png" alt="img"></p><p>\u6D4B\u8BD5\uFF0C\u73B0\u5728\u6CA1\u6709\u51FA\u73B0\u91CD\u590D\u6D88\u8D39\u95EE\u9898\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635336599938-4e3b923c-5fa4-4c47-b50b-97e9f2c0e8af.png" alt="img"></p><p>8802/8803\u5B9E\u73B0\u4E86\u8F6E\u8BE2\u5206\u7EC4\uFF0C\u6BCF\u6B21\u53EA\u6709\u4E00\u4E2A\u6D88\u8D39\u8005\u63A5\u6536\u6D88\u606F\uFF0C8801\u6A21\u5757\u7684\u53D1\u7684\u6D88\u606F\u53EA\u80FD\u88AB8802\u62168803\u5176\u4E2D\u4E00\u4E2A\u63A5\u6536\u5230\uFF0C\u8FD9\u6837\u907F\u514D\u4E86\u91CD\u590D\u6D88\u8D39\u3002</p><h4 id="_3-4-\u8FD0\u884C\u540E\u7684\u95EE\u98982-\u6D88\u606F\u6301\u4E45\u5316\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_3-4-\u8FD0\u884C\u540E\u7684\u95EE\u98982-\u6D88\u606F\u6301\u4E45\u5316\u95EE\u9898" aria-hidden="true">#</a> 3.4 \u8FD0\u884C\u540E\u7684\u95EE\u98982\uFF1A\u6D88\u606F\u6301\u4E45\u5316\u95EE\u9898</h4><p>\u901A\u8FC7\u4E0A\u8FF0\uFF0C\u89E3\u51B3\u4E86\u91CD\u590D\u6D88\u8D39\u95EE\u9898\uFF0C\u518D\u770B\u770B\u6301\u4E45\u5316</p><ol><li>\u505C\u6B628802/8803\u5E76\u53BB\u9664\u63898802\u7684\u5206\u7EC4group: atguiguA\uFF088803\u7684\u5206\u7EC4group: atguiguA\u6CA1\u6709\u53BB\u6389\uFF09</li><li>8801\u5148\u53D1\u90014\u6761\u6D88\u606F\u5230rabbitmq</li></ol><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635337927157-4347dc83-cf51-46fd-96e1-71856ef64cea.png" alt="img"></p><ol><li>\u5148\u542F\u52A88802\uFF0C\u65E0\u5206\u7EC4\u5C5E\u6027\u914D\u7F6E\uFF0C\u540E\u53F0\u6CA1\u6709\u6253\u51FA\u6765\u6D88\u606F</li></ol><p>\u53D1\u73B08802\u6CA1\u6709\u6536\u5230\u6D88\u606F\uFF0C\u6D88\u606F\u4E22\u5931\u3002\u3002\u3002\u3002</p><ol><li>\u518D\u542F\u52A88803\uFF0C\u6709\u5206\u7EC4\u5C5E\u6027\u914D\u7F6E\uFF0C\u540E\u53F0\u6253\u5370\u51FA\u6765\u4E86MQ\u4E0A\u7684\u6D88\u606F</li></ol><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635337824534-9dac5403-699a-4f09-8666-5566eca67cea.png" alt="img"></p><h2 id="_12-springcloud-sleuth-\u5206\u5E03\u5F0F\u8BF7\u6C42\u94FE\u8DEF\u8DDF\u8E2A" tabindex="-1"><a class="header-anchor" href="#_12-springcloud-sleuth-\u5206\u5E03\u5F0F\u8BF7\u6C42\u94FE\u8DEF\u8DDF\u8E2A" aria-hidden="true">#</a> 12.SpringCloud Sleuth \u5206\u5E03\u5F0F\u8BF7\u6C42\u94FE\u8DEF\u8DDF\u8E2A</h2><h3 id="\u4E00\u3001\u6982\u8FF0-2" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001\u6982\u8FF0-2" aria-hidden="true">#</a> \u4E00\u3001\u6982\u8FF0</h3><p>\u5206\u5E03\u5F0F\u8BF7\u6C42\u94FE\u8DEF\u8DDF\u8E2A\uFF1A</p><p>\u4E3A\u4EC0\u4E48\u4F1A\u51FA\u73B0\u8FD9\u4E2A\u6280\u672F\uFF0C\u8981\u89E3\u51B3\u54EA\u4E9B\u95EE\u9898\u3002</p><p>\u5728\u5FAE\u670D\u52A1\u6846\u67B6\u4E2D\uFF0C\u4E00\u4E2A\u5BA2\u6237\u7AEF\u53D1\u8D77\u7684\u8BF7\u6C42\u5728\u540E\u7AEF\u7CFB\u7EDF\u4E2D\u4F1A\u7ECF\u8FC7\u591A\u6B21\u4E0D\u540C\u7684\u670D\u52A1\u8282\u70B9\u8C03\u7528\u6765\u534F\u540C\u4EA7\u751F\u6700\u540E\u7684\u8BF7\u6C42\u7ED3\u679C\uFF0C\u6BCF\u4E00\u4E2A\u524D\u6BB5\u8BF7\u6C42\u90FD\u4F1A\u5F62\u6210\u4E00\u6761\u590D\u6742\u7684\u5206\u5E03\u5F0F\u670D\u52A1\u8C03\u7528\u94FE\u8DEF\uFF0C\u94FE\u8DEF\u4E2D\u7684\u4EFB\u4F55\u4E00\u73AF\u51FA\u73B0\u9AD8\u5EF6\u65F6\u6216\u9519\u8BEF\u90FD\u4F1A\u5F15\u8D77\u6574\u4E2A\u8BF7\u6C42\u6700\u540E\u7684\u5931\u8D25\u3002</p><p>SpringCloudSleuth\u63D0\u4F9B\u4E86\u4E00\u5957\u5B8C\u6574\u7684\u670D\u52A1\u8DDF\u8E2A\u7684\u89E3\u51B3\u65B9\u6848\uFF0C\u5728\u5206\u5E03\u5F0F\u7CFB\u7EDF\u4E2D\u63D0\u4F9B\u4E50\u8FFD\u8E2A\u89E3\u51B3\u65B9\u6848\u5E76\u4E14\u517C\u5BB9\u652F\u6301\u4E86zipkin\u3002</p>`,79),oe={href:"https://github.com/spring-cloud/spring-cloud-sleuth",target:"_blank",rel:"noopener noreferrer"},ce=a("\u5B98\u7F51"),le=p('<h3 id="\u4E8C\u3001\u642D\u5EFA\u94FE\u8DEF\u76D1\u63A7\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001\u642D\u5EFA\u94FE\u8DEF\u76D1\u63A7\u6B65\u9AA4" aria-hidden="true">#</a> \u4E8C\u3001\u642D\u5EFA\u94FE\u8DEF\u76D1\u63A7\u6B65\u9AA4</h3><h4 id="_2-1-zipkin" tabindex="-1"><a class="header-anchor" href="#_2-1-zipkin" aria-hidden="true">#</a> 2.1 zipkin</h4><p>Sleuth\uFF1A\u8D1F\u8D23\u8DDF\u8E2A\u6574\u7406\uFF0Czipkin\uFF1A\u8D1F\u8D23\u5C55\u73B0</p><h5 id="_2-1-1-\u4E0B\u8F7D" tabindex="-1"><a class="header-anchor" href="#_2-1-1-\u4E0B\u8F7D" aria-hidden="true">#</a> 2.1.1 \u4E0B\u8F7D</h5><p>SpringCloud\u4ECEF\u7248\u8D77\u5DF2\u4E0D\u9700\u8981\u81EA\u5DF1\u6784\u5EFAZipkin Server\u4E86\uFF0C\u53EA\u9700\u8C03\u7528jar\u5305\u5373\u53EF</p>',5),ie={href:"https://repo1.maven.org/maven2/io/zipkin/java/zipkin-server/",target:"_blank",rel:"noopener noreferrer"},ue=a("\u4E0B\u8F7D\u5730\u5740"),re=n("p",null,"zipkin-server-2.12.9-exec.jar",-1),ke=n("h5",{id:"_2-1-2-\u8FD0\u884Cjar-\u8FD0\u884C\u63A7\u5236\u53F0",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2-1-2-\u8FD0\u884Cjar-\u8FD0\u884C\u63A7\u5236\u53F0","aria-hidden":"true"},"#"),a(" 2.1.2 \u8FD0\u884Cjar&\u8FD0\u884C\u63A7\u5236\u53F0")],-1),de=n("p",null,"cd\u5230zipkin-server-2.12.9-exec.jar\u7684\u4E0B\u8F7D\u76EE\u5F55",-1),ge=n("p",null,[a("\u76F4\u63A5\u5728cmd\u4E2D\u8FD0\u884C"),n("code",null,"java -jar zipkin-server-2.12.9-exec.jar")],-1),me=n("p",null,[n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635590806474-7cca2264-5faa-45cb-9e77-4de6901a319b.png",alt:"img"})],-1),ve=a("\u8BBF\u95EE"),be={href:"http://localhost:9411/zipkin/",target:"_blank",rel:"noopener noreferrer"},he=a("http://localhost:9411/zipkin/"),ye=a(" web\u4EA4\u4E92\u754C\u9762"),fe=p(`<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635590851969-cbec9870-c332-4055-ae97-2e5077803f5f.png" alt="img"></p><p>zipkin\u542F\u52A8\u6210\u529F</p><h5 id="_2-1-3-\u5B8C\u6574\u7684\u8C03\u7528\u94FE\u8DEF" tabindex="-1"><a class="header-anchor" href="#_2-1-3-\u5B8C\u6574\u7684\u8C03\u7528\u94FE\u8DEF" aria-hidden="true">#</a> 2.1.3 \u5B8C\u6574\u7684\u8C03\u7528\u94FE\u8DEF</h5><p>\u8868\u793A\u4E00\u8BF7\u6C42\u94FE\u8DEF\uFF0C\u4E00\u6761\u94FE\u8DEF\u901A\u8FC7Trace Id\u552F\u4E00\u6807\u8BC6\uFF0CSpan\u6807\u8BC6\u53D1\u8D77\u7684\u8BF7\u6C42\u4FE1\u606F\uFF0C\u5404span\u901A\u8FC7parent id \u5173\u8054\u8D77\u6765</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635591231305-e4f71b4b-ee13-4e37-8838-dbb527d48acb.png" alt="img"></p><p>Trace\uFF1A\u7C7B\u4F3C\u4E8E\u6811\u7ED3\u6784\u7684Span\u96C6\u5408\uFF0C\u8868\u793A\u4E00\u6761\u8C03\u7528\u94FE\u8DEF\uFF0C\u5B58\u5728\u552F\u4E00\u6807\u8BC6\u3002</p><p>Span\uFF1A\u8868\u793A\u8C03\u7528\u94FE\u8DEF\u6765\u6E90\uFF0C\u901A\u4FD7\u7684\u7406\u89E3Span\u5C31\u662F\u4E00\u6B21\u8BF7\u6C42\u4FE1\u606F\u3002\u5404\u4E2ASpan\u901A\u8FC7parentID\u5173\u8054\u8D77\u6765\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635591377253-d8c969bd-6d80-4e7b-bb6a-3206c548639d.png" alt="img"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635591394872-a5a4cab7-dc38-49eb-81f2-45274ad22084.png" alt="img"></p><h4 id="_2-2-\u670D\u52A1\u63D0\u4F9B\u8005cloud-provider-payment8001" tabindex="-1"><a class="header-anchor" href="#_2-2-\u670D\u52A1\u63D0\u4F9B\u8005cloud-provider-payment8001" aria-hidden="true">#</a> 2.2 \u670D\u52A1\u63D0\u4F9B\u8005cloud-provider-payment8001</h4><h5 id="_2-2-1-pom" tabindex="-1"><a class="header-anchor" href="#_2-2-1-pom" aria-hidden="true">#</a> 2.2.1 pom</h5><p>\u5F15\u5165spring-cloud-starter-zipkin\u4F9D\u8D56\uFF0C\u5176\u5305\u542B\u4E86sleuth+zipkin</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jdk8cloud2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-provider-payment8001<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--\u5305\u542B\u4E86sleuth+zipkin--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-zipkin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--eureka-client--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- \u5F15\u5165\u81EA\u5DF1\u5B9A\u4E49\u7684api\u901A\u7528\u5305\uFF0C\u53EF\u4EE5\u4F7F\u7528Payment\u652F\u4ED8Entity --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--mysql-connector-java--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--jdbc--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-2-2-yml" tabindex="-1"><a class="header-anchor" href="#_2-2-2-yml" aria-hidden="true">#</a> 2.2.2 yml</h5><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635596278263-5365038f-521b-4745-98dc-a943d24adebb.png" alt="img"></p><p>\u6CE8\u610F\u7F29\u8FDB\uFF01</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8001</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>payment<span class="token punctuation">-</span>service
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource            <span class="token comment">## \u5F53\u524D\u6570\u636E\u6E90\u64CD\u4F5C\u7C7B\u578B</span>
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/dbCloud<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=utf-8&amp;useSSL=false</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">10086</span>
  <span class="token key atrule">zipkin</span><span class="token punctuation">:</span>
    <span class="token key atrule">base-url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">9411</span>
  <span class="token key atrule">sleuth</span><span class="token punctuation">:</span>
    <span class="token key atrule">sampler</span><span class="token punctuation">:</span>
      <span class="token comment">##\u91C7\u6837\u7387\u503C\u4ECB\u4E8E 0 \u5230 1 \u4E4B\u95F4\uFF0C1 \u5219\u8868\u793A\u5168\u90E8\u91C7\u96C6</span>
      <span class="token key atrule">probability</span><span class="token punctuation">:</span> <span class="token number">1</span>

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">instance-id</span><span class="token punctuation">:</span> payment8001
    <span class="token key atrule">prefer-ip-address</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>     <span class="token comment">##\u8BBF\u95EE\u8DEF\u5F84\u53EF\u4EE5\u663E\u793AIP\u5730\u5740</span>
    <span class="token comment">##\u5FC3\u8DF3\u68C0\u6D4B\u4E0E\u7EED\u7EA6\u65F6\u95F4</span>
    <span class="token comment">##\u5F00\u53D1\u65F6\u8BBE\u7F6E\u5C0F\u4E9B\uFF0C\u4FDD\u8BC1\u670D\u52A1\u5173\u95ED\u540E\u6CE8\u518C\u4E2D\u5FC3\u80FD\u53CA\u65F6\u5254\u9664\u670D\u52A1</span>
    <span class="token comment">##Eureka\u5BA2\u6237\u7AEF\u5411\u670D\u52A1\u7AEF\u53D1\u9001\u5FC3\u8DF3\u7684\u65F6\u95F4\u95F4\u9694\uFF0C\u5355\u4F4D\u4E3A\u79D2(\u9ED8\u8BA4\u662F30\u79D2)</span>
    <span class="token key atrule">lease-renewal-interval-in-seconds</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token comment">##Eureka\u670D\u52A1\u7AEF\u5728\u6536\u5230\u6700\u540E\u4E00\u6B21\u5FC3\u8DF3\u540E\u7B49\u5F85\u65F6\u95F4\u4E0A\u9650\uFF0C\u5355\u4F4D\u4E3A\u79D2(\u9ED8\u8BA4\u662F90\u79D2)\uFF0C\u8D85\u65F6\u5C06\u5254\u9664\u670D\u52A1</span>
    <span class="token key atrule">lease-expiration-duration-in-seconds</span><span class="token punctuation">:</span> <span class="token number">2</span>

  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token comment">##\u8868\u793A\u662F\u5426\u5C06\u81EA\u5DF1\u6CE8\u518C\u8FDBEurekaServer\u9ED8\u8BA4\u4E3Atrue\u3002</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment">##\u662F\u5426\u4ECEEurekaServer\u6293\u53D6\u5DF2\u6709\u7684\u6CE8\u518C\u4FE1\u606F\uFF0C\u9ED8\u8BA4\u4E3Atrue\u3002\u5355\u8282\u70B9\u65E0\u6240\u8C13\uFF0C\u96C6\u7FA4\u5FC5\u987B\u8BBE\u7F6E\u4E3Atrue\u624D\u80FD\u914D\u5408ribbon\u4F7F\u7528\u8D1F\u8F7D\u5747\u8861</span>
    <span class="token key atrule">fetchRegistry</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
<span class="token comment">##      defaultZone: http://localhost:7001/eureka  ## \u5355\u673A\u7248</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//eureka7002.com<span class="token punctuation">:</span>7002/eureka <span class="token comment">##\u96C6\u7FA4\u7248</span>



<span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
  <span class="token key atrule">mapperLocations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>mapper/<span class="token important">*.xml</span>
  <span class="token key atrule">type-aliases-package</span><span class="token punctuation">:</span> com.atguigu.springcloud.entities    <span class="token comment">## \u6240\u6709Entity\u522B\u540D\u7C7B\u6240\u5728\u5305</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-2-3-\u4E1A\u52A1\u7C7Bpaymentcontroller" tabindex="-1"><a class="header-anchor" href="#_2-2-3-\u4E1A\u52A1\u7C7Bpaymentcontroller" aria-hidden="true">#</a> 2.2.3 \u4E1A\u52A1\u7C7BPaymentController</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/payment/zipkin&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentZipkin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;hi ,i&#39;am paymentzipkin server fall back\uFF0Cwelcome to atguigu\uFF0CO(\u2229_\u2229)O\u54C8\u54C8~&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-\u670D\u52A1\u6D88\u8D39\u8005cloud-consumer-order80" tabindex="-1"><a class="header-anchor" href="#_2-3-\u670D\u52A1\u6D88\u8D39\u8005cloud-consumer-order80" aria-hidden="true">#</a> 2.3 \u670D\u52A1\u6D88\u8D39\u8005cloud-consumer-order80</h4><h5 id="_2-3-1-pom" tabindex="-1"><a class="header-anchor" href="#_2-3-1-pom" aria-hidden="true">#</a> 2.3.1 pom</h5><p>\u5F15\u5165spring-cloud-starter-zipkin\u4F9D\u8D56\uFF0C\u5176\u5305\u542B\u4E86sleuth+zipkin</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jdk8cloud2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-consumer-order80<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--\u5305\u542B\u4E86sleuth+zipkin--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-zipkin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--eureka-client--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- \u5F15\u5165\u81EA\u5DF1\u5B9A\u4E49\u7684api\u901A\u7528\u5305\uFF0C\u53EF\u4EE5\u4F7F\u7528Payment\u652F\u4ED8Entity --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-3-2-yml" tabindex="-1"><a class="header-anchor" href="#_2-3-2-yml" aria-hidden="true">#</a> 2.3.2 yml</h5><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635596879846-d480e544-07f8-4843-970d-11b86cd8bb7f.png" alt="img"></p><p>\u6CE8\u610F\u7F29\u8FDB\uFF01</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>order<span class="token punctuation">-</span>service
  <span class="token key atrule">zipkin</span><span class="token punctuation">:</span>
    <span class="token key atrule">base-url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">9411</span>
  <span class="token key atrule">sleuth</span><span class="token punctuation">:</span>
    <span class="token key atrule">sampler</span><span class="token punctuation">:</span>
      <span class="token key atrule">probability</span><span class="token punctuation">:</span> <span class="token number">1</span>

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token comment">##\u8868\u793A\u662F\u5426\u5C06\u81EA\u5DF1\u6CE8\u518C\u8FDBEurekaServer\u9ED8\u8BA4\u4E3Atrue\u3002</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment">##\u662F\u5426\u4ECEEurekaServer\u6293\u53D6\u5DF2\u6709\u7684\u6CE8\u518C\u4FE1\u606F\uFF0C\u9ED8\u8BA4\u4E3Atrue\u3002\u5355\u8282\u70B9\u65E0\u6240\u8C13\uFF0C\u96C6\u7FA4\u5FC5\u987B\u8BBE\u7F6E\u4E3Atrue\u624D\u80FD\u914D\u5408ribbon\u4F7F\u7528\u8D1F\u8F7D\u5747\u8861</span>
    <span class="token key atrule">fetchRegistry</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
<span class="token comment">##      defaultZone: http://localhost:7001/eureka</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//eureka7002.com<span class="token punctuation">:</span>7002/eureka <span class="token comment">##\u96C6\u7FA4\u7248</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">instance-id</span><span class="token punctuation">:</span> order80
    <span class="token key atrule">prefer-ip-address</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-3-3-\u4E1A\u52A1\u7C7Bordercontroller" tabindex="-1"><a class="header-anchor" href="#_2-3-3-\u4E1A\u52A1\u7C7Bordercontroller" aria-hidden="true">#</a> 2.3.3 \u4E1A\u52A1\u7C7BOrderController</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// ====================&gt; zipkin+sleuth</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/comsumer/payment/zipkin&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentZipKin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:8001&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;/payment/zipkin/&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-4-\u6D4B\u8BD5-1" tabindex="-1"><a class="header-anchor" href="#_2-4-\u6D4B\u8BD5-1" aria-hidden="true">#</a> 2.4 \u6D4B\u8BD5</h4><p><strong>\u542F\u52A87001\u30017002\u30018001\u300180</strong></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635597362614-11781bbe-c553-4911-9662-1510bd81f85f.png" alt="img"></p><p><strong>8001\u81EA\u6D4B</strong></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635597377973-ab80266f-a31c-4872-9eb3-dbf483f30627.png" alt="img"></p><p><strong>80\u8C03\u75288001</strong></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635598096845-7eab851f-3f2b-4910-a62f-0f749c9e8e92.png" alt="img"></p>`,36),_e=a("**\u6253\u5F00\u6D4F\u89C8\u5668\u8BBF\u95EE\uFF1A**"),xe={href:"http://localhost:9411",target:"_blank",rel:"noopener noreferrer"},qe=a("http://localhost:9411"),we=n("p",null,[n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635598316752-fbe95dae-0aed-49fe-9ab6-7a2adb2ef2aa.png",alt:"img"})],-1),Ie=n("p",null,"order\u670D\u52A1\u8C03\u7528\u4E86\u652F\u4ED8\u670D\u52A1",-1),Se=n("p",null,[n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635598512853-2a7b2b33-0d4b-416d-a13e-85e484c20842.png",alt:"img"})],-1),Ce=n("p",null,[n("strong",null,"\u8BF4\u660E"),a("\uFF1Aorder\u8C03\u7528\u7684payment\u670D\u52A1\uFF0C\u53D1\u9001\u7684\u662F\u4EC0\u4E48\u8BF7\u6C42\uFF0C\u8BF7\u6C42\u94FE\u63A5\uFF0C\u90FD\u6709\u8BE6\u7EC6\u7684\u8BB0\u5F55")],-1),je=n("p",null,"\u67E5\u770B\u4F9D\u8D56\u5173\u7CFB",-1),Pe=n("p",null,[n("img",{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/1635598407458-63e74243-cf5f-499b-bbb1-c868616ea57f.png",alt:"img"})],-1);function Ee(Re,Me){const s=l("ExternalLinkIcon");return o(),c("div",null,[u,r,n("blockquote",null,[k,n("p",null,[n("a",d,[g,t(s)])])]),m,n("p",null,[n("a",v,[b,t(s)])]),h,n("p",null,[n("a",y,[f,t(s)])]),n("p",null,[n("a",_,[x,t(s)])]),n("p",null,[n("a",q,[w,t(s)])]),I,n("p",null,[n("a",S,[C,t(s)])]),n("p",null,[n("a",j,[P,t(s)])]),E,n("p",null,[R,n("a",M,[T,t(s)])]),H,n("p",null,[O,n("a",A,[B,t(s)])]),F,n("p",null,[L,n("a",V,[N,t(s)])]),z,n("p",null,[G,n("strong",null,[n("a",D,[U,t(s)])]),Z,n("strong",null,[n("a",Q,[X,t(s)])]),W]),Y,n("p",null,[$,n("strong",null,[n("a",K,[J,t(s)])]),nn,n("strong",null,[n("a",an,[sn,t(s)])])]),tn,n("p",null,[n("a",pn,[en,t(s)])]),on,n("p",null,[cn,n("a",ln,[un,t(s)]),rn]),kn,n("p",null,[dn,n("a",gn,[mn,t(s)])]),vn,n("p",null,[bn,n("a",hn,[yn,t(s)])]),fn,n("ol",null,[n("li",null,[_n,n("a",xn,[qn,t(s)])])]),wn,n("p",null,[n("a",In,[Sn,t(s)])]),Cn,n("p",null,[n("a",jn,[Pn,t(s)])]),En,n("p",null,[Rn,n("a",Mn,[Tn,t(s)])]),Hn,n("p",null,[On,An,n("a",Bn,[Fn,t(s)]),Ln]),Vn,n("p",null,[n("a",Nn,[zn,t(s)]),Gn,n("a",Dn,[Un,t(s)])]),Zn,n("p",null,[n("a",Qn,[Xn,t(s)])]),Wn,n("p",null,[Yn,n("a",$n,[Kn,t(s)])]),Jn,n("p",null,[na,n("a",aa,[sa,t(s)]),ta]),pa,n("p",null,[n("a",ea,[oa,t(s)])]),ca,la,n("p",null,[n("a",ia,[ua,t(s)])]),ra,ka,n("p",null,[da,n("a",ga,[ma,t(s)]),va]),ba,n("p",null,[ha,n("a",ya,[fa,t(s)])]),_a,n("p",null,[n("a",xa,[qa,t(s)]),wa,n("a",Ia,[Sa,t(s)])]),Ca,n("p",null,[n("a",ja,[Pa,t(s)])]),Ea,n("p",null,[n("a",Ra,[Ma,t(s)])]),Ta,n("ul",null,[n("li",null,[Ha,n("a",Oa,[Aa,t(s)])])]),Ba,Fa,La,Va,n("ul",null,[n("li",null,[n("p",null,[Na,n("a",za,[Ga,t(s)])])]),Da]),Ua,n("ul",null,[n("li",null,[n("p",null,[Za,n("a",Qa,[Xa,t(s)])])]),Wa]),Ya,n("p",null,[$a,n("a",Ka,[Ja,t(s)])]),n("p",null,[ns,n("a",as,[ss,t(s)]),ts,n("a",ps,[es,t(s)])]),os,n("p",null,[n("a",cs,[ls,t(s)])]),is,n("ul",null,[us,n("li",null,[rs,ks,n("a",ds,[gs,t(s)]),ms]),vs]),bs,n("p",null,[hs,ys,n("a",fs,[_s,t(s)])]),n("p",null,[xs,n("a",qs,[ws,t(s)])]),Is,n("p",null,[n("a",Ss,[Cs,t(s)])]),js,n("p",null,[Ps,n("a",Es,[Rs,t(s)])]),Ms,n("p",null,[n("a",Ts,[Hs,t(s)])]),Os,n("p",null,[As,n("a",Bs,[Fs,t(s)])]),Ls,n("p",null,[n("a",Vs,[Ns,t(s)])]),zs,Gs,Ds,Us,Zs,n("p",null,[n("a",Qs,[Xs,t(s)])]),Ws,Ys,n("p",null,[$s,n("a",Ks,[Js,t(s)]),nt]),at,n("p",null,[st,n("a",tt,[pt,t(s)])]),et,n("p",null,[n("a",ot,[ct,t(s)])]),lt,n("p",null,[it,n("a",ut,[rt,t(s)])]),kt,dt,n("p",null,[gt,n("a",mt,[vt,t(s)]),bt]),ht,yt,n("p",null,[ft,n("a",_t,[xt,t(s)])]),qt,n("ul",null,[n("li",null,[n("a",wt,[It,t(s)])]),n("li",null,[n("a",St,[Ct,t(s)])]),n("li",null,[n("a",jt,[Pt,t(s)])])]),Et,n("ul",null,[n("li",null,[n("a",Rt,[Mt,t(s)])]),n("li",null,[n("a",Tt,[Ht,t(s)])]),n("li",null,[n("a",Ot,[At,t(s)])])]),Bt,n("ul",null,[n("li",null,[n("a",Ft,[Lt,t(s)])]),n("li",null,[n("a",Vt,[Nt,t(s)])]),n("li",null,[n("a",zt,[Gt,t(s)])])]),Dt,Ut,Zt,Qt,n("ul",null,[n("li",null,[n("a",Xt,[Wt,t(s)])]),n("li",null,[n("a",Yt,[$t,t(s)])]),n("li",null,[n("a",Kt,[Jt,t(s)])])]),np,n("p",null,[ap,n("a",sp,[tp,t(s)]),pp]),ep,n("p",null,[op,n("a",cp,[lp,t(s)]),ip]),up,n("p",null,[n("a",rp,[kp,t(s)]),dp]),gp,mp,vp,bp,hp,n("p",null,[n("a",yp,[fp,t(s)])]),_p,xp,qp,wp,Ip,n("p",null,[Sp,n("a",Cp,[jp,t(s)]),Pp]),Ep,n("p",null,[Rp,Mp,Tp,n("a",Hp,[Op,t(s)]),Ap,Bp,Fp,Lp,Vp]),Np,n("p",null,[zp,n("a",Gp,[Dp,t(s)]),Up]),Zp,n("p",null,[n("a",Qp,[Xp,t(s)]),Wp,n("a",Yp,[$p,t(s)]),Kp,n("a",Jp,[ne,t(s)])]),ae,n("p",null,[se,n("a",te,[pe,t(s)])]),ee,n("p",null,[n("a",oe,[ce,t(s)])]),le,n("p",null,[n("a",ie,[ue,t(s)])]),re,ke,de,ge,me,n("p",null,[ve,n("a",be,[he,t(s)]),ye]),fe,n("p",null,[_e,n("a",xe,[qe,t(s)])]),we,Ie,Se,Ce,je,Pe])}var Oe=e(i,[["render",Ee],["__file","SpringCloud.html.vue"]]);export{Oe as default};
