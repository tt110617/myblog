import{_ as l}from"./plugin-vue_export-helper.21dcd24c.js";import{o as d,c,a as e,b as s,d as a,e as i,r}from"./app.6a2d513d.js";const t={},o=a(`<h1 id="\u4E8C\u3001mysql\u7D22\u5F15\u53CA\u8C03\u4F18\u7BC7" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001mysql\u7D22\u5F15\u53CA\u8C03\u4F18\u7BC7" aria-hidden="true">#</a> \u4E8C\u3001MySQL\u7D22\u5F15\u53CA\u8C03\u4F18\u7BC7</h1><h2 id="\u7B2C06\u7AE0-\u7D22\u5F15\u7684\u6570\u636E\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#\u7B2C06\u7AE0-\u7D22\u5F15\u7684\u6570\u636E\u7ED3\u6784" aria-hidden="true">#</a> \u7B2C06\u7AE0_\u7D22\u5F15\u7684\u6570\u636E\u7ED3\u6784</h2><h3 id="_1-\u4E3A\u4EC0\u4E48\u4F7F\u7528\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_1-\u4E3A\u4EC0\u4E48\u4F7F\u7528\u7D22\u5F15" aria-hidden="true">#</a> 1. \u4E3A\u4EC0\u4E48\u4F7F\u7528\u7D22\u5F15</h3><p>\u7D22\u5F15\u662F\u5B58\u50A8\u5F15\u64CE\u7528\u4E8E\u5FEB\u901F\u627E\u5230\u6570\u636E\u8BB0\u5F55\u7684\u4E00\u79CD\u6570\u636E\u7ED3\u6784\uFF0C\u5C31\u597D\u6BD4\u4E00\u672C\u6559\u79D1\u4E66\u7684\u76EE\u5F55\u90E8\u5206\uFF0C\u901A\u8FC7\u76EE\u5F55\u4E2D\u627E\u5230\u5BF9\u5E94\u6587\u7AE0\u7684\u9875\u7801\uFF0C\u4FBF\u53EF\u5FEB\u901F\u5B9A\u4F4D\u5230\u9700\u8981\u7684\u6587\u7AE0\u3002MySQL\u4E2D\u4E5F\u662F\u4E00\u6837\u7684\u9053\u7406\uFF0C\u8FDB\u884C\u6570\u636E\u67E5\u627E\u65F6\uFF0C\u9996\u5148\u67E5\u770B\u67E5\u8BE2\u6761\u4EF6\u662F\u5426\u547D\u4E2D\u67D0\u6761\u7D22\u5F15\uFF0C\u7B26\u5408\u5219<code>\u901A\u8FC7\u7D22\u5F15\u67E5\u627E</code>\u76F8\u5173\u6570\u636E\uFF0C\u5982\u679C\u4E0D\u7B26\u5408\u5219\u9700\u8981<code>\u5168\u8868\u626B\u63CF</code>\uFF0C\u5373\u9700\u8981\u4E00\u6761\u4E00\u6761\u5730\u67E5\u627E\u8BB0\u5F55\uFF0C\u76F4\u5230\u627E\u5230\u4E0E\u6761\u4EF6\u7B26\u5408\u7684\u8BB0\u5F55\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220616141351236.png" alt="image-20220616141351236"></p><p>\u5982\u4E0A\u56FE\u6240\u793A\uFF0C\u6570\u636E\u5E93\u6CA1\u6709\u7D22\u5F15\u7684\u60C5\u51B5\u4E0B\uFF0C\u6570\u636E<code>\u5206\u5E03\u5728\u786C\u76D8\u4E0D\u540C\u7684\u4F4D\u7F6E\u4E0A\u9762</code>\uFF0C\u8BFB\u53D6\u6570\u636E\u65F6\uFF0C\u6446\u81C2\u9700\u8981\u524D\u540E\u6446\u52A8\u67E5\u8BE2\u6570\u636E\uFF0C\u8FD9\u6837\u64CD\u4F5C\u975E\u5E38\u6D88\u8017\u65F6\u95F4\u3002\u5982\u679C<code>\u6570\u636E\u987A\u5E8F\u6446\u653E</code>\uFF0C\u90A3\u4E48\u4E5F\u9700\u8981\u4ECE1\u52306\u884C\u6309\u987A\u5E8F\u8BFB\u53D6\uFF0C\u8FD9\u6837\u5C31\u76F8\u5F53\u4E8E\u8FDB\u884C\u4E866\u6B21IO\u64CD\u4F5C\uFF0C<code>\u4F9D\u65E7\u975E\u5E38\u8017\u65F6</code>\u3002\u5982\u679C\u6211\u4EEC\u4E0D\u501F\u52A9\u4EFB\u4F55\u7D22\u5F15\u7ED3\u6784\u5E2E\u52A9\u6211\u4EEC\u5FEB\u901F\u5B9A\u4F4D\u6570\u636E\u7684\u8BDD\uFF0C\u6211\u4EEC\u67E5\u627E Col 2 = 89 \u8FD9\u6761\u8BB0\u5F55\uFF0C\u5C31\u8981\u9010\u884C\u53BB\u67E5\u627E\u3001\u53BB\u6BD4\u8F83\u3002\u4ECECol 2 = 34 \u5F00\u59CB\uFF0C\u8FDB\u884C\u6BD4\u8F83\uFF0C\u53D1\u73B0\u4E0D\u662F\uFF0C\u7EE7\u7EED\u4E0B\u4E00\u884C\u3002\u6211\u4EEC\u5F53\u524D\u7684\u8868\u53EA\u6709\u4E0D\u523010\u884C\u6570\u636E\uFF0C\u4F46\u5982\u679C\u8868\u5F88\u5927\u7684\u8BDD\uFF0C\u6709<code>\u4E0A\u5343\u4E07\u6761\u6570\u636E</code>\uFF0C\u5C31\u610F\u5473\u7740\u8981\u505A<code>\u5F88\u591A\u5F88\u591A\u6B21\u786C\u76D8I/0</code>\u624D\u80FD\u627E\u5230\u3002\u73B0\u5728\u8981\u67E5\u627E Col 2 = 89 \u8FD9\u6761\u8BB0\u5F55\u3002CPU\u5FC5\u987B\u5148\u53BB\u78C1\u76D8\u67E5\u627E\u8FD9\u6761\u8BB0\u5F55\uFF0C\u627E\u5230\u4E4B\u540E\u52A0\u8F7D\u5230\u5185\u5B58\uFF0C\u518D\u5BF9\u6570\u636E\u8FDB\u884C\u5904\u7406\u3002\u8FD9\u4E2A\u8FC7\u7A0B\u6700\u8017\u65F6\u95F4\u5C31\u662F\u78C1\u76D8I/O\uFF08\u6D89\u53CA\u5230\u78C1\u76D8\u7684\u65CB\u8F6C\u65F6\u95F4\uFF08\u901F\u5EA6\u8F83\u5FEB\uFF09\uFF0C\u78C1\u5934\u7684\u5BFB\u9053\u65F6\u95F4(\u901F\u5EA6\u6162\u3001\u8D39\u65F6)\uFF09</p><p>\u5047\u5982\u7ED9\u6570\u636E\u4F7F\u7528 <code>\u4E8C\u53C9\u6811</code> \u8FD9\u6837\u7684\u6570\u636E\u7ED3\u6784\u8FDB\u884C\u5B58\u50A8\uFF0C\u5982\u4E0B\u56FE\u6240\u793A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220616142723266.png" alt="image-20220616142723266"></p><p>\u5BF9\u5B57\u6BB5 Col 2 \u6DFB\u52A0\u4E86\u7D22\u5F15\uFF0C\u5C31\u76F8\u5F53\u4E8E\u5728\u786C\u76D8\u4E0A\u4E3A Col 2 \u7EF4\u62A4\u4E86\u4E00\u4E2A\u7D22\u5F15\u7684\u6570\u636E\u7ED3\u6784\uFF0C\u5373\u8FD9\u4E2A <code>\u4E8C\u53C9\u641C\u7D22\u6811</code>\u3002\u4E8C\u53C9\u641C\u7D22\u6811\u7684\u6BCF\u4E2A\u7ED3\u70B9\u5B58\u50A8\u7684\u662F <code>(K, V) \u7ED3\u6784</code>\uFF0Ckey \u662F Col 2\uFF0Cvalue \u662F\u8BE5 key \u6240\u5728\u884C\u7684\u6587\u4EF6\u6307\u9488\uFF08\u5730\u5740\uFF09\u3002\u6BD4\u5982\uFF1A\u8BE5\u4E8C\u53C9\u641C\u7D22\u6811\u7684\u6839\u8282\u70B9\u5C31\u662F\uFF1A<code>(34, 0x07)</code>\u3002\u73B0\u5728\u5BF9 Col 2 \u6DFB\u52A0\u4E86\u7D22\u5F15\uFF0C\u8FD9\u65F6\u518D\u53BB\u67E5\u627E Col 2 = 89 \u8FD9\u6761\u8BB0\u5F55\u7684\u65F6\u5019\u4F1A\u5148\u53BB\u67E5\u627E\u8BE5\u4E8C\u53C9\u641C\u7D22\u6811\uFF08\u4E8C\u53C9\u6811\u7684\u904D\u5386\u67E5\u627E\uFF09\u3002\u8BFB 34 \u5230\u5185\u5B58\uFF0C89 &gt; 34; \u7EE7\u7EED\u53F3\u4FA7\u6570\u636E\uFF0C\u8BFB 89 \u5230\u5185\u5B58\uFF0C89==89\uFF1B\u627E\u5230\u6570\u636E\u8FD4\u56DE\u3002\u627E\u5230\u4E4B\u540E\u5C31\u6839\u636E\u5F53\u524D\u7ED3\u70B9\u7684 value \u5FEB\u901F\u5B9A\u4F4D\u5230\u8981\u67E5\u627E\u7684\u8BB0\u5F55\u5BF9\u5E94\u7684\u5730\u5740\u3002\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\uFF0C\u53EA\u9700\u8981 <code>\u67E5\u627E\u4E24\u6B21</code> \u5C31\u53EF\u4EE5\u5B9A\u4F4D\u5230\u8BB0\u5F55\u7684\u5730\u5740\uFF0C\u67E5\u8BE2\u901F\u5EA6\u5C31\u63D0\u9AD8\u4E86\u3002</p><p>\u8FD9\u5C31\u662F\u6211\u4EEC\u4E3A\u4EC0\u4E48\u8981\u5EFA\u7D22\u5F15\uFF0C\u76EE\u7684\u5C31\u662F\u4E3A\u4E86 <code>\u51CF\u5C11\u78C1\u76D8I/O\u7684\u6B21\u6570\uFF0C\u52A0\u5FEB\u67E5\u8BE2\u901F\u7387</code>\u3002</p><h3 id="_2-\u7D22\u5F15\u53CA\u5176\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_2-\u7D22\u5F15\u53CA\u5176\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 2. \u7D22\u5F15\u53CA\u5176\u4F18\u7F3A\u70B9</h3><h5 id="_2-1-\u7D22\u5F15\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_2-1-\u7D22\u5F15\u6982\u8FF0" aria-hidden="true">#</a> 2.1 \u7D22\u5F15\u6982\u8FF0</h5><p>MySQL\u5B98\u65B9\u5BF9\u7D22\u5F15\u7684\u5B9A\u4E49\u4E3A\uFF1A\u7D22\u5F15\uFF08Index\uFF09\u662F\u5E2E\u52A9MySQL\u9AD8\u6548\u83B7\u53D6\u6570\u636E\u7684<code>\u6570\u636E\u7ED3\u6784</code>\u3002</p><p><strong>\u7D22\u5F15\u7684\u672C\u8D28</strong>\uFF1A\u7D22\u5F15\u662F\u6570\u636E\u7ED3\u6784\u3002\u4F60\u53EF\u4EE5\u7B80\u5355\u7406\u89E3\u4E3A\u201C\u6392\u597D\u5E8F\u7684\u5FEB\u901F\u67E5\u627E\u6570\u636E\u7ED3\u6784\u201D\uFF0C\u6EE1\u8DB3\u7279\u5B9A\u67E5\u627E\u7B97\u6CD5\u3002 \u8FD9\u4E9B\u6570\u636E\u7ED3\u6784\u4EE5\u67D0\u79CD\u65B9\u5F0F\u6307\u5411\u6570\u636E\uFF0C \u8FD9\u6837\u5C31\u53EF\u4EE5\u5728\u8FD9\u4E9B\u6570\u636E\u7ED3\u6784\u7684\u57FA\u7840\u4E0A\u5B9E\u73B0 <code>\u9AD8\u7EA7\u67E5\u627E\u7B97\u6CD5</code> \u3002</p><p><code>\u7D22\u5F15\u662F\u5728\u5B58\u50A8\u5F15\u64CE\u4E2D\u5B9E\u73B0\u7684</code>\uFF0C\u56E0\u6B64\u6BCF\u79CD\u5B58\u50A8\u5F15\u64CE\u7684\u7D22\u5F15\u4E0D\u4E00\u5B9A\u5B8C\u5168\u76F8\u540C\uFF0C\u5E76\u4E14\u6BCF\u79CD\u5B58\u50A8\u5F15\u64CE\u4E0D\u4E00\u5B9A\u652F\u6301\u6240\u6709\u7D22\u5F15\u7C7B\u578B\u3002\u540C\u65F6\uFF0C\u5B58\u50A8\u5F15\u64CE\u53EF\u4EE5\u5B9A\u4E49\u6BCF\u4E2A\u8868\u7684 <code>\u6700\u5927\u7D22\u5F15\u6570</code>\u548C <code>\u6700\u5927\u7D22\u5F15\u957F\u5EA6</code>\u3002\u6240\u6709\u5B58\u50A8\u5F15\u64CE\u652F\u6301\u6BCF\u4E2A\u8868\u81F3\u5C1116\u4E2A\u7D22\u5F15\uFF0C\u603B\u7D22\u5F15\u957F\u5EA6\u81F3\u5C11\u4E3A256\u5B57\u8282\u3002\u6709\u4E9B\u5B58\u50A8\u5F15\u64CE\u652F\u6301\u66F4\u591A\u7684\u7D22\u5F15\u6570\u548C\u66F4\u5927\u7684\u7D22\u5F15\u957F\u5EA6\u3002</p><h5 id="_2-2-\u4F18\u70B9" tabindex="-1"><a class="header-anchor" href="#_2-2-\u4F18\u70B9" aria-hidden="true">#</a> 2.2 \u4F18\u70B9</h5><p>\uFF081\uFF09\u7C7B\u4F3C\u5927\u5B66\u56FE\u4E66\u9986\u5EFA\u4E66\u76EE\u7D22\u5F15\uFF0C\u63D0\u9AD8\u6570\u636E\u68C0\u7D22\u7684\u6548\u7387\uFF0C\u964D\u4F4E <strong>\u6570\u636E\u5E93\u7684IO\u6210\u672C</strong> \uFF0C\u8FD9\u4E5F\u662F\u521B\u5EFA\u7D22\u5F15\u6700\u4E3B \u8981\u7684\u539F\u56E0\u3002</p><p>\uFF082\uFF09\u901A\u8FC7\u521B\u5EFA\u552F\u4E00\u7D22\u5F15\uFF0C\u53EF\u4EE5\u4FDD\u8BC1\u6570\u636E\u5E93\u8868\u4E2D\u6BCF\u4E00\u884C <strong>\u6570\u636E\u7684\u552F\u4E00\u6027</strong> \u3002</p><p>\uFF083\uFF09\u5728\u5B9E\u73B0\u6570\u636E\u7684 \u53C2\u8003\u5B8C\u6574\u6027\u65B9\u9762\uFF0C\u53EF\u4EE5 <strong>\u52A0\u901F\u8868\u548C\u8868\u4E4B\u95F4\u7684\u8FDE\u63A5</strong> \u3002\u6362\u53E5\u8BDD\u8BF4\uFF0C\u5BF9\u4E8E\u6709\u4F9D\u8D56\u5173\u7CFB\u7684\u5B50\u8868\u548C\u7236\u8868\u8054\u5408\u67E5\u8BE2\u65F6\uFF0C \u53EF\u4EE5\u63D0\u9AD8\u67E5\u8BE2\u901F\u5EA6\u3002</p><p>\uFF084\uFF09\u5728\u4F7F\u7528\u5206\u7EC4\u548C\u6392\u5E8F\u5B50\u53E5\u8FDB\u884C\u6570\u636E\u67E5\u8BE2\u65F6\uFF0C\u53EF\u4EE5\u663E\u8457 <strong>\u51CF\u5C11\u67E5\u8BE2\u4E2D\u5206\u7EC4\u548C\u6392\u5E8F\u7684\u65F6\u95F4</strong> \uFF0C\u964D\u4F4E\u4E86CPU\u7684\u6D88\u8017\u3002</p><h5 id="_2-3-\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_2-3-\u7F3A\u70B9" aria-hidden="true">#</a> 2.3 \u7F3A\u70B9</h5><p>\u589E\u52A0\u7D22\u5F15\u4E5F\u6709\u8BB8\u591A\u4E0D\u5229\u7684\u65B9\u9762\uFF0C\u4E3B\u8981\u8868\u73B0\u5728\u5982\u4E0B\u51E0\u4E2A\u65B9\u9762\uFF1A</p><p>\uFF081\uFF09\u521B\u5EFA\u7D22\u5F15\u548C\u7EF4\u62A4\u7D22\u5F15\u8981 <strong>\u8017\u8D39\u65F6\u95F4</strong> \uFF0C\u5E76 \u4E14\u968F\u7740\u6570\u636E\u91CF\u7684\u589E\u52A0\uFF0C\u6240\u8017\u8D39\u7684\u65F6\u95F4\u4E5F\u4F1A\u589E\u52A0\u3002</p><p>\uFF082\uFF09\u7D22\u5F15\u9700\u8981\u5360 <strong>\u78C1\u76D8\u7A7A\u95F4</strong> \uFF0C\u9664\u4E86\u6570\u636E\u8868\u5360\u6570\u636E\u7A7A\u95F4\u4E4B \u5916\uFF0C\u6BCF\u4E00\u4E2A\u7D22\u5F15\u8FD8\u8981\u5360\u4E00\u5B9A\u7684\u7269\u7406\u7A7A\u95F4\uFF0C \u5B58\u50A8\u5728\u78C1\u76D8\u4E0A \uFF0C\u5982\u679C\u6709\u5927\u91CF\u7684\u7D22\u5F15\uFF0C\u7D22\u5F15\u6587\u4EF6\u5C31\u53EF\u80FD\u6BD4\u6570\u636E\u6587 \u4EF6\u66F4\u5FEB\u8FBE\u5230\u6700\u5927\u6587\u4EF6\u5C3A\u5BF8\u3002</p><p>\uFF083\uFF09\u867D\u7136\u7D22\u5F15\u5927\u5927\u63D0\u9AD8\u4E86\u67E5\u8BE2\u901F\u5EA6\uFF0C\u540C\u65F6\u5374\u4F1A <strong>\u964D\u4F4E\u66F4\u65B0\u8868\u7684\u901F\u5EA6</strong> \u3002\u5F53\u5BF9\u8868 \u4E2D\u7684\u6570\u636E\u8FDB\u884C\u589E\u52A0\u3001\u5220\u9664\u548C\u4FEE\u6539\u7684\u65F6\u5019\uFF0C\u7D22\u5F15\u4E5F\u8981\u52A8\u6001\u5730\u7EF4\u62A4\uFF0C\u8FD9\u6837\u5C31\u964D\u4F4E\u4E86\u6570\u636E\u7684\u7EF4\u62A4\u901F\u5EA6\u3002 \u56E0\u6B64\uFF0C\u9009\u62E9\u4F7F\u7528\u7D22\u5F15\u65F6\uFF0C\u9700\u8981\u7EFC\u5408\u8003\u8651\u7D22\u5F15\u7684\u4F18\u70B9\u548C\u7F3A\u70B9\u3002</p><p>\u56E0\u6B64\uFF0C\u9009\u62E9\u4F7F\u7528\u7D22\u5F15\u65F6\uFF0C\u9700\u8981\u7EFC\u5408\u8003\u8651\u7D22\u5F15\u7684\u4F18\u70B9\u548C\u7F3A\u70B9\u3002</p><blockquote><p>\u63D0\u793A\uFF1A</p><p>\u7D22\u5F15\u53EF\u4EE5\u63D0\u9AD8\u67E5\u8BE2\u7684\u901F\u5EA6\uFF0C\u4F46\u662F\u4F1A\u5F71\u54CD\u63D2\u5165\u8BB0\u5F55\u7684\u901F\u5EA6\u3002\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u6700\u597D\u7684\u529E\u6CD5\u662F\u5148\u5220\u9664\u8868\u4E2D\u7684\u7D22\u5F15\uFF0C\u7136\u540E\u63D2\u5165\u6570\u636E\uFF0C\u63D2\u5165\u5B8C\u6210\u540E\u518D\u521B\u5EFA\u7D22\u5F15\u3002</p></blockquote><h3 id="_3-innodb\u4E2D\u7D22\u5F15\u7684\u63A8\u6F14" tabindex="-1"><a class="header-anchor" href="#_3-innodb\u4E2D\u7D22\u5F15\u7684\u63A8\u6F14" aria-hidden="true">#</a> 3. InnoDB\u4E2D\u7D22\u5F15\u7684\u63A8\u6F14</h3><h5 id="_3-1-\u7D22\u5F15\u4E4B\u524D\u7684\u67E5\u627E" tabindex="-1"><a class="header-anchor" href="#_3-1-\u7D22\u5F15\u4E4B\u524D\u7684\u67E5\u627E" aria-hidden="true">#</a> 3.1 \u7D22\u5F15\u4E4B\u524D\u7684\u67E5\u627E</h5><p>\u5148\u6765\u770B\u4E00\u4E2A\u7CBE\u786E\u5339\u914D\u7684\u4F8B\u5B50\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT [\u5217\u540D\u5217\u8868] FROM \u8868\u540D WHERE \u5217\u540D = xxx;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h6 id="_1-\u5728\u4E00\u4E2A\u9875\u4E2D\u7684\u67E5\u627E" tabindex="-1"><a class="header-anchor" href="#_1-\u5728\u4E00\u4E2A\u9875\u4E2D\u7684\u67E5\u627E" aria-hidden="true">#</a> 1. \u5728\u4E00\u4E2A\u9875\u4E2D\u7684\u67E5\u627E</h6><p>\u5047\u8BBE\u76EE\u524D\u8868\u4E2D\u7684\u8BB0\u5F55\u6BD4\u8F83\u5C11\uFF0C\u6240\u6709\u7684\u8BB0\u5F55\u90FD\u53EF\u4EE5\u88AB\u5B58\u653E\u5230\u4E00\u4E2A\u9875\u4E2D\uFF0C\u5728\u67E5\u627E\u8BB0\u5F55\u7684\u65F6\u5019\u53EF\u4EE5\u6839\u636E\u641C\u7D22\u6761\u4EF6\u7684\u4E0D\u540C\u5206\u4E3A\u4E24\u79CD\u60C5\u51B5\uFF1A</p><ul><li><p>\u4EE5\u4E3B\u952E\u4E3A\u641C\u7D22\u6761\u4EF6</p><p>\u53EF\u4EE5\u5728\u9875\u76EE\u5F55\u4E2D\u4F7F\u7528 <code>\u4E8C\u5206\u6CD5</code> \u5FEB\u901F\u5B9A\u4F4D\u5230\u5BF9\u5E94\u7684\u69FD\uFF0C\u7136\u540E\u518D\u904D\u5386\u8BE5\u69FD\u5BF9\u7528\u5206\u7EC4\u4E2D\u7684\u8BB0\u5F55\u5373\u53EF\u5FEB\u901F\u627E\u5230\u6307\u5B9A\u8BB0\u5F55\u3002</p></li><li><p>\u4EE5\u5176\u4ED6\u5217\u4F5C\u4E3A\u641C\u7D22\u6761\u4EF6</p><p>\u56E0\u4E3A\u5728\u6570\u636E\u9875\u4E2D\u5E76\u6CA1\u6709\u5BF9\u975E\u4E3B\u952E\u5217\u7B80\u5386\u6240\u8C13\u7684\u9875\u76EE\u5F55\uFF0C\u6240\u4EE5\u6211\u4EEC\u65E0\u6CD5\u901A\u8FC7\u4E8C\u5206\u6CD5\u5FEB\u901F\u5B9A\u4F4D\u76F8\u5E94\u7684\u69FD\u3002\u8FD9\u79CD\u60C5\u51B5\u4E0B\u53EA\u80FD\u4ECE <code>\u6700\u5C0F\u8BB0\u5F55</code> \u5F00\u59CB <code>\u4F9D\u6B21\u904D\u5386\u5355\u94FE\u8868\u4E2D\u7684\u6BCF\u6761\u8BB0\u5F55</code>\uFF0C \u7136\u540E\u5BF9\u6BD4\u6BCF\u6761\u8BB0\u5F55\u662F\u4E0D\u662F\u7B26\u5408\u641C\u7D22\u6761\u4EF6\u3002\u5F88\u663E\u7136\uFF0C\u8FD9\u79CD\u67E5\u627E\u7684\u6548\u7387\u662F\u975E\u5E38\u4F4E\u7684\u3002</p></li></ul><h6 id="_2-\u5728\u5F88\u591A\u9875\u4E2D\u67E5\u627E" tabindex="-1"><a class="header-anchor" href="#_2-\u5728\u5F88\u591A\u9875\u4E2D\u67E5\u627E" aria-hidden="true">#</a> 2. \u5728\u5F88\u591A\u9875\u4E2D\u67E5\u627E</h6><p>\u5728\u5F88\u591A\u9875\u4E2D\u67E5\u627E\u8BB0\u5F55\u7684\u6D3B\u52A8\u53EF\u4EE5\u5206\u4E3A\u4E24\u4E2A\u6B65\u9AA4\uFF1A</p><ol><li>\u5B9A\u4F4D\u5230\u8BB0\u5F55\u6240\u5728\u7684\u9875\u3002</li><li>\u4ECE\u6240\u5728\u7684\u9875\u5185\u4E2D\u67E5\u627E\u76F8\u5E94\u7684\u8BB0\u5F55\u3002</li></ol><p>\u5728\u6CA1\u6709\u7D22\u5F15\u7684\u60C5\u51B5\u4E0B\uFF0C\u4E0D\u8BBA\u662F\u6839\u636E\u4E3B\u952E\u5217\u6216\u8005\u5176\u4ED6\u5217\u7684\u503C\u8FDB\u884C\u67E5\u627E\uFF0C\u7531\u4E8E\u6211\u4EEC\u5E76\u4E0D\u80FD\u5FEB\u901F\u7684\u5B9A\u4F4D\u5230\u8BB0\u5F55\u6240\u5728\u7684\u9875\uFF0C\u6240\u4EE5\u53EA\u80FD \u4ECE\u7B2C\u4E00\u4E2A\u9875\u6CBF\u7740\u53CC\u5411\u94FE\u8868 \u4E00\u76F4\u5F80\u4E0B\u627E\uFF0C\u5728\u6BCF\u4E00\u4E2A\u9875\u4E2D\u6839\u636E\u6211\u4EEC\u4E0A\u9762\u7684\u67E5\u627E\u65B9\u5F0F\u53BB\u67E5 \u627E\u6307\u5B9A\u7684\u8BB0\u5F55\u3002\u56E0\u4E3A\u8981\u904D\u5386\u6240\u6709\u7684\u6570\u636E\u9875\uFF0C\u6240\u4EE5\u8FD9\u79CD\u65B9\u5F0F\u663E\u7136\u662F \u8D85\u7EA7\u8017\u65F6 \u7684\u3002\u5982\u679C\u4E00\u4E2A\u8868\u6709\u4E00\u4EBF\u6761\u8BB0\u5F55\u5462\uFF1F\u6B64\u65F6 \u7D22\u5F15 \u5E94\u8FD0\u800C\u751F\u3002</p><h5 id="_3-2-\u8BBE\u8BA1\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_3-2-\u8BBE\u8BA1\u7D22\u5F15" aria-hidden="true">#</a> 3.2 \u8BBE\u8BA1\u7D22\u5F15</h5><p>\u5EFA\u4E00\u4E2A\u8868\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; CREATE TABLE index_demo(
-&gt; c1 INT,
-&gt; c2 INT,
-&gt; c3 CHAR(1),
-&gt; PRIMARY KEY(c1)
-&gt; ) ROW_FORMAT = Compact;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u4E2A\u65B0\u5EFA\u7684 <strong>index_demo</strong> \u8868\u4E2D\u67092\u4E2AINT\u7C7B\u578B\u7684\u5217\uFF0C1\u4E2ACHAR(1)\u7C7B\u578B\u7684\u5217\uFF0C\u800C\u4E14\u6211\u4EEC\u89C4\u5B9A\u4E86c1\u5217\u4E3A\u4E3B\u952E\uFF0C \u8FD9\u4E2A\u8868\u4F7F\u7528 <strong>Compact</strong> \u884C\u683C\u5F0F\u6765\u5B9E\u9645\u5B58\u50A8\u8BB0\u5F55\u7684\u3002\u8FD9\u91CC\u6211\u4EEC\u7B80\u5316\u4E86index_demo\u8868\u7684\u884C\u683C\u5F0F\u793A\u610F\u56FE\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220616152453203.png" alt="image-20220616152453203"></p><p>\u6211\u4EEC\u53EA\u5728\u793A\u610F\u56FE\u91CC\u5C55\u793A\u8BB0\u5F55\u7684\u8FD9\u51E0\u4E2A\u90E8\u5206\uFF1A</p><ul><li>record_type \uFF1A\u8BB0\u5F55\u5934\u4FE1\u606F\u7684\u4E00\u9879\u5C5E\u6027\uFF0C\u8868\u793A\u8BB0\u5F55\u7684\u7C7B\u578B\uFF0C <code>0 \u8868\u793A\u666E\u901A\u8BB0\u5F55\u3001 2 \u8868\u793A\u6700\u5C0F\u8BB0 \u5F55\u3001 3 \u8868\u793A\u6700\u5927\u8BB0\u5F55\u3001 1 \u6682\u65F6\u8FD8\u6CA1\u7528\u8FC7</code>\uFF0C\u4E0B\u9762\u8BB2\u3002</li><li>mysql&gt; CREATE TABLE index_demo( -&gt; c1 INT, -&gt; c2 INT, -&gt; c3 CHAR(1), -&gt; PRIMARY KEY(c1) -&gt; ) ROW_FORMAT = Compact; next_record \uFF1A\u8BB0\u5F55\u5934\u4FE1\u606F\u7684\u4E00\u9879\u5C5E\u6027\uFF0C\u8868\u793A\u4E0B\u4E00\u6761\u5730\u5740\u76F8\u5BF9\u4E8E\u672C\u6761\u8BB0\u5F55\u7684\u5730\u5740\u504F\u79FB\u91CF\uFF0C\u6211\u4EEC\u7528 \u7BAD\u5934\u6765\u8868\u660E\u4E0B\u4E00\u6761\u8BB0\u5F55\u662F\u8C01\u3002</li><li>\u5404\u4E2A\u5217\u7684\u503C \uFF1A\u8FD9\u91CC\u53EA\u8BB0\u5F55\u5728 index_demo \u8868\u4E2D\u7684\u4E09\u4E2A\u5217\uFF0C\u5206\u522B\u662F c1 \u3001 c2 \u548C c3 \u3002</li><li>\u5176\u4ED6\u4FE1\u606F \uFF1A\u9664\u4E86\u4E0A\u8FF03\u79CD\u4FE1\u606F\u4EE5\u5916\u7684\u6240\u6709\u4FE1\u606F\uFF0C\u5305\u62EC\u5176\u4ED6\u9690\u85CF\u5217\u7684\u503C\u4EE5\u53CA\u8BB0\u5F55\u7684\u989D\u5916\u4FE1\u606F\u3002</li></ul><p>\u5C06\u8BB0\u5F55\u683C\u5F0F\u793A\u610F\u56FE\u7684\u5176\u4ED6\u4FE1\u606F\u9879\u6682\u65F6\u53BB\u6389\u5E76\u628A\u5B83\u7AD6\u8D77\u6765\u7684\u6548\u679C\u5C31\u662F\u8FD9\u6837\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220616152727234.png" alt="image-20220616152727234" style="zoom:80%;"><p>\u628A\u4E00\u4E9B\u8BB0\u5F55\u653E\u5230\u9875\u91CC\u7684\u793A\u610F\u56FE\u5C31\u662F\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220616152651878.png" alt="image-20220616152651878"></p><h6 id="_1-\u4E00\u4E2A\u7B80\u5355\u7684\u7D22\u5F15\u8BBE\u8BA1\u65B9\u6848" tabindex="-1"><a class="header-anchor" href="#_1-\u4E00\u4E2A\u7B80\u5355\u7684\u7D22\u5F15\u8BBE\u8BA1\u65B9\u6848" aria-hidden="true">#</a> 1. \u4E00\u4E2A\u7B80\u5355\u7684\u7D22\u5F15\u8BBE\u8BA1\u65B9\u6848</h6><p>\u6211\u4EEC\u5728\u6839\u636E\u67D0\u4E2A\u641C\u7D22\u6761\u4EF6\u67E5\u627E\u4E00\u4E9B\u8BB0\u5F55\u65F6\u4E3A\u4EC0\u4E48\u8981\u904D\u5386\u6240\u6709\u7684\u6570\u636E\u9875\u5462\uFF1F\u56E0\u4E3A\u5404\u4E2A\u9875\u4E2D\u7684\u8BB0\u5F55\u5E76\u6CA1\u6709\u89C4\u5F8B\uFF0C\u6211\u4EEC\u5E76\u4E0D\u77E5\u9053\u6211\u4EEC\u7684\u641C\u7D22\u6761\u4EF6\u5339\u914D\u54EA\u4E9B\u9875\u4E2D\u7684\u8BB0\u5F55\uFF0C\u6240\u4EE5\u4E0D\u5F97\u4E0D\u4F9D\u6B21\u904D\u5386\u6240\u6709\u7684\u6570\u636E\u9875\u3002\u6240\u4EE5\u5982\u679C\u6211\u4EEC <strong>\u60F3\u5FEB\u901F\u7684\u5B9A\u4F4D\u5230\u9700\u8981\u67E5\u627E\u7684\u8BB0\u5F55\u5728\u54EA\u4E9B\u6570\u636E\u9875</strong> \u4E2D\u8BE5\u548B\u529E\uFF1F\u6211\u4EEC\u53EF\u4EE5\u4E3A\u5FEB\u901F\u5B9A\u4F4D\u8BB0\u5F55\u6240\u5728\u7684\u6570\u636E\u9875\u800C\u5EFA\u7ACB\u4E00\u4E2A\u76EE\u5F55 \uFF0C\u5EFA\u8FD9\u4E2A\u76EE\u5F55\u5FC5\u987B\u5B8C\u6210\u4E0B\u8FB9\u8FD9\u4E9B\u4E8B\uFF1A</p><ul><li><p><strong>\u4E0B\u4E00\u4E2A\u6570\u636E\u9875\u4E2D\u7528\u6237\u8BB0\u5F55\u7684\u4E3B\u952E\u503C\u5FC5\u987B\u5927\u4E8E\u4E0A\u4E00\u4E2A\u9875\u4E2D\u7528\u6237\u8BB0\u5F55\u7684\u4E3B\u952E\u503C\u3002</strong></p><p>\u5047\u8BBE\uFF1A\u6BCF\u4E2A\u6570\u636E\u7ED3\u6784\u6700\u591A\u80FD\u5B58\u653E3\u6761\u8BB0\u5F55\uFF08\u5B9E\u9645\u4E0A\u4E00\u4E2A\u6570\u636E\u9875\u975E\u5E38\u5927\uFF0C\u53EF\u4EE5\u5B58\u653E\u4E0B\u597D\u591A\u8BB0\u5F55\uFF09\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>INSERT INTO index_demo VALUES(1, 4, &#39;u&#39;), (3, 9, &#39;d&#39;), (5, 3, &#39;y&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><p>\u200B \u90A3\u4E48\u8FD9\u4E9B\u8BB0\u5F55\u4EE5\u53CA\u6309\u7167\u4E3B\u952E\u503C\u7684\u5927\u5C0F\u4E32\u8054\u6210\u4E00\u4E2A\u5355\u5411\u94FE\u8868\u4E86\uFF0C\u5982\u56FE\u6240\u793A\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220616153518456.png" alt="image-20220616153518456"></p><p>\u200B \u4ECE\u56FE\u4E2D\u53EF\u4EE5\u770B\u51FA\u6765\uFF0C index_demo \u8868\u4E2D\u76843\u6761\u8BB0\u5F55\u90FD\u88AB\u63D2\u5165\u5230\u4E86\u7F16\u53F7\u4E3A10\u7684\u6570\u636E\u9875\u4E2D\u4E86\u3002\u6B64\u65F6\u6211\u4EEC\u518D\u6765\u63D2\u5165\u4E00\u6761\u8BB0\u5F55</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>INSERT INTO index_demo VALUES(4, 4, &#39;a&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u56E0\u4E3A <strong>\u987510</strong> \u6700\u591A\u53EA\u80FD\u653E3\u6761\u8BB0\u5F55\uFF0C\u6240\u4EE5\u6211\u4EEC\u4E0D\u5F97\u4E0D\u518D\u5206\u914D\u4E00\u4E2A\u65B0\u9875\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220616155306705.png" alt="image-20220616155306705"></p><p>\u6CE8\u610F\uFF1A\u65B0\u5206\u914D\u7684 <strong>\u6570\u636E\u9875\u7F16\u53F7\u53EF\u80FD\u5E76\u4E0D\u662F\u8FDE\u7EED\u7684</strong>\u3002\u5B83\u4EEC\u53EA\u662F\u901A\u8FC7\u7EF4\u62A4\u8005\u4E0A\u4E00\u4E2A\u9875\u548C\u4E0B\u4E00\u4E2A\u9875\u7684\u7F16\u53F7\u800C\u5EFA\u7ACB\u4E86 <strong>\u94FE\u8868</strong> \u5173\u7CFB\u3002\u53E6\u5916\uFF0C<strong>\u987510</strong>\u4E2D\u7528\u6237\u8BB0\u5F55\u6700\u5927\u7684\u4E3B\u952E\u503C\u662F5\uFF0C\u800C<strong>\u987528</strong>\u4E2D\u6709\u4E00\u6761\u8BB0\u5F55\u7684\u4E3B\u952E\u503C\u662F4\uFF0C\u56E0\u4E3A5&gt;4\uFF0C\u6240\u4EE5\u8FD9\u5C31\u4E0D\u7B26\u5408\u4E0B\u4E00\u4E2A\u6570\u636E\u9875\u4E2D\u7528\u6237\u8BB0\u5F55\u7684\u4E3B\u952E\u503C\u5FC5\u987B\u5927\u4E8E\u4E0A\u4E00\u4E2A\u9875\u4E2D\u7528\u6237\u8BB0\u5F55\u7684\u4E3B\u952E\u503C\u7684\u8981\u6C42\uFF0C\u6240\u4EE5\u5728\u63D2\u5165\u4E3B\u952E\u503C\u4E3A4\u7684\u8BB0\u5F55\u7684\u65F6\u5019\u9700\u8981\u4F34\u968F\u7740\u4E00\u6B21 <strong>\u8BB0\u5F55\u79FB\u52A8</strong>\uFF0C\u4E5F\u5C31\u662F\u628A\u4E3B\u952E\u503C\u4E3A5\u7684\u8BB0\u5F55\u79FB\u52A8\u5230\u987528\u4E2D\uFF0C\u7136\u540E\u518D\u628A\u4E3B\u952E\u503C\u4E3A4\u7684\u8BB0\u5F55\u63D2\u5165\u5230\u987510\u4E2D\uFF0C\u8FD9\u4E2A\u8FC7\u7A0B\u7684\u793A\u610F\u56FE\u5982\u4E0B\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220616160216525.png" alt="image-20220616160216525"></p><p>\u8FD9\u4E2A\u8FC7\u7A0B\u8868\u660E\u4E86\u5728\u5BF9\u9875\u4E2D\u7684\u8BB0\u5F55\u8FDB\u884C\u589E\u5220\u6539\u67E5\u64CD\u4F5C\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u6211\u4EEC\u5FC5\u987B\u901A\u8FC7\u4E00\u4E9B\u8BF8\u5982 <strong>\u8BB0\u5F55\u79FB\u52A8</strong> \u7684\u64CD\u4F5C\u6765\u59CB\u7EC8\u4FDD\u8BC1\u8FD9\u4E2A\u72B6\u6001\u4E00\u76F4\u6210\u7ACB\uFF1A<code>\u4E0B\u4E00\u4E2A\u6570\u636E\u9875\u4E2D\u7528\u6237\u8BB0\u5F55\u7684\u4E3B\u952E\u503C\u5FC5\u987B\u5927\u4E8E\u4E0A\u4E00\u4E2A\u9875\u4E2D\u7528\u6237\u8BB0\u5F55\u7684\u4E3B\u952E\u503C</code>\u3002\u8FD9\u4E2A\u8FC7\u7A0B\u79F0\u4E3A <strong>\u9875\u5206\u88C2</strong>\u3002</p><ul><li><strong>\u7ED9\u6240\u6709\u7684\u9875\u5EFA\u7ACB\u4E00\u4E2A\u76EE\u5F55\u9879\u3002</strong></li></ul><p>\u7531\u4E8E\u6570\u636E\u9875\u7684 <strong>\u7F16\u53F7\u53EF\u80FD\u662F\u4E0D\u8FDE\u7EED</strong> \u7684\uFF0C\u6240\u4EE5\u5728\u5411 index_demo \u8868\u4E2D\u63D2\u5165\u8BB8\u591A\u6761\u8BB0\u5F55\u540E\uFF0C\u53EF\u80FD\u662F\u8FD9\u6837\u7684\u6548\u679C\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220616160619525.png" alt="image-20220616160619525"></p><p>\u6211\u4EEC\u9700\u8981\u7ED9\u5B83\u4EEC\u505A\u4E2A <strong>\u76EE\u5F55</strong>\uFF0C\u6BCF\u4E2A\u9875\u5BF9\u5E94\u4E00\u4E2A\u76EE\u5F55\u9879\uFF0C\u6BCF\u4E2A\u76EE\u5F55\u9879\u5305\u62EC\u4E0B\u8FB9\u4E24\u4E2A\u90E8\u5206\uFF1A</p><p>1\uFF09\u9875\u7684\u7528\u6237\u8BB0\u5F55\u4E2D\u6700\u5C0F\u7684\u4E3B\u952E\u503C\uFF0C\u6211\u4EEC\u7528 <strong>key</strong> \u6765\u8868\u793A\u3002</p><p>2\uFF09\u9875\u53F7\uFF0C\u6211\u4EEC\u7528 <strong>page_on</strong> \u8868\u793A\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220616160857381.png" alt="image-20220616160857381"></p><p>\u4EE5 \u987528 \u4E3A\u4F8B\uFF0C\u5B83\u5BF9\u5E94 \u76EE\u5F55\u98792 \uFF0C\u8FD9\u4E2A\u76EE\u5F55\u9879\u4E2D\u5305\u542B\u7740\u8BE5\u9875\u7684\u9875\u53F7 28 \u4EE5\u53CA\u8BE5\u9875\u4E2D\u7528\u6237\u8BB0\u5F55\u7684\u6700\u5C0F\u4E3B \u952E\u503C 5 \u3002\u6211\u4EEC\u53EA\u9700\u8981\u628A\u51E0\u4E2A\u76EE\u5F55\u9879\u5728\u7269\u7406\u5B58\u50A8\u5668\u4E0A\u8FDE\u7EED\u5B58\u50A8\uFF08\u6BD4\u5982\uFF1A\u6570\u7EC4\uFF09\uFF0C\u5C31\u53EF\u4EE5\u5B9E\u73B0\u6839\u636E\u4E3B\u952E \u503C\u5FEB\u901F\u67E5\u627E\u67D0\u6761\u8BB0\u5F55\u7684\u529F\u80FD\u4E86\u3002\u6BD4\u5982\uFF1A\u67E5\u627E\u4E3B\u952E\u503C\u4E3A 20 \u7684\u8BB0\u5F55\uFF0C\u5177\u4F53\u67E5\u627E\u8FC7\u7A0B\u5206\u4E24\u6B65\uFF1A</p><ol><li>\u5148\u4ECE<code>\u76EE\u5F55\u9879\u4E2D\u6839\u636E \u4E8C\u5206\u6CD5</code> \u5FEB\u901F\u786E\u5B9A\u51FA\u4E3B\u952E\u503C\u4E3A 20 \u7684\u8BB0\u5F55\u5728 \u76EE\u5F55\u98793 \u4E2D\uFF08\u56E0\u4E3A 12 &lt; 20 &lt; 209 \uFF09\uFF0C\u5B83\u5BF9\u5E94\u7684\u9875\u662F \u98759 \u3002</li><li>\u518D\u6839\u636E\u524D\u8FB9\u8BF4\u7684\u5728\u9875\u4E2D\u67E5\u627E\u8BB0\u5F55\u7684\u65B9\u5F0F\u53BB \u98759 \u4E2D\u5B9A\u4F4D\u5177\u4F53\u7684\u8BB0\u5F55\u3002</li></ol><p>\u81F3\u6B64\uFF0C\u9488\u5BF9\u6570\u636E\u9875\u505A\u7684\u7B80\u6613\u76EE\u5F55\u5C31\u641E\u5B9A\u4E86\u3002\u8FD9\u4E2A\u76EE\u5F55\u6709\u4E00\u4E2A\u522B\u540D\uFF0C\u79F0\u4E3A <strong>\u7D22\u5F15</strong> \u3002</p><h6 id="_2-innodb\u4E2D\u7684\u7D22\u5F15\u65B9\u6848" tabindex="-1"><a class="header-anchor" href="#_2-innodb\u4E2D\u7684\u7D22\u5F15\u65B9\u6848" aria-hidden="true">#</a> 2. InnoDB\u4E2D\u7684\u7D22\u5F15\u65B9\u6848</h6><p>######## \u2460 \u8FED\u4EE31\u6B21\uFF1A\u76EE\u5F55\u9879\u7EAA\u5F55\u7684\u9875</p><p>InnoDB\u600E\u4E48\u533A\u5206\u4E00\u6761\u8BB0\u5F55\u662F\u666E\u901A\u7684 <strong>\u7528\u6237\u8BB0\u5F55</strong> \u8FD8\u662F <strong>\u76EE\u5F55\u9879\u8BB0\u5F55</strong> \u5462\uFF1F\u4F7F\u7528\u8BB0\u5F55\u5934\u4FE1\u606F\u91CC\u7684 <strong>record_type</strong> \u5C5E\u6027\uFF0C\u5B83\u7684\u5404\u81EA\u53D6\u503C\u4EE3\u8868\u7684\u610F\u601D\u5982\u4E0B\uFF1A</p><ul><li>0\uFF1A\u666E\u901A\u7684\u7528\u6237\u8BB0\u5F55</li><li>1\uFF1A\u76EE\u5F55\u9879\u8BB0\u5F55</li><li>2\uFF1A\u6700\u5C0F\u8BB0\u5F55</li><li>3\uFF1A\u6700\u5927\u8BB0\u5F55</li></ul><p>\u6211\u4EEC\u628A\u524D\u8FB9\u4F7F\u7528\u5230\u7684\u76EE\u5F55\u9879\u653E\u5230\u6570\u636E\u9875\u4E2D\u7684\u6837\u5B50\u5C31\u662F\u8FD9\u6837\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220616162944404.png" alt="image-20220616162944404"></p><p>\u4ECE\u56FE\u4E2D\u53EF\u4EE5\u770B\u51FA\u6765\uFF0C\u6211\u4EEC\u65B0\u5206\u914D\u4E86\u4E00\u4E2A\u7F16\u53F7\u4E3A30\u7684\u9875\u6765\u4E13\u95E8\u5B58\u50A8\u76EE\u5F55\u9879\u8BB0\u5F55\u3002\u8FD9\u91CC\u518D\u6B21\u5F3A\u8C03 <strong>\u76EE\u5F55\u9879\u8BB0\u5F55</strong> \u548C\u666E\u901A\u7684 <strong>\u7528\u6237\u8BB0\u5F55</strong> \u7684\u4E0D\u540C\u70B9\uFF1A</p><ul><li><strong>\u76EE\u5F55\u9879\u8BB0\u5F55</strong> \u7684 record_type \u503C\u662F1\uFF0C\u800C <strong>\u666E\u901A\u7528\u6237\u8BB0\u5F55</strong> \u7684 record_type \u503C\u662F0\u3002</li><li>\u76EE\u5F55\u9879\u8BB0\u5F55\u53EA\u6709 <strong>\u4E3B\u952E\u503C\u548C\u9875\u7684\u7F16\u53F7</strong> \u4E24\u4E2A\u5217\uFF0C\u800C\u666E\u901A\u7684\u7528\u6237\u8BB0\u5F55\u7684\u5217\u662F\u7528\u6237\u81EA\u5DF1\u5B9A\u4E49\u7684\uFF0C\u53EF\u80FD\u5305\u542B <strong>\u5F88\u591A\u5217</strong> \uFF0C\u53E6\u5916\u8FD8\u6709InnoDB\u81EA\u5DF1\u6DFB\u52A0\u7684\u9690\u85CF\u5217\u3002</li><li>\u4E86\u89E3\uFF1A\u8BB0\u5F55\u5934\u4FE1\u606F\u91CC\u8FD8\u6709\u4E00\u4E2A\u53EB <strong>min_rec_mask</strong> \u7684\u5C5E\u6027\uFF0C\u53EA\u6709\u5728\u5B58\u50A8 <strong>\u76EE\u5F55\u9879\u8BB0\u5F55</strong> \u7684\u9875\u4E2D\u7684\u4E3B\u952E\u503C\u6700\u5C0F\u7684 <strong>\u76EE\u5F55\u9879\u8BB0\u5F55</strong> \u7684 <strong>min_rec_mask</strong> \u503C\u4E3A <strong>1</strong> \uFF0C\u5176\u4ED6\u522B\u7684\u8BB0\u5F55\u7684 <strong>min_rec_mask</strong> \u503C\u90FD\u662F <strong>0</strong> \u3002</li></ul><p><strong>\u76F8\u540C\u70B9</strong>\uFF1A\u4E24\u8005\u7528\u7684\u662F\u4E00\u6837\u7684\u6570\u636E\u9875\uFF0C\u90FD\u4F1A\u4E3A\u4E3B\u952E\u503C\u751F\u6210 <strong>Page Directory \uFF08\u9875\u76EE\u5F55\uFF09</strong>\uFF0C\u4ECE\u800C\u5728\u6309\u7167\u4E3B\u952E\u503C\u8FDB\u884C\u67E5\u627E\u65F6\u53EF\u4EE5\u4F7F\u7528 <strong>\u4E8C\u5206\u6CD5</strong> \u6765\u52A0\u5FEB\u67E5\u8BE2\u901F\u5EA6\u3002</p><p>\u73B0\u5728\u4EE5\u67E5\u627E\u4E3B\u952E\u4E3A 20 \u7684\u8BB0\u5F55\u4E3A\u4F8B\uFF0C\u6839\u636E\u67D0\u4E2A\u4E3B\u952E\u503C\u53BB\u67E5\u627E\u8BB0\u5F55\u7684\u6B65\u9AA4\u5C31\u53EF\u4EE5\u5927\u81F4\u62C6\u5206\u6210\u4E0B\u8FB9\u4E24\u6B65\uFF1A</p><ol><li>\u5148\u5230\u5B58\u50A8 \u76EE\u5F55\u9879\u8BB0\u5F55 \u7684\u9875\uFF0C<code>\u4E5F\u5C31\u662F\u987530\u4E2D\u901A\u8FC7 \u4E8C\u5206\u6CD5 \u5FEB\u901F\u5B9A\u4F4D\u5230\u5BF9\u5E94\u76EE\u5F55\u9879</code>\uFF0C\u56E0\u4E3A 12 &lt; 20 &lt; 209 \uFF0C\u6240\u4EE5\u5B9A\u4F4D\u5230\u5BF9\u5E94\u7684\u8BB0\u5F55\u6240\u5728\u7684\u9875\u5C31\u662F\u98759\u3002</li><li>\u518D\u5230\u5B58\u50A8\u7528\u6237\u8BB0\u5F55\u7684\u98759\u4E2D<code>\u6839\u636E \u4E8C\u5206\u6CD5 \u5FEB\u901F\u5B9A\u4F4D\u5230\u4E3B\u952E\u503C\u4E3A 20 \u7684\u7528\u6237\u8BB0\u5F55</code>\u3002</li></ol><p>######## \u2461 \u8FED\u4EE32\u6B21\uFF1A\u591A\u4E2A\u76EE\u5F55\u9879\u7EAA\u5F55\u7684\u9875</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220616171135082.png" alt="image-20220616171135082"></p><p>\u4ECE\u56FE\u4E2D\u53EF\u4EE5\u770B\u51FA\uFF0C\u6211\u4EEC\u63D2\u5165\u4E86\u4E00\u6761\u4E3B\u952E\u503C\u4E3A320\u7684\u7528\u6237\u8BB0\u5F55\u4E4B\u540E\u9700\u8981\u4E24\u4E2A\u65B0\u7684\u6570\u636E\u9875\uFF1A</p><ul><li>\u4E3A\u5B58\u50A8\u8BE5\u7528\u6237\u8BB0\u5F55\u800C\u65B0\u751F\u6210\u4E86 \u987531 \u3002</li><li>\u56E0\u4E3A\u539F\u5148\u5B58\u50A8\u76EE\u5F55\u9879\u8BB0\u5F55\u7684 \u987530\u7684\u5BB9\u91CF\u5DF2\u6EE1 \uFF08\u6211\u4EEC\u524D\u8FB9\u5047\u8BBE\u53EA\u80FD\u5B58\u50A84\u6761\u76EE\u5F55\u9879\u8BB0\u5F55\uFF09\uFF0C\u6240\u4EE5\u4E0D\u5F97 \u4E0D\u9700\u8981\u4E00\u4E2A\u65B0\u7684 \u987532 \u6765\u5B58\u653E \u987531 \u5BF9\u5E94\u7684\u76EE\u5F55\u9879\u3002</li></ul><p>\u73B0\u5728\u56E0\u4E3A\u5B58\u50A8\u76EE\u5F55\u9879\u8BB0\u5F55\u7684\u9875\u4E0D\u6B62\u4E00\u4E2A\uFF0C\u6240\u4EE5\u5982\u679C\u6211\u4EEC\u60F3\u6839\u636E\u4E3B\u952E\u503C\u67E5\u627E\u4E00\u6761\u7528\u6237\u8BB0\u5F55\u5927\u81F4\u9700\u89813\u4E2A\u6B65\u9AA4\uFF0C\u4EE5\u67E5\u627E\u4E3B\u952E\u503C\u4E3A 20 \u7684\u8BB0\u5F55\u4E3A\u4F8B\uFF1A</p><ol><li>\u786E\u5B9A \u76EE\u5F55\u9879\u8BB0\u5F55\u9875 \u6211\u4EEC\u73B0\u5728\u7684\u5B58\u50A8\u76EE\u5F55\u9879\u8BB0\u5F55\u7684\u9875\u6709\u4E24\u4E2A\uFF0C\u5373 \u987530 \u548C \u987532 \uFF0C\u53C8\u56E0\u4E3A\u987530\u8868\u793A\u7684\u76EE\u5F55\u9879\u7684\u4E3B\u952E\u503C\u7684 \u8303\u56F4\u662F [1, 320) \uFF0C\u987532\u8868\u793A\u7684\u76EE\u5F55\u9879\u7684\u4E3B\u952E\u503C\u4E0D\u5C0F\u4E8E 320 \uFF0C\u6240\u4EE5\u4E3B\u952E\u503C\u4E3A 20 \u7684\u8BB0\u5F55\u5BF9\u5E94\u7684\u76EE \u5F55\u9879\u8BB0\u5F55\u5728 \u987530 \u4E2D\u3002</li><li>\u901A\u8FC7\u76EE\u5F55\u9879\u8BB0\u5F55\u9875 \u786E\u5B9A\u7528\u6237\u8BB0\u5F55\u771F\u5B9E\u6240\u5728\u7684\u9875 \u3002 \u5728\u4E00\u4E2A\u5B58\u50A8 \u76EE\u5F55\u9879\u8BB0\u5F55 \u7684\u9875\u4E2D\u901A\u8FC7\u4E3B\u952E\u503C\u5B9A\u4F4D\u4E00\u6761\u76EE\u5F55\u9879\u8BB0\u5F55\u7684\u65B9\u5F0F\u8BF4\u8FC7\u4E86\u3002</li><li>\u5728\u771F\u5B9E\u5B58\u50A8\u7528\u6237\u8BB0\u5F55\u7684\u9875\u4E2D\u5B9A\u4F4D\u5230\u5177\u4F53\u7684\u8BB0\u5F55\u3002</li></ol><p>######## \u2462 \u8FED\u4EE33\u6B21\uFF1A\u76EE\u5F55\u9879\u8BB0\u5F55\u9875\u7684\u76EE\u5F55\u9875</p><p>\u5982\u679C\u6211\u4EEC\u8868\u4E2D\u7684\u6570\u636E\u975E\u5E38\u591A\u5219\u4F1A<code>\u4EA7\u751F\u5F88\u591A\u5B58\u50A8\u76EE\u5F55\u9879\u8BB0\u5F55\u7684\u9875</code>\uFF0C\u90A3\u6211\u4EEC\u600E\u4E48\u6839\u636E\u4E3B\u952E\u503C\u5FEB\u901F\u5B9A\u4F4D\u4E00\u4E2A\u5B58\u50A8\u76EE\u5F55\u9879\u8BB0\u5F55\u7684\u9875\u5462\uFF1F\u90A3\u5C31\u4E3A\u8FD9\u4E9B\u5B58\u50A8\u76EE\u5F55\u9879\u8BB0\u5F55\u7684\u9875\u518D\u751F\u6210\u4E00\u4E2A<code>\u66F4\u9AD8\u7EA7\u7684\u76EE\u5F55</code>\uFF0C\u5C31\u50CF\u662F\u4E00\u4E2A\u591A\u7EA7\u76EE\u5F55\u4E00\u6837\uFF0C<code>\u5927\u76EE\u5F55\u91CC\u5D4C\u5957\u5C0F\u76EE\u5F55</code>\uFF0C\u5C0F\u76EE\u5F55\u91CC\u624D\u662F\u5B9E\u9645\u7684\u6570\u636E\uFF0C\u6240\u4EE5\u73B0\u5728\u5404\u4E2A\u9875\u7684\u793A\u610F\u56FE\u5C31\u662F\u8FD9\u6837\u5B50\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220616173512780.png" alt="image-20220616173512780"></p><p>\u5982\u56FE\uFF0C\u6211\u4EEC\u751F\u6210\u4E86\u4E00\u4E2A\u5B58\u50A8\u66F4\u9AD8\u7EA7\u76EE\u5F55\u9879\u7684 \u987533 \uFF0C\u8FD9\u4E2A\u9875\u4E2D\u7684\u4E24\u6761\u8BB0\u5F55\u5206\u522B\u4EE3\u8868\u987530\u548C\u987532\uFF0C\u5982\u679C\u7528 \u6237\u8BB0\u5F55\u7684\u4E3B\u952E\u503C\u5728 [1, 320) \u4E4B\u95F4\uFF0C\u5219\u5230\u987530\u4E2D\u67E5\u627E\u66F4\u8BE6\u7EC6\u7684\u76EE\u5F55\u9879\u8BB0\u5F55\uFF0C\u5982\u679C\u4E3B\u952E\u503C \u4E0D\u5C0F\u4E8E320 \u7684 \u8BDD\uFF0C\u5C31\u5230\u987532\u4E2D\u67E5\u627E\u66F4\u8BE6\u7EC6\u7684\u76EE\u5F55\u9879\u8BB0\u5F55\u3002</p><p>\u6211\u4EEC\u53EF\u4EE5\u7528\u4E0B\u8FB9\u8FD9\u4E2A\u56FE\u6765\u63CF\u8FF0\u5B83\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220616173717538.png" alt="image-20220616173717538"></p><p>\u8FD9\u4E2A\u6570\u636E\u7ED3\u6784\uFF0C\u5B83\u7684\u540D\u79F0\u662F B+\u6811 \u3002</p><p>######## \u2463 B+Tree</p><p>\u4E00\u4E2AB+\u6811\u7684\u8282\u70B9\u5176\u5B9E\u53EF\u4EE5\u5206\u6210\u597D\u591A\u5C42\uFF0C\u89C4\u5B9A\u6700\u4E0B\u8FB9\u7684\u90A3\u5C42\uFF0C\u4E5F\u5C31\u662F\u5B58\u653E\u6211\u4EEC\u7528\u6237\u8BB0\u5F55\u7684\u90A3\u5C42\u4E3A\u7B2C 0 \u5C42\uFF0C \u4E4B\u540E\u4F9D\u6B21\u5F80\u4E0A\u52A0\u3002\u4E4B\u524D\u6211\u4EEC\u505A\u4E86\u4E00\u4E2A\u975E\u5E38\u6781\u7AEF\u7684\u5047\u8BBE\uFF1A\u5B58\u653E\u7528\u6237\u8BB0\u5F55\u7684\u9875 \u6700\u591A\u5B58\u653E3\u6761\u8BB0\u5F55 \uFF0C\u5B58\u653E\u76EE\u5F55\u9879 \u8BB0\u5F55\u7684\u9875 \u6700\u591A\u5B58\u653E4\u6761\u8BB0\u5F55 \u3002\u5176\u5B9E\u771F\u5B9E\u73AF\u5883\u4E2D\u4E00\u4E2A\u9875\u5B58\u653E\u7684\u8BB0\u5F55\u6570\u91CF\u662F\u975E\u5E38\u5927\u7684\uFF0C\u5047\u8BBE\u6240\u6709\u5B58\u653E\u7528\u6237\u8BB0\u5F55 \u7684\u53F6\u5B50\u8282\u70B9\u4EE3\u8868\u7684\u6570\u636E\u9875\u53EF\u4EE5\u5B58\u653E 100\u6761\u7528\u6237\u8BB0\u5F55 \uFF0C\u6240\u6709\u5B58\u653E\u76EE\u5F55\u9879\u8BB0\u5F55\u7684\u5185\u8282\u70B9\u4EE3\u8868\u7684\u6570\u636E\u9875\u53EF\u4EE5\u5B58 \u653E 1000\u6761\u76EE\u5F55\u9879\u8BB0\u5F55 \uFF0C\u90A3\u4E48\uFF1A</p><ul><li>\u5982\u679CB+\u6811\u53EA\u67091\u5C42\uFF0C\u4E5F\u5C31\u662F\u53EA\u67091\u4E2A\u7528\u4E8E\u5B58\u653E\u7528\u6237\u8BB0\u5F55\u7684\u8282\u70B9\uFF0C\u6700\u591A\u80FD\u5B58\u653E 100 \u6761\u8BB0\u5F55\u3002</li><li>\u5982\u679CB+\u6811\u67092\u5C42\uFF0C\u6700\u591A\u80FD\u5B58\u653E 1000\xD7100=10,0000 \u6761\u8BB0\u5F55\u3002</li><li>\u5982\u679CB+\u6811\u67093\u5C42\uFF0C\u6700\u591A\u80FD\u5B58\u653E 1000\xD71000\xD7100=1,0000,0000 \u6761\u8BB0\u5F55\u3002</li><li>\u5982\u679CB+\u6811\u67094\u5C42\uFF0C\u6700\u591A\u80FD\u5B58\u653E 1000\xD71000\xD71000\xD7100=1000,0000,0000 \u6761\u8BB0\u5F55\u3002\u76F8\u5F53\u591A\u7684\u8BB0\u5F55\uFF01</li></ul><p>\u4F60\u7684\u8868\u91CC\u80FD\u5B58\u653E <strong>100000000000</strong> \u6761\u8BB0\u5F55\u5417\uFF1F\u6240\u4EE5\u4E00\u822C\u60C5\u51B5\u4E0B\uFF0C\u6211\u4EEC\u7528\u5230\u7684 <strong>B+\u6811\u90FD\u4E0D\u4F1A\u8D85\u8FC74\u5C42</strong> \uFF0C\u90A3\u6211\u4EEC\u901A\u8FC7\u4E3B\u952E\u503C\u53BB\u67E5\u627E\u67D0\u6761\u8BB0\u5F55\u6700\u591A\u53EA\u9700\u8981\u505A4\u4E2A\u9875\u9762\u5185\u7684\u67E5\u627E\uFF08\u67E5\u627E3\u4E2A\u76EE\u5F55\u9879\u9875\u548C\u4E00\u4E2A\u7528\u6237\u8BB0\u5F55\u9875\uFF09\uFF0C\u53C8\u56E0\u4E3A\u5728\u6BCF\u4E2A\u9875\u9762\u5185\u6709\u6240\u8C13\u7684 <strong>Page Directory</strong> \uFF08\u9875\u76EE\u5F55\uFF09\uFF0C\u6240\u4EE5\u5728\u9875\u9762\u5185\u4E5F\u53EF\u4EE5\u901A\u8FC7 <strong>\u4E8C\u5206\u6CD5</strong> \u5B9E\u73B0\u5FEB\u901F \u5B9A\u4F4D\u8BB0\u5F55\u3002</p><h5 id="_3-3-\u5E38\u89C1\u7D22\u5F15\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_3-3-\u5E38\u89C1\u7D22\u5F15\u6982\u5FF5" aria-hidden="true">#</a> 3.3 \u5E38\u89C1\u7D22\u5F15\u6982\u5FF5</h5><p>\u7D22\u5F15\u6309\u7167\u7269\u7406\u5B9E\u73B0\u65B9\u5F0F\uFF0C\u7D22\u5F15\u53EF\u4EE5\u5206\u4E3A 2 \u79CD\uFF1A\u805A\u7C07\uFF08\u805A\u96C6\uFF09\u548C\u975E\u805A\u7C07\uFF08\u975E\u805A\u96C6\uFF09\u7D22\u5F15\u3002\u6211\u4EEC\u4E5F\u628A\u975E\u805A\u96C6 \u7D22\u5F15\u79F0\u4E3A\u4E8C\u7EA7\u7D22\u5F15\u6216\u8005\u8F85\u52A9\u7D22\u5F15\u3002</p><h6 id="_1-\u805A\u7C07\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_1-\u805A\u7C07\u7D22\u5F15" aria-hidden="true">#</a> 1. \u805A\u7C07\u7D22\u5F15</h6><p>\u805A\u7C07\u7D22\u5F15\u5E76\u4E0D\u662F\u4E00\u79CD\u5355\u72EC\u7684\u7D22\u5F15\u7C7B\u578B\uFF0C\u800C\u662F<strong>\u4E00\u79CD\u6570\u636E\u5B58\u50A8\u65B9\u5F0F</strong>\uFF08\u6240\u6709\u7684\u7528\u6237\u8BB0\u5F55\u90FD\u5B58\u50A8\u5728\u4E86\u53F6\u5B50\u7ED3\u70B9\uFF09\uFF0C\u4E5F\u5C31\u662F\u6240\u8C13\u7684 <code>\u7D22\u5F15\u5373\u6570\u636E\uFF0C\u6570\u636E\u5373\u7D22\u5F15</code>\u3002</p><blockquote><p>\u672F\u8BED&quot;\u805A\u7C07&quot;\u8868\u793A\u5F53\u524D\u6570\u636E\u884C\u548C\u76F8\u90BB\u7684\u952E\u503C\u805A\u7C07\u7684\u5B58\u50A8\u5728\u4E00\u8D77</p></blockquote><p><strong>\u7279\u70B9\uFF1A</strong></p><ul><li><p>\u4F7F\u7528\u8BB0\u5F55\u4E3B\u952E\u503C\u7684\u5927\u5C0F\u8FDB\u884C\u8BB0\u5F55\u548C\u9875\u7684\u6392\u5E8F\uFF0C\u8FD9\u5305\u62EC\u4E09\u4E2A\u65B9\u9762\u7684\u542B\u4E49\uFF1A</p><ul><li><code>\u9875\u5185</code> \u7684\u8BB0\u5F55\u662F\u6309\u7167\u4E3B\u952E\u7684\u5927\u5C0F\u987A\u5E8F\u6392\u6210\u4E00\u4E2A <code>\u5355\u5411\u94FE\u8868</code> \u3002</li><li>\u5404\u4E2A\u5B58\u653E <code>\u7528\u6237\u8BB0\u5F55\u7684\u9875</code> \u4E5F\u662F\u6839\u636E\u9875\u4E2D\u7528\u6237\u8BB0\u5F55\u7684\u4E3B\u952E\u5927\u5C0F\u987A\u5E8F\u6392\u6210\u4E00\u4E2A <code>\u53CC\u5411\u94FE\u8868</code> \u3002</li><li>\u5B58\u653E <code>\u76EE\u5F55\u9879\u8BB0\u5F55\u7684\u9875</code> \u5206\u4E3A\u4E0D\u540C\u7684\u5C42\u6B21\uFF0C\u5728\u540C\u4E00\u5C42\u6B21\u4E2D\u7684\u9875\u4E5F\u662F\u6839\u636E\u9875\u4E2D\u76EE\u5F55\u9879\u8BB0\u5F55\u7684\u4E3B\u952E\u5927\u5C0F\u987A\u5E8F\u6392\u6210\u4E00\u4E2A <code>\u53CC\u5411\u94FE\u8868</code> \u3002</li></ul></li><li><p>B+\u6811\u7684 <code>\u53F6\u5B50\u8282\u70B9 \u5B58\u50A8\u7684\u662F\u5B8C\u6574\u7684\u7528\u6237\u8BB0\u5F55\u3002 </code></p><p>\u6240\u8C13\u5B8C\u6574\u7684\u7528\u6237\u8BB0\u5F55\uFF0C\u5C31\u662F\u6307\u8FD9\u4E2A\u8BB0\u5F55\u4E2D\u5B58\u50A8\u4E86\u6240\u6709\u5217\u7684\u503C\uFF08\u5305\u62EC\u9690\u85CF\u5217\uFF09\u3002</p></li></ul><p>\u6211\u4EEC\u628A\u5177\u6709\u8FD9\u4E24\u79CD\u7279\u6027\u7684B+\u6811\u79F0\u4E3A\u805A\u7C07\u7D22\u5F15\uFF0C\u6240\u6709\u5B8C\u6574\u7684\u7528\u6237\u8BB0\u5F55\u90FD\u5B58\u653E\u5728\u8FD9\u4E2A<code>\u805A\u7C07\u7D22\u5F15</code>\u7684\u53F6\u5B50\u8282\u70B9\u5904\u3002\u8FD9\u79CD\u805A\u7C07\u7D22\u5F15\u5E76\u4E0D\u9700\u8981\u6211\u4EEC\u5728MySQL\u8BED\u53E5\u4E2D\u663E\u5F0F\u7684\u4F7F\u7528INDEX \u8BED\u53E5\u53BB\u521B\u5EFA\uFF0C <code>InnDB</code> \u5B58\u50A8\u5F15\u64CE\u4F1A <code>\u81EA\u52A8</code> \u7684\u4E3A\u6211\u4EEC\u521B\u5EFA\u805A\u7C07\u7D22\u5F15\u3002</p><p><strong>\u4F18\u70B9\uFF1A</strong></p><ul><li><code>\u6570\u636E\u8BBF\u95EE\u66F4\u5FEB</code> \uFF0C\u56E0\u4E3A\u805A\u7C07\u7D22\u5F15\u5C06\u7D22\u5F15\u548C\u6570\u636E\u4FDD\u5B58\u5728\u540C\u4E00\u4E2AB+\u6811\u4E2D\uFF0C\u56E0\u6B64\u4ECE\u805A\u7C07\u7D22\u5F15\u4E2D\u83B7\u53D6\u6570\u636E\u6BD4\u975E\u805A\u7C07\u7D22\u5F15\u66F4\u5FEB</li><li>\u805A\u7C07\u7D22\u5F15\u5BF9\u4E8E\u4E3B\u952E\u7684 <code>\u6392\u5E8F\u67E5\u627E</code> \u548C <code>\u8303\u56F4\u67E5\u627E</code> \u901F\u5EA6\u975E\u5E38\u5FEB</li><li>\u6309\u7167\u805A\u7C07\u7D22\u5F15\u6392\u5217\u987A\u5E8F\uFF0C\u67E5\u8BE2\u663E\u793A\u4E00\u5B9A\u8303\u56F4\u6570\u636E\u7684\u65F6\u5019\uFF0C\u7531\u4E8E\u6570\u636E\u90FD\u662F\u7D27\u5BC6\u76F8\u8FDE\uFF0C\u6570\u636E\u5E93\u4E0D\u7528\u4ECE\u591A \u4E2A\u6570\u636E\u5757\u4E2D\u63D0\u53D6\u6570\u636E\uFF0C\u6240\u4EE5 <code>\u8282\u7701\u4E86\u5927\u91CF\u7684io\u64CD\u4F5C</code> \u3002</li></ul><p><strong>\u7F3A\u70B9\uFF1A</strong></p><ul><li><code>\u63D2\u5165\u901F\u5EA6\u4E25\u91CD\u4F9D\u8D56\u4E8E\u63D2\u5165\u987A\u5E8F</code> \uFF0C\u6309\u7167\u4E3B\u952E\u7684\u987A\u5E8F\u63D2\u5165\u662F\u6700\u5FEB\u7684\u65B9\u5F0F\uFF0C\u5426\u5219\u5C06\u4F1A\u51FA\u73B0\u9875\u5206\u88C2\uFF0C\u4E25\u91CD\u5F71\u54CD\u6027\u80FD\u3002\u56E0\u6B64\uFF0C\u5BF9\u4E8EInnoDB\u8868\uFF0C\u6211\u4EEC\u4E00\u822C\u90FD\u4F1A\u5B9A\u4E49\u4E00\u4E2A<code>\u81EA\u589E\u7684ID\u5217\u4E3A\u4E3B\u952E</code></li><li><code>\u66F4\u65B0\u4E3B\u952E\u7684\u4EE3\u4EF7\u5F88\u9AD8</code> \uFF0C\u56E0\u4E3A\u5C06\u4F1A\u5BFC\u81F4\u88AB\u66F4\u65B0\u7684\u884C\u79FB\u52A8\u3002\u56E0\u6B64\uFF0C\u5BF9\u4E8EInnoDB\u8868\uFF0C\u6211\u4EEC\u4E00\u822C\u5B9A\u4E49<strong>\u4E3B\u952E\u4E3A\u4E0D\u53EF\u66F4\u65B0</strong></li><li><code>\u4E8C\u7EA7\u7D22\u5F15\u8BBF\u95EE\u9700\u8981\u4E24\u6B21\u7D22\u5F15\u67E5\u627E</code> \uFF0C\u7B2C\u4E00\u6B21\u627E\u5230\u4E3B\u952E\u503C\uFF0C\u7B2C\u4E8C\u6B21\u6839\u636E\u4E3B\u952E\u503C\u627E\u5230\u884C\u6570\u636E</li></ul><h6 id="_2-\u4E8C\u7EA7\u7D22\u5F15-\u8F85\u52A9\u7D22\u5F15\u3001\u975E\u805A\u7C07\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_2-\u4E8C\u7EA7\u7D22\u5F15-\u8F85\u52A9\u7D22\u5F15\u3001\u975E\u805A\u7C07\u7D22\u5F15" aria-hidden="true">#</a> 2. \u4E8C\u7EA7\u7D22\u5F15\uFF08\u8F85\u52A9\u7D22\u5F15\u3001\u975E\u805A\u7C07\u7D22\u5F15\uFF09</h6><p>\u5982\u679C\u6211\u4EEC\u60F3\u4EE5\u522B\u7684\u5217\u4F5C\u4E3A\u641C\u7D22\u6761\u4EF6\u8BE5\u600E\u4E48\u529E\uFF1F\u80AF\u5B9A\u4E0D\u80FD\u662F\u4ECE\u5934\u5230\u5C3E\u6CBF\u7740\u94FE\u8868\u4F9D\u6B21\u904D\u5386\u8BB0\u5F55\u4E00\u904D\u3002</p><p>\u7B54\u6848\uFF1A\u6211\u4EEC\u53EF\u4EE5<code>\u591A\u5EFA\u51E0\u9897B+\u6811</code>\uFF0C\u4E0D\u540C\u7684B+\u6811\u4E2D\u7684\u6570\u636E\u91C7\u7528\u4E0D\u540C\u7684\u6392\u5217\u89C4\u5219\u3002\u6BD4\u65B9\u8BF4\u6211\u4EEC\u7528<code>c2</code>\u5217\u7684\u5927\u5C0F\u4F5C\u4E3A\u6570\u636E\u9875\u3001\u9875\u4E2D\u8BB0\u5F55\u7684\u6392\u5E8F\u89C4\u5219\uFF0C\u518D\u5EFA\u4E00\u8BFEB+\u6811\uFF0C\u6548\u679C\u5982\u4E0B\u56FE\u6240\u793A\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220616203852043.png" alt="image-20220616203852043"></p><p>\u8FD9\u4E2AB+\u6811\u4E0E\u4E0A\u8FB9\u4ECB\u7ECD\u7684\u805A\u7C07\u7D22\u5F15\u6709\u51E0\u5904\u4E0D\u540C\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220616210404733.png" alt="image-20220616210404733"></p><p>**\u6982\u5FF5\uFF1A\u56DE\u8868 **</p><p><code>\u6211\u4EEC\u6839\u636E\u8FD9\u4E2A\u4EE5c2\u5217\u5927\u5C0F\u6392\u5E8F\u7684B+\u6811\u53EA\u80FD\u786E\u5B9A\u6211\u4EEC\u8981\u67E5\u627E\u8BB0\u5F55\u7684\u4E3B\u952E\u503C\uFF0C\u6240\u4EE5\u5982\u679C\u6211\u4EEC\u60F3\u6839 \u636Ec2\u5217\u7684\u503C\u67E5\u627E\u5230\u5B8C\u6574\u7684\u7528\u6237\u8BB0\u5F55\u7684\u8BDD\uFF0C\u4ECD\u7136\u9700\u8981\u5230 \u805A\u7C07\u7D22\u5F15 \u4E2D\u518D\u67E5\u4E00\u904D</code>\uFF0C\u8FD9\u4E2A\u8FC7\u7A0B\u79F0\u4E3A <code>\u56DE\u8868</code> \u3002\u4E5F\u5C31 \u662F\u6839\u636Ec2\u5217\u7684\u503C\u67E5\u8BE2\u4E00\u6761\u5B8C\u6574\u7684\u7528\u6237\u8BB0\u5F55\u9700\u8981\u4F7F\u7528\u5230 2 \u68F5B+\u6811\uFF01</p><p><strong>\u95EE\u9898</strong>\uFF1A\u4E3A\u4EC0\u4E48\u6211\u4EEC\u8FD8\u9700\u8981\u4E00\u6B21 \u56DE\u8868 \u64CD\u4F5C\u5462\uFF1F\u76F4\u63A5\u628A\u5B8C\u6574\u7684\u7528\u6237\u8BB0\u5F55\u653E\u5230\u53F6\u5B50\u8282\u70B9\u4E0DOK\u5417\uFF1F</p><p><strong>\u56DE\u7B54</strong>\uFF1A</p><p>\u5982\u679C\u628A\u5B8C\u6574\u7684\u7528\u6237\u8BB0\u5F55\u653E\u5230\u53F6\u5B50\u7ED3\u70B9\u662F\u53EF\u4EE5\u4E0D\u7528\u56DE\u8868\u3002\u4F46\u662F<code>\u592A\u5360\u5730\u65B9</code>\u4E86\uFF0C\u76F8\u5F53\u4E8E\u6BCF\u5EFA\u7ACB\u4E00\u8BFEB+\u6811\u90FD\u9700\u8981\u628A\u6240\u6709\u7684\u7528\u6237\u8BB0\u5F55\u518D\u90FD\u62F7\u8D1D\u4E00\u904D\uFF0C\u8FD9\u5C31\u6709\u70B9\u592A\u6D6A\u8D39\u5B58\u50A8\u7A7A\u95F4\u4E86\u3002</p><p>\u56E0\u4E3A\u8FD9\u79CD\u6309\u7167<code>\u975E\u4E3B\u952E\u5217</code>\u5EFA\u7ACB\u7684B+\u6811\u9700\u8981\u4E00\u6B21\u56DE\u8868\u64CD\u4F5C\u624D\u53EF\u4EE5\u5B9A\u4F4D\u5230\u5B8C\u6574\u7684\u7528\u6237\u8BB0\u5F55\uFF0C\u6240\u4EE5\u8FD9\u79CDB+\u6811\u4E5F\u88AB\u79F0\u4E3A<code>\u4E8C\u7EA7\u7D22\u5F15</code>\uFF0C\u6216\u8005\u8F85\u52A9\u7D22\u5F15\u3002\u7531\u4E8E\u4F7F\u7528\u7684\u662Fc2\u5217\u7684\u5927\u5C0F\u4F5C\u4E3AB+\u6811\u7684\u6392\u5E8F\u89C4\u5219\uFF0C\u6240\u4EE5\u6211\u4EEC\u4E5F\u79F0\u8FD9\u4E2AB+\u6811\u4E3Ac2\u5217\u7684\u7D22\u5F15\u3002</p><p>\u975E\u805A\u7C07\u7D22\u5F15\u7684\u5B58\u5728\u4E0D\u5F71\u54CD\u6570\u636E\u5728\u805A\u7C07\u7D22\u5F15\u4E2D\u7684\u7EC4\u7EC7\uFF0C\u6240\u4EE5\u4E00\u5F20\u8868\u53EF\u4EE5\u6709\u591A\u4E2A\u975E\u805A\u7C07\u7D22\u5F15\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220616213109383.png" alt="image-20220616213109383"></p><p>\u5C0F\u7ED3\uFF1A\u805A\u7C07\u7D22\u5F15\u4E0E\u975E\u805A\u7C07\u7D22\u5F15\u7684\u539F\u7406\u4E0D\u540C\uFF0C\u5728\u4F7F\u7528\u4E0A\u4E5F\u6709\u4E00\u4E9B\u533A\u522B\uFF1A</p><ol><li>\u805A\u7C07\u7D22\u5F15\u7684<code>\u53F6\u5B50\u8282\u70B9</code>\u5B58\u50A8\u7684\u5C31\u662F\u6211\u4EEC\u7684<code>\u6570\u636E\u8BB0\u5F55</code>, \u975E\u805A\u7C07\u7D22\u5F15\u7684\u53F6\u5B50\u8282\u70B9\u5B58\u50A8\u7684\u662F<code>\u6570\u636E\u4F4D\u7F6E</code>\u3002\u975E\u805A\u7C07\u7D22\u5F15\u4E0D\u4F1A\u5F71\u54CD\u6570\u636E\u8868\u7684\u7269\u7406\u5B58\u50A8\u987A\u5E8F\u3002</li><li>\u4E00\u4E2A\u8868<code>\u53EA\u80FD\u6709\u4E00\u4E2A\u805A\u7C07\u7D22\u5F15</code>\uFF0C\u56E0\u4E3A\u53EA\u80FD\u6709\u4E00\u79CD\u6392\u5E8F\u5B58\u50A8\u7684\u65B9\u5F0F\uFF0C\u4F46\u53EF\u4EE5\u6709<code>\u591A\u4E2A\u975E\u805A\u7C07\u7D22\u5F15</code>\uFF0C\u4E5F\u5C31\u662F\u591A\u4E2A\u7D22\u5F15\u76EE\u5F55\u63D0\u4F9B\u6570\u636E\u68C0\u7D22\u3002</li><li>\u4F7F\u7528\u805A\u7C07\u7D22\u5F15\u7684\u65F6\u5019\uFF0C\u6570\u636E\u7684<code>\u67E5\u8BE2\u6548\u7387\u9AD8</code>\uFF0C\u4F46\u5982\u679C\u5BF9\u6570\u636E\u8FDB\u884C<code>\u63D2\u5165\uFF0C\u5220\u9664\uFF0C\u66F4\u65B0</code>\u7B49\u64CD\u4F5C\uFF0C<code>\u6548\u7387\u4F1A\u6BD4\u975E\u805A\u7C07\u7D22\u5F15\u4F4E</code>\u3002</li></ol><h6 id="_3-\u8054\u5408\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_3-\u8054\u5408\u7D22\u5F15" aria-hidden="true">#</a> 3.\u8054\u5408\u7D22\u5F15</h6><p>\u6211\u4EEC\u4E5F\u53EF\u4EE5\u540C\u65F6\u4EE5\u591A\u4E2A\u5217\u7684\u5927\u5C0F\u4F5C\u4E3A\u6392\u5E8F\u89C4\u5219\uFF0C\u4E5F\u5C31\u662F\u540C\u65F6\u4E3A\u591A\u4E2A\u5217\u5EFA\u7ACB\u7D22\u5F15\uFF0C\u6BD4\u65B9\u8BF4\u6211\u4EEC\u60F3\u8BA9B+\u6811\u6309 \u7167 c2\u548Cc3\u5217 \u7684\u5927\u5C0F\u8FDB\u884C\u6392\u5E8F\uFF0C\u8FD9\u4E2A\u5305\u542B\u4E24\u5C42\u542B\u4E49\uFF1A</p><ul><li>\u5148\u628A\u5404\u4E2A\u8BB0\u5F55\u548C\u9875\u6309\u7167c2\u5217\u8FDB\u884C\u6392\u5E8F\u3002</li><li>\u5728\u8BB0\u5F55\u7684c2\u5217\u76F8\u540C\u7684\u60C5\u51B5\u4E0B\uFF0C\u91C7\u7528c3\u5217\u8FDB\u884C\u6392\u5E8F</li></ul><p>\u4E3Ac2\u548Cc3\u5EFA\u7ACB\u7684\u7D22\u5F15\u7684\u793A\u610F\u56FE\u5982\u4E0B\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220616215251172.png" alt="image-20220616215251172"></p><p>\u5982\u56FE\u6240\u793A\uFF0C\u6211\u4EEC\u9700\u8981\u6CE8\u610F\u4EE5\u4E0B\u51E0\u70B9\uFF1A</p><ul><li>\u6BCF\u6761\u76EE\u5F55\u9879\u90FD\u6709c2\u3001c3\u3001\u9875\u53F7\u8FD9\u4E09\u4E2A\u90E8\u5206\u7EC4\u6210\uFF0C\u5404\u6761\u8BB0\u5F55\u5148\u6309\u7167c2\u5217\u7684\u503C\u8FDB\u884C\u6392\u5E8F\uFF0C\u5982\u679C\u8BB0\u5F55\u7684c2\u5217\u76F8\u540C\uFF0C\u5219\u6309\u7167c3\u5217\u7684\u503C\u8FDB\u884C\u6392\u5E8F</li><li>B+\u6811\u53F6\u5B50\u8282\u70B9\u5904\u7684\u7528\u6237\u8BB0\u5F55\u7531c2\u3001c3\u548C\u4E3B\u952Ec1\u5217\u7EC4\u6210</li></ul><p>\u6CE8\u610F\u4E00\u70B9\uFF0C\u4EE5c2\u548Cc3\u5217\u7684\u5927\u5C0F\u4E3A\u6392\u5E8F\u89C4\u5219\u5EFA\u7ACB\u7684B+\u6811\u79F0\u4E3A \u8054\u5408\u7D22\u5F15 \uFF0C\u672C\u8D28\u4E0A\u4E5F\u662F\u4E00\u4E2A\u4E8C\u7EA7\u7D22\u5F15\u3002\u5B83\u7684\u610F \u601D\u4E0E\u5206\u522B\u4E3Ac2\u548Cc3\u5217\u5206\u522B\u5EFA\u7ACB\u7D22\u5F15\u7684\u8868\u8FF0\u662F\u4E0D\u540C\u7684\uFF0C\u4E0D\u540C\u70B9\u5982\u4E0B\uFF1A</p><ul><li>\u5EFA\u7ACB \u8054\u5408\u7D22\u5F15 \u53EA\u4F1A\u5EFA\u7ACB\u5982\u4E0A\u56FE\u4E00\u6837\u76841\u68F5B+\u6811\u3002</li><li>\u4E3Ac2\u548Cc3\u5217\u5206\u522B\u5EFA\u7ACB\u7D22\u5F15\u4F1A\u5206\u522B\u4EE5c2\u548Cc3\u5217\u7684\u5927\u5C0F\u4E3A\u6392\u5E8F\u89C4\u5219\u5EFA\u7ACB2\u68F5B+\u6811\u3002</li></ul><h5 id="_3-4-innodb\u7684b-\u6811\u7D22\u5F15\u7684\u6CE8\u610F\u4E8B\u9879" tabindex="-1"><a class="header-anchor" href="#_3-4-innodb\u7684b-\u6811\u7D22\u5F15\u7684\u6CE8\u610F\u4E8B\u9879" aria-hidden="true">#</a> 3.4 InnoDB\u7684B+\u6811\u7D22\u5F15\u7684\u6CE8\u610F\u4E8B\u9879</h5><h6 id="_1-\u6839\u9875\u9762\u4F4D\u7F6E\u4E07\u5E74\u4E0D\u52A8" tabindex="-1"><a class="header-anchor" href="#_1-\u6839\u9875\u9762\u4F4D\u7F6E\u4E07\u5E74\u4E0D\u52A8" aria-hidden="true">#</a> 1. \u6839\u9875\u9762\u4F4D\u7F6E\u4E07\u5E74\u4E0D\u52A8</h6><p>\u5B9E\u9645\u4E0AB+\u6811\u7684\u5F62\u6210\u8FC7\u7A0B\u662F\u8FD9\u6837\u7684\uFF1A</p><ul><li>\u6BCF\u5F53\u4E3A\u67D0\u4E2A\u8868\u521B\u5EFA\u4E00\u4E2AB+\u6811\u7D22\u5F15\uFF08\u805A\u7C07\u7D22\u5F15\u4E0D\u662F\u4EBA\u4E3A\u521B\u5EFA\u7684\uFF0C\u9ED8\u8BA4\u5C31\u6709\uFF09\u7684\u65F6\u5019\uFF0C\u90FD\u4F1A\u4E3A\u8FD9\u4E2A\u7D22\u5F15\u521B\u5EFA\u4E00\u4E2A <code>\u6839\u7ED3\u70B9</code> \u9875\u9762\u3002\u6700\u5F00\u59CB\u8868\u4E2D\u6CA1\u6709\u6570\u636E\u7684\u65F6\u5019\uFF0C\u6BCF\u4E2AB+\u6811\u7D22\u5F15\u5BF9\u5E94\u7684 <code>\u6839\u7ED3\u70B9</code> \u4E2D\u5373\u6CA1\u6709\u7528\u6237\u8BB0\u5F55\uFF0C\u4E5F\u6CA1\u6709\u76EE\u5F55\u9879\u8BB0\u5F55\u3002</li><li>\u968F\u540E\u5411\u8868\u4E2D\u63D2\u5165\u7528\u6237\u8BB0\u5F55\u65F6\uFF0C\u5148\u628A\u7528\u6237\u8BB0\u5F55\u5B58\u50A8\u5230\u8FD9\u4E2A<code>\u6839\u8282\u70B9</code> \u4E2D\u3002</li><li>\u5F53\u6839\u8282\u70B9\u4E2D\u7684\u53EF\u7528 <code>\u7A7A\u95F4\u7528\u5B8C\u65F6</code> \u7EE7\u7EED\u63D2\u5165\u8BB0\u5F55\uFF0C\u6B64\u65F6\u4F1A\u5C06\u6839\u8282\u70B9\u4E2D\u7684\u6240\u6709\u8BB0\u5F55\u590D\u5236\u5230\u4E00\u4E2A\u65B0\u5206\u914D\u7684\u9875\uFF0C\u6BD4\u5982 <code>\u9875a</code> \u4E2D\uFF0C\u7136\u540E\u5BF9\u8FD9\u4E2A\u65B0\u9875\u8FDB\u884C <code>\u9875\u5206\u88C2</code> \u7684\u64CD\u4F5C\uFF0C\u5F97\u5230\u53E6\u4E00\u4E2A\u65B0\u9875\uFF0C\u6BD4\u5982<code>\u9875b</code> \u3002\u8FD9\u65F6\u65B0\u63D2\u5165\u7684\u8BB0\u5F55\u6839\u636E\u952E\u503C\uFF08\u4E5F\u5C31\u662F\u805A\u7C07\u7D22\u5F15\u4E2D\u7684\u4E3B\u952E\u503C\uFF0C\u4E8C\u7EA7\u7D22\u5F15\u4E2D\u5BF9\u5E94\u7684\u7D22\u5F15\u5217\u7684\u503C\uFF09\u7684\u5927\u5C0F\u5C31\u4F1A\u88AB\u5206\u914D\u5230 <code>\u9875a</code> \u6216\u8005 <code>\u9875b</code> \u4E2D\uFF0C\u800C <code>\u6839\u8282\u70B9</code> \u4FBF\u5347\u7EA7\u4E3A<code>\u5B58\u50A8\u76EE\u5F55\u9879\u8BB0\u5F55\u7684\u9875</code>\u3002</li></ul><p>\u8FD9\u4E2A\u8FC7\u7A0B\u7279\u522B\u6CE8\u610F\u7684\u662F\uFF1A\u4E00\u4E2AB+\u6811\u7D22\u5F15\u7684\u6839\u8282\u70B9\u81EA\u8BDE\u751F\u4E4B\u65E5\u8D77\uFF0C\u4FBF\u4E0D\u4F1A\u518D\u79FB\u52A8\u3002\u8FD9\u6837\u53EA\u8981\u6211\u4EEC\u5BF9\u67D0\u4E2A\u8868\u5EFA\u8BAE\u4E00\u4E2A\u7D22\u5F15\uFF0C\u90A3\u4E48\u5B83\u7684\u6839\u8282\u70B9\u7684\u9875\u53F7\u4FBF\u4F1A\u88AB\u8BB0\u5F55\u5230\u67D0\u4E2A\u5730\u65B9\u3002\u7136\u540E\u51E1\u662F <code>InnoDB</code> \u5B58\u50A8\u5F15\u64CE\u9700\u8981\u7528\u5230\u8FD9\u4E2A\u7D22\u5F15\u7684\u65F6\u5019\uFF0C\u90FD\u4F1A\u4ECE\u54EA\u4E2A\u56FA\u5B9A\u7684\u5730\u65B9\u53D6\u51FA\u6839\u8282\u70B9\u7684\u9875\u53F7\uFF0C\u4ECE\u800C\u6765\u8BBF\u95EE\u8FD9\u4E2A\u7D22\u5F15\u3002</p><h6 id="_2-\u5185\u8282\u70B9\u4E2D\u76EE\u5F55\u9879\u8BB0\u5F55\u7684\u552F\u4E00\u6027" tabindex="-1"><a class="header-anchor" href="#_2-\u5185\u8282\u70B9\u4E2D\u76EE\u5F55\u9879\u8BB0\u5F55\u7684\u552F\u4E00\u6027" aria-hidden="true">#</a> 2. \u5185\u8282\u70B9\u4E2D\u76EE\u5F55\u9879\u8BB0\u5F55\u7684\u552F\u4E00\u6027</h6><p>\u6211\u4EEC\u77E5\u9053B+\u6811\u7D22\u5F15\u7684\u5185\u8282\u70B9\u4E2D\u76EE\u5F55\u9879\u8BB0\u5F55\u7684\u5185\u5BB9\u662F <code>\u7D22\u5F15\u5217 + \u9875\u53F7</code> \u7684\u642D\u914D\uFF0C\u4F46\u662F\u8FD9\u4E2A\u642D\u914D\u5BF9\u4E8E\u4E8C\u7EA7\u7D22\u5F15\u6765\u8BF4\u6709\u70B9\u4E0D\u4E25\u8C28\u3002\u8FD8\u62FF index_demo \u8868\u4E3A\u4F8B\uFF0C\u5047\u8BBE\u8FD9\u4E2A\u8868\u4E2D\u7684\u6570\u636E\u662F\u8FD9\u6837\u7684\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617151918786.png" alt="image-20220617151918786"></p><p>\u5982\u679C\u4E8C\u7EA7\u7D22\u5F15\u4E2D\u76EE\u5F55\u9879\u8BB0\u5F55\u7684\u5185\u5BB9\u53EA\u662F <code>\u7D22\u5F15\u5217 + \u9875\u53F7</code> \u7684\u642D\u914D\u7684\u8BDD\uFF0C\u90A3\u4E48\u4E3A <code>c2</code> \u5217\u7B80\u5386\u7D22\u5F15\u540E\u7684B+\u6811\u5E94\u8BE5\u957F\u8FD9\u6837\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617152906690.png" alt="image-20220617152906690"></p><p>\u5982\u679C\u6211\u4EEC\u60F3\u65B0\u63D2\u5165\u4E00\u884C\u8BB0\u5F55\uFF0C\u5176\u4E2D <code>c1</code> \u3001<code>c2</code> \u3001<code>c3</code> \u7684\u503C\u5206\u522B\u662F: <code>9</code>\u3001<code>1</code>\u3001<code>c</code>, \u90A3\u4E48\u5728\u4FEE\u6539\u8FD9\u4E2A\u4E3A c2 \u5217\u5EFA\u7ACB\u7684\u4E8C\u7EA7\u7D22\u5F15\u5BF9\u5E94\u7684 B+ \u6811\u65F6\u4FBF\u78B0\u5230\u4E86\u4E2A\u5927\u95EE\u9898\uFF1A\u7531\u4E8E <code>\u98753</code> \u4E2D\u5B58\u50A8\u7684\u76EE\u5F55\u9879\u8BB0\u5F55\u662F\u7531 <code>c2\u5217 + \u9875\u53F7</code> \u7684\u503C\u6784\u6210\u7684\uFF0C<code>\u98753</code> \u4E2D\u7684\u4E24\u6761\u76EE\u5F55\u9879\u8BB0\u5F55\u5BF9\u5E94\u7684 c2 \u5217\u7684\u503C\u90FD\u662F1\uFF0C\u800C\u6211\u4EEC <code>\u65B0\u63D2\u5165\u7684\u8FD9\u6761\u8BB0\u5F55</code> \u7684 c2 \u5217\u7684\u503C\u4E5F\u662F <code>1</code>\uFF0C\u90A3\u6211\u4EEC\u8FD9\u6761\u65B0\u63D2\u5165\u7684\u8BB0\u5F55\u5230\u5E95\u5E94\u8BE5\u653E\u5728 <code>\u98754</code> \u4E2D\uFF0C\u8FD8\u662F\u5E94\u8BE5\u653E\u5728 <code>\u98755</code> \u4E2D\uFF1F\u7B54\u6848\uFF1A\u5BF9\u4E0D\u8D77\uFF0C\u61F5\u4E86</p><p>\u4E3A\u4E86\u8BA9\u65B0\u63D2\u5165\u8BB0\u5F55\u627E\u5230\u81EA\u5DF1\u5728\u90A3\u4E2A\u9875\u9762\uFF0C\u6211\u4EEC\u9700\u8981<strong>\u4FDD\u8BC1\u5728B+\u6811\u7684\u540C\u4E00\u5C42\u9875\u8282\u70B9\u7684\u76EE\u5F55\u9879\u8BB0\u5F55\u9664\u9875\u53F7\u8FD9\u4E2A\u5B57\u6BB5\u4EE5\u5916\u662F\u552F\u4E00\u7684</strong>\u3002\u6240\u4EE5\u5BF9\u4E8E\u4E8C\u7EA7\u7D22\u5F15\u7684\u5185\u8282\u70B9\u7684\u76EE\u5F55\u9879\u8BB0\u5F55\u7684\u5185\u5BB9\u5B9E\u9645\u4E0A\u662F\u7531\u4E09\u4E2A\u90E8\u5206\u6784\u6210\u7684\uFF1A</p><ul><li>\u7D22\u5F15\u5217\u7684\u503C</li><li><code>\u4E3B\u952E\u503C</code></li><li>\u9875\u53F7</li></ul><p>\u4E5F\u5C31\u662F\u6211\u4EEC\u628A<code>\u4E3B\u952E\u503C</code>\u4E5F\u6DFB\u52A0\u5230\u4E8C\u7EA7\u7D22\u5F15\u5185\u8282\u70B9\u4E2D\u7684\u76EE\u5F55\u9879\u8BB0\u5F55\uFF0C\u8FD9\u6837\u5C31\u80FD\u4FDD\u4F4F B+ \u6811\u6BCF\u4E00\u5C42\u8282\u70B9\u4E2D\u5404\u6761\u76EE\u5F55\u9879\u8BB0\u5F55\u9664\u9875\u53F7\u8FD9\u4E2A\u5B57\u6BB5\u5916\u662F\u552F\u4E00\u7684\uFF0C\u6240\u4EE5\u6211\u4EEC\u4E3Ac2\u5EFA\u7ACB\u4E8C\u7EA7\u7D22\u5F15\u540E\u7684\u793A\u610F\u56FE\u5B9E\u9645\u4E0A\u5E94\u8BE5\u662F\u8FD9\u6837\u5B50\u7684\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617154135258.png" alt="image-20220617154135258"></p><p>\u8FD9\u6837\u6211\u4EEC\u518D\u63D2\u5165\u8BB0\u5F55<code>(9, 1, &#39;c&#39;)</code> \u65F6\uFF0C\u7531\u4E8E <code>\u98753</code> \u4E2D\u5B58\u50A8\u7684\u76EE\u5F55\u9879\u8BB0\u5F55\u662F\u7531 <code>c2\u5217 + \u4E3B\u952E + \u9875\u53F7</code> \u7684\u503C\u6784\u6210\u7684\uFF0C\u53EF\u4EE5\u5148\u628A\u65B0\u7EAA\u5F55\u7684 <code>c2</code> \u5217\u7684\u503C\u548C <code>\u98753</code> \u4E2D\u5404\u76EE\u5F55\u9879\u8BB0\u5F55\u7684 <code>c2</code> \u5217\u7684\u503C\u4F5C\u6BD4\u8F83\uFF0C\u5982\u679C <code>c2</code> \u5217\u7684\u503C\u76F8\u540C\u7684\u8BDD\uFF0C\u53EF\u4EE5\u63A5\u7740\u6BD4\u8F83\u4E3B\u952E\u503C\uFF0C\u56E0\u4E3AB+\u6811\u540C\u4E00\u5C42\u4E2D\u4E0D\u540C\u76EE\u5F55\u9879\u8BB0\u5F55\u7684 <code>c2\u5217 + \u4E3B\u952E</code>\u7684\u503C\u80AF\u5B9A\u662F\u4E0D\u4E00\u6837\u7684\uFF0C\u6240\u4EE5\u6700\u540E\u80AF\u5B9A\u80FD\u5B9A\u4F4D\u552F\u4E00\u7684\u4E00\u6761\u76EE\u5F55\u9879\u8BB0\u5F55\uFF0C\u5728\u672C\u4F8B\u4E2D\u6700\u540E\u786E\u5B9A\u65B0\u7EAA\u5F55\u5E94\u8BE5\u88AB\u63D2\u5165\u5230 <code>\u98755</code> \u4E2D\u3002</p><h6 id="_3-\u4E00\u4E2A\u9875\u9762\u6700\u5C11\u5B58\u50A8-2-\u6761\u8BB0\u5F55" tabindex="-1"><a class="header-anchor" href="#_3-\u4E00\u4E2A\u9875\u9762\u6700\u5C11\u5B58\u50A8-2-\u6761\u8BB0\u5F55" aria-hidden="true">#</a> 3. \u4E00\u4E2A\u9875\u9762\u6700\u5C11\u5B58\u50A8 2 \u6761\u8BB0\u5F55</h6><p>\u4E00\u4E2AB+\u6811\u53EA\u9700\u8981\u5F88\u5C11\u7684\u5C42\u7EA7\u5C31\u53EF\u4EE5\u8F7B\u677E\u5B58\u50A8\u6570\u4EBF\u6761\u8BB0\u5F55\uFF0C\u67E5\u8BE2\u901F\u5EA6\u76F8\u5F53\u4E0D\u9519\uFF01\u8FD9\u662F\u56E0\u4E3AB+\u6811\u672C\u8D28\u4E0A\u5C31\u662F\u4E00\u4E2A\u5927\u7684\u591A\u5C42\u7EA7\u76EE\u5F55\uFF0C\u6BCF\u7ECF\u8FC7\u4E00\u4E2A\u76EE\u5F55\u65F6\u90FD\u4F1A\u8FC7\u6EE4\u6389\u8BB8\u591A\u65E0\u6548\u7684\u5B50\u76EE\u5F55\uFF0C\u76F4\u5230\u6700\u540E\u8BBF\u95EE\u5230\u5B58\u50A8\u771F\u5B9E\u6570\u636E\u7684\u76EE\u5F55\u3002\u90A3\u5982\u679C\u4E00\u4E2A\u5927\u7684\u76EE\u5F55\u4E2D\u53EA\u5B58\u653E\u4E00\u4E2A\u5B50\u76EE\u5F55\u662F\u4E2A\u5565\u6548\u679C\u5462\uFF1F\u90A3\u5C31\u662F\u76EE\u5F55\u5C42\u7EA7\u975E\u5E38\u975E\u5E38\u591A\uFF0C\u800C\u4E14\u6700\u540E\u7684\u90A3\u4E2A\u5B58\u653E\u771F\u5B9E\u6570\u636E\u7684\u76EE\u5F55\u4E2D\u53EA\u5B58\u653E\u4E00\u6761\u6570\u636E\u3002\u6240\u4EE5 <strong>InnoDB \u7684\u4E00\u4E2A\u6570\u636E\u9875\u81F3\u5C11\u53EF\u4EE5\u5B58\u653E\u4E24\u6761\u8BB0\u5F55</strong>\u3002</p><h3 id="_4-myisam\u4E2D\u7684\u7D22\u5F15\u65B9\u6848" tabindex="-1"><a class="header-anchor" href="#_4-myisam\u4E2D\u7684\u7D22\u5F15\u65B9\u6848" aria-hidden="true">#</a> 4. MyISAM\u4E2D\u7684\u7D22\u5F15\u65B9\u6848</h3><p>B\u6811\u7D22\u5F15\u4F7F\u7528\u5B58\u50A8\u5F15\u64CE\u5982\u8868\u6240\u793A\uFF1A</p><table><thead><tr><th>\u7D22\u5F15 / \u5B58\u50A8\u5F15\u64CE</th><th>MyISAM</th><th>InnoDB</th><th>Memory</th></tr></thead><tbody><tr><td>B-Tree\u7D22\u5F15</td><td>\u652F\u6301</td><td>\u652F\u6301</td><td>\u652F\u6301</td></tr></tbody></table><p>\u5373\u4F7F\u591A\u4E2A\u5B58\u50A8\u5F15\u64CE\u652F\u6301\u540C\u4E00\u79CD\u7C7B\u578B\u7684\u7D22\u5F15\uFF0C\u4F46\u662F\u4ED6\u4EEC\u7684\u5B9E\u73B0\u539F\u7406\u4E5F\u662F\u4E0D\u540C\u7684\u3002Innodb\u548CMyISAM\u9ED8\u8BA4\u7684\u7D22 \u5F15\u662FBtree\u7D22\u5F15\uFF1B\u800CMemory\u9ED8\u8BA4\u7684\u7D22\u5F15\u662FHash\u7D22\u5F15\u3002</p><p>MyISAM\u5F15\u64CE\u4F7F\u7528 B+Tree \u4F5C\u4E3A\u7D22\u5F15\u7ED3\u6784\uFF0C<code>\u53F6\u5B50\u8282\u70B9\u7684data\u57DF</code>\u5B58\u653E\u7684\u662F <code>\u6570\u636E\u8BB0\u5F55\u7684\u5730\u5740</code> \u3002</p><h5 id="_4-1-myisam\u7D22\u5F15\u7684\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_4-1-myisam\u7D22\u5F15\u7684\u539F\u7406" aria-hidden="true">#</a> 4.1 MyISAM\u7D22\u5F15\u7684\u539F\u7406</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617160325201.png" alt="image-20220617160325201" style="float:left;"><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617160413479.png" alt="image-20220617160413479"></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617160533122.png" alt="image-20220617160533122" style="float:left;"><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617160625006.png" alt="image-20220617160625006"></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617160813548.png" alt="image-20220617160813548" style="float:left;"><h5 id="_4-2-myisam-\u4E0E-innodb\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#_4-2-myisam-\u4E0E-innodb\u5BF9\u6BD4" aria-hidden="true">#</a> 4.2 MyISAM \u4E0E InnoDB\u5BF9\u6BD4</h5><p><strong>MyISAM\u7684\u7D22\u5F15\u65B9\u5F0F\u90FD\u662F\u201C\u975E\u805A\u7C07\u201D\u7684\uFF0C\u4E0EInnoDB\u5305\u542B1\u4E2A\u805A\u7C07\u7D22\u5F15\u662F\u4E0D\u540C\u7684\u3002\u5C0F\u7ED3\u4E24\u79CD\u5F15\u64CE\u4E2D\u7D22\u5F15\u7684\u533A\u522B\uFF1A</strong></p><p>\u2460 \u5728InnoDB\u5B58\u50A8\u5F15\u64CE\u4E2D\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u6839\u636E\u4E3B\u952E\u503C\u5BF9 <code>\u805A\u7C07\u7D22\u5F15</code> \u8FDB\u884C\u4E00\u6B21\u67E5\u627E\u5C31\u80FD\u627E\u5230\u5BF9\u5E94\u7684\u8BB0\u5F55\uFF0C\u800C\u5728 MyISAM \u4E2D\u5374\u9700\u8981\u8FDB\u884C\u4E00\u6B21 \u56DE\u8868 \u64CD\u4F5C\uFF0C\u610F\u5473\u7740MyISAM\u4E2D\u5EFA\u7ACB\u7684\u7D22\u5F15\u76F8\u5F53\u4E8E\u5168\u90E8\u90FD\u662F \u4E8C\u7EA7\u7D22\u5F15 \u3002</p><p>\u2461 InnoDB\u7684<code>\u6570\u636E\u6587\u4EF6\u672C\u8EAB\u5C31\u662F\u7D22\u5F15\u6587\u4EF6</code>\uFF0C\u800CMyISAM\u7D22\u5F15\u6587\u4EF6\u548C\u6570\u636E\u6587\u4EF6\u662F <code>\u5206\u79BB\u7684</code> \uFF0C\u7D22\u5F15\u6587\u4EF6\u4EC5\u4FDD\u5B58\u6570 \u636E\u8BB0\u5F55\u7684\u5730\u5740\u3002</p><p>\u2462 InnoDB\u7684\u975E\u805A\u7C07\u7D22\u5F15data\u57DF\u5B58\u50A8\u76F8\u5E94\u8BB0\u5F55 <code>\u4E3B\u952E</code> \u7684\u503C \uFF0C\u800CMyISAM\u7D22\u5F15\u8BB0\u5F55\u7684\u662F <code>\u5730\u5740</code> \u3002\u6362\u53E5\u8BDD\u8BF4\uFF0CInnoDB\u7684\u6240\u6709\u975E\u805A\u7C07\u7D22\u5F15\u90FD\u5F15\u7528\u4E3B\u952E\u4F5C\u4E3Adata\u57DF\u3002</p><p>\u2463 MyISAM\u7684\u56DE\u8868\u64CD\u4F5C\u662F\u5341\u5206 \u5FEB\u901F \u7684\uFF0C\u56E0\u4E3A\u662F\u62FF\u7740\u5730\u5740\u504F\u79FB\u91CF\u76F4\u63A5\u5230\u6587\u4EF6\u4E2D\u53D6\u6570\u636E\u7684\uFF0C\u53CD\u89C2InnoDB\u662F\u901A \u8FC7\u83B7\u53D6\u4E3B\u952E\u4E4B\u540E\u518D\u53BB\u805A\u7C07\u7D22\u5F15\u91CC\u627E\u8BB0\u5F55\uFF0C\u867D\u7136\u8BF4\u4E5F\u4E0D\u6162\uFF0C\u4F46\u8FD8\u662F\u6BD4\u4E0D\u4E0A\u76F4\u63A5\u7528\u5730\u5740\u53BB\u8BBF\u95EE\u3002</p><p>\u2464 InnoDB\u8981\u6C42\u8868 \u5FC5\u987B\u6709\u4E3B\u952E \uFF08 MyISAM\u53EF\u4EE5\u6CA1\u6709 \uFF09\u3002\u5982\u679C<code>\u6CA1\u6709\u663E\u5F0F\u6307\u5B9A</code>\uFF0C\u5219MySQL\u7CFB\u7EDF\u4F1A\u81EA\u52A8\u9009\u62E9\u4E00\u4E2A \u53EF\u4EE5<code>\u975E\u7A7A\u4E14\u552F\u4E00\u6807\u8BC6\u6570\u636E\u8BB0\u5F55</code>\u7684\u5217\u4F5C\u4E3A\u4E3B\u952E\u3002\u5982\u679C\u4E0D\u5B58\u5728\u8FD9\u79CD\u5217\uFF0C\u5219MySQL\u81EA\u52A8\u4E3AInnoDB\u8868\u751F\u6210\u4E00\u4E2A<code>\u9690\u542B\u5B57\u6BB5</code>\u4F5C\u4E3A\u4E3B\u952E\uFF0C\u8FD9\u4E2A\u5B57\u6BB5\u957F\u5EA6\u4E3A6\u4E2A\u5B57\u8282\uFF0C\u7C7B\u578B\u4E3A\u957F\u6574\u578B\u3002</p><p><strong>\u5C0F\u7ED3\uFF1A</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617161126022.png" alt="image-20220617161126022" style="float:left;"><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617161151125.png" alt="image-20220617161151125"></p><h3 id="_5-\u7D22\u5F15\u7684\u4EE3\u4EF7" tabindex="-1"><a class="header-anchor" href="#_5-\u7D22\u5F15\u7684\u4EE3\u4EF7" aria-hidden="true">#</a> 5. \u7D22\u5F15\u7684\u4EE3\u4EF7</h3><p>\u7D22\u5F15\u662F\u4E2A\u597D\u4E1C\u897F\uFF0C\u53EF\u4E0D\u80FD\u4E71\u5EFA\uFF0C\u5B83\u5728\u7A7A\u95F4\u548C\u65F6\u95F4\u4E0A\u90FD\u4F1A\u6709\u6D88\u8017\uFF1A</p><ul><li><p><code>\u7A7A\u95F4\u4E0A\u7684\u4EE3\u4EF7</code></p><p>\u6BCF\u5EFA\u7ACB\u4E00\u4E2A\u7D22\u5F15\u90FD\u8981\u4E3A\u5B83\u5EFA\u7ACB\u4E00\u68F5B+\u6811\uFF0C\u6BCF\u4E00\u68F5B+\u6811\u7684\u6BCF\u4E00\u4E2A\u8282\u70B9\u90FD\u662F\u4E00\u4E2A\u6570\u636E\u9875\uFF0C\u4E00\u4E2A\u9875\u9ED8\u8BA4\u4F1A <code>\u5360\u7528 16KB \u7684\u5B58\u50A8\u7A7A\u95F4</code>\uFF0C\u4E00\u68F5\u5F88\u5927\u7684B+\u6811\u7531\u8BB8\u591A\u6570\u636E\u9875\u7EC4\u6210\uFF0C\u90A3\u5C31\u662F\u5F88\u5927\u7684\u4E00\u7247\u5B58\u50A8\u7A7A\u95F4\u3002</p></li><li><p><code>\u65F6\u95F4\u4E0A\u7684\u4EE3\u4EF7</code></p><p>\u6BCF\u6B21\u5BF9\u8868\u4E2D\u7684\u6570\u636E\u8FDB\u884C \u589E\u3001\u5220\u3001\u6539 \u64CD\u4F5C\u65F6\uFF0C\u90FD\u9700\u8981\u53BB\u4FEE\u6539\u5404\u4E2AB+\u6811\u7D22\u5F15\u3002\u800C\u4E14\u6211\u4EEC\u8BB2\u8FC7\uFF0CB+\u6811\u6BCF \u5C42\u8282\u70B9\u90FD\u662F\u6309\u7167\u7D22\u5F15\u5217\u7684\u503C \u4ECE\u5C0F\u5230\u5927\u7684\u987A\u5E8F\u6392\u5E8F \u800C\u7EC4\u6210\u4E86 \u53CC\u5411\u94FE\u8868 \u3002\u4E0D\u8BBA\u662F\u53F6\u5B50\u8282\u70B9\u4E2D\u7684\u8BB0\u5F55\uFF0C\u8FD8 \u662F\u5185\u8282\u70B9\u4E2D\u7684\u8BB0\u5F55\uFF08\u4E5F\u5C31\u662F\u4E0D\u8BBA\u662F\u7528\u6237\u8BB0\u5F55\u8FD8\u662F\u76EE\u5F55\u9879\u8BB0\u5F55\uFF09\u90FD\u662F\u6309\u7167\u7D22\u5F15\u5217\u7684\u503C\u4ECE\u5C0F\u5230\u5927\u7684\u987A\u5E8F \u800C\u5F62\u6210\u4E86\u4E00\u4E2A\u5355\u5411\u94FE\u8868\u3002\u800C\u589E\u3001\u5220\u3001\u6539\u64CD\u4F5C\u53EF\u80FD\u4F1A\u5BF9\u8282\u70B9\u548C\u8BB0\u5F55\u7684\u6392\u5E8F\u9020\u6210\u7834\u574F\uFF0C\u6240\u4EE5\u5B58\u50A8\u5F15\u64CE\u9700 \u8981\u989D\u5916\u7684\u65F6\u95F4\u8FDB\u884C\u4E00\u4E9B <code>\u8BB0\u5F55\u79FB\u4F4D</code> \uFF0C <code>\u9875\u9762\u5206\u88C2</code> \u3001 <code>\u9875\u9762\u56DE\u6536 </code>\u7B49\u64CD\u4F5C\u6765\u7EF4\u62A4\u597D\u8282\u70B9\u548C\u8BB0\u5F55\u7684\u6392\u5E8F\u3002\u5982\u679C \u6211\u4EEC\u5EFA\u4E86\u8BB8\u591A\u7D22\u5F15\uFF0C\u6BCF\u4E2A\u7D22\u5F15\u5BF9\u5E94\u7684B+\u6811\u90FD\u8981\u8FDB\u884C\u76F8\u5173\u7684\u7EF4\u62A4\u64CD\u4F5C\uFF0C\u4F1A\u7ED9\u6027\u80FD\u62D6\u540E\u817F\u3002</p></li></ul><blockquote><p>\u4E00\u4E2A\u8868\u4E0A\u7D22\u5F15\u5EFA\u7684\u8D8A\u591A\uFF0C\u5C31\u4F1A\u5360\u7528\u8D8A\u591A\u7684\u5B58\u50A8\u7A7A\u95F4\uFF0C\u5728\u589E\u5220\u6539\u8BB0\u5F55\u7684\u65F6\u5019\u6027\u80FD\u5C31\u8D8A\u5DEE\u3002\u4E3A\u4E86\u80FD\u5EFA\u7ACB\u53C8\u597D\u53C8\u5C11\u7684\u7D22\u5F15\uFF0C\u6211\u4EEC\u5F97\u5B66\u5B66\u8FD9\u4E9B\u7D22\u5F15\u5728\u54EA\u4E9B\u6761\u4EF6\u4E0B\u8D77\u4F5C\u7528\u7684\u3002</p></blockquote><h3 id="_6-mysql\u6570\u636E\u7ED3\u6784\u9009\u62E9\u7684\u5408\u7406\u6027" tabindex="-1"><a class="header-anchor" href="#_6-mysql\u6570\u636E\u7ED3\u6784\u9009\u62E9\u7684\u5408\u7406\u6027" aria-hidden="true">#</a> 6. MySQL\u6570\u636E\u7ED3\u6784\u9009\u62E9\u7684\u5408\u7406\u6027</h3><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617161635521.png" alt="image-20220617161635521" style="float:left;"><h5 id="_6-1-\u5168\u8868\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_6-1-\u5168\u8868\u67E5\u8BE2" aria-hidden="true">#</a> 6.1 \u5168\u8868\u67E5\u8BE2</h5><p>\u8FD9\u91CC\u90FD\u61D2\u5F97\u8BF4\u4E86\u3002</p><h5 id="_6-2-hash\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_6-2-hash\u67E5\u8BE2" aria-hidden="true">#</a> 6.2 Hash\u67E5\u8BE2</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617161946230.png" alt="image-20220617161946230" style="float:left;"><p><strong>\u52A0\u5FEB\u67E5\u627E\u901F\u5EA6\u7684\u6570\u636E\u7ED3\u6784\uFF0C\u5E38\u89C1\u7684\u6709\u4E24\u7C7B\uFF1A</strong></p><p>(1) \u6811\uFF0C\u4F8B\u5982\u5E73\u8861\u4E8C\u53C9\u641C\u7D22\u6811\uFF0C\u67E5\u8BE2/\u63D2\u5165/\u4FEE\u6539/\u5220\u9664\u7684\u5E73\u5747\u65F6\u95F4\u590D\u6742\u5EA6\u90FD\u662F <code>O(log2N)</code>;</p><p>(2)\u54C8\u5E0C\uFF0C\u4F8B\u5982HashMap\uFF0C\u67E5\u8BE2/\u63D2\u5165/\u4FEE\u6539/\u5220\u9664\u7684\u5E73\u5747\u65F6\u95F4\u590D\u6742\u5EA6\u90FD\u662F <code>O(1)</code>; (key, value)</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617162153587.png" alt="image-20220617162153587"></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617162548697.png" alt="image-20220617162548697" style="float:left;"><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617162604272.png" alt="image-20220617162604272"></p><p>\u4E0A\u56FE\u4E2D\u54C8\u5E0C\u51FD\u6570h\u6709\u53EF\u80FD\u5C06\u4E24\u4E2A\u4E0D\u540C\u7684\u5173\u952E\u5B57\u6620\u5C04\u5230\u76F8\u540C\u7684\u4F4D\u7F6E\uFF0C\u8FD9\u53EB\u505A \u78B0\u649E \uFF0C\u5728\u6570\u636E\u5E93\u4E2D\u4E00\u822C\u91C7\u7528 \u94FE \u63A5\u6CD5 \u6765\u89E3\u51B3\u3002\u5728\u94FE\u63A5\u6CD5\u4E2D\uFF0C\u5C06\u6563\u5217\u5230\u540C\u4E00\u69FD\u4F4D\u7684\u5143\u7D20\u653E\u5728\u4E00\u4E2A\u94FE\u8868\u4E2D\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617162703006.png" alt="image-20220617162703006"></p><p>\u5B9E\u9A8C\uFF1A\u4F53\u4F1A\u6570\u7EC4\u548Chash\u8868\u7684\u67E5\u627E\u65B9\u9762\u7684\u6548\u7387\u533A\u522B</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>// \u7B97\u6CD5\u590D\u6742\u5EA6\u4E3A O(n)
@Test
public void test1(){
    int[] arr = new int[100000];
    for(int i = 0;i &lt; arr.length;i++){
        arr[i] = i + 1;
    }
    long start = System.currentTimeMillis();
    for(int j = 1; j&lt;=100000;j++){
        int temp = j;
        for(int i = 0;i &lt; arr.length;i++){
            if(temp == arr[i]){
                break;
            }
        }
    }
    long end = System.currentTimeMillis();
    System.out.println(&quot;time\uFF1A &quot; + (end - start)); //time\uFF1A 823
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>// \u7B97\u6CD5\u590D\u6742\u5EA6\u4E3A O(1)
@Test
public void test2(){
    HashSet&lt;Integer&gt; set = new HashSet&lt;&gt;(100000);
    for(int i = 0;i &lt; 100000;i++){
    	set.add(i + 1);
    }
    long start = System.currentTimeMillis();
    for(int j = 1; j&lt;=100000;j++) {
        int temp = j;
        boolean contains = set.contains(temp);
    }
    long end = System.currentTimeMillis();
    System.out.println(&quot;time\uFF1A &quot; + (end - start)); //time\uFF1A 5
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Hash\u7ED3\u6784\u6548\u7387\u9AD8\uFF0C\u90A3\u4E3A\u4EC0\u4E48\u7D22\u5F15\u7ED3\u6784\u8981\u8BBE\u8BA1\u6210\u6811\u578B\u5462\uFF1F</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617163202156.png" alt="image-20220617163202156" style="float:left;"><p><strong>Hash\u7D22\u5F15\u9002\u7528\u5B58\u50A8\u5F15\u64CE\u5982\u8868\u6240\u793A\uFF1A</strong></p><table><thead><tr><th>\u7D22\u5F15 / \u5B58\u50A8\u5F15\u64CE</th><th>MyISAM</th><th>InnoDB</th><th>Memory</th></tr></thead><tbody><tr><td>HASH\u7D22\u5F15</td><td>\u4E0D\u652F\u6301</td><td>\u4E0D\u652F\u6301</td><td>\u652F\u6301</td></tr></tbody></table><p><strong>Hash\u7D22\u5F15\u7684\u9002\u7528\u6027\uFF1A</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617163619721.png" alt="image-20220617163619721" style="float:left;"><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617163657697.png" alt="image-20220617163657697"></p><p>\u91C7\u7528<code>\u81EA\u9002\u5E94 Hash \u7D22\u5F15</code>\u76EE\u7684\u662F\u65B9\u4FBF\u6839\u636E SQL \u7684\u67E5\u8BE2\u6761\u4EF6<code>\u52A0\u901F\u5B9A\u4F4D\u5230\u53F6\u5B50\u8282\u70B9</code>\uFF0C\u7279\u522B\u662F\u5F53 B+ \u6811\u6BD4\u8F83\u6DF1\u7684\u65F6 \u5019\uFF0C\u901A\u8FC7\u81EA\u9002\u5E94 Hash \u7D22\u5F15\u53EF\u4EE5\u660E\u663E<code>\u63D0\u9AD8\u6570\u636E\u7684\u68C0\u7D22\u6548\u7387</code>\u3002</p><p>\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7 innodb_adaptive_hash_index \u53D8\u91CF\u6765\u67E5\u770B\u662F\u5426\u5F00\u542F\u4E86\u81EA\u9002\u5E94 Hash\uFF0C\u6BD4\u5982\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; show variables like &#39;%adaptive_hash_index&#39;;
+----------------------------+-------+
| Variable_name              | Value |
+----------------------------+-------+
| innodb_adaptive_hash_index | ON    |
+----------------------------+-------+
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_6-3-\u4E8C\u53C9\u641C\u7D22\u6811" tabindex="-1"><a class="header-anchor" href="#_6-3-\u4E8C\u53C9\u641C\u7D22\u6811" aria-hidden="true">#</a> 6.3 \u4E8C\u53C9\u641C\u7D22\u6811</h5><p>\u5982\u679C\u6211\u4EEC\u5229\u7528\u4E8C\u53C9\u6811\u4F5C\u4E3A\u7D22\u5F15\u7ED3\u6784\uFF0C\u90A3\u4E48\u78C1\u76D8\u7684IO\u6B21\u6570\u548C\u7D22\u5F15\u6811\u7684\u9AD8\u5EA6\u662F\u76F8\u5173\u7684\u3002</p><p><strong>1. \u4E8C\u53C9\u641C\u7D22\u6811\u7684\u7279\u70B9</strong></p><ul><li>\u4E00\u4E2A\u8282\u70B9\u53EA\u80FD\u6709\u4E24\u4E2A\u5B50\u8282\u70B9\uFF0C\u4E5F\u5C31\u662F\u4E00\u4E2A\u8282\u70B9\u5EA6\u4E0D\u80FD\u8D85\u8FC72</li><li>\u5DE6\u5B50\u8282\u70B9 &lt; \u672C\u8282\u70B9; \u53F3\u5B50\u8282\u70B9 &gt;= \u672C\u8282\u70B9\uFF0C\u6BD4\u6211\u5927\u7684\u5411\u53F3\uFF0C\u6BD4\u6211\u5C0F\u7684\u5411\u5DE6</li></ul><p><strong>2. \u67E5\u627E\u89C4\u5219</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617163952166.png" alt="image-20220617163952166" style="float:left;"><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617164022728.png" alt="image-20220617164022728"></p><p>\u4F46\u662F\u7279\u6B8A\u60C5\u51B5\uFF0C\u5C31\u662F\u6709\u65F6\u5019\u4E8C\u53C9\u6811\u7684\u6DF1\u5EA6\u975E\u5E38\u5927\uFF0C\u6BD4\u5982\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617164053134.png" alt="image-20220617164053134"></p><p>\u4E3A\u4E86\u63D0\u9AD8\u67E5\u8BE2\u6548\u7387\uFF0C\u5C31\u9700\u8981 \u51CF\u5C11\u78C1\u76D8IO\u6570 \u3002\u4E3A\u4E86\u51CF\u5C11\u78C1\u76D8IO\u7684\u6B21\u6570\uFF0C\u5C31\u9700\u8981\u5C3D\u91CF \u964D\u4F4E\u6811\u7684\u9AD8\u5EA6 \uFF0C\u9700\u8981\u628A \u539F\u6765\u201C\u7626\u9AD8\u201D\u7684\u6811\u7ED3\u6784\u53D8\u7684\u201C\u77EE\u80D6\u201D\uFF0C\u6811\u7684\u6BCF\u5C42\u7684\u5206\u53C9\u8D8A\u591A\u8D8A\u597D\u3002</p><h5 id="_6-4-avl\u6811" tabindex="-1"><a class="header-anchor" href="#_6-4-avl\u6811" aria-hidden="true">#</a> 6.4 AVL\u6811</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617165045803.png" alt="image-20220617165045803" style="float:left;"><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617165105005.png" alt="image-20220617165105005"></p><p>\`\u6BCF\u8BBF\u95EE\u4E00\u6B21\u8282\u70B9\u5C31\u9700\u8981\u8FDB\u884C\u4E00\u6B21\u78C1\u76D8 I/O \u64CD\u4F5C\uFF0C\u5BF9\u4E8E\u4E0A\u9762\u7684\u6811\u6765\u8BF4\uFF0C\u6211\u4EEC\u9700\u8981\u8FDB\u884C 5\u6B21 I/O \u64CD\u4F5C\u3002\u867D\u7136\u5E73\u8861\u4E8C\u53C9\u6811\u7684\u6548\u7387\u9AD8\uFF0C\u4F46\u662F\u6811\u7684\u6DF1\u5EA6\u4E5F\u540C\u6837\u9AD8\uFF0C\u8FD9\u5C31\u610F\u5473\u7740\u78C1\u76D8 I/O \u64CD\u4F5C\u6B21\u6570\u591A\uFF0C\u4F1A\u5F71\u54CD\u6574\u4F53\u6570\u636E\u67E5\u8BE2\u7684\u6548\u7387\u3002</p><p>\u9488\u5BF9\u540C\u6837\u7684\u6570\u636E\uFF0C\u5982\u679C\u6211\u4EEC\u628A\u4E8C\u53C9\u6811\u6539\u6210 M \u53C9\u6811 \uFF08M&gt;2\uFF09\u5462\uFF1F\u5F53 M=3 \u65F6\uFF0C\u540C\u6837\u7684 31 \u4E2A\u8282\u70B9\u53EF\u4EE5\u7531\u4E0B\u9762 \u7684\u4E09\u53C9\u6811\u6765\u8FDB\u884C\u5B58\u50A8\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617165124685.png" alt="image-20220617165124685"></p><p>\u4F60\u80FD\u770B\u5230\u6B64\u65F6\u6811\u7684\u9AD8\u5EA6\u964D\u4F4E\u4E86\uFF0C\u5F53\u6570\u636E\u91CF N \u5927\u7684\u65F6\u5019\uFF0C\u4EE5\u53CA\u6811\u7684\u5206\u53C9\u6811 M \u5927\u7684\u65F6\u5019\uFF0CM\u53C9\u6811\u7684\u9AD8\u5EA6\u4F1A\u8FDC\u5C0F\u4E8E\u4E8C\u53C9\u6811\u7684\u9AD8\u5EA6 (M &gt; 2)\u3002\u6240\u4EE5\uFF0C\u6211\u4EEC\u9700\u8981\u628A \`\u6811\u4ECE\u201C\u7626\u9AD8\u201D \u53D8 \u201C\u77EE\u80D6\u201D\u3002</p><h5 id="_6-5-b-tree" tabindex="-1"><a class="header-anchor" href="#_6-5-b-tree" aria-hidden="true">#</a> 6.5 B-Tree</h5><p>B \u6811\u7684\u82F1\u6587\u662F Balance Tree\uFF0C\u4E5F\u5C31\u662F <code>\u591A\u8DEF\u5E73\u8861\u67E5\u627E\u6811</code>\u3002\u7B80\u5199\u4E3A B-Tree\u3002\u5B83\u7684\u9AD8\u5EA6\u8FDC\u5C0F\u4E8E\u5E73\u8861\u4E8C\u53C9\u6811\u7684\u9AD8\u5EA6\u3002</p><p>B \u6811\u7684\u7ED3\u6784\u5982\u4E0B\u56FE\u6240\u793A\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617165937875.png" alt="image-20220617165937875"></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617170124200.png" alt="image-20220617170124200" style="float:left;"><p>\u4E00\u4E2A M \u9636\u7684 B \u6811\uFF08M&gt;2\uFF09\u6709\u4EE5\u4E0B\u7684\u7279\u6027\uFF1A</p><ol><li>\u6839\u8282\u70B9\u7684\u513F\u5B50\u6570\u7684\u8303\u56F4\u662F [2,M]\u3002</li><li>\u6BCF\u4E2A\u4E2D\u95F4\u8282\u70B9\u5305\u542B k-1 \u4E2A\u5173\u952E\u5B57\u548C k \u4E2A\u5B69\u5B50\uFF0C\u5B69\u5B50\u7684\u6570\u91CF = \u5173\u952E\u5B57\u7684\u6570\u91CF +1\uFF0Ck \u7684\u53D6\u503C\u8303\u56F4\u4E3A [ceil(M/2), M]\u3002</li><li>\u53F6\u5B50\u8282\u70B9\u5305\u62EC k-1 \u4E2A\u5173\u952E\u5B57\uFF08\u53F6\u5B50\u8282\u70B9\u6CA1\u6709\u5B69\u5B50\uFF09\uFF0Ck \u7684\u53D6\u503C\u8303\u56F4\u4E3A [ceil(M/2), M]\u3002</li><li>\u5047\u8BBE\u4E2D\u95F4\u8282\u70B9\u8282\u70B9\u7684\u5173\u952E\u5B57\u4E3A\uFF1AKey[1], Key[2], \u2026, Key[k-1]\uFF0C\u4E14\u5173\u952E\u5B57\u6309\u7167\u5347\u5E8F\u6392\u5E8F\uFF0C\u5373 Key[i]&lt;Key[i+1]\u3002\u6B64\u65F6 k-1 \u4E2A\u5173\u952E\u5B57\u76F8\u5F53\u4E8E\u5212\u5206\u4E86 k \u4E2A\u8303\u56F4\uFF0C\u4E5F\u5C31\u662F\u5BF9\u5E94\u7740 k \u4E2A\u6307\u9488\uFF0C\u5373\u4E3A\uFF1AP[1], P[2], \u2026, P[k]\uFF0C\u5176\u4E2D P[1] \u6307\u5411\u5173\u952E\u5B57\u5C0F\u4E8E Key[1] \u7684\u5B50\u6811\uFF0CP[i] \u6307\u5411\u5173\u952E\u5B57\u5C5E\u4E8E (Key[i-1], Key[i]) \u7684\u5B50\u6811\uFF0CP[k] \u6307\u5411\u5173\u952E\u5B57\u5927\u4E8E Key[k-1] \u7684\u5B50\u6811\u3002</li><li>\u6240\u6709\u53F6\u5B50\u8282\u70B9\u4F4D\u4E8E\u540C\u4E00\u5C42\u3002</li></ol><p>\u4E0A\u9762\u90A3\u5F20\u56FE\u6240\u8868\u793A\u7684 B \u6811\u5C31\u662F\u4E00\u68F5 3 \u9636\u7684 B \u6811\u3002\u6211\u4EEC\u53EF\u4EE5\u770B\u4E0B\u78C1\u76D8\u5757 2\uFF0C\u91CC\u9762\u7684\u5173\u952E\u5B57\u4E3A\uFF088\uFF0C12\uFF09\uFF0C\u5B83 \u6709 3 \u4E2A\u5B69\u5B50 (3\uFF0C5)\uFF0C(9\uFF0C10) \u548C (13\uFF0C15)\uFF0C\u4F60\u80FD\u770B\u5230 (3\uFF0C5) \u5C0F\u4E8E 8\uFF0C(9\uFF0C10) \u5728 8 \u548C 12 \u4E4B\u95F4\uFF0C\u800C (13\uFF0C15) \u5927\u4E8E 12\uFF0C\u521A\u597D\u7B26\u5408\u521A\u624D\u6211\u4EEC\u7ED9\u51FA\u7684\u7279\u5F81\u3002</p><p>\u7136\u540E\u6211\u4EEC\u6765\u770B\u4E0B\u5982\u4F55\u7528 B \u6811\u8FDB\u884C\u67E5\u627E\u3002\u5047\u8BBE\u6211\u4EEC\u60F3\u8981 \u67E5\u627E\u7684\u5173\u952E\u5B57\u662F 9 \uFF0C\u90A3\u4E48\u6B65\u9AA4\u53EF\u4EE5\u5206\u4E3A\u4EE5\u4E0B\u51E0\u6B65\uFF1A</p><ol><li>\u6211\u4EEC\u4E0E\u6839\u8282\u70B9\u7684\u5173\u952E\u5B57 (17\uFF0C35\uFF09\u8FDB\u884C\u6BD4\u8F83\uFF0C9 \u5C0F\u4E8E 17 \u90A3\u4E48\u5F97\u5230\u6307\u9488 P1\uFF1B</li><li>\u6309\u7167\u6307\u9488 P1 \u627E\u5230\u78C1\u76D8\u5757 2\uFF0C\u5173\u952E\u5B57\u4E3A\uFF088\uFF0C12\uFF09\uFF0C\u56E0\u4E3A 9 \u5728 8 \u548C 12 \u4E4B\u95F4\uFF0C\u6240\u4EE5\u6211\u4EEC\u5F97\u5230\u6307\u9488 P2\uFF1B</li><li>\u6309\u7167\u6307\u9488 P2 \u627E\u5230\u78C1\u76D8\u5757 6\uFF0C\u5173\u952E\u5B57\u4E3A\uFF089\uFF0C10\uFF09\uFF0C\u7136\u540E\u6211\u4EEC\u627E\u5230\u4E86\u5173\u952E\u5B57 9\u3002</li></ol><p>\u4F60\u80FD\u770B\u51FA\u6765\u5728 B \u6811\u7684\u641C\u7D22\u8FC7\u7A0B\u4E2D\uFF0C\u6211\u4EEC\u6BD4\u8F83\u7684\u6B21\u6570\u5E76\u4E0D\u5C11\uFF0C\u4F46\u5982\u679C\u628A\u6570\u636E\u8BFB\u53D6\u51FA\u6765\u7136\u540E\u5728\u5185\u5B58\u4E2D\u8FDB\u884C\u6BD4 \u8F83\uFF0C\u8FD9\u4E2A\u65F6\u95F4\u5C31\u662F\u53EF\u4EE5\u5FFD\u7565\u4E0D\u8BA1\u7684\u3002\u800C\u8BFB\u53D6\u78C1\u76D8\u5757\u672C\u8EAB\u9700\u8981\u8FDB\u884C I/O \u64CD\u4F5C\uFF0C\u6D88\u8017\u7684\u65F6\u95F4\u6BD4\u5728\u5185\u5B58\u4E2D\u8FDB\u884C \u6BD4\u8F83\u6240\u9700\u8981\u7684\u65F6\u95F4\u8981\u591A\uFF0C\u662F\u6570\u636E\u67E5\u627E\u7528\u65F6\u7684\u91CD\u8981\u56E0\u7D20\u3002 B \u6811\u76F8\u6BD4\u4E8E\u5E73\u8861\u4E8C\u53C9\u6811\u6765\u8BF4\u78C1\u76D8 I/O \u64CD\u4F5C\u8981\u5C11 \uFF0C \u5728\u6570\u636E\u67E5\u8BE2\u4E2D\u6BD4\u5E73\u8861\u4E8C\u53C9\u6811\u6548\u7387\u8981\u9AD8\u3002\u6240\u4EE5 \u53EA\u8981\u6811\u7684\u9AD8\u5EA6\u8DB3\u591F\u4F4E\uFF0CIO\u6B21\u6570\u8DB3\u591F\u5C11\uFF0C\u5C31\u53EF\u4EE5\u63D0\u9AD8\u67E5\u8BE2\u6027\u80FD \u3002</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617170454023.png" alt="image-20220617170454023" style="float:left;"><p><strong>\u518D\u4E3E\u4F8B1\uFF1A</strong></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617170526488.png" alt="image-20220617170526488"></p><h5 id="_6-6-b-tree" tabindex="-1"><a class="header-anchor" href="#_6-6-b-tree" aria-hidden="true">#</a> 6.6 B+Tree</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617170628394.png" alt="image-20220617170628394" style="float:left;"><ul><li>MySQL\u5B98\u7F51\u8BF4\u660E\uFF1A</li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617170710329.png" alt="image-20220617170710329"></p><p><strong>B+ \u6811\u548C B \u6811\u7684\u5DEE\u5F02\u5728\u4E8E\u4EE5\u4E0B\u51E0\u70B9\uFF1A</strong></p><ol><li>\u6709 k \u4E2A\u5B69\u5B50\u7684\u8282\u70B9\u5C31\u6709 k \u4E2A\u5173\u952E\u5B57\u3002\u4E5F\u5C31\u662F<code>\u5B69\u5B50\u6570\u91CF = \u5173\u952E\u5B57\u6570</code>\uFF0C\u800C B \u6811\u4E2D\uFF0C<code>\u5B69\u5B50\u6570\u91CF = \u5173\u952E\u5B57\u6570 +1</code>\u3002</li><li><code>\u975E\u53F6\u5B50\u8282\u70B9\u7684\u5173\u952E\u5B57\u4E5F\u4F1A\u540C\u65F6\u5B58\u5728\u5728\u5B50\u8282\u70B9\u4E2D</code>\uFF0C\u5E76\u4E14\u662F\u5728\u5B50\u8282\u70B9\u4E2D\u6240\u6709\u5173\u952E\u5B57\u7684\u6700\u5927\uFF08\u6216\u6700 \u5C0F\uFF09\u3002</li><li><code>\u975E\u53F6\u5B50\u8282\u70B9\u4EC5\u7528\u4E8E\u7D22\u5F15\uFF0C\u4E0D\u4FDD\u5B58\u6570\u636E\u8BB0\u5F55</code>\uFF0C\u8DDF\u8BB0\u5F55\u6709\u5173\u7684\u4FE1\u606F\u90FD\u653E\u5728\u53F6\u5B50\u8282\u70B9\u4E2D\u3002\u800C B \u6811\u4E2D\uFF0C <code>\u975E \u53F6\u5B50\u8282\u70B9\u65E2\u4FDD\u5B58\u7D22\u5F15\uFF0C\u4E5F\u4FDD\u5B58\u6570\u636E\u8BB0\u5F55</code> \u3002</li><li>\u6240\u6709\u5173\u952E\u5B57\u90FD\u5728\u53F6\u5B50\u8282\u70B9\u51FA\u73B0\uFF0C\u53F6\u5B50\u8282\u70B9\u6784\u6210\u4E00\u4E2A\u6709\u5E8F\u94FE\u8868\uFF0C\u800C\u4E14\u53F6\u5B50\u8282\u70B9\u672C\u8EAB\u6309\u7167\u5173\u952E\u5B57\u7684\u5927\u5C0F <code>\u4ECE\u5C0F\u5230\u5927</code> \u987A\u5E8F\u94FE\u63A5\u3002</li></ol><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617171011102.png" alt="image-20220617171011102" style="float:left;"><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617171106671.png" alt="image-20220617171106671"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617171131747.png" alt="image-20220617171131747"></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617171331282.png" alt="image-20220617171331282" style="float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617171434206.png" alt="image-20220617171434206" style="float:left;"><blockquote><p>B \u6811\u548C B+ \u6811\u90FD\u53EF\u4EE5\u4F5C\u4E3A\u7D22\u5F15\u7684\u6570\u636E\u7ED3\u6784\uFF0C\u5728 MySQL \u4E2D\u91C7\u7528\u7684\u662F B+ \u6811\u3002 \u4F46B\u6811\u548CB+\u6811\u5404\u6709\u81EA\u5DF1\u7684\u5E94\u7528\u573A\u666F\uFF0C\u4E0D\u80FD\u8BF4B+\u6811\u5B8C\u5168\u6BD4B\u6811\u597D\uFF0C\u53CD\u4E4B\u4EA6\u7136\u3002</p></blockquote><p><strong>\u601D\u8003\u9898\uFF1A\u4E3A\u4E86\u51CF\u5C11IO\uFF0C\u7D22\u5F15\u6811\u4F1A\u4E00\u6B21\u6027\u52A0\u8F7D\u5417\uFF1F</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617171614460.png" alt="image-20220617171614460" style="float:left;"><p><strong>\u601D\u8003\u9898\uFF1AB+\u6811\u7684\u5B58\u50A8\u80FD\u529B\u5982\u4F55\uFF1F\u4E3A\u4F55\u8BF4\u4E00\u822C\u67E5\u627E\u884C\u8BB0\u5F55\uFF0C\u6700\u591A\u53EA\u97001~3\u6B21\u78C1\u76D8IO</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617172426725.png" alt="image-20220617172426725" style="float:left;"><p><strong>\u601D\u8003\u9898\uFF1A\u4E3A\u4EC0\u4E48\u8BF4B+\u6811\u6BD4B-\u6811\u66F4\u9002\u5408\u5B9E\u9645\u5E94\u7528\u4E2D\u64CD\u4F5C\u7CFB\u7EDF\u7684\u6587\u4EF6\u7D22\u5F15\u548C\u6570\u636E\u5E93\u7D22\u5F15\uFF1F</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617175142810.png" alt="image-20220617175142810" style="float:left;"><p><strong>\u601D\u8003\u9898\uFF1AHash \u7D22\u5F15\u4E0E B+ \u6811\u7D22\u5F15\u7684\u533A\u522B</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617175230327.png" alt="image-20220617175230327" style="float:left;"><p><strong>\u601D\u8003\u9898\uFF1AHash \u7D22\u5F15\u4E0E B+ \u6811\u7D22\u5F15\u662F\u5728\u5EFA\u7D22\u5F15\u7684\u65F6\u5019\u624B\u52A8\u6307\u5B9A\u7684\u5417\uFF1F</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617175309115.png" alt="image-20220617175309115" style="float:left;"><h5 id="_6-7-r\u6811" tabindex="-1"><a class="header-anchor" href="#_6-7-r\u6811" aria-hidden="true">#</a> 6.7 R\u6811</h5><p>R-Tree\u5728MySQL\u5F88\u5C11\u4F7F\u7528\uFF0C\u4EC5\u652F\u6301 geometry\u6570\u636E\u7C7B\u578B \uFF0C\u652F\u6301\u8BE5\u7C7B\u578B\u7684\u5B58\u50A8\u5F15\u64CE\u53EA\u6709myisam\u3001bdb\u3001 innodb\u3001ndb\u3001archive\u51E0\u79CD\u3002\u4E3E\u4E2AR\u6811\u5728\u73B0\u5B9E\u9886\u57DF\u4E2D\u80FD\u591F\u89E3\u51B3\u7684\u4F8B\u5B50\uFF1A\u67E5\u627E20\u82F1\u91CC\u4EE5\u5185\u6240\u6709\u7684\u9910\u5385\u3002\u5982\u679C \u6CA1\u6709R\u6811\u4F60\u4F1A\u600E\u4E48\u89E3\u51B3\uFF1F\u4E00\u822C\u60C5\u51B5\u4E0B\u6211\u4EEC\u4F1A\u628A\u9910\u5385\u7684\u5750\u6807(x,y)\u5206\u4E3A\u4E24\u4E2A\u5B57\u6BB5\u5B58\u653E\u5728\u6570\u636E\u5E93\u4E2D\uFF0C\u4E00\u4E2A\u5B57\u6BB5\u8BB0 \u5F55\u7ECF\u5EA6\uFF0C\u53E6\u4E00\u4E2A\u5B57\u6BB5\u8BB0\u5F55\u7EAC\u5EA6\u3002\u8FD9\u6837\u7684\u8BDD\u6211\u4EEC\u5C31\u9700\u8981\u904D\u5386\u6240\u6709\u7684\u9910\u5385\u83B7\u53D6\u5176\u4F4D\u7F6E\u4FE1\u606F\uFF0C\u7136\u540E\u8BA1\u7B97\u662F\u5426\u6EE1 \u8DB3\u8981\u6C42\u3002\u5982\u679C\u4E00\u4E2A\u5730\u533A\u6709100\u5BB6\u9910\u5385\u7684\u8BDD\uFF0C\u6211\u4EEC\u5C31\u8981\u8FDB\u884C100\u6B21\u4F4D\u7F6E\u8BA1\u7B97\u64CD\u4F5C\u4E86\uFF0C\u5982\u679C\u5E94\u7528\u5230\u8C37\u6B4C\u3001\u767E\u5EA6 \u5730\u56FE\u8FD9\u79CD\u8D85\u5927\u6570\u636E\u5E93\u4E2D\uFF0C\u8FD9\u79CD\u65B9\u6CD5\u4FBF\u5FC5\u5B9A\u4E0D\u53EF\u884C\u4E86\u3002R\u6811\u5C31\u5F88\u597D\u7684 \u89E3\u51B3\u4E86\u8FD9\u79CD\u9AD8\u7EF4\u7A7A\u95F4\u641C\u7D22\u95EE\u9898 \u3002\u5B83\u628AB \u6811\u7684\u601D\u60F3\u5F88\u597D\u7684\u6269\u5C55\u5230\u4E86\u591A\u7EF4\u7A7A\u95F4\uFF0C\u91C7\u7528\u4E86B\u6811\u5206\u5272\u7A7A\u95F4\u7684\u601D\u60F3\uFF0C\u5E76\u5728\u6DFB\u52A0\u3001\u5220\u9664\u64CD\u4F5C\u65F6\u91C7\u7528\u5408\u5E76\u3001\u5206\u89E3 \u7ED3\u70B9\u7684\u65B9\u6CD5\uFF0C\u4FDD\u8BC1\u6811\u7684\u5E73\u8861\u6027\u3002\u56E0\u6B64\uFF0CR\u6811\u5C31\u662F\u4E00\u68F5\u7528\u6765 \u5B58\u50A8\u9AD8\u7EF4\u6570\u636E\u7684\u5E73\u8861\u6811 \u3002\u76F8\u5BF9\u4E8EB-Tree\uFF0CR-Tree \u7684\u4F18\u52BF\u5728\u4E8E\u8303\u56F4\u67E5\u627E\u3002</p><table><thead><tr><th>\u7D22\u5F15 / \u5B58\u50A8\u5F15\u64CE</th><th>MyISAM</th><th>InnoDB</th><th>Memory</th></tr></thead><tbody><tr><td>R-Tree\u7D22\u5F15</td><td>\u652F\u6301</td><td>\u652F\u6301</td><td>\u4E0D\u652F\u6301</td></tr></tbody></table><h5 id="_6-8-\u5C0F\u7ED3" tabindex="-1"><a class="header-anchor" href="#_6-8-\u5C0F\u7ED3" aria-hidden="true">#</a> 6.8 \u5C0F\u7ED3</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617175440527.png" alt="image-20220617175440527" style="float:left;"><h5 id="\u9644\u5F55-\u7B97\u6CD5\u7684\u65F6\u95F4\u590D\u6742\u5EA6" tabindex="-1"><a class="header-anchor" href="#\u9644\u5F55-\u7B97\u6CD5\u7684\u65F6\u95F4\u590D\u6742\u5EA6" aria-hidden="true">#</a> \u9644\u5F55\uFF1A\u7B97\u6CD5\u7684\u65F6\u95F4\u590D\u6742\u5EA6</h5><p>\u540C\u4E00\u95EE\u9898\u53EF\u7528\u4E0D\u540C\u7B97\u6CD5\u89E3\u51B3\uFF0C\u800C\u4E00\u4E2A\u7B97\u6CD5\u7684\u8D28\u91CF\u4F18\u52A3\u5C06\u5F71\u54CD\u5230\u7B97\u6CD5\u4E43\u81F3\u7A0B\u5E8F\u7684\u6548\u7387\u3002\u7B97\u6CD5\u5206\u6790\u7684\u76EE\u7684\u5728 \u4E8E\u9009\u62E9\u5408\u9002\u7B97\u6CD5\u548C\u6539\u8FDB\u7B97\u6CD5\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617175516191.png" alt="image-20220617175516191"></p><h2 id="\u7B2C7\u7AE0-innodb\u6570\u636E\u5B58\u50A8\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#\u7B2C7\u7AE0-innodb\u6570\u636E\u5B58\u50A8\u7ED3\u6784" aria-hidden="true">#</a> \u7B2C7\u7AE0_InnoDB\u6570\u636E\u5B58\u50A8\u7ED3\u6784</h2><h3 id="_1-\u6570\u636E\u5E93\u7684\u5B58\u50A8\u7ED3\u6784-\u9875" tabindex="-1"><a class="header-anchor" href="#_1-\u6570\u636E\u5E93\u7684\u5B58\u50A8\u7ED3\u6784-\u9875" aria-hidden="true">#</a> 1. \u6570\u636E\u5E93\u7684\u5B58\u50A8\u7ED3\u6784\uFF1A\u9875</h3><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617175755324.png" alt="image-20220617175755324" style="float:left;"><h5 id="_1-1-\u78C1\u76D8\u4E0E\u5185\u5B58\u4EA4\u4E92\u57FA\u672C\u5355\u4F4D-\u9875" tabindex="-1"><a class="header-anchor" href="#_1-1-\u78C1\u76D8\u4E0E\u5185\u5B58\u4EA4\u4E92\u57FA\u672C\u5355\u4F4D-\u9875" aria-hidden="true">#</a> 1.1 \u78C1\u76D8\u4E0E\u5185\u5B58\u4EA4\u4E92\u57FA\u672C\u5355\u4F4D\uFF1A\u9875</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617193033971.png" alt="image-20220617193033971" style="float:left;"><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617193939742.png" alt="image-20220617193939742"></p><h5 id="_1-2-\u9875\u7ED3\u6784\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_1-2-\u9875\u7ED3\u6784\u6982\u8FF0" aria-hidden="true">#</a> 1.2 \u9875\u7ED3\u6784\u6982\u8FF0</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617193218557.png" alt="image-20220617193218557" style="float:left;"><h5 id="_1-3-\u9875\u7684\u5927\u5C0F" tabindex="-1"><a class="header-anchor" href="#_1-3-\u9875\u7684\u5927\u5C0F" aria-hidden="true">#</a> 1.3 \u9875\u7684\u5927\u5C0F</h5><p>\u4E0D\u540C\u7684\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF\uFF08\u7B80\u79F0DBMS\uFF09\u7684\u9875\u5927\u5C0F\u4E0D\u540C\u3002\u6BD4\u5982\u5728 MySQL \u7684 InnoDB \u5B58\u50A8\u5F15\u64CE\u4E2D\uFF0C\u9ED8\u8BA4\u9875\u7684\u5927\u5C0F\u662F <code>16KB</code>\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u4E0B\u9762\u7684\u547D\u4EE4\u6765\u8FDB\u884C\u67E5\u770B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>show variables like &#39;%innodb_page_size%&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>SQL Server \u4E2D\u9875\u7684\u5927\u5C0F\u4E3A <code>8KB</code>\uFF0C\u800C\u5728 Oracle \u4E2D\u6211\u4EEC\u7528\u672F\u8BED &quot;<code>\u5757</code>&quot; \uFF08Block\uFF09\u6765\u8868\u793A &quot;\u9875&quot;\uFF0COracle \u652F\u6301\u7684\u5FEB\u5927\u5C0F\u4E3A2KB, 4KB, 8KB, 16KB, 32KB \u548C 64KB\u3002</p><h5 id="_1-4-\u9875\u7684\u4E0A\u5C42\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_1-4-\u9875\u7684\u4E0A\u5C42\u7ED3\u6784" aria-hidden="true">#</a> 1.4 \u9875\u7684\u4E0A\u5C42\u7ED3\u6784</h5><p>\u53E6\u5916\u5728\u6570\u636E\u5E93\u4E2D\uFF0C\u8FD8\u5B58\u5728\u7740\u533A\uFF08Extent\uFF09\u3001\u6BB5\uFF08Segment\uFF09\u548C\u8868\u7A7A\u95F4\uFF08Tablespace\uFF09\u7684\u6982\u5FF5\u3002\u884C\u3001\u9875\u3001\u533A\u3001\u6BB5\u3001\u8868\u7A7A\u95F4\u7684\u5173\u7CFB\u5982\u4E0B\u56FE\u6240\u793A\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617194256988.png" alt="image-20220617194256988"></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617194529699.png" alt="image-20220617194529699" style="float:left;"><h3 id="_2-\u9875\u7684\u5185\u90E8\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_2-\u9875\u7684\u5185\u90E8\u7ED3\u6784" aria-hidden="true">#</a> 2. \u9875\u7684\u5185\u90E8\u7ED3\u6784</h3><p>\u9875\u5982\u679C\u6309\u7C7B\u578B\u5212\u5206\u7684\u8BDD\uFF0C\u5E38\u89C1\u7684\u6709 <code>\u6570\u636E\u9875\uFF08\u4FDD\u5B58B+\u6811\u8282\u70B9\uFF09\u3001\u7CFB\u7EDF\u8868\u3001Undo \u9875 \u548C \u4E8B\u7269\u6570\u636E\u9875</code> \u7B49\u3002\u6570\u636E\u9875\u662F\u6211\u4EEC\u6700\u5E38\u4F7F\u7528\u7684\u9875\u3002</p><p>\u6570\u636E\u9875\u7684 <code>16KB</code> \u5927\u5C0F\u7684\u5B58\u50A8\u7A7A\u95F4\u88AB\u5212\u5206\u4E3A\u4E03\u4E2A\u90E8\u5206\uFF0C\u5206\u522B\u662F\u6587\u4EF6\u5934\uFF08File Header\uFF09\u3001\u9875\u5934\uFF08Page Header\uFF09\u3001\u6700\u5927\u6700\u5C0F\u8BB0\u5F55\uFF08Infimum + supremum\uFF09\u3001\u7528\u6237\u8BB0\u5F55\uFF08User Records\uFF09\u3001\u7A7A\u95F2\u7A7A\u95F4\uFF08Free Space\uFF09\u3001\u9875\u76EE\u5F55\uFF08Page Directory\uFF09\u548C\u6587\u4EF6\u5C3E\uFF08File Tailer\uFF09\u3002</p><p>\u9875\u7ED3\u6784\u7684\u793A\u610F\u56FE\u5982\u4E0B\u6240\u793A\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617195012446.png" alt="image-20220617195012446"></p><p>\u5982\u4E0B\u8868\u6240\u793A\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220617195148164.png" alt="image-20220617195148164"></p><p>\u6211\u4EEC\u53EF\u4EE5\u628A\u8FD97\u4E2A\u7ED3\u6784\u5206\u4E3A3\u4E2A\u90E8\u5206\u3002</p><h5 id="\u7B2C\u4E00\u90E8\u5206-file-header-\u6587\u4EF6\u5934\u90E8-\u548C-file-trailer-\u6587\u4EF6\u5C3E\u90E8" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u4E00\u90E8\u5206-file-header-\u6587\u4EF6\u5934\u90E8-\u548C-file-trailer-\u6587\u4EF6\u5C3E\u90E8" aria-hidden="true">#</a> \u7B2C\u4E00\u90E8\u5206\uFF1AFile Header (\u6587\u4EF6\u5934\u90E8) \u548C File Trailer (\u6587\u4EF6\u5C3E\u90E8)</h5><p>\u89C1\u6587\u4EF6InnoDB\u6570\u636E\u5E93\u5B58\u50A8\u7ED3\u6784.mmap</p><h5 id="\u7B2C\u4E8C\u90E8\u5206-user-records-\u7528\u6237\u8BB0\u5F55-\u3001\u6700\u5927\u6700\u5C0F\u8BB0\u5F55\u3001free-space-\u7A7A\u95F2\u7A7A\u95F4" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u4E8C\u90E8\u5206-user-records-\u7528\u6237\u8BB0\u5F55-\u3001\u6700\u5927\u6700\u5C0F\u8BB0\u5F55\u3001free-space-\u7A7A\u95F2\u7A7A\u95F4" aria-hidden="true">#</a> \u7B2C\u4E8C\u90E8\u5206\uFF1AUser Records (\u7528\u6237\u8BB0\u5F55)\u3001\u6700\u5927\u6700\u5C0F\u8BB0\u5F55\u3001Free Space (\u7A7A\u95F2\u7A7A\u95F4)</h5><p>\u89C1\u6587\u4EF6InnoDB\u6570\u636E\u5E93\u5B58\u50A8\u7ED3\u6784.mmap</p><h5 id="\u7B2C\u4E09\u90E8\u5206-page-directory-\u9875\u76EE\u5F55-\u548C-page-header-\u9875\u9762\u5934\u90E8" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u4E09\u90E8\u5206-page-directory-\u9875\u76EE\u5F55-\u548C-page-header-\u9875\u9762\u5934\u90E8" aria-hidden="true">#</a> \u7B2C\u4E09\u90E8\u5206\uFF1APage Directory (\u9875\u76EE\u5F55) \u548C Page Header (\u9875\u9762\u5934\u90E8)</h5><p>\u89C1\u6587\u4EF6InnoDB\u6570\u636E\u5E93\u5B58\u50A8\u7ED3\u6784.mmap</p><h5 id="_2-3-\u4ECE\u6570\u636E\u5E93\u9875\u7684\u89D2\u5EA6\u770Bb-\u6811\u5982\u4F55\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_2-3-\u4ECE\u6570\u636E\u5E93\u9875\u7684\u89D2\u5EA6\u770Bb-\u6811\u5982\u4F55\u67E5\u8BE2" aria-hidden="true">#</a> 2.3 \u4ECE\u6570\u636E\u5E93\u9875\u7684\u89D2\u5EA6\u770BB+\u6811\u5982\u4F55\u67E5\u8BE2</h5><p>\u4E00\u9897B+\u6811\u6309\u7167\u5B57\u8282\u7C7B\u578B\u53EF\u4EE5\u5206\u4E3A\u4E24\u90E8\u5206\uFF1A</p><ol><li>\u53F6\u5B50\u8282\u70B9\uFF0CB+ \u6811\u6700\u5E95\u5C42\u7684\u8282\u70B9\uFF0C\u8282\u70B9\u7684\u9AD8\u5EA6\u4E3A0\uFF0C\u5B58\u50A8\u884C\u8BB0\u5F55\u3002</li><li>\u975E\u53F6\u5B50\u8282\u70B9\uFF0C\u8282\u70B9\u7684\u9AD8\u5EA6\u5927\u4E8E0\uFF0C\u5B58\u50A8\u7D22\u5F15\u952E\u548C\u9875\u9762\u6307\u9488\uFF0C\u5E76\u4E0D\u5B58\u50A8\u884C\u8BB0\u5F55\u672C\u8EAB\u3002</li></ol><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220620221112635.png" alt="image-20220620221112635"></p><p>\u5F53\u6211\u4EEC\u4ECE\u9875\u7ED3\u6784\u6765\u7406\u89E3 B+ \u6811\u7684\u7ED3\u6784\u7684\u65F6\u5019\uFF0C\u53EF\u4EE5\u5E2E\u6211\u4EEC\u7406\u89E3\u4E00\u4E9B\u901A\u8FC7\u7D22\u5F15\u8FDB\u884C\u68C0\u7D22\u7684\u539F\u7406\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220620221242561.png" alt="image-20220620221242561" style="float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220620221442954.png" alt="image-20220620221442954" style="float:left;"><h3 id="_3-innodb\u884C\u683C\u5F0F-\u6216\u8BB0\u5F55\u683C\u5F0F" tabindex="-1"><a class="header-anchor" href="#_3-innodb\u884C\u683C\u5F0F-\u6216\u8BB0\u5F55\u683C\u5F0F" aria-hidden="true">#</a> 3. InnoDB\u884C\u683C\u5F0F (\u6216\u8BB0\u5F55\u683C\u5F0F)</h3><p>\u89C1\u6587\u4EF6InnoDB\u6570\u636E\u5E93\u5B58\u50A8\u7ED3\u6784.mmap</p><h3 id="_4-\u533A\u3001\u6BB5\u4E0E\u788E\u7247\u533A" tabindex="-1"><a class="header-anchor" href="#_4-\u533A\u3001\u6BB5\u4E0E\u788E\u7247\u533A" aria-hidden="true">#</a> 4. \u533A\u3001\u6BB5\u4E0E\u788E\u7247\u533A</h3><h5 id="_4-1-\u4E3A\u4EC0\u4E48\u8981\u6709\u533A" tabindex="-1"><a class="header-anchor" href="#_4-1-\u4E3A\u4EC0\u4E48\u8981\u6709\u533A" aria-hidden="true">#</a> 4.1 \u4E3A\u4EC0\u4E48\u8981\u6709\u533A\uFF1F</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621134226624.png" alt="image-20220621134226624" style="float:left;"><h5 id="_4-2-\u4E3A\u4EC0\u4E48\u8981\u6709\u6BB5" tabindex="-1"><a class="header-anchor" href="#_4-2-\u4E3A\u4EC0\u4E48\u8981\u6709\u6BB5" aria-hidden="true">#</a> 4.2 \u4E3A\u4EC0\u4E48\u8981\u6709\u6BB5\uFF1F</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621140802887.png" alt="image-20220621140802887" style="float:left;"><h5 id="_4-3-\u4E3A\u4EC0\u4E48\u8981\u6709\u788E\u7247\u533A" tabindex="-1"><a class="header-anchor" href="#_4-3-\u4E3A\u4EC0\u4E48\u8981\u6709\u788E\u7247\u533A" aria-hidden="true">#</a> 4.3 \u4E3A\u4EC0\u4E48\u8981\u6709\u788E\u7247\u533A\uFF1F</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621141225223.png" alt="image-20220621141225223" style="float:left;"><h5 id="_4-4-\u533A\u7684\u5206\u7C7B" tabindex="-1"><a class="header-anchor" href="#_4-4-\u533A\u7684\u5206\u7C7B" aria-hidden="true">#</a> 4.4 \u533A\u7684\u5206\u7C7B</h5><p>\u533A\u5927\u4F53\u4E0A\u53EF\u4EE5\u5206\u4E3A4\u79CD\u7C7B\u578B\uFF1A</p><ul><li>\u7A7A\u95F2\u7684\u533A (FREE) : \u73B0\u5728\u8FD8\u6CA1\u6709\u7528\u5230\u8FD9\u4E2A\u533A\u4E2D\u7684\u4EFB\u4F55\u9875\u9762\u3002</li><li>\u6709\u5269\u4F59\u7A7A\u95F4\u7684\u788E\u7247\u533A (FREE_FRAG)\uFF1A\u8868\u793A\u788E\u7247\u533A\u4E2D\u8FD8\u6709\u53EF\u7528\u7684\u9875\u9762\u3002</li><li>\u6CA1\u6709\u5269\u4F59\u7A7A\u95F4\u7684\u788E\u7247\u533A (FULL_FRAG)\uFF1A\u8868\u793A\u788E\u7247\u533A\u4E2D\u7684\u6240\u6709\u9875\u9762\u90FD\u88AB\u4F7F\u7528\uFF0C\u6CA1\u6709\u7A7A\u95F2\u9875\u9762\u3002</li><li>\u9644\u5C5E\u4E8E\u67D0\u4E2A\u6BB5\u7684\u533A (FSEG)\uFF1A\u6BCF\u4E00\u4E2A\u7D22\u5F15\u90FD\u53EF\u4EE5\u5206\u4E3A\u53F6\u5B50\u8282\u70B9\u6BB5\u548C\u975E\u53F6\u5B50\u8282\u70B9\u6BB5\u3002</li></ul><p>\u5904\u4E8EFREE\u3001FREE_FRAG \u4EE5\u53CA FULL_FRAG \u8FD9\u4E09\u79CD\u72B6\u6001\u7684\u533A\u90FD\u662F\u72EC\u7ACB\u7684\uFF0C\u76F4\u5C5E\u4E8E\u8868\u7A7A\u95F4\u3002\u800C\u5904\u4E8E FSEG \u72B6\u6001\u7684\u533A\u662F\u9644\u5C5E\u4E8E\u67D0\u4E2A\u6BB5\u7684\u3002</p><blockquote><p>\u5982\u679C\u628A\u8868\u7A7A\u95F4\u6BD4\u4F5C\u662F\u4E00\u4E2A\u96C6\u56E2\u519B\uFF0C\u6BB5\u5C31\u76F8\u5F53\u4E8E\u5E08\uFF0C\u533A\u5C31\u76F8\u5F53\u4E8E\u56E2\u3002\u4E00\u822C\u7684\u56E2\u90FD\u662F\u96B6\u5C5E\u4E8E\u67D0\u4E2A\u5E08\u7684\uFF0C\u5C31\u50CF\u662F\u5904\u4E8E FSEG \u7684\u533A\u5168\u90E8\u96B6\u5C5E\u4E8E\u67D0\u4E2A\u6BB5\uFF0C\u800C\u5904\u4E8E FREE\u3001FREE_FRAG \u4EE5\u53CA FULL_FRAG \u8FD9\u4E09\u79CD\u72B6\u6001\u7684\u533A\u5374\u76F4\u63A5\u96B6\u5C5E\u4E8E\u8868\u7A7A\u95F4\uFF0C\u5C31\u50CF\u72EC\u7ACB\u56E2\u76F4\u63A5\u542C\u547D\u4E8E\u519B\u90E8\u4E00\u6837\u3002</p></blockquote><h3 id="_5-\u8868\u7A7A\u95F4" tabindex="-1"><a class="header-anchor" href="#_5-\u8868\u7A7A\u95F4" aria-hidden="true">#</a> 5. \u8868\u7A7A\u95F4</h3><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621142910222.png" alt="image-20220621142910222" style="float:left;"><h5 id="_5-1-\u72EC\u7ACB\u8868\u7A7A\u95F4" tabindex="-1"><a class="header-anchor" href="#_5-1-\u72EC\u7ACB\u8868\u7A7A\u95F4" aria-hidden="true">#</a> 5.1 \u72EC\u7ACB\u8868\u7A7A\u95F4</h5><p>\u72EC\u7ACB\u8868\u7A7A\u95F4\uFF0C\u5373\u6BCF\u5F20\u8868\u6709\u4E00\u4E2A\u72EC\u7ACB\u7684\u8868\u7A7A\u95F4\uFF0C\u4E5F\u5C31\u662F\u6570\u636E\u548C\u7D22\u5F15\u4FE1\u606F\u90FD\u4F1A\u4FDD\u5B58\u5728\u81EA\u5DF1\u7684\u8868\u7A7A\u95F4\u4E2D\u3002\u72EC\u7ACB\u7684\u8868\u7A7A\u95F4 (\u5373\uFF1A\u5355\u8868) \u53EF\u4EE5\u5728\u4E0D\u540C\u7684\u6570\u636E\u5E93\u4E4B\u95F4\u8FDB\u884C <code>\u8FC1\u79FB</code>\u3002</p><p>\u7A7A\u95F4\u53EF\u4EE5\u56DE\u6536 (DROP TABLE \u64CD\u4F5C\u53EF\u81EA\u52A8\u56DE\u6536\u8868\u7A7A\u95F4\uFF1B\u5176\u4ED6\u60C5\u51B5\uFF0C\u8868\u7A7A\u95F4\u4E0D\u80FD\u81EA\u5DF1\u56DE\u6536) \u3002\u5982\u679C\u5BF9\u4E8E\u7EDF\u8BA1\u5206\u6790\u6216\u662F\u65E5\u5FD7\u8868\uFF0C\u5220\u9664\u5927\u91CF\u6570\u636E\u540E\u53EF\u4EE5\u901A\u8FC7\uFF1Aalter table TableName engine=innodb; \u56DE\u6536\u4E0D\u7528\u7684\u7A7A\u95F4\u3002\u5BF9\u4E8E\u4F7F\u7528\u72EC\u7ACB\u8868\u7A7A\u95F4\u7684\u8868\uFF0C\u4E0D\u7BA1\u600E\u4E48\u5220\u9664\uFF0C\u8868\u7A7A\u95F4\u7684\u788E\u7247\u4E0D\u4F1A\u592A\u4E25\u91CD\u7684\u5F71\u54CD\u6027\u80FD\uFF0C\u800C\u4E14\u8FD8\u6709\u673A\u4F1A\u5904\u7406\u3002</p><p><strong>\u72EC\u7ACB\u8868\u7A7A\u95F4\u7ED3\u6784</strong></p><p>\u72EC\u7ACB\u8868\u7A7A\u95F4\u7531\u6BB5\u3001\u533A\u3001\u9875\u7EC4\u6210\u3002</p><p><strong>\u771F\u5B9E\u8868\u7A7A\u95F4\u5BF9\u5E94\u7684\u6587\u4EF6\u5927\u5C0F</strong></p><p>\u6211\u4EEC\u5230\u6570\u636E\u76EE\u5F55\u91CC\u770B\uFF0C\u4F1A\u53D1\u73B0\u4E00\u4E2A\u65B0\u5EFA\u7684\u8868\u5BF9\u5E94\u7684 .ibd \u6587\u4EF6\u53EA\u5360\u7528\u4E86 96K\uFF0C\u624D6\u4E2A\u9875\u9762\u5927\u5C0F (MySQL5.7\u4E2D)\uFF0C\u8FD9\u662F\u56E0\u4E3A\u4E00\u5F00\u59CB\u8868\u7A7A\u95F4\u5360\u7528\u7684\u7A7A\u95F4\u5F88\u5C0F\uFF0C\u56E0\u4E3A\u8868\u91CC\u8FB9\u90FD\u6CA1\u6709\u6570\u636E\u3002\u4E0D\u8FC7\u522B\u5FD8\u4E86\u8FD9\u4E9B .ibd \u6587\u4EF6\u662F\u81EA\u6269\u5C55\u7684\uFF0C\u968F\u7740\u8868\u4E2D\u6570\u636E\u7684\u589E\u591A\uFF0C\u8868\u7A7A\u95F4\u5BF9\u5E94\u7684\u6587\u4EF6\u4E5F\u9010\u6E10\u589E\u5927\u3002</p><p><strong>\u67E5\u770B InnoDB \u7684\u8868\u7A7A\u95F4\u7C7B\u578B\uFF1A</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>show variables like &#39;innodb_file_per_table&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4F60\u80FD\u770B\u5230 innodb_file_per_table=ON, \u8FD9\u5C31\u610F\u5473\u7740\u6BCF\u5F20\u8868\u90FD\u4F1A\u5355\u8BCD\u4FDD\u5B58\u4E00\u4E2A .ibd \u6587\u4EF6\u3002</p><h5 id="_5-2-\u7CFB\u7EDF\u8868\u7A7A\u95F4" tabindex="-1"><a class="header-anchor" href="#_5-2-\u7CFB\u7EDF\u8868\u7A7A\u95F4" aria-hidden="true">#</a> 5.2 \u7CFB\u7EDF\u8868\u7A7A\u95F4</h5><p>\u7CFB\u7EDF\u8868\u7A7A\u95F4\u7684\u7ED3\u6784\u548C\u72EC\u7ACB\u8868\u7A7A\u95F4\u57FA\u672C\u7C7B\u4F3C\uFF0C\u53EA\u4E0D\u8FC7\u7531\u4E8E\u6574\u4E2AMySQL\u8FDB\u7A0B\u53EA\u6709\u4E00\u4E2A\u7CFB\u7EDF\u8868\u7A7A\u95F4\uFF0C\u5728\u7CFB\u7EDF\u8868\u7A7A\u95F4\u4E2D\u4F1A\u989D\u5916\u8BB0\u5F55\u4E00\u4E9B\u6709\u5173\u6574\u4E2A\u7CFB\u7EDF\u4FE1\u606F\u7684\u9875\u9762\uFF0C\u8FD9\u90E8\u5206\u662F\u72EC\u7ACB\u8868\u7A7A\u95F4\u4E2D\u6CA1\u6709\u7684\u3002</p><p><strong>InnoDB\u6570\u636E\u5B57\u5178</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621150648770.png" alt="image-20220621150648770" style="float:left;"><p>\u5220\u9664\u8FD9\u4E9B\u6570\u636E\u5E76\u4E0D\u662F\u6211\u4EEC\u4F7F\u7528 INSERT \u8BED\u53E5\u63D2\u5165\u7684\u7528\u6237\u6570\u636E\uFF0C\u5B9E\u9645\u4E0A\u662F\u4E3A\u4E86\u66F4\u597D\u7684\u7BA1\u7406\u6211\u4EEC\u8FD9\u4E9B\u7528\u6237\u6570\u636E\u800C\u4E0D\u5F97\u4EE5\u5F15\u5165\u7684\u4E00\u4E9B\u989D\u5916\u6570\u636E\uFF0C\u8FD9\u4E9B\u6570\u636E\u9875\u79F0\u4E3A \u5143\u6570\u636E\u3002InnoDB \u5B58\u50A8\u5F15\u64CE\u7279\u610F\u5B9A\u4E49\u4E86\u4E00\u4E9B\u5217\u7684 \u5185\u90E8\u7CFB\u7EDF\u8868 (internal system table) \u6765\u8BB0\u5F55\u8FD9\u4E9B\u5143\u6570\u636E\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621150924922.png" alt="image-20220621150924922" style="float:left;"><p>\u8FD9\u4E9B\u7CFB\u7EDF\u8868\u4E5F\u79F0\u4E3A <code>\u6570\u636E\u5B57\u5178</code>\uFF0C\u5B83\u4EEC\u90FD\u662F\u4EE5 B+ \u6811\u7684\u5F62\u5F0F\u4FDD\u5B58\u5728\u7CFB\u7EDF\u8868\u7A7A\u95F4\u7684\u67D0\u4E2A\u9875\u9762\u4E2D\u3002\u5176\u4E2D <code>SYS_TABLES\u3001SYS_COLUMNS\u3001SYS_INDEXES\u3001SYS_FIELDS</code> \u8FD9\u56DB\u4E2A\u8868\u5C24\u5176\u91CD\u8981\uFF0C\u79F0\u4E4B\u4E3A\u57FA\u672C\u7CFB\u7EDF\u8868 (basic system tables) \uFF0C\u6211\u4EEC\u5148\u770B\u770B\u8FD94\u4E2A\u8868\u7684\u7ED3\u6784\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621151139759.png" alt="image-20220621151139759" style="float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621151158361.png" alt="image-20220621151158361" style="float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621151215274.png" alt="image-20220621151215274" style="float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621151238157.png" alt="image-20220621151238157" style="float:left;"><p>\u6CE8\u610F\uFF1A\u7528\u6237\u4E0D\u80FD\u76F4\u63A5\u8BBF\u95EE InnoDB \u7684\u8FD9\u4E9B\u5185\u90E8\u7CFB\u7EDF\u8868\uFF0C\u9664\u975E\u4F60\u76F4\u63A5\u53BB\u89E3\u6790\u7CFB\u7EDF\u8868\u7A7A\u95F4\u5BF9\u5E94\u6587\u4EF6\u7CFB\u7EDF\u4E0A\u7684\u6587\u4EF6\u3002\u4E0D\u8FC7\u8003\u8651\u5230\u67E5\u770B\u8FD9\u4E9B\u8868\u7684\u5185\u5BB9\u53EF\u80FD\u6709\u52A9\u4E8E\u5927\u5BB6\u5206\u6790\u95EE\u9898\uFF0C\u6240\u4EE5\u5728\u7CFB\u7EDF\u6570\u636E\u5E93 <code>information_schema</code> \u4E2D\u63D0\u4F9B\u4E86\u4E00\u4E9B\u4EE5 <code>innodb_sys</code> \u5F00\u5934\u7684\u8868:</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>USE information_schema;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW TABLES LIKE &#39;innodb_sys%&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5728 <code>information_scheme</code> \u6570\u636E\u5E93\u4E2D\u7684\u8FD9\u4E9B\u4EE5 <code>INNODB_SYS</code> \u5F00\u5934\u7684\u8868\u5E76\u4E0D\u662F\u771F\u6B63\u7684\u5185\u90E8\u7CFB\u7EDF\u8868 (\u5185\u90E8\u7CFB\u7EDF\u8868\u5C31\u662F\u6211\u4EEC\u4E0A\u8FB9\u4EE5 <code>SYS</code> \u5F00\u5934\u7684\u90A3\u4E9B\u8868)\uFF0C\u800C\u662F\u5728\u5B58\u50A8\u5F15\u64CE\u542F\u52A8\u65F6\u8BFB\u53D6\u8FD9\u4E9B\u4EE5 <code>SYS</code> \u5F00\u5934\u7684\u7CFB\u7EDF\u8868\uFF0C\u7136\u540E\u586B\u5145\u5230\u8FD9\u4E9B\u4EE5 <code>INNODB_SYS</code> \u5F00\u5934\u7684\u8868\u4E2D\u3002\u4EE5 <code>INNODB_SYS</code> \u5F00\u5934\u7684\u8868\u548C\u4EE5 <code>SYS</code> \u5F00\u5934\u7684\u8868\u4E2D\u7684\u5B57\u6BB5\u5E76\u4E0D\u5B8C\u5168\u4E00\u6837\uFF0C\u4F46\u4EC5\u4F9B\u5927\u5BB6\u53C2\u8003\u5DF2\u7ECF\u8DB3\u77E3\u3002</p><h3 id="\u9644\u5F55-\u6570\u636E\u9875\u52A0\u8F7D\u7684\u4E09\u79CD\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u9644\u5F55-\u6570\u636E\u9875\u52A0\u8F7D\u7684\u4E09\u79CD\u65B9\u5F0F" aria-hidden="true">#</a> \u9644\u5F55\uFF1A\u6570\u636E\u9875\u52A0\u8F7D\u7684\u4E09\u79CD\u65B9\u5F0F</h3><p>InnoDB\u4ECE\u78C1\u76D8\u4E2D\u8BFB\u53D6\u6570\u636E <code>\u6700\u5C0F\u5355\u4F4D</code> \u662F\u6570\u636E\u9875\u3002\u800C\u4F60\u60F3\u5F97\u5230\u7684 id = xxx \u7684\u6570\u636E\uFF0C\u5C31\u662F\u8FD9\u4E2A\u6570\u636E\u9875\u4F17\u591A\u884C\u4E2D\u7684\u4E00\u884C\u3002</p><p>\u5BF9\u4E8EMySQL\u5B58\u653E\u7684\u6570\u636E\uFF0C\u903B\u8F91\u6982\u5FF5\u4E0A\u6211\u4EEC\u79F0\u4E4B\u4E3A\u8868\uFF0C\u5728\u78C1\u76D8\u7B49\u7269\u7406\u5C42\u9762\u800C\u8A00\u662F\u6309 <code>\u6570\u636E\u9875</code> \u5F62\u5F0F\u8FDB\u884C\u5B58\u653E\u7684\uFF0C\u5F53\u5176\u52A0\u8F7D\u5230 MySQL \u4E2D\u6211\u4EEC\u79F0\u4E4B\u4E3A <code>\u7F13\u5B58\u9875</code>\u3002</p><p>\u5982\u679C\u7F13\u51B2\u6C60\u6CA1\u6709\u8BE5\u9875\u6570\u636E\uFF0C\u90A3\u4E48\u7F13\u51B2\u6C60\u6709\u4EE5\u4E0B\u4E09\u79CD\u8BFB\u53D6\u6570\u636E\u7684\u65B9\u5F0F\uFF0C\u6BCF\u79CD\u65B9\u5F0F\u7684\u8BFB\u53D6\u901F\u7387\u662F\u4E0D\u540C\u7684\uFF1A</p><p><strong>1. \u5185\u5B58\u8BFB\u53D6</strong></p><p>\u5982\u679C\u8BE5\u6570\u636E\u5B58\u5728\u4E8E\u5185\u5B58\u4E2D\uFF0C\u57FA\u672C\u4E0A\u6267\u884C\u65F6\u95F4\u5728 1ms \u5DE6\u53F3\uFF0C\u6548\u7387\u8FD8\u662F\u5F88\u9AD8\u7684\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621135638283.png" alt="image-20220621135638283"></p><p><strong>2. \u968F\u673A\u8BFB\u53D6</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621135719847.png" alt="image-20220621135719847" style="float:left;"><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621135737422.png" alt="image-20220621135737422"></p><p><strong>3. \u987A\u5E8F\u8BFB\u53D6</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621135909197.png" alt="image-20220621135909197" style="float:left;"><h2 id="\u7B2C8\u7AE0-\u7D22\u5F15\u7684\u521B\u5EFA\u4E0E\u8BBE\u8BA1\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#\u7B2C8\u7AE0-\u7D22\u5F15\u7684\u521B\u5EFA\u4E0E\u8BBE\u8BA1\u539F\u5219" aria-hidden="true">#</a> \u7B2C8\u7AE0_\u7D22\u5F15\u7684\u521B\u5EFA\u4E0E\u8BBE\u8BA1\u539F\u5219</h2><h3 id="_1-\u7D22\u5F15\u7684\u58F0\u660E\u4E0E\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_1-\u7D22\u5F15\u7684\u58F0\u660E\u4E0E\u4F7F\u7528" aria-hidden="true">#</a> 1. \u7D22\u5F15\u7684\u58F0\u660E\u4E0E\u4F7F\u7528</h3><h5 id="_1-1-\u7D22\u5F15\u7684\u5206\u7C7B" tabindex="-1"><a class="header-anchor" href="#_1-1-\u7D22\u5F15\u7684\u5206\u7C7B" aria-hidden="true">#</a> 1.1 \u7D22\u5F15\u7684\u5206\u7C7B</h5><p>MySQL\u7684\u7D22\u5F15\u5305\u62EC\u666E\u901A\u7D22\u5F15\u3001\u552F\u4E00\u6027\u7D22\u5F15\u3001\u5168\u6587\u7D22\u5F15\u3001\u5355\u5217\u7D22\u5F15\u3001\u591A\u5217\u7D22\u5F15\u548C\u7A7A\u95F4\u7D22\u5F15\u7B49\u3002</p><p>\u4ECE <code>\u529F\u80FD\u903B\u8F91</code> \u4E0A\u8BF4\uFF0C\u7D22\u5F15\u4E3B\u8981\u6709 4 \u79CD\uFF0C\u5206\u522B\u662F<code>\u666E\u901A\u7D22\u5F15\u3001\u552F\u4E00\u7D22\u5F15\u3001\u4E3B\u952E\u7D22\u5F15\u3001\u5168\u6587\u7D22\u5F15</code>\u3002</p><p>\u6309\u7167 <code>\u7269\u7406\u5B9E\u73B0\u65B9\u5F0F</code> \uFF0C\u7D22\u5F15\u53EF\u4EE5\u5206\u4E3A 2 \u79CD\uFF1A<code>\u805A\u7C07\u7D22\u5F15\u548C\u975E\u805A\u7C07\u7D22\u5F15</code>\u3002</p><p>\u6309\u7167 <code>\u4F5C\u7528\u5B57\u6BB5\u4E2A\u6570</code> \u8FDB\u884C\u5212\u5206\uFF0C\u5206\u6210<code>\u5355\u5217\u7D22\u5F15\u548C\u8054\u5408\u7D22\u5F15</code>\u3002</p><p><strong>1. \u666E\u901A\u7D22\u5F15</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621202759576.png" alt="image-20220621202759576" style="float:left;"><p><strong>2. \u552F\u4E00\u6027\u7D22\u5F15</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621202850551.png" alt="image-20220621202850551" style="float:left;"><p><strong>3. \u4E3B\u952E\u7D22\u5F15</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621203302303.png" alt="image-20220621203302303" style="float:left;"><p><strong>4. \u5355\u5217\u7D22\u5F15</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621203333925.png" alt="image-20220621203333925" style="float:left;"><p><strong>5. \u591A\u5217 (\u7EC4\u5408\u3001\u8054\u5408) \u7D22\u5F15</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621203454424.png" alt="image-20220621203454424" style="float:left;"><p><strong>6. \u5168\u6587\u68C0\u7D22</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621203645789.png" alt="image-20220621203645789" style="float:left;"><p><strong>7. \u8865\u5145\uFF1A\u7A7A\u95F4\u7D22\u5F15</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220621203736098.png" alt="image-20220621203736098" style="float:left;"><p>**\u5C0F\u7ED3\uFF1A\u4E0D\u540C\u7684\u5B58\u50A8\u5F15\u64CE\u652F\u6301\u7684\u7D22\u5F15\u7C7B\u578B\u4E5F\u4E0D\u4E00\u6837 **</p><p>InnoDB \uFF1A\u652F\u6301 B-tree\u3001Full-text \u7B49\u7D22\u5F15\uFF0C\u4E0D\u652F\u6301 Hash \u7D22\u5F15\uFF1B</p><p>MyISAM \uFF1A \u652F\u6301 B-tree\u3001Full-text \u7B49\u7D22\u5F15\uFF0C\u4E0D\u652F\u6301 Hash \u7D22\u5F15\uFF1B</p><p>Memory \uFF1A\u652F\u6301 B-tree\u3001Hash \u7B49 \u7D22\u5F15\uFF0C\u4E0D\u652F\u6301 Full-text \u7D22\u5F15\uFF1B</p><p>NDB \uFF1A\u652F\u6301 Hash \u7D22\u5F15\uFF0C\u4E0D\u652F\u6301 B-tree\u3001Full-text \u7B49\u7D22\u5F15\uFF1B</p><p>Archive \uFF1A\u4E0D\u652F \u6301 B-tree\u3001Hash\u3001Full-text \u7B49\u7D22\u5F15\uFF1B</p><h5 id="_1-2-\u521B\u5EFA\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_1-2-\u521B\u5EFA\u7D22\u5F15" aria-hidden="true">#</a> 1.2 \u521B\u5EFA\u7D22\u5F15</h5><p>MySQL\u652F\u6301\u591A\u79CD\u65B9\u6CD5\u5728\u5355\u4E2A\u6216\u591A\u4E2A\u5217\u4E0A\u521B\u5EFA\u7D22\u5F15\uFF1A\u5728\u521B\u5EFA\u8868\u7684\u5B9A\u4E49\u8BED\u53E5 CREATE TABLE \u4E2D\u6307\u5B9A\u7D22\u5F15\u5217\uFF0C\u4F7F\u7528 ALTER TABLE \u8BED\u53E5\u5728\u5B58\u5728\u7684\u8868\u4E0A\u521B\u5EFA\u7D22\u5F15\uFF0C\u6216\u8005\u4F7F\u7528 CREATE INDEX \u8BED\u53E5\u5728\u5DF2\u5B58\u5728\u7684\u8868\u4E0A\u6DFB\u52A0\u7D22\u5F15\u3002</p><h6 id="_1-\u521B\u5EFA\u8868\u7684\u65F6\u5019\u521B\u5EFA\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_1-\u521B\u5EFA\u8868\u7684\u65F6\u5019\u521B\u5EFA\u7D22\u5F15" aria-hidden="true">#</a> 1. \u521B\u5EFA\u8868\u7684\u65F6\u5019\u521B\u5EFA\u7D22\u5F15</h6><p>\u4F7F\u7528CREATE TABLE\u521B\u5EFA\u8868\u65F6\uFF0C\u9664\u4E86\u53EF\u4EE5\u5B9A\u4E49\u5217\u7684\u6570\u636E\u7C7B\u578B\u5916\uFF0C\u8FD8\u53EF\u4EE5\u5B9A\u4E49\u4E3B\u952E\u7EA6\u675F\u3001\u5916\u952E\u7EA6\u675F\u6216\u8005\u552F\u4E00\u6027\u7EA6\u675F\uFF0C\u800C\u4E0D\u8BBA\u521B\u5EFA\u54EA\u79CD\u7EA6\u675F\uFF0C\u5728\u5B9A\u4E49\u7EA6\u675F\u7684\u540C\u65F6\u76F8\u5F53\u4E8E\u5728\u6307\u5B9A\u5217\u4E0A\u521B\u5EFA\u4E86\u4E00\u4E2A\u7D22\u5F15\u3002</p><p>\u4E3E\u4F8B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE dept(
dept_id INT PRIMARY KEY AUTO_INCREMENT,
dept_name VARCHAR(20)
);

CREATE TABLE emp(
emp_id INT PRIMARY KEY AUTO_INCREMENT,
emp_name VARCHAR(20) UNIQUE,
dept_id INT,
CONSTRAINT emp_dept_id_fk FOREIGN KEY(dept_id) REFERENCES dept(dept_id)
)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F46\u662F\uFF0C\u5982\u679C\u663E\u5F0F\u521B\u5EFA\u8868\u65F6\u521B\u5EFA\u7D22\u5F15\u7684\u8BDD\uFF0C\u57FA\u672C\u8BED\u6CD5\u683C\u5F0F\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE table_name [col_name data_type]
[UNIQUE | FULLTEXT | SPATIAL] [INDEX | KEY] [index_name] (col_name [length]) [ASC |
DESC]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>UNIQUE \u3001 FULLTEXT \u548C SPATIAL \u4E3A\u53EF\u9009\u53C2\u6570\uFF0C\u5206\u522B\u8868\u793A\u552F\u4E00\u7D22\u5F15\u3001\u5168\u6587\u7D22\u5F15\u548C\u7A7A\u95F4\u7D22\u5F15\uFF1B</li><li>INDEX \u4E0E KEY \u4E3A\u540C\u4E49\u8BCD\uFF0C\u4E24\u8005\u7684\u4F5C\u7528\u76F8\u540C\uFF0C\u7528\u6765\u6307\u5B9A\u521B\u5EFA\u7D22\u5F15\uFF1B</li><li>index_name \u6307\u5B9A\u7D22\u5F15\u7684\u540D\u79F0\uFF0C\u4E3A\u53EF\u9009\u53C2\u6570\uFF0C\u5982\u679C\u4E0D\u6307\u5B9A\uFF0C\u90A3\u4E48MySQL\u9ED8\u8BA4col_name\u4E3A\u7D22\u5F15\u540D\uFF1B</li><li>col_name \u4E3A\u9700\u8981\u521B\u5EFA\u7D22\u5F15\u7684\u5B57\u6BB5\u5217\uFF0C\u8BE5\u5217\u5FC5\u987B\u4ECE\u6570\u636E\u8868\u4E2D\u5B9A\u4E49\u7684\u591A\u4E2A\u5217\u4E2D\u9009\u62E9\uFF1B</li><li>length \u4E3A\u53EF\u9009\u53C2\u6570\uFF0C\u8868\u793A\u7D22\u5F15\u7684\u957F\u5EA6\uFF0C\u53EA\u6709\u5B57\u7B26\u4E32\u7C7B\u578B\u7684\u5B57\u6BB5\u624D\u80FD\u6307\u5B9A\u7D22\u5F15\u957F\u5EA6\uFF1B</li><li>ASC \u6216 DESC \u6307\u5B9A\u5347\u5E8F\u6216\u8005\u964D\u5E8F\u7684\u7D22\u5F15\u503C\u5B58\u50A8\u3002</li></ul><p><strong>1. \u521B\u5EFA\u666E\u901A\u7D22\u5F15</strong></p><p>\u5728book\u8868\u4E2D\u7684year_publication\u5B57\u6BB5\u4E0A\u5EFA\u7ACB\u666E\u901A\u7D22\u5F15\uFF0CSQL\u8BED\u53E5\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE book(
book_id INT ,
book_name VARCHAR(100),
authors VARCHAR(100),
info VARCHAR(100) ,
comment VARCHAR(100),
year_publication YEAR,
INDEX(year_publication)
);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2. \u521B\u5EFA\u552F\u4E00\u7D22\u5F15</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE test1(
id INT NOT NULL,
name varchar(30) NOT NULL,
UNIQUE INDEX uk_idx_id(id)
);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BE5\u8BED\u53E5\u6267\u884C\u5B8C\u6BD5\u4E4B\u540E\uFF0C\u4F7F\u7528SHOW CREATE TABLE\u67E5\u770B\u8868\u7ED3\u6784\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW INDEX FROM test1 \\G
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>3. \u4E3B\u952E\u7D22\u5F15</strong></p><p>\u8BBE\u5B9A\u4E3A\u4E3B\u952E\u540E\u6570\u636E\u5E93\u4F1A\u81EA\u52A8\u5EFA\u7ACB\u7D22\u5F15\uFF0Cinnodb\u4E3A\u805A\u7C07\u7D22\u5F15\uFF0C\u8BED\u6CD5\uFF1A</p><ul><li>\u968F\u8868\u4E00\u8D77\u5EFA\u7D22\u5F15\uFF1A</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE student (
id INT(10) UNSIGNED AUTO_INCREMENT ,
student_no VARCHAR(200),
student_name VARCHAR(200),
PRIMARY KEY(id)
);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5220\u9664\u4E3B\u952E\u7D22\u5F15\uFF1A</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE student drop PRIMARY KEY;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>\u4FEE\u6539\u4E3B\u952E\u7D22\u5F15\uFF1A\u5FC5\u987B\u5148\u5220\u9664\u6389(drop)\u539F\u7D22\u5F15\uFF0C\u518D\u65B0\u5EFA(add)\u7D22\u5F15</li></ul><p><strong>4. \u521B\u5EFA\u5355\u5217\u7D22\u5F15</strong></p><p>\u5F15\u4E3E:</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE test2(
id INT NOT NULL,
name CHAR(50) NULL,
INDEX single_idx_name(name(20))
);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BE5\u8BED\u53E5\u6267\u884C\u5B8C\u6BD5\u4E4B\u540E\uFF0C\u4F7F\u7528SHOW CREATE TABLE\u67E5\u770B\u8868\u7ED3\u6784\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW INDEX FROM test2 \\G
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>5. \u521B\u5EFA\u7EC4\u5408\u7D22\u5F15</strong></p><p>\u4E3E\u4F8B\uFF1A\u521B\u5EFA\u8868test3\uFF0C\u5728\u8868\u4E2D\u7684id\u3001name\u548Cage\u5B57\u6BB5\u4E0A\u5EFA\u7ACB\u7EC4\u5408\u7D22\u5F15\uFF0CSQL\u8BED\u53E5\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE test3(
id INT(11) NOT NULL,
name CHAR(30) NOT NULL,
age INT(11) NOT NULL,
info VARCHAR(255),
INDEX multi_idx(id,name,age)
);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BE5\u8BED\u53E5\u6267\u884C\u5B8C\u6BD5\u4E4B\u540E\uFF0C\u4F7F\u7528SHOW INDEX \u67E5\u770B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW INDEX FROM test3 \\G
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5728test3\u8868\u4E2D\uFF0C\u67E5\u8BE2id\u548Cname\u5B57\u6BB5\uFF0C\u4F7F\u7528EXPLAIN\u8BED\u53E5\u67E5\u770B\u7D22\u5F15\u7684\u4F7F\u7528\u60C5\u51B5\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT * FROM test3 WHERE id=1 AND name=&#39;songhongkang&#39; \\G
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u67E5\u8BE2id\u548Cname\u5B57\u6BB5\u65F6\uFF0C\u4F7F\u7528\u4E86\u540D\u79F0\u4E3AMultiIdx\u7684\u7D22\u5F15\uFF0C\u5982\u679C\u67E5\u8BE2 (name, age) \u7EC4\u5408\u6216\u8005\u5355\u72EC\u67E5\u8BE2name\u548Cage\u5B57\u6BB5\uFF0C\u4F1A\u53D1\u73B0\u7ED3\u679C\u4E2Dpossible_keys\u548Ckey\u503C\u4E3ANULL, \u5E76\u6CA1\u6709\u4F7F\u7528\u5728t3\u8868\u4E2D\u521B\u5EFA\u7684\u7D22\u5F15\u8FDB\u884C\u67E5\u8BE2\u3002</p><p><strong>6. \u521B\u5EFA\u5168\u6587\u7D22\u5F15</strong></p><p>FULLTEXT\u5168\u6587\u7D22\u5F15\u53EF\u4EE5\u7528\u4E8E\u5168\u6587\u68C0\u7D22\uFF0C\u5E76\u4E14\u53EA\u4E3A <code>CHAR</code> \u3001<code>VARCHAR</code> \u548C <code>TEXT</code> \u5217\u521B\u5EFA\u7D22\u5F15\u3002\u7D22\u5F15\u603B\u662F\u5BF9\u6574\u4E2A\u5217\u8FDB\u884C\uFF0C\u4E0D\u652F\u6301\u5C40\u90E8 (\u524D\u7F00) \u7D22\u5F15\u3002</p><p>\u4E3E\u4F8B1\uFF1A\u521B\u5EFA\u8868test4\uFF0C\u5728\u8868\u4E2D\u7684info\u5B57\u6BB5\u4E0A\u5EFA\u7ACB\u5168\u6587\u7D22\u5F15\uFF0CSQL\u8BED\u53E5\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE test4(
id INT NOT NULL,
name CHAR(30) NOT NULL,
age INT NOT NULL,
info VARCHAR(255),
FULLTEXT INDEX futxt_idx_info(info)
) ENGINE=MyISAM;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u5728MySQL5.7\u53CA\u4E4B\u540E\u7248\u672C\u4E2D\u53EF\u4EE5\u4E0D\u6307\u5B9A\u6700\u540E\u7684ENGINE\u4E86\uFF0C\u56E0\u4E3A\u5728\u6B64\u7248\u672C\u4E2DInnoDB\u652F\u6301\u5168\u6587\u7D22\u5F15\u3002</p></blockquote><p>\u8BED\u53E5\u6267\u884C\u5B8C\u6BD5\u4E4B\u540E\uFF0C\u4F7F\u7528SHOW CREATE TABLE\u67E5\u770B\u8868\u7ED3\u6784\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW INDEX FROM test4 \\G
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7531\u7ED3\u679C\u53EF\u4EE5\u770B\u5230\uFF0Cinfo\u5B57\u6BB5\u4E0A\u5DF2\u7ECF\u6210\u529F\u5EFA\u7ACB\u4E86\u4E00\u4E2A\u540D\u4E3Afutxt_idx_info\u7684FULLTEXT\u7D22\u5F15\u3002</p><p>\u4E3E\u4F8B2\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE articles (
id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
title VARCHAR (200),
body TEXT,
FULLTEXT index (title, body)
) ENGINE = INNODB;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u521B\u5EFA\u4E86\u4E00\u4E2A\u7ED9title\u548Cbody\u5B57\u6BB5\u6DFB\u52A0\u5168\u6587\u7D22\u5F15\u7684\u8868\u3002</p><p>\u4E3E\u4F8B3\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE \`papers\` (
\`id\` int(10) unsigned NOT NULL AUTO_INCREMENT,
\`title\` varchar(200) DEFAULT NULL,
\`content\` text,
PRIMARY KEY (\`id\`),
FULLTEXT KEY \`title\` (\`title\`,\`content\`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0D\u540C\u4E8Elike\u65B9\u5F0F\u7684\u7684\u67E5\u8BE2\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT * FROM papers WHERE content LIKE \u2018%\u67E5\u8BE2\u5B57\u7B26\u4E32%\u2019;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5168\u6587\u7D22\u5F15\u7528match+against\u65B9\u5F0F\u67E5\u8BE2\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT * FROM papers WHERE MATCH(title,content) AGAINST (\u2018\u67E5\u8BE2\u5B57\u7B26\u4E32\u2019);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u660E\u663E\u7684\u63D0\u9AD8\u67E5\u8BE2\u6548\u7387\u3002</p><blockquote><p>\u6CE8\u610F\u70B9</p><ol><li>\u4F7F\u7528\u5168\u6587\u7D22\u5F15\u524D\uFF0C\u641E\u6E05\u695A\u7248\u672C\u652F\u6301\u60C5\u51B5\uFF1B</li><li>\u5168\u6587\u7D22\u5F15\u6BD4 like + % \u5FEB N \u500D\uFF0C\u4F46\u662F\u53EF\u80FD\u5B58\u5728\u7CBE\u5EA6\u95EE\u9898\uFF1B</li><li>\u5982\u679C\u9700\u8981\u5168\u6587\u7D22\u5F15\u7684\u662F\u5927\u91CF\u6570\u636E\uFF0C\u5EFA\u8BAE\u5148\u6DFB\u52A0\u6570\u636E\uFF0C\u518D\u521B\u5EFA\u7D22\u5F15\u3002</li></ol></blockquote><p><strong>7. \u521B\u5EFA\u7A7A\u95F4\u7D22\u5F15</strong></p><p>\u7A7A\u95F4\u7D22\u5F15\u521B\u5EFA\u4E2D\uFF0C\u8981\u6C42\u7A7A\u95F4\u7C7B\u578B\u7684\u5B57\u6BB5\u5FC5\u987B\u4E3A \u975E\u7A7A \u3002</p><p>\u4E3E\u4F8B\uFF1A\u521B\u5EFA\u8868test5\uFF0C\u5728\u7A7A\u95F4\u7C7B\u578B\u4E3AGEOMETRY\u7684\u5B57\u6BB5\u4E0A\u521B\u5EFA\u7A7A\u95F4\u7D22\u5F15\uFF0CSQL\u8BED\u53E5\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE test5(
geo GEOMETRY NOT NULL,
SPATIAL INDEX spa_idx_geo(geo)
) ENGINE=MyISAM;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BE5\u8BED\u53E5\u6267\u884C\u5B8C\u6BD5\u4E4B\u540E\uFF0C\u4F7F\u7528SHOW CREATE TABLE\u67E5\u770B\u8868\u7ED3\u6784\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW INDEX FROM test5 \\G
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u770B\u5230\uFF0Ctest5\u8868\u7684geo\u5B57\u6BB5\u4E0A\u521B\u5EFA\u4E86\u540D\u79F0\u4E3Aspa_idx_geo\u7684\u7A7A\u95F4\u7D22\u5F15\u3002\u6CE8\u610F\u521B\u5EFA\u65F6\u6307\u5B9A\u7A7A\u95F4\u7C7B\u578B\u5B57\u6BB5\u503C\u7684\u975E\u7A7A\u7EA6\u675F\uFF0C\u5E76\u4E14\u8868\u7684\u5B58\u50A8\u5F15\u64CE\u4E3AMyISAM\u3002</p><h6 id="_2-\u5728\u5DF2\u7ECF\u5B58\u5728\u7684\u8868\u4E0A\u521B\u5EFA\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_2-\u5728\u5DF2\u7ECF\u5B58\u5728\u7684\u8868\u4E0A\u521B\u5EFA\u7D22\u5F15" aria-hidden="true">#</a> 2. \u5728\u5DF2\u7ECF\u5B58\u5728\u7684\u8868\u4E0A\u521B\u5EFA\u7D22\u5F15</h6><p>\u5728\u5DF2\u7ECF\u5B58\u5728\u7684\u8868\u4E2D\u521B\u5EFA\u7D22\u5F15\u53EF\u4EE5\u4F7F\u7528ALTER TABLE\u8BED\u53E5\u6216\u8005CREATE INDEX\u8BED\u53E5\u3002</p><p><strong>1. \u4F7F\u7528ALTER TABLE\u8BED\u53E5\u521B\u5EFA\u7D22\u5F15</strong> ALTER TABLE\u8BED\u53E5\u521B\u5EFA\u7D22\u5F15\u7684\u57FA\u672C\u8BED\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE table_name ADD [UNIQUE | FULLTEXT | SPATIAL] [INDEX | KEY]
[index_name] (col_name[length],...) [ASC | DESC]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2. \u4F7F\u7528CREATE INDEX\u521B\u5EFA\u7D22\u5F15</strong> CREATE INDEX\u8BED\u53E5\u53EF\u4EE5\u5728\u5DF2\u7ECF\u5B58\u5728\u7684\u8868\u4E0A\u6DFB\u52A0\u7D22\u5F15\uFF0C\u5728MySQL\u4E2D\uFF0C CREATE INDEX\u88AB\u6620\u5C04\u5230\u4E00\u4E2AALTER TABLE\u8BED\u53E5\u4E0A\uFF0C\u57FA\u672C\u8BED\u6CD5\u7ED3\u6784\u4E3A\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE [UNIQUE | FULLTEXT | SPATIAL] INDEX index_name ON table_name (col_name[length],...) [ASC | DESC]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="_1-3-\u5220\u9664\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_1-3-\u5220\u9664\u7D22\u5F15" aria-hidden="true">#</a> 1.3 \u5220\u9664\u7D22\u5F15</h5><p><strong>1. \u4F7F\u7528ALTER TABLE\u5220\u9664\u7D22\u5F15</strong> ALTER TABLE\u5220\u9664\u7D22\u5F15\u7684\u57FA\u672C\u8BED\u6CD5\u683C\u5F0F\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE table_name DROP INDEX index_name;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>2. \u4F7F\u7528DROP INDEX\u8BED\u53E5\u5220\u9664\u7D22\u5F15</strong> DROP INDEX\u5220\u9664\u7D22\u5F15\u7684\u57FA\u672C\u8BED\u6CD5\u683C\u5F0F\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DROP INDEX index_name ON table_name;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>\u63D0\u793A: \u5220\u9664\u8868\u4E2D\u7684\u5217\u65F6\uFF0C\u5982\u679C\u8981\u5220\u9664\u7684\u5217\u4E3A\u7D22\u5F15\u7684\u7EC4\u6210\u90E8\u5206\uFF0C\u5219\u8BE5\u5217\u4E5F\u4F1A\u4ECE\u7D22\u5F15\u4E2D\u5220\u9664\u3002\u5982\u679C\u7EC4\u6210\u7D22\u5F15\u7684\u6240\u6709\u5217\u90FD\u88AB\u5220\u9664\uFF0C\u5219\u6574\u4E2A\u7D22\u5F15\u5C06\u88AB\u5220\u9664\u3002</p></blockquote><h3 id="_2-mysql8-0\u7D22\u5F15\u65B0\u7279\u6027" tabindex="-1"><a class="header-anchor" href="#_2-mysql8-0\u7D22\u5F15\u65B0\u7279\u6027" aria-hidden="true">#</a> 2. MySQL8.0\u7D22\u5F15\u65B0\u7279\u6027</h3><h5 id="_2-1-\u652F\u6301\u964D\u5E8F\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_2-1-\u652F\u6301\u964D\u5E8F\u7D22\u5F15" aria-hidden="true">#</a> 2.1 \u652F\u6301\u964D\u5E8F\u7D22\u5F15</h5><p>\u964D\u5E8F\u7D22\u5F15\u4EE5\u964D\u5E8F\u5B58\u50A8\u952E\u503C\u3002\u867D\u7136\u5728\u8BED\u6CD5\u4E0A\uFF0C\u4ECEMySQL 4\u7248\u672C\u5F00\u59CB\u5C31\u5DF2\u7ECF\u652F\u6301\u964D\u5E8F\u7D22\u5F15\u7684\u8BED\u6CD5\u4E86\uFF0C\u4F46\u5B9E\u9645\u4E0ADESC\u5B9A\u4E49\u662F\u88AB\u5FFD\u7565\u7684\uFF0C\u76F4\u5230MySQL 8.x\u7248\u672C\u624D\u5F00\u59CB\u771F\u6B63\u652F\u6301\u964D\u5E8F\u7D22\u5F15 (\u4EC5\u9650\u4E8EInnoDBc\u5B58\u50A8\u5F15\u64CE)\u3002</p><p>MySQL\u57288.0\u7248\u672C\u4E4B\u524D\u521B\u5EFA\u7684\u4ECD\u7136\u662F\u5347\u5E8F\u7D22\u5F15\uFF0C\u4F7F\u7528\u65F6\u8FDB\u884C\u53CD\u5411\u626B\u63CF\uFF0C\u8FD9\u5927\u5927\u964D\u4F4E\u4E86\u6570\u636E\u5E93\u7684\u6548\u7387\u3002\u5728\u67D0\u4E9B\u573A\u666F\u4E0B\uFF0C\u964D\u5E8F\u7D22\u5F15\u610F\u4E49\u91CD\u5927\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u4E00\u4E2A\u67E5\u8BE2\uFF0C\u9700\u8981\u5BF9\u591A\u4E2A\u5217\u8FDB\u884C\u6392\u5E8F\uFF0C\u4E14\u987A\u5E8F\u8981\u6C42\u4E0D\u4E00\u81F4\uFF0C\u90A3\u4E48\u4F7F\u7528\u964D\u5E8F\u7D22\u5F15\u5C06\u4F1A\u907F\u514D\u6570\u636E\u5E93\u4F7F\u7528\u989D\u5916\u7684\u6587\u4EF6\u6392\u5E8F\u64CD\u4F5C\uFF0C\u4ECE\u800C\u63D0\u9AD8\u6027\u80FD\u3002</p><p>\u4E3E\u4F8B\uFF1A\u5206\u522B\u5728MySQL 5.7\u7248\u672C\u548CMySQL 8.0\u7248\u672C\u4E2D\u521B\u5EFA\u6570\u636E\u8868ts1\uFF0C\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE ts1(a int,b int,index idx_a_b(a,b desc));
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5728MySQL 5.7\u7248\u672C\u4E2D\u67E5\u770B\u6570\u636E\u8868ts1\u7684\u7ED3\u6784\uFF0C\u7ED3\u679C\u5982\u4E0B:</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220622224124267.png" alt="image-20220622224124267"></p><p>\u4ECE\u7ED3\u679C\u53EF\u4EE5\u770B\u51FA\uFF0C\u7D22\u5F15\u4ECD\u7136\u662F\u9ED8\u8BA4\u7684\u5347\u5E8F</p><p>\u5728MySQL 8.0\u7248\u672C\u4E2D\u67E5\u770B\u6570\u636E\u8868ts1\u7684\u7ED3\u6784\uFF0C\u7ED3\u679C\u5982\u4E0B\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220622224205048.png" alt="image-20220622224205048"></p><p>\u4ECE\u7ED3\u679C\u53EF\u4EE5\u770B\u51FA\uFF0C\u7D22\u5F15\u5DF2\u7ECF\u662F\u964D\u5E8F\u4E86\u3002\u4E0B\u9762\u7EE7\u7EED\u6D4B\u8BD5\u964D\u5E8F\u7D22\u5F15\u5728\u6267\u884C\u8BA1\u5212\u4E2D\u7684\u8868\u73B0\u3002</p><p>\u5206\u522B\u5728MySQL 5.7\u7248\u672C\u548CMySQL 8.0\u7248\u672C\u7684\u6570\u636E\u8868ts1\u4E2D\u63D2\u5165800\u6761\u968F\u673A\u6570\u636E\uFF0C\u6267\u884C\u8BED\u53E5\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DELIMITER //
CREATE PROCEDURE ts_insert()
BEGIN
	DECLARE i INT DEFAULT 1;
	WHILE i &lt; 800
	DO
		insert into ts1 select rand()*80000, rand()*80000;
		SET i = i+1;
	END WHILE;
	commit;
END //
DELIMITER;

# \u8C03\u7528
CALL ts_insert();
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728MySQL 5.7\u7248\u672C\u4E2D\u67E5\u770B\u6570\u636E\u8868ts1\u7684\u6267\u884C\u8BA1\u5212\uFF0C\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; explain select * from ts1 order by a, b desc limit 5;
+----+------+----------+-----------------------------+
| id | rows | filtered | Extra                       |
+----+------+----------+-----------------------------+
|  1 | 1598 |   100.00 | Using index; Using filesort |
+----+------+----------+-----------------------------+
1 row in set, 1 warning (0.01 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u7ED3\u679C\u53EF\u4EE5\u770B\u51FA\uFF0C\u6267\u884C\u8BA1\u5212\u4E2D\u626B\u63CF\u6570\u4E3A 1598\uFF0C\u800C\u4E14\u4F7F\u7528\u4E86Using filesort\u3002</p><blockquote><p>\u63D0\u793A Using filesort\u662FMySQL\u4E2D\u4E00\u79CD\u901F\u5EA6\u6BD4\u8F83\u6162\u7684\u5916\u90E8\u6392\u5E8F\uFF0C\u80FD\u907F\u514D\u662F\u6700\u597D\u7684\u3002\u591A\u6570\u60C5\u51B5\u4E0B\uFF0C\u7BA1\u7406\u5458\u53EF\u4EE5\u901A\u8FC7\u4F18\u5316\u7D22\u5F15\u6765\u5C3D\u91CF\u907F\u514D\u51FA\u73B0Using filesort\uFF0C\u4ECE\u800C\u63D0\u9AD8\u6570\u636E\u5E93\u6267\u884C\u901F\u5EA6\u3002</p></blockquote><p>\u5728MySQL 8.0\u7248\u672C\u4E2D\u67E5\u770B\u6570\u636E\u8868ts1\u7684\u6267\u884C\u8BA1\u5212\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; explain select * from ts1 order by a, b desc limit 5;
+----+---------+-----+----------+-------------+
| id | key     |rows | filtered | Extra       |
+----+---------+-----+----------+-------------+
|  1 | idx_a_b |   5 |   100.00 | Using index |
+----+---------+-----+----------+-------------+
1 row in set, 1 warning (0.03 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u7ED3\u679C\u53EF\u4EE5\u770B\u51FA\uFF0C\u6267\u884C\u8BA1\u5212\u4E2D\u626B\u63CF\u6570\u4E3A 5 \uFF0C\u800C\u4E14\u6CA1\u6709\u4F7F\u7528Using filesort\u3002</p><blockquote><p>\u6CE8\u610F \u964D\u5E8F\u7D22\u5F15\u53EA\u5BF9\u67E5\u8BE2\u4E2D\u7279\u5B9A\u7684\u6392\u5E8F\u987A\u5E8F\u6709\u6548\uFF0C\u5982\u679C\u4F7F\u7528\u4E0D\u5F53\uFF0C\u53CD\u800C\u67E5\u8BE2\u6548\u7387\u66F4\u4F4E\u3002\u4F8B\u5982\uFF0C\u4E0A\u8FF0\u67E5\u8BE2\u6392\u5E8F\u6761\u4EF6\u6539\u4E3Aorder by a desc, b desc\uFF0CMySQL 5.7\u7684\u6267\u884C\u8BA1\u5212\u8981\u660E\u663E\u597D\u4E8EMySQL 8.0\u3002</p></blockquote><h5 id="_2-2-\u9690\u85CF\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_2-2-\u9690\u85CF\u7D22\u5F15" aria-hidden="true">#</a> 2.2 \u9690\u85CF\u7D22\u5F15</h5><p>\u5728MySQL 5.7\u7248\u672C\u53CA\u4E4B\u524D\uFF0C\u53EA\u80FD\u901A\u8FC7\u663E\u5F0F\u7684\u65B9\u5F0F\u5220\u9664\u7D22\u5F15\u3002\u6B64\u65F6\uFF0C\u5982\u679C\u53D1\u5C55\u5220\u9664\u7D22\u5F15\u540E\u51FA\u73B0\u9519\u8BEF\uFF0C\u53C8\u53EA\u80FD\u901A\u8FC7\u663E\u5F0F\u521B\u5EFA\u7D22\u5F15\u7684\u65B9\u5F0F\u5C06\u5220\u9664\u7684\u7D22\u5F15\u521B\u5EFA\u56DE\u6765\u3002\u5982\u679C\u6570\u636E\u8868\u4E2D\u7684\u6570\u636E\u91CF\u975E\u5E38\u5927\uFF0C\u6216\u8005\u6570\u636E\u8868\u672C\u8EAB\u6BD4\u8F83 \u5927\uFF0C\u8FD9\u79CD\u64CD\u4F5C\u5C31\u4F1A\u6D88\u8017\u7CFB\u7EDF\u8FC7\u591A\u7684\u8D44\u6E90\uFF0C\u64CD\u4F5C\u6210\u672C\u975E\u5E38\u9AD8\u3002</p><p>\u4ECEMySQL 8.x\u5F00\u59CB\u652F\u6301 \u9690\u85CF\u7D22\u5F15\uFF08invisible indexes\uFF09 \uFF0C\u53EA\u9700\u8981\u5C06\u5F85\u5220\u9664\u7684\u7D22\u5F15\u8BBE\u7F6E\u4E3A\u9690\u85CF\u7D22\u5F15\uFF0C\u4F7F \u67E5\u8BE2\u4F18\u5316\u5668\u4E0D\u518D\u4F7F\u7528\u8FD9\u4E2A\u7D22\u5F15\uFF08\u5373\u4F7F\u4F7F\u7528force index\uFF08\u5F3A\u5236\u4F7F\u7528\u7D22\u5F15\uFF09\uFF0C\u4F18\u5316\u5668\u4E5F\u4E0D\u4F1A\u4F7F\u7528\u8BE5\u7D22\u5F15\uFF09\uFF0C \u786E\u8BA4\u5C06\u7D22\u5F15\u8BBE\u7F6E\u4E3A\u9690\u85CF\u7D22\u5F15\u540E\u7CFB\u7EDF\u4E0D\u53D7\u4EFB\u4F55\u54CD\u5E94\uFF0C\u5C31\u53EF\u4EE5\u5F7B\u5E95\u5220\u9664\u7D22\u5F15\u3002 \u8FD9\u79CD\u901A\u8FC7\u5148\u5C06\u7D22\u5F15\u8BBE\u7F6E\u4E3A\u9690\u85CF\u7D22 \u5F15\uFF0C\u518D\u5220\u9664\u7D22\u5F15\u7684\u65B9\u5F0F\u5C31\u662F\u8F6F\u5220\u9664\u3002</p><p>\u540C\u65F6\uFF0C\u5982\u679C\u4F60\u60F3\u9A8C\u8BC1\u67D0\u4E2A\u7D22\u5F15\u5220\u9664\u4E4B\u540E\u7684 <code>\u67E5\u8BE2\u6027\u80FD\u5F71\u54CD</code>\uFF0C\u5C31\u53EF\u4EE5\u6682\u65F6\u5148\u9690\u85CF\u8BE5\u7D22\u5F15\u3002</p><blockquote><p>\u6CE8\u610F\uFF1A</p><p>\u4E3B\u952E\u4E0D\u80FD\u88AB\u8BBE\u7F6E\u4E3A\u9690\u85CF\u7D22\u5F15\u3002\u5F53\u8868\u4E2D\u6CA1\u6709\u663E\u5F0F\u4E3B\u952E\u65F6\uFF0C\u8868\u4E2D\u7B2C\u4E00\u4E2A\u552F\u4E00\u975E\u7A7A\u7D22\u5F15\u4F1A\u6210\u4E3A\u9690\u5F0F\u4E3B\u952E\uFF0C\u4E5F\u4E0D\u80FD\u8BBE\u7F6E\u4E3A\u9690\u85CF\u7D22\u5F15\u3002</p></blockquote><p>\u7D22\u5F15\u9ED8\u8BA4\u662F\u53EF\u89C1\u7684\uFF0C\u5728\u4F7F\u7528CREATE TABLE, CREATE INDEX \u6216\u8005 ALTER TABLE \u7B49\u8BED\u53E5\u65F6\u53EF\u4EE5\u901A\u8FC7 <code>VISIBLE</code> \u6216\u8005 <code>INVISIBLE</code> \u5173\u952E\u8BCD\u8BBE\u7F6E\u7D22\u5F15\u7684\u53EF\u89C1\u6027\u3002</p><p><strong>1. \u521B\u5EFA\u8868\u65F6\u76F4\u63A5\u521B\u5EFA</strong></p><p>\u5728MySQL\u4E2D\u521B\u5EFA\u9690\u85CF\u7D22\u5F15\u901A\u8FC7SQL\u8BED\u53E5INVISIBLE\u6765\u5B9E\u73B0\uFF0C\u5176\u8BED\u6CD5\u5F62\u5F0F\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE tablename(
propname1 type1[CONSTRAINT1],
propname2 type2[CONSTRAINT2],
\u2026\u2026
propnamen typen,
INDEX [indexname](propname1 [(length)]) INVISIBLE
);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u8FF0\u8BED\u53E5\u6BD4\u666E\u901A\u7D22\u5F15\u591A\u4E86\u4E00\u4E2A\u5173\u952E\u5B57INVISIBLE\uFF0C\u7528\u6765\u6807\u8BB0\u7D22\u5F15\u4E3A\u4E0D\u53EF\u89C1\u7D22\u5F15\u3002</p><p><strong>2. \u5728\u5DF2\u7ECF\u5B58\u5728\u7684\u8868\u4E0A\u521B\u5EFA</strong></p><p>\u53EF\u4EE5\u4E3A\u5DF2\u7ECF\u5B58\u5728\u7684\u8868\u8BBE\u7F6E\u9690\u85CF\u7D22\u5F15\uFF0C\u5176\u8BED\u6CD5\u5F62\u5F0F\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE INDEX indexname
ON tablename(propname[(length)]) INVISIBLE;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3. \u901A\u8FC7ALTER TABLE\u8BED\u53E5\u521B\u5EFA</strong></p><p>\u8BED\u6CD5\u5F62\u5F0F\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE tablename
ADD INDEX indexname (propname [(length)]) INVISIBLE;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>4. \u5207\u6362\u7D22\u5F15\u53EF\u89C1\u72B6\u6001</strong></p><p>\u5DF2\u5B58\u5728\u7684\u7D22\u5F15\u53EF\u901A\u8FC7\u5982\u4E0B\u8BED\u53E5\u5207\u6362\u53EF\u89C1\u72B6\u6001\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE tablename ALTER INDEX index_name INVISIBLE; #\u5207\u6362\u6210\u9690\u85CF\u7D22\u5F15
ALTER TABLE tablename ALTER INDEX index_name VISIBLE; #\u5207\u6362\u6210\u975E\u9690\u85CF\u7D22\u5F15
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u5C06index_cname\u7D22\u5F15\u5207\u6362\u6210\u53EF\u89C1\u72B6\u6001\uFF0C\u901A\u8FC7explain\u67E5\u770B\u6267\u884C\u8BA1\u5212\uFF0C\u53D1\u73B0\u4F18\u5316\u5668\u9009\u62E9\u4E86index_cname\u7D22\u5F15\u3002</p><blockquote><p>\u6CE8\u610F \u5F53\u7D22\u5F15\u88AB\u9690\u85CF\u65F6\uFF0C\u5B83\u7684\u5185\u5BB9\u4ECD\u7136\u662F\u548C\u6B63\u5E38\u7D22\u5F15\u4E00\u6837\u5B9E\u65F6\u66F4\u65B0\u7684\u3002\u5982\u679C\u4E00\u4E2A\u7D22\u5F15\u9700\u8981\u957F\u671F\u88AB\u9690\u85CF\uFF0C\u90A3\u4E48\u53EF\u4EE5\u5C06\u5176\u5220\u9664\uFF0C\u56E0\u4E3A\u7D22\u5F15\u7684\u5B58\u5728\u4F1A\u5F71\u54CD\u63D2\u5165\u3001\u66F4\u65B0\u548C\u5220\u9664\u7684\u6027\u80FD\u3002</p></blockquote><p>\u901A\u8FC7\u8BBE\u7F6E\u9690\u85CF\u7D22\u5F15\u7684\u53EF\u89C1\u6027\u53EF\u4EE5\u67E5\u770B\u7D22\u5F15\u5BF9\u8C03\u4F18\u7684\u5E2E\u52A9\u3002</p><p><strong>5. \u4F7F\u9690\u85CF\u7D22\u5F15\u5BF9\u67E5\u8BE2\u4F18\u5316\u5668\u53EF\u89C1</strong></p><p>\u5728MySQL 8.x\u7248\u672C\u4E2D\uFF0C\u4E3A\u7D22\u5F15\u63D0\u4F9B\u4E86\u4E00\u79CD\u65B0\u7684\u6D4B\u8BD5\u65B9\u5F0F\uFF0C\u53EF\u4EE5\u901A\u8FC7\u67E5\u8BE2\u4F18\u5316\u5668\u7684\u4E00\u4E2A\u5F00\u5173 (use_invisible_indexes) \u6765\u6253\u5F00\u67D0\u4E2A\u8BBE\u7F6E\uFF0C\u4F7F\u9690\u85CF\u7D22\u5F15\u5BF9\u67E5\u8BE2\u4F18\u5316\u5668\u53EF\u89C1\u3002\u5982\u679Cuse_invisible_indexes \u8BBE\u7F6E\u4E3Aoff (\u9ED8\u8BA4)\uFF0C\u4F18\u5316\u5668\u4F1A\u5FFD\u7565\u9690\u85CF\u7D22\u5F15\u3002\u5982\u679C\u8BBE\u7F6E\u4E3Aon\uFF0C\u5373\u4F7F\u9690\u85CF\u7D22\u5F15\u4E0D\u53EF\u89C1\uFF0C\u4F18\u5316\u5668\u5728\u751F\u6210\u6267\u884C\u8BA1 \u5212\u65F6\u4ECD\u4F1A\u8003\u8651\u4F7F\u7528\u9690\u85CF\u7D22\u5F15\u3002</p><p>\uFF081\uFF09\u5728MySQL\u547D\u4EE4\u884C\u6267\u884C\u5982\u4E0B\u547D\u4EE4\u67E5\u770B\u67E5\u8BE2\u4F18\u5316\u5668\u7684\u5F00\u5173\u8BBE\u7F6E\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; select @@optimizer_switch \\G
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5728\u8F93\u51FA\u7684\u7ED3\u679C\u4FE1\u606F\u4E2D\u627E\u5230\u5982\u4E0B\u5C5E\u6027\u914D\u7F6E\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>use_invisible_indexes=off
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6B64\u5C5E\u6027\u914D\u7F6E\u503C\u4E3Aoff\uFF0C\u8BF4\u660E\u9690\u85CF\u7D22\u5F15\u9ED8\u8BA4\u5BF9\u67E5\u8BE2\u4F18\u5316\u5668\u4E0D\u53EF\u89C1\u3002</p><p>\uFF082\uFF09\u4F7F\u9690\u85CF\u7D22\u5F15\u5BF9\u67E5\u8BE2\u4F18\u5316\u5668\u53EF\u89C1\uFF0C\u9700\u8981\u5728MySQL\u547D\u4EE4\u884C\u6267\u884C\u5982\u4E0B\u547D\u4EE4\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; set session optimizer_switch=&quot;use_invisible_indexes=on&quot;;
Query OK, 0 rows affected (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>SQL\u8BED\u53E5\u6267\u884C\u6210\u529F\uFF0C\u518D\u6B21\u67E5\u770B\u67E5\u8BE2\u4F18\u5316\u5668\u7684\u5F00\u5173\u8BBE\u7F6E\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; select @@optimizer_switch \\G
*************************** 1. row ***************************
@@optimizer_switch:
index_merge=on,index_merge_union=on,index_merge_sort_union=on,index_merge_
intersection=on,engine_condition_pushdown=on,index_condition_pushdown=on,mrr=on,mrr_co
st_based=on,block_nested_loop=on,batched_key_access=off,materialization=on,semijoin=on
,loosescan=on,firstmatch=on,duplicateweedout=on,subquery_materialization_cost_based=on
,use_index_extensions=on,condition_fanout_filter=on,derived_merge=on,use_invisible_ind
exes=on,skip_scan=on,hash_join=on
1 row in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6B64\u65F6\uFF0C\u5728\u8F93\u51FA\u7ED3\u679C\u4E2D\u53EF\u4EE5\u770B\u5230\u5982\u4E0B\u5C5E\u6027\u914D\u7F6E\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>use_invisible_indexes=on
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>use_invisible_indexes\u5C5E\u6027\u7684\u503C\u4E3Aon\uFF0C\u8BF4\u660E\u6B64\u65F6\u9690\u85CF\u7D22\u5F15\u5BF9\u67E5\u8BE2\u4F18\u5316\u5668\u53EF\u89C1\u3002</p><p>\uFF083\uFF09\u4F7F\u7528EXPLAIN\u67E5\u770B\u4EE5\u5B57\u6BB5invisible_column\u4F5C\u4E3A\u67E5\u8BE2\u6761\u4EF6\u65F6\u7684\u7D22\u5F15\u4F7F\u7528\u60C5\u51B5\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>explain select * from classes where cname = &#39;\u9AD8\u4E002\u73ED&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u67E5\u8BE2\u4F18\u5316\u5668\u4F1A\u4F7F\u7528\u9690\u85CF\u7D22\u5F15\u6765\u67E5\u8BE2\u6570\u636E\u3002</p><p>\uFF084\uFF09\u5982\u679C\u9700\u8981\u4F7F\u9690\u85CF\u7D22\u5F15\u5BF9\u67E5\u8BE2\u4F18\u5316\u5668\u4E0D\u53EF\u89C1\uFF0C\u5219\u53EA\u9700\u8981\u6267\u884C\u5982\u4E0B\u547D\u4EE4\u5373\u53EF\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; set session optimizer_switch=&quot;use_invisible_indexes=off&quot;;
Query OK, 0 rows affected (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u518D\u6B21\u67E5\u770B\u67E5\u8BE2\u4F18\u5316\u5668\u7684\u5F00\u5173\u8BBE\u7F6E\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; select @@optimizer_switch \\G
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6B64\u65F6\uFF0Cuse_invisible_indexes\u5C5E\u6027\u7684\u503C\u5DF2\u7ECF\u88AB\u8BBE\u7F6E\u4E3A\u201Coff\u201D\u3002</p><h3 id="_3-\u7D22\u5F15\u7684\u8BBE\u8BA1\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-\u7D22\u5F15\u7684\u8BBE\u8BA1\u539F\u5219" aria-hidden="true">#</a> 3. \u7D22\u5F15\u7684\u8BBE\u8BA1\u539F\u5219</h3><p>\u4E3A\u4E86\u4F7F\u7D22\u5F15\u7684\u4F7F\u7528\u6548\u7387\u66F4\u9AD8\uFF0C\u5728\u521B\u5EFA\u7D22\u5F15\u65F6\uFF0C\u5FC5\u987B\u8003\u8651\u5728\u54EA\u4E9B\u5B57\u6BB5\u4E0A\u521B\u5EFA\u7D22\u5F15\u548C\u521B\u5EFA\u4EC0\u4E48\u7C7B\u578B\u7684\u7D22\u5F15\u3002**\u7D22\u5F15\u8BBE\u8BA1\u4E0D\u5408\u7406\u6216\u8005\u7F3A\u5C11\u7D22\u5F15\u90FD\u4F1A\u5BF9\u6570\u636E\u5E93\u548C\u5E94\u7528\u7A0B\u5E8F\u7684\u6027\u80FD\u9020\u6210\u969C\u788D\u3002**\u9AD8\u6548\u7684\u7D22\u5F15\u5BF9\u4E8E\u83B7\u5F97\u826F\u597D\u7684\u6027\u80FD\u975E\u5E38\u91CD\u8981\u3002\u8BBE\u8BA1\u7D22\u5F15\u65F6\uFF0C\u5E94\u8BE5\u8003\u8651\u76F8\u5E94\u51C6\u5219\u3002</p><h5 id="_3-1-\u6570\u636E\u51C6\u5907" tabindex="-1"><a class="header-anchor" href="#_3-1-\u6570\u636E\u51C6\u5907" aria-hidden="true">#</a> 3.1 \u6570\u636E\u51C6\u5907</h5><p><strong>\u7B2C1\u6B65\uFF1A\u521B\u5EFA\u6570\u636E\u5E93\u3001\u521B\u5EFA\u8868</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE DATABASE atguigudb1;
USE atguigudb1;
#1.\u521B\u5EFA\u5B66\u751F\u8868\u548C\u8BFE\u7A0B\u8868
CREATE TABLE \`student_info\` (
\`id\` INT(11) NOT NULL AUTO_INCREMENT,
\`student_id\` INT NOT NULL ,
\`name\` VARCHAR(20) DEFAULT NULL,
\`course_id\` INT NOT NULL ,
\`class_id\` INT(11) DEFAULT NULL,
\`create_time\` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
PRIMARY KEY (\`id\`)
) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

CREATE TABLE \`course\` (
\`id\` INT(11) NOT NULL AUTO_INCREMENT,
\`course_id\` INT NOT NULL ,
\`course_name\` VARCHAR(40) DEFAULT NULL,
PRIMARY KEY (\`id\`)
) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u7B2C2\u6B65\uFF1A\u521B\u5EFA\u6A21\u62DF\u6570\u636E\u5FC5\u9700\u7684\u5B58\u50A8\u51FD\u6570</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#\u51FD\u65701\uFF1A\u521B\u5EFA\u968F\u673A\u4EA7\u751F\u5B57\u7B26\u4E32\u51FD\u6570
DELIMITER //
CREATE FUNCTION rand_string(n INT)
	RETURNS VARCHAR(255) #\u8BE5\u51FD\u6570\u4F1A\u8FD4\u56DE\u4E00\u4E2A\u5B57\u7B26\u4E32
BEGIN
	DECLARE chars_str VARCHAR(100) DEFAULT
&#39;abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ&#39;;
	DECLARE return_str VARCHAR(255) DEFAULT &#39;&#39;;
    DECLARE i INT DEFAULT 0;
    WHILE i &lt; n DO
    	SET return_str =CONCAT(return_str,SUBSTRING(chars_str,FLOOR(1+RAND()*52),1));
    	SET i = i + 1;
    END WHILE;
    RETURN return_str;
END //
DELIMITER ;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#\u51FD\u65702\uFF1A\u521B\u5EFA\u968F\u673A\u6570\u51FD\u6570
DELIMITER //
CREATE FUNCTION rand_num (from_num INT ,to_num INT) RETURNS INT(11)
BEGIN
DECLARE i INT DEFAULT 0;
SET i = FLOOR(from_num +RAND()*(to_num - from_num+1)) ;
RETURN i;
END //
DELIMITER ;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u521B\u5EFA\u51FD\u6570\uFF0C\u5047\u5982\u62A5\u9519\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>This function has none of DETERMINISTIC......
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7531\u4E8E\u5F00\u542F\u8FC7\u6162\u67E5\u8BE2\u65E5\u5FD7bin-log, \u6211\u4EEC\u5C31\u5FC5\u987B\u4E3A\u6211\u4EEC\u7684function\u6307\u5B9A\u4E00\u4E2A\u53C2\u6570\u3002</p><p>\u4E3B\u4ECE\u590D\u5236\uFF0C\u4E3B\u673A\u4F1A\u5C06\u5199\u64CD\u4F5C\u8BB0\u5F55\u5728bin-log\u65E5\u5FD7\u4E2D\u3002\u4ECE\u673A\u8BFB\u53D6bin-log\u65E5\u5FD7\uFF0C\u6267\u884C\u8BED\u53E5\u6765\u540C\u6B65\u6570\u636E\u3002\u5982\u679C\u4F7F \u7528\u51FD\u6570\u6765\u64CD\u4F5C\u6570\u636E\uFF0C\u4F1A\u5BFC\u81F4\u4ECE\u673A\u548C\u4E3B\u952E\u64CD\u4F5C\u65F6\u95F4\u4E0D\u4E00\u81F4\u3002\u6240\u4EE5\uFF0C\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Cmysql\u4E0D\u5F00\u542F\u521B\u5EFA\u51FD\u6570\u8BBE\u7F6E\u3002</p><ul><li>\u67E5\u770Bmysql\u662F\u5426\u5141\u8BB8\u521B\u5EFA\u51FD\u6570\uFF1A</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>show variables like &#39;log_bin_trust_function_creators&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>\u547D\u4EE4\u5F00\u542F\uFF1A\u5141\u8BB8\u521B\u5EFA\u51FD\u6570\u8BBE\u7F6E\uFF1A</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>set global log_bin_trust_function_creators=1; # \u4E0D\u52A0global\u53EA\u662F\u5F53\u524D\u7A97\u53E3\u6709\u6548\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p>mysqld\u91CD\u542F\uFF0C\u4E0A\u8FF0\u53C2\u6570\u53C8\u4F1A\u6D88\u5931\u3002\u6C38\u4E45\u65B9\u6CD5\uFF1A</p><ul><li><p>windows\u4E0B\uFF1Amy.ini[mysqld]\u52A0\u4E0A\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>log_bin_trust_function_creators=1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>linux\u4E0B\uFF1A/etc/my.cnf\u4E0Bmy.cnf[mysqld]\u52A0\u4E0A\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>log_bin_trust_function_creators=1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li></ul><p><strong>\u7B2C3\u6B65\uFF1A\u521B\u5EFA\u63D2\u5165\u6A21\u62DF\u6570\u636E\u7684\u5B58\u50A8\u8FC7\u7A0B</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u5B58\u50A8\u8FC7\u7A0B1\uFF1A\u521B\u5EFA\u63D2\u5165\u8BFE\u7A0B\u8868\u5B58\u50A8\u8FC7\u7A0B
DELIMITER //
CREATE PROCEDURE insert_course( max_num INT )
BEGIN
DECLARE i INT DEFAULT 0;
SET autocommit = 0; #\u8BBE\u7F6E\u624B\u52A8\u63D0\u4EA4\u4E8B\u52A1
REPEAT #\u5FAA\u73AF
SET i = i + 1; #\u8D4B\u503C
INSERT INTO course (course_id, course_name ) VALUES
(rand_num(10000,10100),rand_string(6));
UNTIL i = max_num
END REPEAT;
COMMIT; #\u63D0\u4EA4\u4E8B\u52A1
END //
DELIMITER ;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u5B58\u50A8\u8FC7\u7A0B2\uFF1A\u521B\u5EFA\u63D2\u5165\u5B66\u751F\u4FE1\u606F\u8868\u5B58\u50A8\u8FC7\u7A0B
DELIMITER //
CREATE PROCEDURE insert_stu( max_num INT )
BEGIN
DECLARE i INT DEFAULT 0;
SET autocommit = 0; #\u8BBE\u7F6E\u624B\u52A8\u63D0\u4EA4\u4E8B\u52A1
REPEAT #\u5FAA\u73AF
SET i = i + 1; #\u8D4B\u503C
INSERT INTO student_info (course_id, class_id ,student_id ,NAME ) VALUES
(rand_num(10000,10100),rand_num(10000,10200),rand_num(1,200000),rand_string(6));
UNTIL i = max_num
END REPEAT;
COMMIT; #\u63D0\u4EA4\u4E8B\u52A1
END //
DELIMITER ;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u7B2C4\u6B65\uFF1A\u8C03\u7528\u5B58\u50A8\u8FC7\u7A0B</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CALL insert_course(100);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CALL insert_stu(1000000);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="_3-2-\u54EA\u4E9B\u60C5\u51B5\u9002\u5408\u521B\u5EFA\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_3-2-\u54EA\u4E9B\u60C5\u51B5\u9002\u5408\u521B\u5EFA\u7D22\u5F15" aria-hidden="true">#</a> 3.2 \u54EA\u4E9B\u60C5\u51B5\u9002\u5408\u521B\u5EFA\u7D22\u5F15</h5><h6 id="_1-\u5B57\u6BB5\u7684\u6570\u503C\u6709\u552F\u4E00\u6027\u7684\u9650\u5236" tabindex="-1"><a class="header-anchor" href="#_1-\u5B57\u6BB5\u7684\u6570\u503C\u6709\u552F\u4E00\u6027\u7684\u9650\u5236" aria-hidden="true">#</a> 1. \u5B57\u6BB5\u7684\u6570\u503C\u6709\u552F\u4E00\u6027\u7684\u9650\u5236</h6><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220623154615702.png" alt="image-20220623154615702" style="float:left;"><blockquote><p>\u4E1A\u52A1\u4E0A\u5177\u6709\u552F\u4E00\u7279\u6027\u7684\u5B57\u6BB5\uFF0C\u5373\u4F7F\u662F\u7EC4\u5408\u5B57\u6BB5\uFF0C\u4E5F\u5FC5\u987B\u5EFA\u6210\u552F\u4E00\u7D22\u5F15\u3002\uFF08\u6765\u6E90\uFF1AAlibaba\uFF09</p><p>\u8BF4\u660E\uFF1A\u4E0D\u8981\u4EE5\u4E3A\u552F\u4E00\u7D22\u5F15\u5F71\u54CD\u4E86 insert \u901F\u5EA6\uFF0C\u8FD9\u4E2A\u901F\u5EA6\u635F\u8017\u53EF\u4EE5\u5FFD\u7565\uFF0C\u4F46\u63D0\u9AD8\u67E5\u627E\u901F\u5EA6\u662F\u660E\u663E\u7684\u3002</p></blockquote><h6 id="_2-\u9891\u7E41\u4F5C\u4E3A-where-\u67E5\u8BE2\u6761\u4EF6\u7684\u5B57\u6BB5" tabindex="-1"><a class="header-anchor" href="#_2-\u9891\u7E41\u4F5C\u4E3A-where-\u67E5\u8BE2\u6761\u4EF6\u7684\u5B57\u6BB5" aria-hidden="true">#</a> 2. \u9891\u7E41\u4F5C\u4E3A WHERE \u67E5\u8BE2\u6761\u4EF6\u7684\u5B57\u6BB5</h6><p>\u67D0\u4E2A\u5B57\u6BB5\u5728SELECT\u8BED\u53E5\u7684 WHERE \u6761\u4EF6\u4E2D\u7ECF\u5E38\u88AB\u4F7F\u7528\u5230\uFF0C\u90A3\u4E48\u5C31\u9700\u8981\u7ED9\u8FD9\u4E2A\u5B57\u6BB5\u521B\u5EFA\u7D22\u5F15\u4E86\u3002\u5C24\u5176\u662F\u5728 \u6570\u636E\u91CF\u5927\u7684\u60C5\u51B5\u4E0B\uFF0C\u521B\u5EFA\u666E\u901A\u7D22\u5F15\u5C31\u53EF\u4EE5\u5927\u5E45\u63D0\u5347\u6570\u636E\u67E5\u8BE2\u7684\u6548\u7387\u3002</p><p>\u6BD4\u5982student_info\u6570\u636E\u8868\uFF08\u542B100\u4E07\u6761\u6570\u636E\uFF09\uFF0C\u5047\u8BBE\u6211\u4EEC\u60F3\u8981\u67E5\u8BE2 student_id=123110 \u7684\u7528\u6237\u4FE1\u606F\u3002</p><h6 id="_3-\u7ECF\u5E38-group-by-\u548C-order-by-\u7684\u5217" tabindex="-1"><a class="header-anchor" href="#_3-\u7ECF\u5E38-group-by-\u548C-order-by-\u7684\u5217" aria-hidden="true">#</a> 3. \u7ECF\u5E38 GROUP BY \u548C ORDER BY \u7684\u5217</h6><p>\u7D22\u5F15\u5C31\u662F\u8BA9\u6570\u636E\u6309\u7167\u67D0\u79CD\u987A\u5E8F\u8FDB\u884C\u5B58\u50A8\u6216\u68C0\u7D22\uFF0C\u56E0\u6B64\u5F53\u6211\u4EEC\u4F7F\u7528 GROUP BY \u5BF9\u6570\u636E\u8FDB\u884C\u5206\u7EC4\u67E5\u8BE2\uFF0C\u6216\u8005\u4F7F\u7528 ORDER BY \u5BF9\u6570\u636E\u8FDB\u884C\u6392\u5E8F\u7684\u65F6\u5019\uFF0C\u5C31\u9700\u8981\u5BF9\u5206\u7EC4\u6216\u8005\u6392\u5E8F\u7684\u5B57\u6BB5\u8FDB\u884C\u7D22\u5F15 \u3002\u5982\u679C\u5F85\u6392\u5E8F\u7684\u5217\u6709\u591A\u4E2A\uFF0C\u90A3\u4E48\u53EF\u4EE5\u5728\u8FD9\u4E9B\u5217\u4E0A\u5EFA\u7ACB\u7EC4\u5408\u7D22\u5F15 \u3002</p><h6 id="_4-update\u3001delete-\u7684-where-\u6761\u4EF6\u5217" tabindex="-1"><a class="header-anchor" href="#_4-update\u3001delete-\u7684-where-\u6761\u4EF6\u5217" aria-hidden="true">#</a> 4. UPDATE\u3001DELETE \u7684 WHERE \u6761\u4EF6\u5217</h6><p>\u5BF9\u6570\u636E\u6309\u7167\u67D0\u4E2A\u6761\u4EF6\u8FDB\u884C\u67E5\u8BE2\u540E\u518D\u8FDB\u884C UPDATE \u6216 DELETE \u7684\u64CD\u4F5C\uFF0C\u5982\u679C\u5BF9 WHERE \u5B57\u6BB5\u521B\u5EFA\u4E86\u7D22\u5F15\uFF0C\u5C31\u80FD\u5927\u5E45\u63D0\u5347\u6548\u7387\u3002\u539F\u7406\u662F\u56E0\u4E3A\u6211\u4EEC\u9700\u8981\u5148\u6839\u636E WHERE \u6761\u4EF6\u5217\u68C0\u7D22\u51FA\u6765\u8FD9\u6761\u8BB0\u5F55\uFF0C\u7136\u540E\u518D\u5BF9\u5B83\u8FDB\u884C\u66F4\u65B0\u6216\u5220\u9664\u3002<strong>\u5982\u679C\u8FDB\u884C\u66F4\u65B0\u7684\u65F6\u5019\uFF0C\u66F4\u65B0\u7684\u5B57\u6BB5\u662F\u975E\u7D22\u5F15\u5B57\u6BB5\uFF0C\u63D0\u5347\u7684\u6548\u7387\u4F1A\u66F4\u660E\u663E\uFF0C\u8FD9\u662F\u56E0\u4E3A\u975E\u7D22\u5F15\u5B57\u6BB5\u66F4\u65B0\u4E0D\u9700\u8981\u5BF9\u7D22\u5F15\u8FDB\u884C\u7EF4\u62A4\u3002</strong></p><h6 id="_5-distinct-\u5B57\u6BB5\u9700\u8981\u521B\u5EFA\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_5-distinct-\u5B57\u6BB5\u9700\u8981\u521B\u5EFA\u7D22\u5F15" aria-hidden="true">#</a> 5.DISTINCT \u5B57\u6BB5\u9700\u8981\u521B\u5EFA\u7D22\u5F15</h6><p>\u6709\u65F6\u5019\u6211\u4EEC\u9700\u8981\u5BF9\u67D0\u4E2A\u5B57\u6BB5\u8FDB\u884C\u53BB\u91CD\uFF0C\u4F7F\u7528 DISTINCT\uFF0C\u90A3\u4E48\u5BF9\u8FD9\u4E2A\u5B57\u6BB5\u521B\u5EFA\u7D22\u5F15\uFF0C\u4E5F\u4F1A\u63D0\u5347\u67E5\u8BE2\u6548\u7387\u3002</p><p>\u6BD4\u5982\uFF0C\u6211\u4EEC\u60F3\u8981\u67E5\u8BE2\u8BFE\u7A0B\u8868\u4E2D\u4E0D\u540C\u7684 student_id \u90FD\u6709\u54EA\u4E9B\uFF0C\u5982\u679C\u6211\u4EEC\u6CA1\u6709\u5BF9 student_id \u521B\u5EFA\u7D22\u5F15\uFF0C\u6267\u884C SQL \u8BED\u53E5\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT DISTINCT(student_id) FROM \`student_info\`;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\uFF08600637 \u6761\u8BB0\u5F55\uFF0C\u8FD0\u884C\u65F6\u95F4 0.683s \uFF09</p><p>\u5982\u679C\u6211\u4EEC\u5BF9 student_id \u521B\u5EFA\u7D22\u5F15\uFF0C\u518D\u6267\u884C SQL \u8BED\u53E5\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT DISTINCT(student_id) FROM \`student_info\`;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\uFF08600637 \u6761\u8BB0\u5F55\uFF0C\u8FD0\u884C\u65F6\u95F4 0.010s \uFF09</p><p>\u4F60\u80FD\u770B\u5230 SQL \u67E5\u8BE2\u6548\u7387\u6709\u4E86\u63D0\u5347\uFF0C\u540C\u65F6\u663E\u793A\u51FA\u6765\u7684 student_id \u8FD8\u662F\u6309\u7167\u9012\u589E\u7684\u987A\u5E8F \u8FDB\u884C\u5C55\u793A\u7684\u3002\u8FD9\u662F\u56E0\u4E3A\u7D22\u5F15\u4F1A\u5BF9\u6570\u636E\u6309\u7167\u67D0\u79CD\u987A\u5E8F\u8FDB\u884C\u6392\u5E8F\uFF0C\u6240\u4EE5\u5728\u53BB\u91CD\u7684\u65F6\u5019\u4E5F\u4F1A\u5FEB\u5F88\u591A\u3002</p><h6 id="_6-\u591A\u8868-join-\u8FDE\u63A5\u64CD\u4F5C\u65F6-\u521B\u5EFA\u7D22\u5F15\u6CE8\u610F\u4E8B\u9879" tabindex="-1"><a class="header-anchor" href="#_6-\u591A\u8868-join-\u8FDE\u63A5\u64CD\u4F5C\u65F6-\u521B\u5EFA\u7D22\u5F15\u6CE8\u610F\u4E8B\u9879" aria-hidden="true">#</a> 6. \u591A\u8868 JOIN \u8FDE\u63A5\u64CD\u4F5C\u65F6\uFF0C\u521B\u5EFA\u7D22\u5F15\u6CE8\u610F\u4E8B\u9879</h6><p>\u9996\u5148\uFF0C <code>\u8FDE\u63A5\u8868\u7684\u6570\u91CF\u5C3D\u91CF\u4E0D\u8981\u8D85\u8FC7 3 \u5F20</code> \uFF0C\u56E0\u4E3A\u6BCF\u589E\u52A0\u4E00\u5F20\u8868\u5C31\u76F8\u5F53\u4E8E\u589E\u52A0\u4E86\u4E00\u6B21\u5D4C\u5957\u7684\u5FAA\u73AF\uFF0C\u6570\u91CF\u7EA7\u589E \u957F\u4F1A\u975E\u5E38\u5FEB\uFF0C\u4E25\u91CD\u5F71\u54CD\u67E5\u8BE2\u7684\u6548\u7387\u3002</p><p>\u5176\u6B21\uFF0C <code>\u5BF9 WHERE \u6761\u4EF6\u521B\u5EFA\u7D22\u5F15</code> \uFF0C\u56E0\u4E3A WHERE \u624D\u662F\u5BF9\u6570\u636E\u6761\u4EF6\u7684\u8FC7\u6EE4\u3002\u5982\u679C\u5728\u6570\u636E\u91CF\u975E\u5E38\u5927\u7684\u60C5\u51B5\u4E0B\uFF0C \u6CA1\u6709 WHERE \u6761\u4EF6\u8FC7\u6EE4\u662F\u975E\u5E38\u53EF\u6015\u7684\u3002</p><p>\u6700\u540E\uFF0C <code>\u5BF9\u7528\u4E8E\u8FDE\u63A5\u7684\u5B57\u6BB5\u521B\u5EFA\u7D22\u5F15</code> \uFF0C\u5E76\u4E14\u8BE5\u5B57\u6BB5\u5728\u591A\u5F20\u8868\u4E2D\u7684 \u7C7B\u578B\u5FC5\u987B\u4E00\u81F4 \u3002\u6BD4\u5982 course_id \u5728 student_info \u8868\u548C course \u8868\u4E2D\u90FD\u4E3A int(11) \u7C7B\u578B\uFF0C\u800C\u4E0D\u80FD\u4E00\u4E2A\u4E3A int \u53E6\u4E00\u4E2A\u4E3A varchar \u7C7B\u578B\u3002</p><p>\u4E3E\u4E2A\u4F8B\u5B50\uFF0C\u5982\u679C\u6211\u4EEC\u53EA\u5BF9 student_id \u521B\u5EFA\u7D22\u5F15\uFF0C\u6267\u884C SQL \u8BED\u53E5\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT s.course_id, name, s.student_id, c.course_name
FROM student_info s JOIN course c
ON s.course_id = c.course_id
WHERE name = &#39;462eed7ac6e791292a79&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\uFF081 \u6761\u6570\u636E\uFF0C\u8FD0\u884C\u65F6\u95F4 0.189s \uFF09</p><p>\u8FD9\u91CC\u6211\u4EEC\u5BF9 name \u521B\u5EFA\u7D22\u5F15\uFF0C\u518D\u6267\u884C\u4E0A\u9762\u7684 SQL \u8BED\u53E5\uFF0C\u8FD0\u884C\u65F6\u95F4\u4E3A 0.002s \u3002</p><h6 id="_7-\u4F7F\u7528\u5217\u7684\u7C7B\u578B\u5C0F\u7684\u521B\u5EFA\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_7-\u4F7F\u7528\u5217\u7684\u7C7B\u578B\u5C0F\u7684\u521B\u5EFA\u7D22\u5F15" aria-hidden="true">#</a> 7. \u4F7F\u7528\u5217\u7684\u7C7B\u578B\u5C0F\u7684\u521B\u5EFA\u7D22\u5F15</h6><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220623175306282.png" alt="image-20220623175306282" style="float:left;"><h6 id="_8-\u4F7F\u7528\u5B57\u7B26\u4E32\u524D\u7F00\u521B\u5EFA\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_8-\u4F7F\u7528\u5B57\u7B26\u4E32\u524D\u7F00\u521B\u5EFA\u7D22\u5F15" aria-hidden="true">#</a> 8. \u4F7F\u7528\u5B57\u7B26\u4E32\u524D\u7F00\u521B\u5EFA\u7D22\u5F15</h6><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220623175513439.png" alt="image-20220623175513439" style="float:left;"><p>\u521B\u5EFA\u4E00\u5F20\u5546\u6237\u8868\uFF0C\u56E0\u4E3A\u5730\u5740\u5B57\u6BB5\u6BD4\u8F83\u957F\uFF0C\u5728\u5730\u5740\u5B57\u6BB5\u4E0A\u5EFA\u7ACB\u524D\u7F00\u7D22\u5F15</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>create table shop(address varchar(120) not null);
alter table shop add index(address(12));
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u95EE\u9898\u662F\uFF0C\u622A\u53D6\u591A\u5C11\u5462\uFF1F\u622A\u53D6\u5F97\u591A\u4E86\uFF0C\u8FBE\u4E0D\u5230\u8282\u7701\u7D22\u5F15\u5B58\u50A8\u7A7A\u95F4\u7684\u76EE\u7684\uFF1B\u622A\u53D6\u5F97\u5C11\u4E86\uFF0C\u91CD\u590D\u5185\u5BB9\u592A\u591A\uFF0C\u5B57 \u6BB5\u7684\u6563\u5217\u5EA6(\u9009\u62E9\u6027)\u4F1A\u964D\u4F4E\u3002\u600E\u4E48\u8BA1\u7B97\u4E0D\u540C\u7684\u957F\u5EA6\u7684\u9009\u62E9\u6027\u5462\uFF1F</p><p>\u5148\u770B\u4E00\u4E0B\u5B57\u6BB5\u5728\u5168\u90E8\u6570\u636E\u4E2D\u7684\u9009\u62E9\u5EA6\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>select count(distinct address) / count(*) from shop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u901A\u8FC7\u4E0D\u540C\u957F\u5EA6\u53BB\u8BA1\u7B97\uFF0C\u4E0E\u5168\u8868\u7684\u9009\u62E9\u6027\u5BF9\u6BD4\uFF1A</p><p>\u516C\u5F0F\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>count(distinct left(\u5217\u540D, \u7D22\u5F15\u957F\u5EA6))/count(*)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4F8B\u5982\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>select count(distinct left(address,10)) / count(*) as sub10, -- \u622A\u53D6\u524D10\u4E2A\u5B57\u7B26\u7684\u9009\u62E9\u5EA6
count(distinct left(address,15)) / count(*) as sub11, -- \u622A\u53D6\u524D15\u4E2A\u5B57\u7B26\u7684\u9009\u62E9\u5EA6
count(distinct left(address,20)) / count(*) as sub12, -- \u622A\u53D6\u524D20\u4E2A\u5B57\u7B26\u7684\u9009\u62E9\u5EA6
count(distinct left(address,25)) / count(*) as sub13 -- \u622A\u53D6\u524D25\u4E2A\u5B57\u7B26\u7684\u9009\u62E9\u5EA6
from shop;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u8D8A\u63A5\u8FD1\u4E8E1\u8D8A\u597D\uFF0C\u8BF4\u660E\u8D8A\u6709\u533A\u5206\u5EA6</p></blockquote><p><strong>\u5F15\u7533\u53E6\u4E00\u4E2A\u95EE\u9898\uFF1A\u7D22\u5F15\u5217\u524D\u7F00\u5BF9\u6392\u5E8F\u7684\u5F71\u54CD</strong></p><p>\u5982\u679C\u4F7F\u7528\u4E86\u7D22\u5F15\u5217\u524D\u7F00\uFF0C\u6BD4\u65B9\u8BF4\u524D\u8FB9\u53EA\u628Aaddress\u5217\u7684 <code>\u524D12\u4E2A\u5B57\u7B26</code> \u653E\u5230\u4E86\u4E8C\u7EA7\u7D22\u5F15\u4E2D\uFF0C\u4E0B\u8FB9\u8FD9\u4E2A\u67E5\u8BE2\u53EF\u80FD\u5C31\u6709\u70B9\u5C34\u5C2C\u4E86\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT * FROM shop
ORDER BY address
LIMIT 12;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u56E0\u4E3A\u4E8C\u7EA7\u7D22\u5F15\u4E2D\u4E0D\u5305\u542B\u5B8C\u6574\u7684address\u5217\u4FE1\u606F\uFF0C\u6240\u4EE5\u65E0\u6CD5\u5BF9\u524D12\u4E2A\u5B57\u7B26\u76F8\u540C\uFF0C\u540E\u8FB9\u7684\u5B57\u7B26\u4E0D\u540C\u7684\u8BB0\u5F55\u8FDB\u884C\u6392\u5E8F\uFF0C\u4E5F\u5C31\u662F\u4F7F\u7528\u7D22\u5F15\u5217\u524D\u7F00\u7684\u65B9\u5F0F <code>\u65E0\u6CD5\u652F\u6301\u4F7F\u7528\u7D22\u5F15\u6392\u5E8F</code> \uFF0C\u53EA\u80FD\u4F7F\u7528\u6587\u4EF6\u6392\u5E8F\u3002</p><p><strong>\u62D3\u5C55\uFF1AAlibaba\u300AJava\u5F00\u53D1\u624B\u518C\u300B</strong></p><p>\u3010 \u5F3A\u5236 \u3011\u5728 varchar \u5B57\u6BB5\u4E0A\u5EFA\u7ACB\u7D22\u5F15\u65F6\uFF0C\u5FC5\u987B\u6307\u5B9A\u7D22\u5F15\u957F\u5EA6\uFF0C\u6CA1\u5FC5\u8981\u5BF9\u5168\u5B57\u6BB5\u5EFA\u7ACB\u7D22\u5F15\uFF0C\u6839\u636E\u5B9E\u9645\u6587\u672C \u533A\u5206\u5EA6\u51B3\u5B9A\u7D22\u5F15\u957F\u5EA6\u3002</p><p>\u8BF4\u660E\uFF1A\u7D22\u5F15\u7684\u957F\u5EA6\u4E0E\u533A\u5206\u5EA6\u662F\u4E00\u5BF9\u77DB\u76FE\u4F53\uFF0C\u4E00\u822C\u5BF9\u5B57\u7B26\u4E32\u7C7B\u578B\u6570\u636E\uFF0C\u957F\u5EA6\u4E3A 20 \u7684\u7D22\u5F15\uFF0C\u533A\u5206\u5EA6\u4F1A\u9AD8\u8FBE 90% \u4EE5\u4E0A \uFF0C\u53EF\u4EE5\u4F7F\u7528 count(distinct left(\u5217\u540D, \u7D22\u5F15\u957F\u5EA6))/count(*)\u7684\u533A\u5206\u5EA6\u6765\u786E\u5B9A\u3002</p><h6 id="_9-\u533A\u5206\u5EA6\u9AD8-\u6563\u5217\u6027\u9AD8-\u7684\u5217\u9002\u5408\u4F5C\u4E3A\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_9-\u533A\u5206\u5EA6\u9AD8-\u6563\u5217\u6027\u9AD8-\u7684\u5217\u9002\u5408\u4F5C\u4E3A\u7D22\u5F15" aria-hidden="true">#</a> 9. \u533A\u5206\u5EA6\u9AD8(\u6563\u5217\u6027\u9AD8)\u7684\u5217\u9002\u5408\u4F5C\u4E3A\u7D22\u5F15</h6><p><code>\u5217\u7684\u57FA\u6570</code> \u6307\u7684\u662F\u67D0\u4E00\u5217\u4E2D\u4E0D\u91CD\u590D\u6570\u636E\u7684\u4E2A\u6570\uFF0C\u6BD4\u65B9\u8BF4\u67D0\u4E2A\u5217\u5305\u542B\u503C <code>2, 5, 8, 2, 5, 8, 2, 5, 8</code>\uFF0C\u867D\u7136\u6709<code>9</code>\u6761\u8BB0\u5F55\uFF0C\u4F46\u8BE5\u5217\u7684\u57FA\u6570\u5374\u662F3\u3002\u4E5F\u5C31\u662F\u8BF4**\u5728\u8BB0\u5F55\u884C\u6570\u4E00\u5B9A\u7684\u60C5\u51B5\u4E0B\uFF0C\u5217\u7684\u57FA\u6570\u8D8A\u5927\uFF0C\u8BE5\u5217\u4E2D\u7684\u503C\u8D8A\u5206\u6563\uFF1B\u5217\u7684\u57FA\u6570\u8D8A\u5C0F\uFF0C\u8BE5\u5217\u4E2D\u7684\u503C\u8D8A\u96C6\u4E2D\u3002**\u8FD9\u4E2A\u5217\u7684\u57FA\u6570\u6307\u6807\u975E\u5E38\u91CD\u8981\uFF0C\u76F4\u63A5\u5F71\u54CD\u6211\u4EEC\u662F\u5426\u80FD\u6709\u6548\u7684\u5229\u7528\u7D22\u5F15\u3002\u6700\u597D\u4E3A\u5217\u7684\u57FA\u6570\u5927\u7684\u5217\u7B80\u5386\u7D22\u5F15\uFF0C\u4E3A\u57FA\u6570\u592A\u5C0F\u7684\u5217\u7684\u7B80\u5386\u7D22\u5F15\u6548\u679C\u53EF\u80FD\u4E0D\u597D\u3002</p><p>\u53EF\u4EE5\u4F7F\u7528\u516C\u5F0F<code>select count(distinct a) / count(*) from t1</code> \u8BA1\u7B97\u533A\u5206\u5EA6\uFF0C\u8D8A\u63A5\u8FD11\u8D8A\u597D\uFF0C\u4E00\u822C\u8D85\u8FC733%\u5C31\u7B97\u6BD4\u8F83\u9AD8\u6548\u7684\u7D22\u5F15\u4E86\u3002</p><p>\u6269\u5C55\uFF1A\u8054\u5408\u7D22\u5F15\u628A\u533A\u5206\u5EA6\u641E(\u6563\u5217\u6027\u9AD8)\u7684\u5217\u653E\u5728\u524D\u9762\u3002</p><h6 id="_10-\u4F7F\u7528\u6700\u9891\u7E41\u7684\u5217\u653E\u5230\u8054\u5408\u7D22\u5F15\u7684\u5DE6\u4FA7" tabindex="-1"><a class="header-anchor" href="#_10-\u4F7F\u7528\u6700\u9891\u7E41\u7684\u5217\u653E\u5230\u8054\u5408\u7D22\u5F15\u7684\u5DE6\u4FA7" aria-hidden="true">#</a> 10. \u4F7F\u7528\u6700\u9891\u7E41\u7684\u5217\u653E\u5230\u8054\u5408\u7D22\u5F15\u7684\u5DE6\u4FA7</h6><p>\u8FD9\u6837\u4E5F\u53EF\u4EE5\u8F83\u5C11\u7684\u5EFA\u7ACB\u4E00\u4E9B\u7D22\u5F15\u3002\u540C\u65F6\uFF0C\u7531\u4E8E&quot;\u6700\u5DE6\u524D\u7F00\u539F\u5219&quot;\uFF0C\u53EF\u4EE5\u589E\u52A0\u8054\u5408\u7D22\u5F15\u7684\u4F7F\u7528\u7387\u3002</p><h6 id="_11-\u5728\u591A\u4E2A\u5B57\u6BB5\u90FD\u8981\u521B\u5EFA\u7D22\u5F15\u7684\u60C5\u51B5\u4E0B-\u8054\u5408\u7D22\u5F15\u4F18\u4E8E\u5355\u503C\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_11-\u5728\u591A\u4E2A\u5B57\u6BB5\u90FD\u8981\u521B\u5EFA\u7D22\u5F15\u7684\u60C5\u51B5\u4E0B-\u8054\u5408\u7D22\u5F15\u4F18\u4E8E\u5355\u503C\u7D22\u5F15" aria-hidden="true">#</a> 11. \u5728\u591A\u4E2A\u5B57\u6BB5\u90FD\u8981\u521B\u5EFA\u7D22\u5F15\u7684\u60C5\u51B5\u4E0B\uFF0C\u8054\u5408\u7D22\u5F15\u4F18\u4E8E\u5355\u503C\u7D22\u5F15</h6><h5 id="_3-3-\u9650\u5236\u7D22\u5F15\u7684\u6570\u76EE" tabindex="-1"><a class="header-anchor" href="#_3-3-\u9650\u5236\u7D22\u5F15\u7684\u6570\u76EE" aria-hidden="true">#</a> 3.3 \u9650\u5236\u7D22\u5F15\u7684\u6570\u76EE</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220627151947786.png" alt="image-20220627151947786" style="float:left;"><h5 id="_3-4-\u54EA\u4E9B\u60C5\u51B5\u4E0D\u9002\u5408\u521B\u5EFA\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_3-4-\u54EA\u4E9B\u60C5\u51B5\u4E0D\u9002\u5408\u521B\u5EFA\u7D22\u5F15" aria-hidden="true">#</a> 3.4 \u54EA\u4E9B\u60C5\u51B5\u4E0D\u9002\u5408\u521B\u5EFA\u7D22\u5F15</h5><h6 id="_1-\u5728where\u4E2D\u4F7F\u7528\u4E0D\u5230\u7684\u5B57\u6BB5-\u4E0D\u8981\u8BBE\u7F6E\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_1-\u5728where\u4E2D\u4F7F\u7528\u4E0D\u5230\u7684\u5B57\u6BB5-\u4E0D\u8981\u8BBE\u7F6E\u7D22\u5F15" aria-hidden="true">#</a> 1. \u5728where\u4E2D\u4F7F\u7528\u4E0D\u5230\u7684\u5B57\u6BB5\uFF0C\u4E0D\u8981\u8BBE\u7F6E\u7D22\u5F15</h6><p>WHERE\u6761\u4EF6 (\u5305\u62EC GROUP BY\u3001ORDER BY) \u91CC\u7528\u4E0D\u5230\u7684\u5B57\u6BB5\u4E0D\u9700\u8981\u521B\u5EFA\u7D22\u5F15\uFF0C\u7D22\u5F15\u7684\u4EF7\u503C\u662F\u5FEB\u901F\u5B9A\u4F4D\uFF0C\u5982\u679C\u8D77\u4E0D\u5230\u5B9A\u4F4D\u7684\u5B57\u6BB5\u901A\u5E38\u662F\u4E0D\u9700\u8981\u521B\u5EFA\u7D22\u5F15\u7684\u3002\u4E3E\u4E2A\u4F8B\u5B50\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT course_id, student_id, create_time
FROM student_info
WHERE student_id = 41251;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u56E0\u4E3A\u6211\u4EEC\u662F\u6309\u7167 student_id \u6765\u8FDB\u884C\u68C0\u7D22\u7684\uFF0C\u6240\u4EE5\u4E0D\u9700\u8981\u5BF9\u5176\u4ED6\u5B57\u6BB5\u521B\u5EFA\u7D22\u5F15\uFF0C\u5373\u4F7F\u8FD9\u4E9B\u5B57\u6BB5\u51FA\u73B0\u5728SELECT\u5B57\u6BB5\u4E2D\u3002</p><h6 id="_2-\u6570\u636E\u91CF\u5C0F\u7684\u8868\u6700\u597D\u4E0D\u8981\u4F7F\u7528\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_2-\u6570\u636E\u91CF\u5C0F\u7684\u8868\u6700\u597D\u4E0D\u8981\u4F7F\u7528\u7D22\u5F15" aria-hidden="true">#</a> 2. \u6570\u636E\u91CF\u5C0F\u7684\u8868\u6700\u597D\u4E0D\u8981\u4F7F\u7528\u7D22\u5F15</h6><p>\u5982\u679C\u8868\u8BB0\u5F55\u592A\u5C11\uFF0C\u6BD4\u5982\u5C11\u4E8E1000\u4E2A\uFF0C\u90A3\u4E48\u662F\u4E0D\u9700\u8981\u521B\u5EFA\u7D22\u5F15\u7684\u3002\u8868\u8BB0\u5F55\u592A\u5C11\uFF0C\u662F\u5426\u521B\u5EFA\u7D22\u5F15 <code>\u5BF9\u67E5\u8BE2\u6548\u7387\u7684\u5F71\u54CD\u5E76\u4E0D\u5927</code>\u3002\u751A\u81F3\u8BF4\uFF0C\u67E5\u8BE2\u82B1\u8D39\u7684\u65F6\u95F4\u53EF\u80FD\u6BD4\u904D\u5386\u7D22\u5F15\u7684\u65F6\u95F4\u8FD8\u8981\u77ED\uFF0C\u7D22\u5F15\u53EF\u80FD\u4E0D\u4F1A\u4EA7\u751F\u4F18\u5316\u6548\u679C\u3002</p><p>\u4E3E\u4F8B\uFF1A\u521B\u5EFA\u88681\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE t_without_index(
a INT PRIMARY KEY AUTO_INCREMENT,
b INT
);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u63D0\u4F9B\u5B58\u50A8\u8FC7\u7A0B1\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#\u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0B
DELIMITER //
CREATE PROCEDURE t_wout_insert()
BEGIN
    DECLARE i INT DEFAULT 1;
    WHILE i &lt;= 900
    DO
        INSERT INTO t_without_index(b) SELECT RAND()*10000;
        SET i = i + 1;
    END WHILE;
    COMMIT;
END //
DELIMITER ;

#\u8C03\u7528
CALL t_wout_insert()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u521B\u5EFA\u88682\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE t_with_index(
a INT PRIMARY KEY AUTO_INCREMENT,
b INT,
INDEX idx_b(b)
);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0B2\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#\u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0B
DELIMITER //
CREATE PROCEDURE t_with_insert()
BEGIN
    DECLARE i INT DEFAULT 1;
    WHILE i &lt;= 900
    DO
        INSERT INTO t_with_index(b) SELECT RAND()*10000;
        SET i = i + 1;
    END WHILE;
    COMMIT;
END //
DELIMITER ;

#\u8C03\u7528
CALL t_with_insert();
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u67E5\u8BE2\u5BF9\u6BD4\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; select * from t_without_index where b = 9879;
+------+------+
| a | b |
+------+------+
| 1242 | 9879 |
+------+------+
1 row in set (0.00 sec)

mysql&gt; select * from t_with_index where b = 9879;
+-----+------+
| a | b |
+-----+------+
| 112 | 9879 |
+-----+------+
1 row in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F60\u80FD\u770B\u5230\u8FD0\u884C\u7ED3\u679C\u76F8\u540C\uFF0C\u4F46\u662F\u5728\u6570\u636E\u91CF\u4E0D\u5927\u7684\u60C5\u51B5\u4E0B\uFF0C\u7D22\u5F15\u5C31\u53D1\u6325\u4E0D\u51FA\u4F5C\u7528\u4E86\u3002</p><blockquote><p>\u7ED3\u8BBA\uFF1A\u5728\u6570\u636E\u8868\u4E2D\u7684\u6570\u636E\u884C\u6570\u6BD4\u8F83\u5C11\u7684\u60C5\u51B5\u4E0B\uFF0C\u6BD4\u5982\u4E0D\u5230 1000 \u884C\uFF0C\u662F\u4E0D\u9700\u8981\u521B\u5EFA\u7D22\u5F15\u7684\u3002</p></blockquote><h6 id="_3-\u6709\u5927\u91CF\u91CD\u590D\u6570\u636E\u7684\u5217\u4E0A\u4E0D\u8981\u5EFA\u7ACB\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_3-\u6709\u5927\u91CF\u91CD\u590D\u6570\u636E\u7684\u5217\u4E0A\u4E0D\u8981\u5EFA\u7ACB\u7D22\u5F15" aria-hidden="true">#</a> 3. \u6709\u5927\u91CF\u91CD\u590D\u6570\u636E\u7684\u5217\u4E0A\u4E0D\u8981\u5EFA\u7ACB\u7D22\u5F15</h6><p>\u5728\u6761\u4EF6\u8868\u8FBE\u5F0F\u4E2D\u7ECF\u5E38\u7528\u5230\u7684\u4E0D\u540C\u503C\u8F83\u591A\u7684\u5217\u4E0A\u5EFA\u7ACB\u7D22\u5F15\uFF0C\u4F46\u5B57\u6BB5\u4E2D\u5982\u679C\u6709\u5927\u91CF\u91CD\u590D\u6570\u636E\uFF0C\u4E5F\u4E0D\u7528\u521B\u5EFA\u7D22\u5F15\u3002\u6BD4\u5982\u5728\u5B66\u751F\u8868\u7684&quot;\u6027\u522B&quot;\u5B57\u6BB5\u4E0A\u53EA\u6709\u201C\u7537\u201D\u4E0E\u201C\u5973\u201D\u4E24\u4E2A\u4E0D\u540C\u503C\uFF0C\u56E0\u6B64\u65E0\u987B\u5EFA\u7ACB\u7D22\u5F15\u3002\u5982\u679C\u5EFA\u7ACB\u7D22\u5F15\uFF0C\u4E0D\u4F46\u4E0D\u4F1A\u63D0\u9AD8\u67E5\u8BE2\u6548\u7387\uFF0C\u53CD\u800C\u4F1A<code>\u4E25\u91CD\u964D\u4F4E\u6570\u636E\u66F4\u65B0\u901F\u5EA6</code>\u3002</p><p>\u4E3E\u4F8B1\uFF1A\u8981\u5728 100 \u4E07\u884C\u6570\u636E\u4E2D\u67E5\u627E\u5176\u4E2D\u7684 50 \u4E07\u884C\uFF08\u6BD4\u5982\u6027\u522B\u4E3A\u7537\u7684\u6570\u636E\uFF09\uFF0C\u4E00\u65E6\u521B\u5EFA\u4E86\u7D22\u5F15\uFF0C\u4F60\u9700\u8981\u5148 \u8BBF\u95EE 50 \u4E07\u6B21\u7D22\u5F15\uFF0C\u7136\u540E\u518D\u8BBF\u95EE 50 \u4E07\u6B21\u6570\u636E\u8868\uFF0C\u8FD9\u6837\u52A0\u8D77\u6765\u7684\u5F00\u9500\u6BD4\u4E0D\u4F7F\u7528\u7D22\u5F15\u53EF\u80FD\u8FD8\u8981\u5927\u3002</p><p>\u4E3E\u4F8B2\uFF1A\u5047\u8BBE\u6709\u4E00\u4E2A\u5B66\u751F\u8868\uFF0C\u5B66\u751F\u603B\u6570\u4E3A 100 \u4E07\u4EBA\uFF0C\u7537\u6027\u53EA\u6709 10 \u4E2A\u4EBA\uFF0C\u4E5F\u5C31\u662F\u5360\u603B\u4EBA\u53E3\u7684 10 \u4E07\u5206\u4E4B 1\u3002</p><p>\u5B66\u751F\u8868 student_gender \u7ED3\u6784\u5982\u4E0B\u3002\u5176\u4E2D\u6570\u636E\u8868\u4E2D\u7684 student_gender \u5B57\u6BB5\u53D6\u503C\u4E3A 0 \u6216 1\uFF0C0 \u4EE3\u8868\u5973\u6027\uFF0C1 \u4EE3\u8868\u7537\u6027\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE student_gender(
    student_id INT(11) NOT NULL,
    student_name VARCHAR(50) NOT NULL,
    student_gender TINYINT(1) NOT NULL,
    PRIMARY KEY(student_id)
)ENGINE = INNODB;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u6211\u4EEC\u8981\u7B5B\u9009\u51FA\u8FD9\u4E2A\u5B66\u751F\u8868\u4E2D\u7684\u7537\u6027\uFF0C\u53EF\u4EE5\u4F7F\u7528\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT * FROM student_gender WHERE student_gender = 1;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>\u7ED3\u8BBA\uFF1A\u5F53\u6570\u636E\u91CD\u590D\u5EA6\u5927\uFF0C\u6BD4\u5982 \u9AD8\u4E8E 10% \u7684\u65F6\u5019\uFF0C\u4E5F\u4E0D\u9700\u8981\u5BF9\u8FD9\u4E2A\u5B57\u6BB5\u4F7F\u7528\u7D22\u5F15\u3002</p></blockquote><h6 id="_4-\u907F\u514D\u5BF9\u7ECF\u5E38\u66F4\u65B0\u7684\u8868\u521B\u5EFA\u8FC7\u591A\u7684\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_4-\u907F\u514D\u5BF9\u7ECF\u5E38\u66F4\u65B0\u7684\u8868\u521B\u5EFA\u8FC7\u591A\u7684\u7D22\u5F15" aria-hidden="true">#</a> 4. \u907F\u514D\u5BF9\u7ECF\u5E38\u66F4\u65B0\u7684\u8868\u521B\u5EFA\u8FC7\u591A\u7684\u7D22\u5F15</h6><p>\u7B2C\u4E00\u5C42\u542B\u4E49\uFF1A\u9891\u7E41\u66F4\u65B0\u7684\u5B57\u6BB5\u4E0D\u4E00\u5B9A\u8981\u521B\u5EFA\u7D22\u5F15\u3002\u56E0\u4E3A\u66F4\u65B0\u6570\u636E\u7684\u65F6\u5019\uFF0C\u4E5F\u9700\u8981\u66F4\u65B0\u7D22\u5F15\uFF0C\u5982\u679C\u7D22\u5F15\u592A\u591A\uFF0C\u5728\u66F4\u65B0\u7D22\u5F15\u7684\u65F6\u5019\u4E5F\u4F1A\u9020\u6210\u8D1F\u62C5\uFF0C\u4ECE\u800C\u5F71\u54CD\u6548\u7387\u3002</p><p>\u7B2C\u4E8C\u5C42\u542B\u4E49\uFF1A\u907F\u514D\u5BF9\u7ECF\u5E38\u66F4\u65B0\u7684\u8868\u521B\u5EFA\u8FC7\u591A\u7684\u7D22\u5F15\uFF0C\u5E76\u4E14\u7D22\u5F15\u4E2D\u7684\u5217\u5C3D\u53EF\u80FD\u5C11\u3002\u6B64\u65F6\uFF0C\u867D\u7136\u63D0\u9AD8\u4E86\u67E5\u8BE2\u901F\u5EA6\uFF0C\u540C\u65F6\u5374\u964D\u4F4E\u66F4\u65B0\u8868\u7684\u901F\u5EA6\u3002</p><h6 id="_5-\u4E0D\u5EFA\u8BAE\u7528\u65E0\u5E8F\u7684\u503C\u4F5C\u4E3A\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_5-\u4E0D\u5EFA\u8BAE\u7528\u65E0\u5E8F\u7684\u503C\u4F5C\u4E3A\u7D22\u5F15" aria-hidden="true">#</a> 5. \u4E0D\u5EFA\u8BAE\u7528\u65E0\u5E8F\u7684\u503C\u4F5C\u4E3A\u7D22\u5F15</h6><p>\u4F8B\u5982\u8EAB\u4EFD\u8BC1\u3001UUID(\u5728\u7D22\u5F15\u6BD4\u8F83\u65F6\u9700\u8981\u8F6C\u4E3AASCII\uFF0C\u5E76\u4E14\u63D2\u5165\u65F6\u53EF\u80FD\u9020\u6210\u9875\u5206\u88C2)\u3001MD5\u3001HASH\u3001\u65E0\u5E8F\u957F\u5B57 \u7B26\u4E32\u7B49\u3002</p><h6 id="_6-\u5220\u9664\u4E0D\u518D\u4F7F\u7528\u6216\u8005\u5F88\u5C11\u4F7F\u7528\u7684\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_6-\u5220\u9664\u4E0D\u518D\u4F7F\u7528\u6216\u8005\u5F88\u5C11\u4F7F\u7528\u7684\u7D22\u5F15" aria-hidden="true">#</a> 6. \u5220\u9664\u4E0D\u518D\u4F7F\u7528\u6216\u8005\u5F88\u5C11\u4F7F\u7528\u7684\u7D22\u5F15</h6><p>\u8868\u4E2D\u7684\u6570\u636E\u88AB\u5927\u91CF\u66F4\u65B0\uFF0C\u6216\u8005\u6570\u636E\u7684\u4F7F\u7528\u65B9\u5F0F\u88AB\u6539\u53D8\u540E\uFF0C\u539F\u6709\u7684\u4E00\u4E9B\u7D22\u5F15\u53EF\u80FD\u4E0D\u518D\u9700\u8981\u3002\u6570\u636E\u5E93\u7BA1\u7406\u5458\u5E94\u5F53\u5B9A\u671F\u627E\u51FA\u8FD9\u4E9B\u7D22\u5F15\uFF0C\u5C06\u5B83\u4EEC\u5220\u9664\uFF0C\u4ECE\u800C\u51CF\u5C11\u7D22\u5F15\u5BF9\u66F4\u65B0\u64CD\u4F5C\u7684\u5F71\u54CD\u3002</p><h6 id="_7-\u4E0D\u8981\u5B9A\u4E49\u592F\u4F59\u6216\u91CD\u590D\u7684\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_7-\u4E0D\u8981\u5B9A\u4E49\u592F\u4F59\u6216\u91CD\u590D\u7684\u7D22\u5F15" aria-hidden="true">#</a> 7. \u4E0D\u8981\u5B9A\u4E49\u592F\u4F59\u6216\u91CD\u590D\u7684\u7D22\u5F15</h6><p>\u2460 \u5197\u4F59\u7D22\u5F15</p><p>\u4E3E\u4F8B\uFF1A\u5EFA\u8868\u8BED\u53E5\u5982\u4E0B</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE person_info(
    id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL,
    birthday DATE NOT NULL,
    phone_number CHAR(11) NOT NULL,
    country varchar(100) NOT NULL,
    PRIMARY KEY (id),
    KEY idx_name_birthday_phone_number (name(10), birthday, phone_number),
    KEY idx_name (name(10))
);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u77E5\u9053\uFF0C\u901A\u8FC7 idx_name_birthday_phone_number \u7D22\u5F15\u5C31\u53EF\u4EE5\u5BF9 name \u5217\u8FDB\u884C\u5FEB\u901F\u641C\u7D22\uFF0C\u518D\u521B\u5EFA\u4E00 \u4E2A\u4E13\u95E8\u9488\u5BF9 name \u5217\u7684\u7D22\u5F15\u5C31\u7B97\u662F\u4E00\u4E2A \u5197\u4F59\u7D22\u5F15 \uFF0C\u7EF4\u62A4\u8FD9\u4E2A\u7D22\u5F15\u53EA\u4F1A\u589E\u52A0\u7EF4\u62A4\u7684\u6210\u672C\uFF0C\u5E76\u4E0D\u4F1A\u5BF9\u641C\u7D22\u6709 \u4EC0\u4E48\u597D\u5904\u3002</p><p>\u2461 \u91CD\u590D\u7D22\u5F15</p><p>\u53E6\u4E00\u79CD\u60C5\u51B5\uFF0C\u6211\u4EEC\u53EF\u80FD\u4F1A\u5BF9\u67D0\u4E2A\u5217 \u91CD\u590D\u5EFA\u7ACB\u7D22\u5F15 \uFF0C\u6BD4\u65B9\u8BF4\u8FD9\u6837\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE repeat_index_demo (
col1 INT PRIMARY KEY,
col2 INT,
UNIQUE uk_idx_c1 (col1),
INDEX idx_c1 (col1)
);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u770B\u5230\uFF0Ccol1 \u65E2\u662F\u4E3B\u952E\u3001\u53C8\u7ED9\u5B83\u5B9A\u4E49\u4E3A\u4E00\u4E2A\u552F\u4E00\u7D22\u5F15\uFF0C\u8FD8\u7ED9\u5B83\u5B9A\u4E49\u4E86\u4E00\u4E2A\u666E\u901A\u7D22\u5F15\uFF0C\u53EF\u662F\u4E3B\u952E\u672C\u8EAB\u5C31 \u4F1A\u751F\u6210\u805A\u7C07\u7D22\u5F15\uFF0C\u6240\u4EE5\u5B9A\u4E49\u7684\u552F\u4E00\u7D22\u5F15\u548C\u666E\u901A\u7D22\u5F15\u662F\u91CD\u590D\u7684\uFF0C\u8FD9\u79CD\u60C5\u51B5\u8981\u907F\u514D\u3002</p><h2 id="\u7B2C09\u7AE0-\u6027\u80FD\u5206\u6790\u5DE5\u5177\u7684\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u7B2C09\u7AE0-\u6027\u80FD\u5206\u6790\u5DE5\u5177\u7684\u4F7F\u7528" aria-hidden="true">#</a> \u7B2C09\u7AE0_\u6027\u80FD\u5206\u6790\u5DE5\u5177\u7684\u4F7F\u7528</h2><p>\u5728\u6570\u636E\u5E93\u8C03\u4F18\u4E2D\uFF0C\u6211\u4EEC\u7684\u76EE\u6807\u662F <code>\u54CD\u5E94\u65F6\u95F4\u66F4\u5FEB, \u541E\u5410\u91CF\u66F4\u5927</code> \u3002\u5229\u7528\u5B8F\u89C2\u7684\u76D1\u63A7\u5DE5\u5177\u548C\u5FAE\u89C2\u7684\u65E5\u5FD7\u5206\u6790\u53EF\u4EE5\u5E2E\u6211\u4EEC\u5FEB\u901F\u627E\u5230\u8C03\u4F18\u7684\u601D\u8DEF\u548C\u65B9\u5F0F\u3002</p><h3 id="_1-\u6570\u636E\u5E93\u670D\u52A1\u5668\u7684\u4F18\u5316\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#_1-\u6570\u636E\u5E93\u670D\u52A1\u5668\u7684\u4F18\u5316\u6B65\u9AA4" aria-hidden="true">#</a> 1. \u6570\u636E\u5E93\u670D\u52A1\u5668\u7684\u4F18\u5316\u6B65\u9AA4</h3><p>\u5F53\u6211\u4EEC\u9047\u5230\u6570\u636E\u5E93\u8C03\u4F18\u95EE\u9898\u7684\u65F6\u5019\uFF0C\u8BE5\u5982\u4F55\u601D\u8003\u5462\uFF1F\u8FD9\u91CC\u628A\u601D\u8003\u7684\u6D41\u7A0B\u6574\u7406\u6210\u4E0B\u9762\u8FD9\u5F20\u56FE\u3002</p><p>\u6574\u4E2A\u6D41\u7A0B\u5212\u5206\u6210\u4E86 <code>\u89C2\u5BDF\uFF08Show status\uFF09</code> \u548C <code>\u884C\u52A8\uFF08Action\uFF09</code> \u4E24\u4E2A\u90E8\u5206\u3002\u5B57\u6BCD S \u7684\u90E8\u5206\u4EE3\u8868\u89C2\u5BDF\uFF08\u4F1A\u4F7F \u7528\u76F8\u5E94\u7684\u5206\u6790\u5DE5\u5177\uFF09\uFF0C\u5B57\u6BCD A \u4EE3\u8868\u7684\u90E8\u5206\u662F\u884C\u52A8\uFF08\u5BF9\u5E94\u5206\u6790\u53EF\u4EE5\u91C7\u53D6\u7684\u884C\u52A8\uFF09\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220627162248635.png" alt="image-20220627162248635"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220627162345815.png" alt="image-20220627162345815"></p><p>\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u89C2\u5BDF\u4E86\u89E3\u6570\u636E\u5E93\u6574\u4F53\u7684\u8FD0\u884C\u72B6\u6001\uFF0C\u901A\u8FC7\u6027\u80FD\u5206\u6790\u5DE5\u5177\u53EF\u4EE5\u8BA9\u6211\u4EEC\u4E86\u89E3\u6267\u884C\u6162\u7684SQL\u90FD\u6709\u54EA\u4E9B\uFF0C\u67E5\u770B\u5177\u4F53\u7684SQL\u6267\u884C\u8BA1\u5212\uFF0C\u751A\u81F3\u662FSQL\u6267\u884C\u4E2D\u7684\u6BCF\u4E00\u6B65\u7684\u6210\u672C\u4EE3\u4EF7\uFF0C\u8FD9\u6837\u624D\u80FD\u5B9A\u4F4D\u95EE\u9898\u6240\u5728\uFF0C\u627E\u5230\u4E86\u95EE\u9898\uFF0C\u518D\u91C7\u53D6\u76F8\u5E94\u7684\u884C\u52A8\u3002</p><p><strong>\u8BE6\u7EC6\u89E3\u91CA\u4E00\u4E0B\u8FD9\u5F20\u56FE\uFF1A</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220627164046438.png" alt="image-20220627164046438" style="float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220627164114562.png" alt="image-20220627164114562" style="float:left;"><h3 id="_2-\u67E5\u770B\u7CFB\u7EDF\u6027\u80FD\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#_2-\u67E5\u770B\u7CFB\u7EDF\u6027\u80FD\u53C2\u6570" aria-hidden="true">#</a> 2. \u67E5\u770B\u7CFB\u7EDF\u6027\u80FD\u53C2\u6570</h3><p>\u5728MySQL\u4E2D\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>SHOW STATUS</code> \u8BED\u53E5\u67E5\u8BE2\u4E00\u4E9BMySQL\u6570\u636E\u5E93\u670D\u52A1\u5668\u7684<code>\u6027\u80FD\u53C2\u6570\u3001\u6267\u884C\u9891\u7387</code>\u3002</p><p>SHOW STATUS\u8BED\u53E5\u8BED\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW [GLOBAL|SESSION] STATUS LIKE &#39;\u53C2\u6570&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E00\u4E9B\u5E38\u7528\u7684\u6027\u80FD\u53C2\u6570\u5982\u4E0B\uFF1A</p><ul><li>Connections\uFF1A\u8FDE\u63A5MySQL\u670D\u52A1\u5668\u7684\u6B21\u6570\u3002</li><li>Uptime\uFF1AMySQL\u670D\u52A1\u5668\u7684\u4E0A\u7EBF\u65F6\u95F4\u3002</li><li>Slow_queries\uFF1A\u6162\u67E5\u8BE2\u7684\u6B21\u6570\u3002</li><li>Innodb_rows_read\uFF1ASelect\u67E5\u8BE2\u8FD4\u56DE\u7684\u884C\u6570</li><li>Innodb_rows_inserted\uFF1A\u6267\u884CINSERT\u64CD\u4F5C\u63D2\u5165\u7684\u884C\u6570</li><li>Innodb_rows_updated\uFF1A\u6267\u884CUPDATE\u64CD\u4F5C\u66F4\u65B0\u7684 \u884C\u6570</li><li>Innodb_rows_deleted\uFF1A\u6267\u884CDELETE\u64CD\u4F5C\u5220\u9664\u7684\u884C\u6570</li><li>Com_select\uFF1A\u67E5\u8BE2\u64CD\u4F5C\u7684\u6B21\u6570\u3002</li><li>Com_insert\uFF1A\u63D2\u5165\u64CD\u4F5C\u7684\u6B21\u6570\u3002\u5BF9\u4E8E\u6279\u91CF\u63D2\u5165\u7684 INSERT \u64CD\u4F5C\uFF0C\u53EA\u7D2F\u52A0\u4E00\u6B21\u3002</li><li>Com_update\uFF1A\u66F4\u65B0\u64CD\u4F5C \u7684\u6B21\u6570\u3002</li><li>Com_delete\uFF1A\u5220\u9664\u64CD\u4F5C\u7684\u6B21\u6570\u3002</li></ul><p>\u82E5\u67E5\u8BE2MySQL\u670D\u52A1\u5668\u7684\u8FDE\u63A5\u6B21\u6570\uFF0C\u5219\u53EF\u4EE5\u6267\u884C\u5982\u4E0B\u8BED\u53E5:</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW STATUS LIKE &#39;Connections&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u82E5\u67E5\u8BE2\u670D\u52A1\u5668\u5DE5\u4F5C\u65F6\u95F4\uFF0C\u5219\u53EF\u4EE5\u6267\u884C\u5982\u4E0B\u8BED\u53E5:</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW STATUS LIKE &#39;Uptime&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u82E5\u67E5\u8BE2MySQL\u670D\u52A1\u5668\u7684\u6162\u67E5\u8BE2\u6B21\u6570\uFF0C\u5219\u53EF\u4EE5\u6267\u884C\u5982\u4E0B\u8BED\u53E5:</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW STATUS LIKE &#39;Slow_queries&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6162\u67E5\u8BE2\u6B21\u6570\u53C2\u6570\u53EF\u4EE5\u7ED3\u5408\u6162\u67E5\u8BE2\u65E5\u5FD7\u627E\u51FA\u6162\u67E5\u8BE2\u8BED\u53E5\uFF0C\u7136\u540E\u9488\u5BF9\u6162\u67E5\u8BE2\u8BED\u53E5\u8FDB\u884C<code>\u8868\u7ED3\u6784\u4F18\u5316</code>\u6216\u8005<code>\u67E5\u8BE2\u8BED\u53E5\u4F18\u5316</code>\u3002</p><p>\u518D\u6BD4\u5982\uFF0C\u5982\u4E0B\u7684\u6307\u4EE4\u53EF\u4EE5\u67E5\u770B\u76F8\u5173\u7684\u6307\u4EE4\u60C5\u51B5\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW STATUS LIKE &#39;Innodb_rows_%&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_3-\u7EDF\u8BA1sql\u7684\u67E5\u8BE2\u6210\u672C-last-query-cost" tabindex="-1"><a class="header-anchor" href="#_3-\u7EDF\u8BA1sql\u7684\u67E5\u8BE2\u6210\u672C-last-query-cost" aria-hidden="true">#</a> 3. \u7EDF\u8BA1SQL\u7684\u67E5\u8BE2\u6210\u672C: last_query_cost</h3><p>\u4E00\u6761SQL\u67E5\u8BE2\u8BED\u53E5\u5728\u6267\u884C\u524D\u9700\u8981\u67E5\u8BE2\u6267\u884C\u8BA1\u5212\uFF0C\u5982\u679C\u5B58\u5728\u591A\u79CD\u6267\u884C\u8BA1\u5212\u7684\u8BDD\uFF0CMySQL\u4F1A\u8BA1\u7B97\u6BCF\u4E2A\u6267\u884C\u8BA1\u5212\u6240\u9700\u8981\u7684\u6210\u672C\uFF0C\u4ECE\u4E2D\u9009\u62E9<code>\u6210\u672C\u6700\u5C0F</code>\u7684\u4E00\u4E2A\u4F5C\u4E3A\u6700\u7EC8\u6267\u884C\u7684\u6267\u884C\u8BA1\u5212\u3002</p><p>\u5982\u679C\u6211\u4EEC\u60F3\u8981\u67E5\u770B\u67D0\u6761SQL\u8BED\u53E5\u7684\u67E5\u8BE2\u6210\u672C\uFF0C\u53EF\u4EE5\u5728\u6267\u884C\u5B8C\u8FD9\u6761SQL\u8BED\u53E5\u4E4B\u540E\uFF0C\u901A\u8FC7\u67E5\u770B\u5F53\u524D\u4F1A\u8BDD\u4E2D\u7684<code>last_query_cost</code>\u53D8\u91CF\u503C\u6765\u5F97\u5230\u5F53\u524D\u67E5\u8BE2\u7684\u6210\u672C\u3002\u5B83\u901A\u5E38\u4E5F\u662F\u6211\u4EEC<code>\u8BC4\u4EF7\u4E00\u4E2A\u67E5\u8BE2\u7684\u6267\u884C\u6548\u7387</code>\u7684\u4E00\u4E2A\u5E38\u7528\u6307\u6807\u3002\u8FD9\u4E2A\u67E5\u8BE2\u6210\u672C\u5BF9\u5E94\u7684\u662F<code>SQL \u8BED\u53E5\u6240\u9700\u8981\u8BFB\u53D6\u7684\u8BFB\u9875\u7684\u6570\u91CF</code>\u3002</p><p>\u6211\u4EEC\u4F9D\u7136\u4F7F\u7528\u7B2C8\u7AE0\u7684 student_info \u8868\u4E3A\u4F8B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE \`student_info\` (
    \`id\` INT(11) NOT NULL AUTO_INCREMENT,
    \`student_id\` INT NOT NULL ,
    \`name\` VARCHAR(20) DEFAULT NULL,
    \`course_id\` INT NOT NULL ,
    \`class_id\` INT(11) DEFAULT NULL,
    \`create_time\` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    PRIMARY KEY (\`id\`)
) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u6211\u4EEC\u60F3\u8981\u67E5\u8BE2 id=900001 \u7684\u8BB0\u5F55\uFF0C\u7136\u540E\u770B\u4E0B\u67E5\u8BE2\u6210\u672C\uFF0C\u6211\u4EEC\u53EF\u4EE5\u76F4\u63A5\u5728\u805A\u7C07\u7D22\u5F15\u4E0A\u8FDB\u884C\u67E5\u627E\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT student_id, class_id, NAME, create_time FROM student_info WHERE id = 900001;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\uFF081 \u6761\u8BB0\u5F55\uFF0C\u8FD0\u884C\u65F6\u95F4\u4E3A 0.042s \uFF09</p><p>\u7136\u540E\u518D\u770B\u4E0B\u67E5\u8BE2\u4F18\u5316\u5668\u7684\u6210\u672C\uFF0C\u5B9E\u9645\u4E0A\u6211\u4EEC\u53EA\u9700\u8981\u68C0\u7D22\u4E00\u4E2A\u9875\u5373\u53EF\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SHOW STATUS LIKE &#39;last_query_cost&#39;;
+-----------------+----------+
| Variable_name   |   Value  |
+-----------------+----------+
| Last_query_cost | 1.000000 |
+-----------------+----------+
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u6211\u4EEC\u60F3\u8981\u67E5\u8BE2 id \u5728 900001 \u5230 9000100 \u4E4B\u95F4\u7684\u5B66\u751F\u8BB0\u5F55\u5462\uFF1F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT student_id, class_id, NAME, create_time FROM student_info WHERE id BETWEEN 900001 AND 900100;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\uFF08100 \u6761\u8BB0\u5F55\uFF0C\u8FD0\u884C\u65F6\u95F4\u4E3A 0.046s \uFF09\uFF1A</p><p>\u7136\u540E\u518D\u770B\u4E0B\u67E5\u8BE2\u4F18\u5316\u5668\u7684\u6210\u672C\uFF0C\u8FD9\u65F6\u6211\u4EEC\u5927\u6982\u9700\u8981\u8FDB\u884C 20 \u4E2A\u9875\u7684\u67E5\u8BE2\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SHOW STATUS LIKE &#39;last_query_cost&#39;;
+-----------------+-----------+
| Variable_name   |   Value   |
+-----------------+-----------+
| Last_query_cost | 21.134453 |
+-----------------+-----------+
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F60\u80FD\u770B\u5230\u9875\u7684\u6570\u91CF\u662F\u521A\u624D\u7684 20 \u500D\uFF0C\u4F46\u662F\u67E5\u8BE2\u7684\u6548\u7387\u5E76\u6CA1\u6709\u660E\u663E\u7684\u53D8\u5316\uFF0C\u5B9E\u9645\u4E0A\u8FD9\u4E24\u4E2A SQL \u67E5\u8BE2\u7684\u65F6\u95F4 \u57FA\u672C\u4E0A\u4E00\u6837\uFF0C\u5C31\u662F\u56E0\u4E3A\u91C7\u7528\u4E86 <code>\u987A\u5E8F\u8BFB\u53D6</code> \u7684\u65B9\u5F0F\u5C06\u9875\u9762\u4E00\u6B21\u6027\u52A0\u8F7D\u5230\u7F13\u51B2\u6C60\u4E2D\uFF0C\u7136\u540E\u518D\u8FDB\u884C\u67E5\u627E\u3002\u867D\u7136 \u9875 \u6570\u91CF\uFF08last_query_cost\uFF09\u589E\u52A0\u4E86\u4E0D\u5C11 \uFF0C\u4F46\u662F\u901A\u8FC7 <code>\u7F13\u51B2\u6C60</code> \u7684\u673A\u5236\uFF0C\u5E76 \u6CA1\u6709\u589E\u52A0\u591A\u5C11\u67E5\u8BE2\u65F6\u95F4 \u3002</p><p>**\u4F7F\u7528\u573A\u666F\uFF1A**\u5B83\u5BF9\u4E8E\u6BD4\u8F83\u5F00\u9500\u662F\u975E\u5E38\u6709\u7528\u7684\uFF0C\u7279\u522B\u662F\u6211\u4EEC\u6709\u597D\u51E0\u79CD\u67E5\u8BE2\u65B9\u5F0F\u53EF\u9009\u7684\u65F6\u5019\u3002</p><blockquote><p>SQL\u67E5\u8BE2\u65F6\u4E00\u4E2A\u52A8\u6001\u7684\u8FC7\u7A0B\uFF0C\u4ECE\u9875\u52A0\u8F7D\u7684\u89D2\u5EA6\u6765\u770B\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5F97\u5230\u4EE5\u4E0B\u4E24\u70B9\u7ED3\u8BBA\uFF1A</p><ol><li><code>\u4F4D\u7F6E\u51B3\u5B9A\u6548\u7387</code>\u3002\u5982\u679C\u9875\u5C31\u5728\u6570\u636E\u5E93 <code>\u7F13\u51B2\u6C60</code> \u4E2D\uFF0C\u90A3\u4E48\u6548\u7387\u662F\u6700\u9AD8\u7684\uFF0C\u5426\u5219\u8FD8\u9700\u8981\u4ECE <code>\u5185\u5B58</code> \u6216\u8005 <code>\u78C1\u76D8</code> \u4E2D\u8FDB\u884C\u8BFB\u53D6\uFF0C\u5F53\u7136\u9488\u5BF9\u5355\u4E2A\u9875\u7684\u8BFB\u53D6\u6765\u8BF4\uFF0C\u5982\u679C\u9875\u5B58\u5728\u4E8E\u5185\u5B58\u4E2D\uFF0C\u4F1A\u6BD4\u5728\u78C1\u76D8\u4E2D\u8BFB\u53D6\u6548\u7387\u9AD8\u5F88\u591A\u3002</li><li><code>\u6279\u91CF\u51B3\u5B9A\u6548\u7387</code>\u3002\u5982\u679C\u6211\u4EEC\u4ECE\u78C1\u76D8\u4E2D\u5BF9\u5355\u4E00\u9875\u8FDB\u884C\u968F\u673A\u8BFB\uFF0C\u90A3\u4E48\u6548\u7387\u662F\u5F88\u4F4E\u7684(\u5DEE\u4E0D\u591A10ms)\uFF0C\u800C\u91C7\u7528\u987A\u5E8F\u8BFB\u53D6\u7684\u65B9\u5F0F\uFF0C\u6279\u91CF\u5BF9\u9875\u8FDB\u884C\u8BFB\u53D6\uFF0C\u5E73\u5747\u4E00\u9875\u7684\u8BFB\u53D6\u6548\u7387\u5C31\u4F1A\u63D0\u5347\u5F88\u591A\uFF0C\u751A\u81F3\u8981\u5FEB\u4E8E\u5355\u4E2A\u9875\u9762\u5728\u5185\u5B58\u4E2D\u7684\u968F\u673A\u8BFB\u53D6\u3002</li></ol><p>\u6240\u4EE5\u8BF4\uFF0C\u9047\u5230I/O\u5E76\u4E0D\u7528\u62C5\u5FC3\uFF0C\u65B9\u6CD5\u627E\u5BF9\u4E86\uFF0C\u6548\u7387\u8FD8\u662F\u5F88\u9AD8\u7684\u3002\u6211\u4EEC\u9996\u5148\u8981\u8003\u8651\u6570\u636E\u5B58\u653E\u7684\u4F4D\u7F6E\uFF0C\u5982\u679C\u662F\u8FDB\u7A0B\u4F7F\u7528\u7684\u6570\u636E\u5C31\u8981\u5C3D\u91CF\u653E\u5230<code>\u7F13\u51B2\u6C60</code>\u4E2D\uFF0C\u5176\u6B21\u6211\u4EEC\u53EF\u4EE5\u5145\u5206\u5229\u7528 <code>\u78C1\u76D8\u7684\u541E\u5410\u80FD\u529B</code> \uFF0C\u4E00\u6B21\u6027\u6279\u91CF\u8BFB\u53D6\u6570\u636E\uFF0C\u8FD9\u6837\u5355\u4E2A\u9875\u7684\u8BFB\u53D6\u6548\u7387\u4E5F\u5C31\u5F97\u5230\u4E86\u63D0\u5347\u3002</p></blockquote><h3 id="_4-\u5B9A\u4F4D\u6267\u884C\u6162\u7684-sql-\u6162\u67E5\u8BE2\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#_4-\u5B9A\u4F4D\u6267\u884C\u6162\u7684-sql-\u6162\u67E5\u8BE2\u65E5\u5FD7" aria-hidden="true">#</a> 4. \u5B9A\u4F4D\u6267\u884C\u6162\u7684 SQL\uFF1A\u6162\u67E5\u8BE2\u65E5\u5FD7</h3><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628173022699.png" alt="image-20220628173022699" style="float:left;"><h5 id="_4-1-\u5F00\u542F\u6162\u67E5\u8BE2\u65E5\u5FD7\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#_4-1-\u5F00\u542F\u6162\u67E5\u8BE2\u65E5\u5FD7\u53C2\u6570" aria-hidden="true">#</a> 4.1 \u5F00\u542F\u6162\u67E5\u8BE2\u65E5\u5FD7\u53C2\u6570</h5><p><strong>1. \u5F00\u542F slow_query_log</strong></p><p>\u5728\u4F7F\u7528\u524D\uFF0C\u6211\u4EEC\u9700\u8981\u5148\u67E5\u4E0B\u6162\u67E5\u8BE2\u662F\u5426\u5DF2\u7ECF\u5F00\u542F\uFF0C\u4F7F\u7528\u4E0B\u9762\u8FD9\u6761\u547D\u4EE4\u5373\u53EF\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql &gt; show variables like &#39;%slow_query_log&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628173525966.png" alt="image-20220628173525966" style="float:left;"><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230 <code>slow_query_log=OFF</code>\uFF0C\u6211\u4EEC\u53EF\u4EE5\u628A\u6162\u67E5\u8BE2\u65E5\u5FD7\u6253\u5F00\uFF0C\u6CE8\u610F\u8BBE\u7F6E\u53D8\u91CF\u503C\u7684\u65F6\u5019\u9700\u8981\u4F7F\u7528 global\uFF0C\u5426\u5219\u4F1A\u62A5\u9519\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql &gt; set global slow_query_log=&#39;ON&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7136\u540E\u6211\u4EEC\u518D\u6765\u67E5\u770B\u4E0B\u6162\u67E5\u8BE2\u65E5\u5FD7\u662F\u5426\u5F00\u542F\uFF0C\u4EE5\u53CA\u6162\u67E5\u8BE2\u65E5\u5FD7\u6587\u4EF6\u7684\u4F4D\u7F6E\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628175226812.png" alt="image-20220628175226812" style="float:left;"><p>\u4F60\u80FD\u770B\u5230\u8FD9\u65F6\u6162\u67E5\u8BE2\u5206\u6790\u5DF2\u7ECF\u5F00\u542F\uFF0C\u540C\u65F6\u6587\u4EF6\u4FDD\u5B58\u5728 <code>/var/lib/mysql/atguigu02-slow.log</code> \u6587\u4EF6 \u4E2D\u3002</p><p><strong>2. \u4FEE\u6539 long_query_time \u9608\u503C</strong></p><p>\u63A5\u4E0B\u6765\u6211\u4EEC\u6765\u770B\u4E0B\u6162\u67E5\u8BE2\u7684\u65F6\u95F4\u9608\u503C\u8BBE\u7F6E\uFF0C\u4F7F\u7528\u5982\u4E0B\u547D\u4EE4\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql &gt; show variables like &#39;%long_query_time%&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628175353233.png" alt="image-20220628175353233" style="float:left;"><p>\u8FD9\u91CC\u5982\u679C\u6211\u4EEC\u60F3\u628A\u65F6\u95F4\u7F29\u77ED\uFF0C\u6BD4\u5982\u8BBE\u7F6E\u4E3A 1 \u79D2\uFF0C\u53EF\u4EE5\u8FD9\u6837\u8BBE\u7F6E\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#\u6D4B\u8BD5\u53D1\u73B0\uFF1A\u8BBE\u7F6Eglobal\u7684\u65B9\u5F0F\u5BF9\u5F53\u524Dsession\u7684long_query_time\u5931\u6548\u3002\u5BF9\u65B0\u8FDE\u63A5\u7684\u5BA2\u6237\u7AEF\u6709\u6548\u3002\u6240\u4EE5\u53EF\u4EE5\u4E00\u5E76
\u6267\u884C\u4E0B\u8FF0\u8BED\u53E5
mysql &gt; set global long_query_time = 1;
mysql&gt; show global variables like &#39;%long_query_time%&#39;;

mysql&gt; set long_query_time=1;
mysql&gt; show variables like &#39;%long_query_time%&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628175425922.png" alt="image-20220628175425922" style="zoom:80%;float:left;"><p><strong>\u8865\u5145\uFF1A\u914D\u7F6E\u6587\u4EF6\u4E2D\u4E00\u5E76\u8BBE\u7F6E\u53C2\u6570</strong></p><p>\u5982\u4E0B\u7684\u65B9\u5F0F\u76F8\u8F83\u4E8E\u524D\u9762\u7684\u547D\u4EE4\u884C\u65B9\u5F0F\uFF0C\u53EF\u4EE5\u770B\u505A\u662F\u6C38\u4E45\u8BBE\u7F6E\u7684\u65B9\u5F0F\u3002</p><p>\u4FEE\u6539 <code>my.cnf</code> \u6587\u4EF6\uFF0C[mysqld] \u4E0B\u589E\u52A0\u6216\u4FEE\u6539\u53C2\u6570 <code>long_query_time\u3001slow_query_log</code> \u548C <code>slow_query_log_file</code> \u540E\uFF0C\u7136\u540E\u91CD\u542F MySQL \u670D\u52A1\u5668\u3002</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code>[mysqld]
<span class="token key attr-name">slow_query_log</span><span class="token punctuation">=</span><span class="token value attr-value">ON  # \u5F00\u542F\u6162\u67E5\u8BE2\u65E5\u5FD7\u5F00\u5173</span>
<span class="token key attr-name">slow_query_log_file</span><span class="token punctuation">=</span><span class="token value attr-value">/var/lib/mysql/atguigu-low.log  # \u6162\u67E5\u8BE2\u65E5\u5FD7\u7684\u76EE\u5F55\u548C\u6587\u4EF6\u540D\u4FE1\u606F</span>
<span class="token key attr-name">long_query_time</span><span class="token punctuation">=</span><span class="token value attr-value">3  # \u8BBE\u7F6E\u6162\u67E5\u8BE2\u7684\u9608\u503C\u4E3A3\u79D2\uFF0C\u8D85\u51FA\u6B64\u8BBE\u5B9A\u503C\u7684SQL\u5373\u88AB\u8BB0\u5F55\u5230\u6162\u67E5\u8BE2\u65E5\u5FD7</span>
<span class="token key attr-name">log_output</span><span class="token punctuation">=</span><span class="token value attr-value">FILE</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u4E0D\u6307\u5B9A\u5B58\u50A8\u8DEF\u5F84\uFF0C\u6162\u67E5\u8BE2\u65E5\u5FD7\u9ED8\u8BA4\u5B58\u50A8\u5230MySQL\u6570\u636E\u5E93\u7684\u6570\u636E\u6587\u4EF6\u5939\u4E0B\u3002\u5982\u679C\u4E0D\u6307\u5B9A\u6587\u4EF6\u540D\uFF0C\u9ED8\u8BA4\u6587\u4EF6\u540D\u4E3Ahostname_slow.log\u3002</p><h5 id="_4-2-\u67E5\u770B\u6162\u67E5\u8BE2\u6570\u76EE" tabindex="-1"><a class="header-anchor" href="#_4-2-\u67E5\u770B\u6162\u67E5\u8BE2\u6570\u76EE" aria-hidden="true">#</a> 4.2 \u67E5\u770B\u6162\u67E5\u8BE2\u6570\u76EE</h5><p>\u67E5\u8BE2\u5F53\u524D\u7CFB\u7EDF\u4E2D\u6709\u591A\u5C11\u6761\u6162\u67E5\u8BE2\u8BB0\u5F55</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW GLOBAL STATUS LIKE &#39;%Slow_queries%&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="_4-3-\u6848\u4F8B\u6F14\u793A" tabindex="-1"><a class="header-anchor" href="#_4-3-\u6848\u4F8B\u6F14\u793A" aria-hidden="true">#</a> 4.3 \u6848\u4F8B\u6F14\u793A</h5><p><strong>\u6B65\u9AA41. \u5EFA\u8868</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE \`student\` (
    \`id\` INT(11) NOT NULL AUTO_INCREMENT,
    \`stuno\` INT NOT NULL ,
    \`name\` VARCHAR(20) DEFAULT NULL,
    \`age\` INT(3) DEFAULT NULL,
    \`classId\` INT(11) DEFAULT NULL,
    PRIMARY KEY (\`id\`)
) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6B65\u9AA42\uFF1A\u8BBE\u7F6E\u53C2\u6570 log_bin_trust_function_creators</strong></p><p>\u521B\u5EFA\u51FD\u6570\uFF0C\u5047\u5982\u62A5\u9519\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>This function has none of DETERMINISTIC......
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>\u547D\u4EE4\u5F00\u542F\uFF1A\u5141\u8BB8\u521B\u5EFA\u51FD\u6570\u8BBE\u7F6E\uFF1A</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>set global log_bin_trust_function_creators=1; # \u4E0D\u52A0global\u53EA\u662F\u5F53\u524D\u7A97\u53E3\u6709\u6548\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u6B65\u9AA43\uFF1A\u521B\u5EFA\u51FD\u6570</strong></p><p>\u968F\u673A\u4EA7\u751F\u5B57\u7B26\u4E32\uFF1A\uFF08\u540C\u4E0A\u4E00\u7AE0\uFF09</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DELIMITER //
CREATE FUNCTION rand_string(n INT)
	RETURNS VARCHAR(255) #\u8BE5\u51FD\u6570\u4F1A\u8FD4\u56DE\u4E00\u4E2A\u5B57\u7B26\u4E32
BEGIN
	DECLARE chars_str VARCHAR(100) DEFAULT
&#39;abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ&#39;;
	DECLARE return_str VARCHAR(255) DEFAULT &#39;&#39;;
    DECLARE i INT DEFAULT 0;
    WHILE i &lt; n DO
    	SET return_str =CONCAT(return_str,SUBSTRING(chars_str,FLOOR(1+RAND()*52),1));
    	SET i = i + 1;
    END WHILE;
    RETURN return_str;
END //
DELIMITER ;

# \u6D4B\u8BD5
SELECT rand_string(10);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EA7\u751F\u968F\u673A\u6570\u503C\uFF1A\uFF08\u540C\u4E0A\u4E00\u7AE0\uFF09</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DELIMITER //
CREATE FUNCTION rand_num (from_num INT ,to_num INT) RETURNS INT(11)
BEGIN
    DECLARE i INT DEFAULT 0;
    SET i = FLOOR(from_num +RAND()*(to_num - from_num+1)) ;
    RETURN i;
END //
DELIMITER ;

#\u6D4B\u8BD5\uFF1A
SELECT rand_num(10,100);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6B65\u9AA44\uFF1A\u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0B</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DELIMITER //
CREATE PROCEDURE insert_stu1( START INT , max_num INT )
BEGIN
DECLARE i INT DEFAULT 0;
    SET autocommit = 0; #\u8BBE\u7F6E\u624B\u52A8\u63D0\u4EA4\u4E8B\u52A1
    REPEAT #\u5FAA\u73AF
    SET i = i + 1; #\u8D4B\u503C
    INSERT INTO student (stuno, NAME ,age ,classId ) VALUES
    ((START+i),rand_string(6),rand_num(10,100),rand_num(10,1000));
    UNTIL i = max_num
    END REPEAT;
    COMMIT; #\u63D0\u4EA4\u4E8B\u52A1
END //
DELIMITER ;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6B65\u9AA45\uFF1A\u8C03\u7528\u5B58\u50A8\u8FC7\u7A0B</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#\u8C03\u7528\u521A\u521A\u5199\u597D\u7684\u51FD\u6570, 4000000\u6761\u8BB0\u5F55,\u4ECE100001\u53F7\u5F00\u59CB

CALL insert_stu1(100001,4000000);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-4-\u6D4B\u8BD5\u53CA\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#_4-4-\u6D4B\u8BD5\u53CA\u5206\u6790" aria-hidden="true">#</a> 4.4 \u6D4B\u8BD5\u53CA\u5206\u6790</h5><p><strong>1. \u6D4B\u8BD5</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT * FROM student WHERE stuno = 3455655;
+---------+---------+--------+------+---------+
|   id    |  stuno  |  name  | age  | classId |
+---------+---------+--------+------+---------+
| 3523633 | 3455655 | oQmLUr |  19  |    39   |
+---------+---------+--------+------+---------+
1 row in set (2.09 sec)

mysql&gt; SELECT * FROM student WHERE name = &#39;oQmLUr&#39;;
+---------+---------+--------+------+---------+
|   id    |  stuno  |  name  |  age | classId |
+---------+---------+--------+------+---------+
| 1154002 | 1243200 | OQMlUR | 266  |   28    |
| 1405708 | 1437740 | OQMlUR | 245  |   439   |
| 1748070 | 1680092 | OQMlUR | 240  |   414   |
| 2119892 | 2051914 | oQmLUr | 17   |   32    |
| 2893154 | 2825176 | OQMlUR | 245  |   435   |
| 3523633 | 3455655 | oQmLUr | 19   |   39    |
+---------+---------+--------+------+---------+
6 rows in set (2.39 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u7684\u7ED3\u679C\u53EF\u4EE5\u770B\u51FA\u6765\uFF0C\u67E5\u8BE2\u5B66\u751F\u7F16\u53F7\u4E3A\u201C3455655\u201D\u7684\u5B66\u751F\u4FE1\u606F\u82B1\u8D39\u65F6\u95F4\u4E3A2.09\u79D2\u3002\u67E5\u8BE2\u5B66\u751F\u59D3\u540D\u4E3A \u201CoQmLUr\u201D\u7684\u5B66\u751F\u4FE1\u606F\u82B1\u8D39\u65F6\u95F4\u4E3A2.39\u79D2\u3002\u5DF2\u7ECF\u8FBE\u5230\u4E86\u79D2\u7684\u6570\u91CF\u7EA7\uFF0C\u8BF4\u660E\u76EE\u524D\u67E5\u8BE2\u6548\u7387\u662F\u6BD4\u8F83\u4F4E\u7684\uFF0C\u4E0B\u9762 \u7684\u5C0F\u8282\u6211\u4EEC\u5206\u6790\u4E00\u4E0B\u539F\u56E0\u3002</p><p><strong>2. \u5206\u6790</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>show status like &#39;slow_queries&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628195650079.png" alt="image-20220628195650079" style="float:left;"><h5 id="_4-5-\u6162\u67E5\u8BE2\u65E5\u5FD7\u5206\u6790\u5DE5\u5177-mysqldumpslow" tabindex="-1"><a class="header-anchor" href="#_4-5-\u6162\u67E5\u8BE2\u65E5\u5FD7\u5206\u6790\u5DE5\u5177-mysqldumpslow" aria-hidden="true">#</a> 4.5 \u6162\u67E5\u8BE2\u65E5\u5FD7\u5206\u6790\u5DE5\u5177\uFF1Amysqldumpslow</h5><p>\u5728\u751F\u4EA7\u73AF\u5883\u4E2D\uFF0C\u5982\u679C\u8981\u624B\u5DE5\u5206\u6790\u65E5\u5FD7\uFF0C\u67E5\u627E\u3001\u5206\u6790SQL\uFF0C\u663E\u7136\u662F\u4E2A\u4F53\u529B\u6D3B\uFF0CMySQL\u63D0\u4F9B\u4E86\u65E5\u5FD7\u5206\u6790\u5DE5\u5177 <code>mysqldumpslow</code> \u3002</p><p>\u67E5\u770B mysqldumpslow \u7684\u5E2E\u52A9\u4FE1\u606F</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">mysqldumpslow</span> <span class="token value attr-value">--help</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628195821440.png" alt="image-20220628195821440" style="float:left;"><p>mysqldumpslow \u547D\u4EE4\u7684\u5177\u4F53\u53C2\u6570\u5982\u4E0B\uFF1A</p><ul><li>-a: \u4E0D\u5C06\u6570\u5B57\u62BD\u8C61\u6210N\uFF0C\u5B57\u7B26\u4E32\u62BD\u8C61\u6210S</li><li>-s: \u662F\u8868\u793A\u6309\u7167\u4F55\u79CD\u65B9\u5F0F\u6392\u5E8F\uFF1A <ul><li>c: \u8BBF\u95EE\u6B21\u6570</li><li>l: \u9501\u5B9A\u65F6\u95F4</li><li>r: \u8FD4\u56DE\u8BB0\u5F55</li><li>t: \u67E5\u8BE2\u65F6\u95F4</li><li>al:\u5E73\u5747\u9501\u5B9A\u65F6\u95F4</li><li>ar:\u5E73\u5747\u8FD4\u56DE\u8BB0\u5F55\u6570</li><li>at:\u5E73\u5747\u67E5\u8BE2\u65F6\u95F4 \uFF08\u9ED8\u8BA4\u65B9\u5F0F\uFF09</li><li>ac:\u5E73\u5747\u67E5\u8BE2\u6B21\u6570</li></ul></li><li>-t: \u5373\u4E3A\u8FD4\u56DE\u524D\u9762\u591A\u5C11\u6761\u7684\u6570\u636E\uFF1B</li><li>-g: \u540E\u8FB9\u642D\u914D\u4E00\u4E2A\u6B63\u5219\u5339\u914D\u6A21\u5F0F\uFF0C\u5927\u5C0F\u5199\u4E0D\u654F\u611F\u7684\uFF1B</li></ul><p>\u4E3E\u4F8B\uFF1A\u6211\u4EEC\u60F3\u8981\u6309\u7167\u67E5\u8BE2\u65F6\u95F4\u6392\u5E8F\uFF0C\u67E5\u770B\u524D\u4E94\u6761 SQL \u8BED\u53E5\uFF0C\u8FD9\u6837\u5199\u5373\u53EF\uFF1A</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">mysqldumpslow</span> <span class="token value attr-value">-s t -t 5 /var/lib/mysql/atguigu01-slow.log</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">[root@bogon</span> <span class="token value attr-value">~]# mysqldumpslow -s t -t 5 /var/lib/mysql/atguigu01-slow.log</span>

<span class="token key attr-name">Reading</span> <span class="token value attr-value">mysql slow query log from /var/lib/mysql/atguigu01-slow.log</span>
<span class="token key attr-name">Count</span><span class="token punctuation">:</span> <span class="token value attr-value">1 Time=2.39s (2s) Lock=0.00s (0s) Rows=13.0 (13), root[root]@localhost</span>
<span class="token key attr-name">SELECT</span> <span class="token value attr-value">* FROM student WHERE name = &#39;S&#39;</span>

<span class="token key attr-name">Count</span><span class="token punctuation">:</span> <span class="token value attr-value">1 Time=2.09s (2s) Lock=0.00s (0s) Rows=2.0 (2), root[root]@localhost</span>
<span class="token key attr-name">SELECT</span> <span class="token value attr-value">* FROM student WHERE stuno = N</span>

<span class="token key attr-name">Died</span> <span class="token value attr-value">at /usr/bin/mysqldumpslow line 162, &lt;&gt; chunk 2.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u5DE5\u4F5C\u5E38\u7528\u53C2\u8003\uFF1A</strong></p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment">#\u5F97\u5230\u8FD4\u56DE\u8BB0\u5F55\u96C6\u6700\u591A\u768410\u4E2ASQL</span>
<span class="token key attr-name">mysqldumpslow</span> <span class="token value attr-value">-s r -t 10 /var/lib/mysql/atguigu-slow.log</span>

<span class="token comment">#\u5F97\u5230\u8BBF\u95EE\u6B21\u6570\u6700\u591A\u768410\u4E2ASQL</span>
<span class="token key attr-name">mysqldumpslow</span> <span class="token value attr-value">-s c -t 10 /var/lib/mysql/atguigu-slow.log</span>

<span class="token comment">#\u5F97\u5230\u6309\u7167\u65F6\u95F4\u6392\u5E8F\u7684\u524D10\u6761\u91CC\u9762\u542B\u6709\u5DE6\u8FDE\u63A5\u7684\u67E5\u8BE2\u8BED\u53E5</span>
<span class="token key attr-name">mysqldumpslow</span> <span class="token value attr-value">-s t -t 10 -g &quot;left join&quot; /var/lib/mysql/atguigu-slow.log</span>

<span class="token comment">#\u53E6\u5916\u5EFA\u8BAE\u5728\u4F7F\u7528\u8FD9\u4E9B\u547D\u4EE4\u65F6\u7ED3\u5408 | \u548Cmore \u4F7F\u7528 \uFF0C\u5426\u5219\u6709\u53EF\u80FD\u51FA\u73B0\u7206\u5C4F\u60C5\u51B5</span>
<span class="token key attr-name">mysqldumpslow</span> <span class="token value attr-value">-s r -t 10 /var/lib/mysql/atguigu-slow.log | more</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-6-\u5173\u95ED\u6162\u67E5\u8BE2\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#_4-6-\u5173\u95ED\u6162\u67E5\u8BE2\u65E5\u5FD7" aria-hidden="true">#</a> 4.6 \u5173\u95ED\u6162\u67E5\u8BE2\u65E5\u5FD7</h5><p>MySQL\u670D\u52A1\u5668\u505C\u6B62\u6162\u67E5\u8BE2\u65E5\u5FD7\u529F\u80FD\u6709\u4E24\u79CD\u65B9\u6CD5\uFF1A</p><p><strong>\u65B9\u5F0F1\uFF1A\u6C38\u4E45\u6027\u65B9\u5F0F</strong></p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code>[mysqld]
<span class="token key attr-name">slow_query_log</span><span class="token punctuation">=</span><span class="token value attr-value">OFF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6216\u8005\uFF0C\u628Aslow_query_log\u4E00\u9879\u6CE8\u91CA\u6389 \u6216 \u5220\u9664</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code>[mysqld]
<span class="token comment">#slow_query_log =OFF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u91CD\u542FMySQL\u670D\u52A1\uFF0C\u6267\u884C\u5982\u4E0B\u8BED\u53E5\u67E5\u8BE2\u6162\u65E5\u5FD7\u529F\u80FD\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW VARIABLES LIKE &#39;%slow%&#39;; #\u67E5\u8BE2\u6162\u67E5\u8BE2\u65E5\u5FD7\u6240\u5728\u76EE\u5F55
SHOW VARIABLES LIKE &#39;%long_query_time%&#39;; #\u67E5\u8BE2\u8D85\u65F6\u65F6\u957F
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u65B9\u5F0F2\uFF1A\u4E34\u65F6\u6027\u65B9\u5F0F</strong></p><p>\u4F7F\u7528SET\u8BED\u53E5\u6765\u8BBE\u7F6E\u3002</p><p>\uFF081\uFF09\u505C\u6B62MySQL\u6162\u67E5\u8BE2\u65E5\u5FD7\u529F\u80FD\uFF0C\u5177\u4F53SQL\u8BED\u53E5\u5982\u4E0B\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SET GLOBAL slow_query_log=off;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\uFF082\uFF09<strong>\u91CD\u542FMySQL\u670D\u52A1</strong>\uFF0C\u4F7F\u7528SHOW\u8BED\u53E5\u67E5\u8BE2\u6162\u67E5\u8BE2\u65E5\u5FD7\u529F\u80FD\u4FE1\u606F\uFF0C\u5177\u4F53SQL\u8BED\u53E5\u5982\u4E0B\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW VARIABLES LIKE &#39;%slow%&#39;;
#\u4EE5\u53CA
SHOW VARIABLES LIKE &#39;%long_query_time%&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-7-\u5220\u9664\u6162\u67E5\u8BE2\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#_4-7-\u5220\u9664\u6162\u67E5\u8BE2\u65E5\u5FD7" aria-hidden="true">#</a> 4.7 \u5220\u9664\u6162\u67E5\u8BE2\u65E5\u5FD7</h5><p>\u4F7F\u7528SHOW\u8BED\u53E5\u663E\u793A\u6162\u67E5\u8BE2\u65E5\u5FD7\u4FE1\u606F\uFF0C\u5177\u4F53SQL\u8BED\u53E5\u5982\u4E0B\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW VARIABLES LIKE \`slow_query_log%\`;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628203545536.png" alt="image-20220628203545536" style="float:left;"><p>\u4ECE\u6267\u884C\u7ED3\u679C\u53EF\u4EE5\u770B\u51FA\uFF0C\u6162\u67E5\u8BE2\u65E5\u5FD7\u7684\u76EE\u5F55\u9ED8\u8BA4\u4E3AMySQL\u7684\u6570\u636E\u76EE\u5F55\uFF0C\u5728\u8BE5\u76EE\u5F55\u4E0B <code>\u624B\u52A8\u5220\u9664\u6162\u67E5\u8BE2\u65E5\u5FD7\u6587\u4EF6</code> \u5373\u53EF\u3002</p><p>\u4F7F\u7528\u547D\u4EE4 <code>mysqladmin flush-logs</code> \u6765\u91CD\u65B0\u751F\u6210\u67E5\u8BE2\u65E5\u5FD7\u6587\u4EF6\uFF0C\u5177\u4F53\u547D\u4EE4\u5982\u4E0B\uFF0C\u6267\u884C\u5B8C\u6BD5\u4F1A\u5728\u6570\u636E\u76EE\u5F55\u4E0B\u91CD\u65B0\u751F\u6210\u6162\u67E5\u8BE2\u65E5\u5FD7\u6587\u4EF6\u3002</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">mysqladmin</span> <span class="token value attr-value">-uroot -p flush-logs slow</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>\u63D0\u793A</p><p>\u6162\u67E5\u8BE2\u65E5\u5FD7\u90FD\u662F\u4F7F\u7528mysqladmin flush-logs\u547D\u4EE4\u6765\u5220\u9664\u91CD\u5EFA\u7684\u3002\u4F7F\u7528\u65F6\u4E00\u5B9A\u8981\u6CE8\u610F\uFF0C\u4E00\u65E6\u6267\u884C\u4E86\u8FD9\u4E2A\u547D\u4EE4\uFF0C\u6162\u67E5\u8BE2\u65E5\u5FD7\u90FD\u53EA\u5B58\u5728\u65B0\u7684\u65E5\u5FD7\u6587\u4EF6\u4E2D\uFF0C\u5982\u679C\u9700\u8981\u65E7\u7684\u67E5\u8BE2\u65E5\u5FD7\uFF0C\u5C31\u5FC5\u987B\u4E8B\u5148\u5907\u4EFD\u3002</p></blockquote><h3 id="_5-\u67E5\u770B-sql-\u6267\u884C\u6210\u672C-show-profile" tabindex="-1"><a class="header-anchor" href="#_5-\u67E5\u770B-sql-\u6267\u884C\u6210\u672C-show-profile" aria-hidden="true">#</a> 5. \u67E5\u770B SQL \u6267\u884C\u6210\u672C\uFF1ASHOW PROFILE</h3><p>show profile \u5728\u300A\u903B\u8F91\u67B6\u6784\u300B\u7AE0\u8282\u4E2D\u8BB2\u8FC7\uFF0C\u8FD9\u91CC\u4F5C\u4E3A\u590D\u4E60\u3002</p><p>show profile \u662F MySQL \u63D0\u4F9B\u7684\u53EF\u4EE5\u7528\u6765\u5206\u6790\u5F53\u524D\u4F1A\u8BDD\u4E2D SQL \u90FD\u505A\u4E86\u4EC0\u4E48\u3001\u6267\u884C\u7684\u8D44\u6E90\u6D88\u8017\u5DE5\u5177\u7684\u60C5\u51B5\uFF0C\u53EF\u7528\u4E8E sql \u8C03\u4F18\u7684\u6D4B\u91CF\u3002<code>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u5904\u4E8E\u5173\u95ED\u72B6\u6001</code>\uFF0C\u5E76\u4FDD\u5B58\u6700\u8FD115\u6B21\u7684\u8FD0\u884C\u7ED3\u679C\u3002</p><p>\u6211\u4EEC\u53EF\u4EE5\u5728\u4F1A\u8BDD\u7EA7\u522B\u5F00\u542F\u8FD9\u4E2A\u529F\u80FD\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql &gt; show variables like &#39;profiling&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628204922556.png" alt="image-20220628204922556" style="float:left;"><p>\u901A\u8FC7\u8BBE\u7F6E profiling=&#39;ON&#39; \u6765\u5F00\u542F show profile:</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql &gt; set profiling = &#39;ON&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628205029208.png" alt="image-20220628205029208" style="zoom:80%;float:left;"><p>\u7136\u540E\u6267\u884C\u76F8\u5173\u7684\u67E5\u8BE2\u8BED\u53E5\u3002\u63A5\u7740\u770B\u4E0B\u5F53\u524D\u4F1A\u8BDD\u90FD\u6709\u54EA\u4E9B profiles\uFF0C\u4F7F\u7528\u4E0B\u9762\u8FD9\u6761\u547D\u4EE4\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql &gt; show profiles;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628205243769.png" alt="image-20220628205243769" style="zoom:80%;float:left;"><p>\u4F60\u80FD\u770B\u5230\u5F53\u524D\u4F1A\u8BDD\u4E00\u5171\u6709 2 \u4E2A\u67E5\u8BE2\u3002\u5982\u679C\u6211\u4EEC\u60F3\u8981\u67E5\u770B\u6700\u8FD1\u4E00\u6B21\u67E5\u8BE2\u7684\u5F00\u9500\uFF0C\u53EF\u4EE5\u4F7F\u7528\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql &gt; show profile;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628205317257.png" alt="image-20220628205317257" style="float:left;"><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; show profile cpu,block io for query 2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628205354230.png" alt="image-20220628205354230" style="float:left;"><p>**show profile\u7684\u5E38\u7528\u67E5\u8BE2\u53C2\u6570\uFF1A **</p><p>\u2460 ALL\uFF1A\u663E\u793A\u6240\u6709\u7684\u5F00\u9500\u4FE1\u606F\u3002</p><p>\u2461 BLOCK IO\uFF1A\u663E\u793A\u5757IO\u5F00\u9500\u3002</p><p>\u2462 CONTEXT SWITCHES\uFF1A\u4E0A\u4E0B\u6587\u5207\u6362\u5F00\u9500\u3002</p><p>\u2463 CPU\uFF1A\u663E\u793ACPU\u5F00\u9500\u4FE1\u606F\u3002</p><p>\u2464 IPC\uFF1A\u663E\u793A\u53D1\u9001\u548C\u63A5\u6536\u5F00\u9500\u4FE1\u606F\u3002</p><p>\u2465 MEMORY\uFF1A\u663E\u793A\u5185\u5B58\u5F00\u9500\u4FE1 \u606F\u3002</p><p>\u2466 PAGE FAULTS\uFF1A\u663E\u793A\u9875\u9762\u9519\u8BEF\u5F00\u9500\u4FE1\u606F\u3002</p><p>\u2467 SOURCE\uFF1A\u663E\u793A\u548CSource_function\uFF0CSource_file\uFF0C Source_line\u76F8\u5173\u7684\u5F00\u9500\u4FE1\u606F\u3002</p><p>\u2468 SWAPS\uFF1A\u663E\u793A\u4EA4\u6362\u6B21\u6570\u5F00\u9500\u4FE1\u606F\u3002</p><p><strong>\u65E5\u5E38\u5F00\u53D1\u9700\u6CE8\u610F\u7684\u7ED3\u8BBA\uFF1A</strong></p><p>\u2460 <code>converting HEAP to MyISAM</code>: \u67E5\u8BE2\u7ED3\u679C\u592A\u5927\uFF0C\u5185\u5B58\u4E0D\u591F\uFF0C\u6570\u636E\u5F80\u78C1\u76D8\u4E0A\u642C\u4E86\u3002</p><p>\u2461 <code>Creating tmp table</code>\uFF1A\u521B\u5EFA\u4E34\u65F6\u8868\u3002\u5148\u62F7\u8D1D\u6570\u636E\u5230\u4E34\u65F6\u8868\uFF0C\u7528\u5B8C\u540E\u518D\u5220\u9664\u4E34\u65F6\u8868\u3002</p><p>\u2462 <code>Copying to tmp table on disk</code>\uFF1A\u628A\u5185\u5B58\u4E2D\u4E34\u65F6\u8868\u590D\u5236\u5230\u78C1\u76D8\u4E0A\uFF0C\u8B66\u60D5\uFF01</p><p>\u2463 <code>locked</code>\u3002</p><p>\u5982\u679C\u5728show profile\u8BCA\u65AD\u7ED3\u679C\u4E2D\u51FA\u73B0\u4E86\u4EE5\u4E0A4\u6761\u7ED3\u679C\u4E2D\u7684\u4EFB\u4F55\u4E00\u6761\uFF0C\u5219sql\u8BED\u53E5\u9700\u8981\u4F18\u5316\u3002</p><p><strong>\u6CE8\u610F\uFF1A</strong></p><p>\u4E0D\u8FC7SHOW PROFILE\u547D\u4EE4\u5C06\u88AB\u542F\u7528\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4ECE information_schema \u4E2D\u7684 profiling \u6570\u636E\u8868\u8FDB\u884C\u67E5\u770B\u3002</p><h3 id="_6-\u5206\u6790\u67E5\u8BE2\u8BED\u53E5-explain" tabindex="-1"><a class="header-anchor" href="#_6-\u5206\u6790\u67E5\u8BE2\u8BED\u53E5-explain" aria-hidden="true">#</a> 6. \u5206\u6790\u67E5\u8BE2\u8BED\u53E5\uFF1AEXPLAIN</h3><h5 id="_6-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.1 \u6982\u8FF0</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628210837301.png" alt="image-20220628210837301" style="float:left;"><p><strong>1. \u80FD\u505A\u4EC0\u4E48\uFF1F</strong></p><ul><li>\u8868\u7684\u8BFB\u53D6\u987A\u5E8F</li><li>\u6570\u636E\u8BFB\u53D6\u64CD\u4F5C\u7684\u64CD\u4F5C\u7C7B\u578B</li><li>\u54EA\u4E9B\u7D22\u5F15\u53EF\u4EE5\u4F7F\u7528</li><li>\u54EA\u4E9B\u7D22\u5F15\u88AB\u5B9E\u9645\u4F7F\u7528</li><li>\u8868\u4E4B\u95F4\u7684\u5F15\u7528</li><li>\u6BCF\u5F20\u8868\u6709\u591A\u5C11\u884C\u88AB\u4F18\u5316\u5668\u67E5\u8BE2</li></ul><p><strong>2. \u5B98\u7F51\u4ECB\u7ECD</strong></p>`,820),u={href:"https://dev.mysql.com/doc/refman/5.7/en/explain-output.html",target:"_blank",rel:"noopener noreferrer"},m=i("https://dev.mysql.com/doc/refman/5.7/en/explain-output.html"),p={href:"https://dev.mysql.com/doc/refman/8.0/en/explain-output.html",target:"_blank",rel:"noopener noreferrer"},g=i("https://dev.mysql.com/doc/refman/8.0/en/explain-output.html"),v=a(`<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628211207436.png" alt="image-20220628211207436"></p><p><strong>3. \u7248\u672C\u60C5\u51B5</strong></p><ul><li>MySQL 5.6.3\u4EE5\u524D\u53EA\u80FD EXPLAIN SELECT \uFF1BMYSQL 5.6.3\u4EE5\u540E\u5C31\u53EF\u4EE5 EXPLAIN SELECT\uFF0CUPDATE\uFF0C DELETE</li><li>\u57285.7\u4EE5\u524D\u7684\u7248\u672C\u4E2D\uFF0C\u60F3\u8981\u663E\u793A partitions \u9700\u8981\u4F7F\u7528 explain partitions \u547D\u4EE4\uFF1B\u60F3\u8981\u663E\u793A filtered \u9700\u8981\u4F7F\u7528 explain extended \u547D\u4EE4\u3002\u57285.7\u7248\u672C\u540E\uFF0C\u9ED8\u8BA4explain\u76F4\u63A5\u663E\u793Apartitions\u548C filtered\u4E2D\u7684\u4FE1\u606F\u3002</li></ul><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628211351678.png" alt="image-20220628211351678" style="float:left;"><h5 id="_6-2-\u57FA\u672C\u8BED\u6CD5" tabindex="-1"><a class="header-anchor" href="#_6-2-\u57FA\u672C\u8BED\u6CD5" aria-hidden="true">#</a> 6.2 \u57FA\u672C\u8BED\u6CD5</h5><p>EXPLAIN \u6216 DESCRIBE\u8BED\u53E5\u7684\u8BED\u6CD5\u5F62\u5F0F\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT select_options
\u6216\u8005
DESCRIBE SELECT select_options
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u6211\u4EEC\u60F3\u770B\u770B\u67D0\u4E2A\u67E5\u8BE2\u7684\u6267\u884C\u8BA1\u5212\u7684\u8BDD\uFF0C\u53EF\u4EE5\u5728\u5177\u4F53\u7684\u67E5\u8BE2\u8BED\u53E5\u524D\u8FB9\u52A0\u4E00\u4E2A EXPLAIN \uFF0C\u5C31\u50CF\u8FD9\u6837\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT 1;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628212029574.png" alt="image-20220628212029574" style="float:left;"><p>EXPLAIN \u8BED\u53E5\u8F93\u51FA\u7684\u5404\u4E2A\u5217\u7684\u4F5C\u7528\u5982\u4E0B\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628212049096.png" alt="image-20220628212049096"></p><p>\u5728\u8FD9\u91CC\u628A\u5B83\u4EEC\u90FD\u5217\u51FA\u6765\u77E5\u8BC6\u4E3A\u4E86\u63CF\u8FF0\u4E00\u4E2A\u8F6E\u5ED3\uFF0C\u8BA9\u5927\u5BB6\u6709\u4E00\u4E2A\u5927\u81F4\u7684\u5370\u8C61\u3002</p><h5 id="_6-3-\u6570\u636E\u51C6\u5907" tabindex="-1"><a class="header-anchor" href="#_6-3-\u6570\u636E\u51C6\u5907" aria-hidden="true">#</a> 6.3 \u6570\u636E\u51C6\u5907</h5><p><strong>1. \u5EFA\u8868</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE s1 (
    id INT AUTO_INCREMENT,
    key1 VARCHAR(100),
    key2 INT,
    key3 VARCHAR(100),
    key_part1 VARCHAR(100),
    key_part2 VARCHAR(100),
    key_part3 VARCHAR(100),
    common_field VARCHAR(100),
    PRIMARY KEY (id),
    INDEX idx_key1 (key1),
    UNIQUE INDEX idx_key2 (key2),
    INDEX idx_key3 (key3),
    INDEX idx_key_part(key_part1, key_part2, key_part3)
) ENGINE=INNODB CHARSET=utf8;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE s2 (
    id INT AUTO_INCREMENT,
    key1 VARCHAR(100),
    key2 INT,
    key3 VARCHAR(100),
    key_part1 VARCHAR(100),
    key_part2 VARCHAR(100),
    key_part3 VARCHAR(100),
    common_field VARCHAR(100),
    PRIMARY KEY (id),
    INDEX idx_key1 (key1),
    UNIQUE INDEX idx_key2 (key2),
    INDEX idx_key3 (key3),
    INDEX idx_key_part(key_part1, key_part2, key_part3)
) ENGINE=INNODB CHARSET=utf8;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2. \u8BBE\u7F6E\u53C2\u6570 log_bin_trust_function_creators</strong></p><p>\u521B\u5EFA\u51FD\u6570\uFF0C\u5047\u5982\u62A5\u9519\uFF0C\u9700\u5F00\u542F\u5982\u4E0B\u547D\u4EE4\uFF1A\u5141\u8BB8\u521B\u5EFA\u51FD\u6570\u8BBE\u7F6E\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>set global log_bin_trust_function_creators=1; # \u4E0D\u52A0global\u53EA\u662F\u5F53\u524D\u7A97\u53E3\u6709\u6548\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>3. \u521B\u5EFA\u51FD\u6570</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DELIMITER //
CREATE FUNCTION rand_string1(n INT)
	RETURNS VARCHAR(255) #\u8BE5\u51FD\u6570\u4F1A\u8FD4\u56DE\u4E00\u4E2A\u5B57\u7B26\u4E32
BEGIN
	DECLARE chars_str VARCHAR(100) DEFAULT
&#39;abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ&#39;;
    DECLARE return_str VARCHAR(255) DEFAULT &#39;&#39;;
    DECLARE i INT DEFAULT 0;
    WHILE i &lt; n DO
        SET return_str =CONCAT(return_str,SUBSTRING(chars_str,FLOOR(1+RAND()*52),1));
        SET i = i + 1;
    END WHILE;
    RETURN return_str;
END //
DELIMITER ;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>4. \u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0B</strong></p><p>\u521B\u5EFA\u5F80s1\u8868\u4E2D\u63D2\u5165\u6570\u636E\u7684\u5B58\u50A8\u8FC7\u7A0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DELIMITER //
CREATE PROCEDURE insert_s1 (IN min_num INT (10),IN max_num INT (10))
BEGIN
    DECLARE i INT DEFAULT 0;
    SET autocommit = 0;
    REPEAT
    SET i = i + 1;
    INSERT INTO s1 VALUES(
        (min_num + i),
        rand_string1(6),
        (min_num + 30 * i + 5),
        rand_string1(6),
        rand_string1(10),
        rand_string1(5),
        rand_string1(10),
        rand_string1(10));
    UNTIL i = max_num
    END REPEAT;
    COMMIT;
END //
DELIMITER ;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u521B\u5EFA\u5F80s2\u8868\u4E2D\u63D2\u5165\u6570\u636E\u7684\u5B58\u50A8\u8FC7\u7A0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DELIMITER //
CREATE PROCEDURE insert_s2 (IN min_num INT (10),IN max_num INT (10))
BEGIN
    DECLARE i INT DEFAULT 0;
    SET autocommit = 0;
    REPEAT
    SET i = i + 1;
    INSERT INTO s2 VALUES(
        (min_num + i),
        rand_string1(6),
        (min_num + 30 * i + 5),
        rand_string1(6),
        rand_string1(10),
        rand_string1(5),
        rand_string1(10),
        rand_string1(10));
    UNTIL i = max_num
    END REPEAT;
    COMMIT;
END //
DELIMITER ;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>5. \u8C03\u7528\u5B58\u50A8\u8FC7\u7A0B</strong></p><p>s1\u8868\u6570\u636E\u7684\u6DFB\u52A0\uFF1A\u52A0\u51651\u4E07\u6761\u8BB0\u5F55\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CALL insert_s1(10001,10000);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>s2\u8868\u6570\u636E\u7684\u6DFB\u52A0\uFF1A\u52A0\u51651\u4E07\u6761\u8BB0\u5F55\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CALL insert_s2(10001,10000);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="_6-4-explain\u5404\u5217\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#_6-4-explain\u5404\u5217\u4F5C\u7528" aria-hidden="true">#</a> 6.4 EXPLAIN\u5404\u5217\u4F5C\u7528</h5><p>\u4E3A\u4E86\u8BA9\u5927\u5BB6\u6709\u6BD4\u8F83\u597D\u7684\u4F53\u9A8C\uFF0C\u6211\u4EEC\u8C03\u6574\u4E86\u4E0B <code>EXPLAIN</code> \u8F93\u51FA\u5217\u7684\u987A\u5E8F\u3002</p><h6 id="_1-table" tabindex="-1"><a class="header-anchor" href="#_1-table" aria-hidden="true">#</a> 1. table</h6><p>\u4E0D\u8BBA\u6211\u4EEC\u7684\u67E5\u8BE2\u8BED\u53E5\u6709\u591A\u590D\u6742\uFF0C\u91CC\u8FB9\u513F \u5305\u542B\u4E86\u591A\u5C11\u4E2A\u8868 \uFF0C\u5230\u6700\u540E\u4E5F\u662F\u9700\u8981\u5BF9\u6BCF\u4E2A\u8868\u8FDB\u884C \u5355\u8868\u8BBF\u95EE \u7684\uFF0C\u6240 \u4EE5MySQL\u89C4\u5B9AEXPLAIN\u8BED\u53E5\u8F93\u51FA\u7684\u6BCF\u6761\u8BB0\u5F55\u90FD\u5BF9\u5E94\u7740\u67D0\u4E2A\u5355\u8868\u7684\u8BBF\u95EE\u65B9\u6CD5\uFF0C\u8BE5\u6761\u8BB0\u5F55\u7684table\u5217\u4EE3\u8868\u7740\u8BE5 \u8868\u7684\u8868\u540D\uFF08\u6709\u65F6\u4E0D\u662F\u771F\u5B9E\u7684\u8868\u540D\u5B57\uFF0C\u53EF\u80FD\u662F\u7B80\u79F0\uFF09\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql &gt; EXPLAIN SELECT * FROM s1;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628221143339.png" alt="image-20220628221143339"></p><p>\u8FD9\u4E2A\u67E5\u8BE2\u8BED\u53E5\u53EA\u6D89\u53CA\u5BF9s1\u8868\u7684\u5355\u8868\u67E5\u8BE2\uFF0C\u6240\u4EE5 <code>EXPLAIN</code> \u8F93\u51FA\u4E2D\u53EA\u6709\u4E00\u6761\u8BB0\u5F55\uFF0C\u5176\u4E2D\u7684table\u5217\u7684\u503C\u4E3As1\uFF0C\u8868\u660E\u8FD9\u6761\u8BB0\u5F55\u662F\u7528\u6765\u8BF4\u660E\u5BF9s1\u8868\u7684\u5355\u8868\u8BBF\u95EE\u65B9\u6CD5\u7684\u3002</p><p>\u4E0B\u8FB9\u6211\u4EEC\u770B\u4E00\u4E2A\u8FDE\u63A5\u67E5\u8BE2\u7684\u6267\u884C\u8BA1\u5212</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql &gt; EXPLAIN SELECT * FROM s1 INNER JOIN s2;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628221414097.png" alt="image-20220628221414097"></p><p>\u53EF\u4EE5\u770B\u51FA\u8FD9\u4E2A\u8FDE\u63A5\u67E5\u8BE2\u7684\u6267\u884C\u8BA1\u5212\u4E2D\u6709\u4E24\u6761\u8BB0\u5F55\uFF0C\u8FD9\u4E24\u6761\u8BB0\u5F55\u7684table\u5217\u5206\u522B\u662Fs1\u548Cs2\uFF0C\u8FD9\u4E24\u6761\u8BB0\u5F55\u7528\u6765\u5206\u522B\u8BF4\u660E\u5BF9s1\u8868\u548Cs2\u8868\u7684\u8BBF\u95EE\u65B9\u6CD5\u662F\u4EC0\u4E48\u3002</p><h6 id="_2-id" tabindex="-1"><a class="header-anchor" href="#_2-id" aria-hidden="true">#</a> 2. id</h6><p>\u6211\u4EEC\u5199\u7684\u67E5\u8BE2\u8BED\u53E5\u4E00\u822C\u90FD\u4EE5 SELECT \u5173\u952E\u5B57\u5F00\u5934\uFF0C\u6BD4\u8F83\u7B80\u5355\u7684\u67E5\u8BE2\u8BED\u53E5\u91CC\u53EA\u6709\u4E00\u4E2A SELECT \u5173\u952E\u5B57\uFF0C\u6BD4 \u5982\u4E0B\u8FB9\u8FD9\u4E2A\u67E5\u8BE2\u8BED\u53E5\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT * FROM s1 WHERE key1 = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7A0D\u5FAE\u590D\u6742\u4E00\u70B9\u7684\u8FDE\u63A5\u67E5\u8BE2\u4E2D\u4E5F\u53EA\u6709\u4E00\u4E2A SELECT \u5173\u952E\u5B57\uFF0C\u6BD4\u5982\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT * FROM s1 INNER JOIN s2
ON s1.key1 = s2.key1
WHERE s1.common_field = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F46\u662F\u4E0B\u8FB9\u4E24\u79CD\u60C5\u51B5\u4E0B\u5728\u4E00\u6761\u67E5\u8BE2\u8BED\u53E5\u4E2D\u4F1A\u51FA\u73B0\u591A\u4E2ASELECT\u5173\u952E\u5B57\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628221948512.png" alt="image-20220628221948512" style="float:left;"><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql &gt; EXPLAIN SELECT * FROM s1 WHERE key1 = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628222055716.png" alt="image-20220628222055716"></p><p>\u5BF9\u4E8E\u8FDE\u63A5\u67E5\u8BE2\u6765\u8BF4\uFF0C\u4E00\u4E2ASELECT\u5173\u952E\u5B57\u540E\u8FB9\u7684FROM\u5B57\u53E5\u4E2D\u53EF\u4EE5\u8DDF\u968F\u591A\u4E2A\u8868\uFF0C\u6240\u4EE5\u5728\u8FDE\u63A5\u67E5\u8BE2\u7684\u6267\u884C\u8BA1\u5212\u4E2D\uFF0C\u6BCF\u4E2A\u8868\u90FD\u4F1A\u5BF9\u5E94\u4E00\u6761\u8BB0\u5F55\uFF0C\u4F46\u662F\u8FD9\u4E9B\u8BB0\u5F55\u7684id\u503C\u90FD\u662F\u76F8\u540C\u7684\uFF0C\u6BD4\u5982\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 INNER JOIN s2;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220628222251309.png" alt="image-20220628222251309"></p><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u4E0A\u8FF0\u8FDE\u63A5\u67E5\u8BE2\u4E2D\u53C2\u4E0E\u8FDE\u63A5\u7684s1\u548Cs2\u8868\u5206\u522B\u5BF9\u5E94\u4E00\u6761\u8BB0\u5F55\uFF0C\u4F46\u662F\u8FD9\u4E24\u6761\u8BB0\u5F55\u5BF9\u5E94\u7684<code>id</code>\u90FD\u662F1\u3002\u8FD9\u91CC\u9700\u8981\u5927\u5BB6\u8BB0\u4F4F\u7684\u662F\uFF0C<strong>\u5728\u8FDE\u63A5\u67E5\u8BE2\u7684\u6267\u884C\u8BA1\u5212\u4E2D\uFF0C\u6BCF\u4E2A\u8868\u90FD\u4F1A\u5BF9\u5E94\u4E00\u6761\u8BB0\u5F55\uFF0C\u8FD9\u4E9B\u8BB0\u5F55\u7684id\u5217\u7684\u503C\u662F\u76F8\u540C\u7684</strong>\uFF0C\u51FA\u73B0\u5728\u524D\u8FB9\u7684\u8868\u8868\u793A<code>\u9A71\u52A8\u8868</code>\uFF0C\u51FA\u73B0\u5728\u540E\u9762\u7684\u8868\u8868\u793A<code>\u88AB\u9A71\u52A8\u8868</code>\u3002\u6240\u4EE5\u4ECE\u4E0A\u8FB9\u7684EXPLAIN\u8F93\u51FA\u4E2D\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0C\u67E5\u8BE2\u4F18\u5316\u5668\u51C6\u5907\u8BA9s1\u8868\u4F5C\u4E3A\u9A71\u52A8\u8868\uFF0C\u8BA9s2\u8868\u4F5C\u4E3A\u88AB\u9A71\u52A8\u8868\u6765\u6267\u884C\u67E5\u8BE2\u3002</p><p>\u5BF9\u4E8E\u5305\u542B\u5B50\u67E5\u8BE2\u7684\u67E5\u8BE2\u8BED\u53E5\u6765\u8BF4\uFF0C\u5C31\u53EF\u80FD\u6D89\u53CA\u591A\u4E2A<code>SELECT</code>\u5173\u952E\u5B57\uFF0C\u6240\u4EE5\u5728\u5305\u542B\u5B50\u67E5\u8BE2\u7684\u67E5\u8BE2\u8BED\u53E5\u7684\u6267\u884C\u8BA1\u5212\u4E2D\uFF0C\u6BCF\u4E2A<code>SELECT</code>\u5173\u952E\u5B57\u90FD\u4F1A\u5BF9\u5E94\u4E00\u4E2A\u552F\u4E00\u7684id\u503C\uFF0C\u6BD4\u5982\u8FD9\u6837\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 IN (SELECT key1 FROM s2) OR key3 = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220629165122837.png" alt="image-20220629165122837"></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220629170848349.png" alt="image-20220629170848349" style="float:left;"><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u67E5\u8BE2\u4F18\u5316\u5668\u53EF\u80FD\u5BF9\u6D89\u53CA\u5B50\u67E5\u8BE2\u7684\u67E5\u8BE2\u8BED\u53E5\u8FDB\u884C\u91CD\u5199\uFF0C\u8F6C\u53D8\u4E3A\u591A\u8868\u67E5\u8BE2\u7684\u64CD\u4F5C\u3002  
mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 IN (SELECT key2 FROM s2 WHERE common_field = &#39;a&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220629165603072.png" alt="image-20220629165603072"></p><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u867D\u7136\u6211\u4EEC\u7684\u67E5\u8BE2\u8BED\u53E5\u662F\u4E00\u4E2A\u5B50\u67E5\u8BE2\uFF0C\u4F46\u662F\u6267\u884C\u8BA1\u5212\u4E2Ds1\u548Cs2\u8868\u5BF9\u5E94\u7684\u8BB0\u5F55\u7684<code>id</code>\u503C\u5168\u90E8\u662F1\uFF0C\u8FD9\u5C31\u8868\u660E<code>\u67E5\u8BE2\u4F18\u5316\u5668\u5C06\u5B50\u67E5\u8BE2\u8F6C\u6362\u4E3A\u4E86\u8FDE\u63A5\u67E5\u8BE2</code>\u3002</p><p>\u5BF9\u4E8E\u5305\u542B<code>UNION</code>\u5B50\u53E5\u7684\u67E5\u8BE2\u8BED\u53E5\u6765\u8BF4\uFF0C\u6BCF\u4E2A<code>SELECT</code>\u5173\u952E\u5B57\u5BF9\u5E94\u4E00\u4E2A<code>id</code>\u503C\u4E5F\u662F\u6CA1\u9519\u7684\uFF0C\u4E0D\u8FC7\u8FD8\u662F\u6709\u70B9\u513F\u7279\u522B\u7684\u4E1C\u897F\uFF0C\u6BD4\u65B9\u8BF4\u4E0B\u8FB9\u7684\u67E5\u8BE2\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># Union\u53BB\u91CD
mysql&gt; EXPLAIN SELECT * FROM s1 UNION SELECT * FROM s2;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220629165909340.png" alt="image-20220629165909340"></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220629171104375.png" alt="image-20220629171104375" style="float:left;"><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 UNION ALL SELECT * FROM s2;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220629171138065.png" alt="image-20220629171138065"></p><p><strong>\u5C0F\u7ED3:</strong></p><ul><li>id\u5982\u679C\u76F8\u540C\uFF0C\u53EF\u4EE5\u8BA4\u4E3A\u662F\u4E00\u7EC4\uFF0C\u4ECE\u4E0A\u5F80\u4E0B\u987A\u5E8F\u6267\u884C</li><li>\u5728\u6240\u6709\u7EC4\u4E2D\uFF0Cid\u503C\u8D8A\u5927\uFF0C\u4F18\u5148\u7EA7\u8D8A\u9AD8\uFF0C\u8D8A\u5148\u6267\u884C</li><li>\u5173\u6CE8\u70B9\uFF1Aid\u53F7\u6BCF\u4E2A\u53F7\u7801\uFF0C\u8868\u793A\u4E00\u8D9F\u72EC\u7ACB\u7684\u67E5\u8BE2, \u4E00\u4E2Asql\u7684\u67E5\u8BE2\u8D9F\u6570\u8D8A\u5C11\u8D8A\u597D</li></ul><h6 id="_3-select-type" tabindex="-1"><a class="header-anchor" href="#_3-select-type" aria-hidden="true">#</a> 3. select_type</h6><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220629171611716.png" alt="image-20220629171611716" style="float:left;"><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220629171442624.png" alt="image-20220629171442624"></p><p>\u5177\u4F53\u5206\u6790\u5982\u4E0B\uFF1A</p><ul><li><p>SIMPLE</p><p>\u67E5\u8BE2\u8BED\u53E5\u4E2D\u4E0D\u5305\u542B <code>UNION</code> \u6216\u8005 <code>\u5B50\u67E5\u8BE2</code> \u7684\u67E5\u8BE2\u90FD\u7B97\u4F5C\u662F<code>SIMPLE</code>\u7C7B\u578B\uFF0C\u6BD4\u65B9\u8BF4\u4E0B\u8FB9\u8FD9\u4E2A\u5355\u8868\u67E5\u8BE2<code>select_type</code>\u7684\u503C\u5C31\u662F<code>SIMPLE</code>:</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220629171840300.png" alt="image-20220629171840300"></p><p>\u200B \u5F53\u7136\uFF0C\u8FDE\u63A5\u67E5\u8BE2\u4E5F\u7B97\u662F SIMPLE \u7C7B\u578B\uFF0C\u6BD4\u5982\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 INNER JOIN s2;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220629171904912.png" alt="image-20220629171904912"></p><ul><li><p>PRIMARY</p><p>\u5BF9\u4E8E\u5305\u542B<code>UNION\u3001UNION ALL</code>\u6216\u8005 <code>\u5B50\u67E5\u8BE2\u7684\u5927\u67E5\u8BE2</code> \u6765\u8BF4\uFF0C\u5B83\u662F\u7531\u51E0\u4E2A\u5C0F\u67E5\u8BE2\u7EC4\u6210\u7684\uFF0C\u5176\u4E2D\u6700\u5DE6\u8FB9\u7684\u90A3\u4E2A\u67E5\u8BE2\u7684<code>select_type</code>\u7684\u503C\u5C31\u662F<code>PRIMARY</code>,\u6BD4\u65B9\u8BF4\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 UNION SELECT * FROM s2;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220629171929924.png" alt="image-20220629171929924"></p><p>\u4ECE\u7ED3\u679C\u4E2D\u53EF\u4EE5\u770B\u5230\uFF0C\u6700\u5DE6\u8FB9\u7684\u5C0F\u67E5\u8BE2<code>SELECT * FROM s1</code>\u5BF9\u5E94\u7684\u662F\u6267\u884C\u8BA1\u5212\u4E2D\u7684\u7B2C\u4E00\u6761\u8BB0\u5F55\uFF0C\u5B83\u7684<code>select_type</code>\u7684\u503C\u5C31\u662F<code>PRIMARY</code>\u3002</p></li><li><p>UNION</p><p>\u5BF9\u4E8E\u5305\u542B<code>UNION</code>\u6216\u8005<code>UNION ALL</code>\u7684\u5927\u67E5\u8BE2\u6765\u8BF4\uFF0C\u5B83\u662F\u7531\u51E0\u4E2A\u5C0F\u67E5\u8BE2\u7EC4\u6210\u7684\uFF0C\u5176\u4E2D\u9664\u4E86\u6700\u5DE6\u8FB9\u7684\u90A3\u4E2A\u5C0F\u67E5\u8BE2\u610F\u5916\uFF0C\u5176\u4F59\u7684\u5C0F\u67E5\u8BE2\u7684<code>select_type</code>\u503C\u5C31\u662FUNION\uFF0C\u53EF\u4EE5\u5BF9\u6BD4\u4E0A\u4E00\u4E2A\u4F8B\u5B50\u7684\u6548\u679C\u3002</p></li><li><p>UNION RESULT</p><p>MySQL \u9009\u62E9\u4F7F\u7528\u4E34\u65F6\u8868\u6765\u5B8C\u6210<code>UNION</code>\u67E5\u8BE2\u7684\u53BB\u91CD\u5DE5\u4F5C\uFF0C\u9488\u5BF9\u8BE5\u4E34\u65F6\u8868\u7684\u67E5\u8BE2\u7684<code>select_type</code>\u5C31\u662F<code>UNION RESULT</code>, \u4F8B\u5B50\u4E0A\u8FB9\u6709\u3002</p></li><li><p>SUBQUERY</p><p>\u5982\u679C\u5305\u542B\u5B50\u67E5\u8BE2\u7684\u67E5\u8BE2\u8BED\u53E5\u4E0D\u80FD\u591F\u8F6C\u4E3A\u5BF9\u5E94\u7684<code>semi-join</code>\u7684\u5F62\u5F0F\uFF0C\u5E76\u4E14\u8BE5\u5B50\u67E5\u8BE2\u662F\u4E0D\u76F8\u5173\u5B50\u67E5\u8BE2\uFF0C\u5E76\u4E14\u67E5\u8BE2\u4F18\u5316\u5668\u51B3\u5B9A\u91C7\u7528\u5C06\u8BE5\u5B50\u67E5\u8BE2\u7269\u5316\u7684\u65B9\u6848\u6765\u6267\u884C\u8BE5\u5B50\u67E5\u8BE2\u65F6\uFF0C\u8BE5\u5B50\u67E5\u8BE2\u7684\u7B2C\u4E00\u4E2A<code>SELECT</code>\u5173\u952E\u5B57\u4EE3\u8868\u7684\u90A3\u4E2A\u67E5\u8BE2\u7684<code>select_type</code>\u5C31\u662F<code>SUBQUERY</code>\uFF0C\u6BD4\u5982\u4E0B\u8FB9\u8FD9\u4E2A\u67E5\u8BE2\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 IN (SELECT key1 FROM s2) OR key3 = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220629172449267.png" alt="image-20220629172449267"></p></li><li><p>DEPENDENT SUBQUERY</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 IN (SELECT key1 FROM s2 WHERE s1.key2 = s2.key2) OR key3 = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220629172525236.png" alt="image-20220629172525236"></p></li><li><p>DEPENDENT UNION</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 IN (SELECT key1 FROM s2 WHERE key1 = &#39;a&#39; UNION SELECT key1 FROM s1 WHERE key1 = &#39;b&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220629172555603.png" alt="image-20220629172555603"></p></li><li><p>DERIVED</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM (SELECT key1, count(*) as c FROM s1 GROUP BY key1) AS derived_s1 where c &gt; 1;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220629172622893.png" alt="image-20220629172622893"></p><p>\u4ECE\u6267\u884C\u8BA1\u5212\u4E2D\u53EF\u4EE5\u770B\u51FA\uFF0Cid\u4E3A2\u7684\u8BB0\u5F55\u5C31\u4EE3\u8868\u5B50\u67E5\u8BE2\u7684\u6267\u884C\u65B9\u5F0F\uFF0C\u5B83\u7684select_type\u662FDERIVED, \u8BF4\u660E\u8BE5\u5B50\u67E5\u8BE2\u662F\u4EE5\u7269\u5316\u7684\u65B9\u5F0F\u6267\u884C\u7684\u3002id\u4E3A1\u7684\u8BB0\u5F55\u4EE3\u8868\u5916\u5C42\u67E5\u8BE2\uFF0C\u5927\u5BB6\u6CE8\u610F\u770B\u5B83\u7684table\u5217\u663E\u793A\u7684\u662Fderived2\uFF0C\u8868\u793A\u8BE5\u67E5\u8BE2\u65F6\u9488\u5BF9\u5C06\u6D3E\u751F\u8868\u7269\u5316\u4E4B\u540E\u7684\u8868\u8FDB\u884C\u67E5\u8BE2\u7684\u3002</p></li><li><p>MATERIALIZED</p><p>\u5F53\u67E5\u8BE2\u4F18\u5316\u5668\u5728\u6267\u884C\u5305\u542B\u5B50\u67E5\u8BE2\u7684\u8BED\u53E5\u65F6\uFF0C\u9009\u62E9\u5C06\u5B50\u67E5\u8BE2\u7269\u5316\u4E4B\u540E\u7684\u5916\u5C42\u67E5\u8BE2\u8FDB\u884C\u8FDE\u63A5\u67E5\u8BE2\u65F6\uFF0C\u8BE5\u5B50\u67E5\u8BE2\u5BF9\u5E94\u7684<code>select_type</code>\u5C5E\u6027\u5C31\u662FDERIVED\uFF0C\u6BD4\u5982\u4E0B\u8FB9\u8FD9\u4E2A\u67E5\u8BE2\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 IN (SELECT key1 FROM s2);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220629172646367.png" alt="image-20220629172646367"></p></li><li><p>UNCACHEABLE SUBQUERY</p><p>\u4E0D\u5E38\u7528\uFF0C\u5C31\u4E0D\u591A\u8BF4\u4E86\u3002</p></li><li><p>UNCACHEABLE UNION</p><p>\u4E0D\u5E38\u7528\uFF0C\u5C31\u4E0D\u591A\u8BF4\u4E86\u3002</p></li></ul><h6 id="_4-partitions-\u53EF\u7565" tabindex="-1"><a class="header-anchor" href="#_4-partitions-\u53EF\u7565" aria-hidden="true">#</a> 4. partitions (\u53EF\u7565)</h6>`,82),h=e("li",null,[i("\u4EE3\u8868\u5206\u533A\u8868\u4E2D\u7684\u547D\u4E2D\u60C5\u51B5\uFF0C\u975E\u5206\u533A\u8868\uFF0C\u8BE5\u9879\u4E3A"),e("code",null,"NULL"),i("\u3002\u4E00\u822C\u60C5\u51B5\u4E0B\u6211\u4EEC\u7684\u989D\u67E5\u8BE2\u8BED\u53E5\u7684\u6267\u884C\u8BA1\u5212\u7684"),e("code",null,"partitions"),i("\u5217\u7684\u503C\u4E3A"),e("code",null,"NULL"),i("\u3002")],-1),b={href:"https://dev.mysql.com/doc/refman/5.7/en/alter-table-partition-operations.html",target:"_blank",rel:"noopener noreferrer"},q=i("https://dev.mysql.com/doc/refman/5.7/en/alter-table-partition-operations.html"),y=e("li",null,"\u5982\u679C\u60F3\u8BE6\u7EC6\u4E86\u89E3\uFF0C\u53EF\u4EE5\u5982\u4E0B\u65B9\u5F0F\u6D4B\u8BD5\u3002\u521B\u5EFA\u5206\u533A\u8868\uFF1A",-1),E=a(`<div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u521B\u5EFA\u5206\u533A\u8868\uFF0C
-- \u6309\u7167id\u5206\u533A\uFF0Cid&lt;100 p0\u5206\u533A\uFF0C\u5176\u4ED6p1\u5206\u533A
CREATE TABLE user_partitions (id INT auto_increment,
NAME VARCHAR(12),PRIMARY KEY(id))
PARTITION BY RANGE(id)(
PARTITION p0 VALUES less than(100),
PARTITION p1 VALUES less than MAXVALUE
);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220629190304966.png" alt="image-20220629190304966" style="float:left;"><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DESC SELECT * FROM user_partitions WHERE id&gt;200;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u67E5\u8BE2id\u5927\u4E8E200\uFF08200&gt;100\uFF0Cp1\u5206\u533A\uFF09\u7684\u8BB0\u5F55\uFF0C\u67E5\u770B\u6267\u884C\u8BA1\u5212\uFF0Cpartitions\u662Fp1\uFF0C\u7B26\u5408\u6211\u4EEC\u7684\u5206\u533A\u89C4\u5219</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220629190335371.png" alt="image-20220629190335371" style="float:left;"><h6 id="_5-type-\u2606" tabindex="-1"><a class="header-anchor" href="#_5-type-\u2606" aria-hidden="true">#</a> 5. type \u2606</h6><p>\u6267\u884C\u8BA1\u5212\u7684\u4E00\u6761\u8BB0\u5F55\u5C31\u4EE3\u8868\u7740MySQL\u5BF9\u67D0\u4E2A\u8868\u7684 <code>\u6267\u884C\u67E5\u8BE2\u65F6\u7684\u8BBF\u95EE\u65B9\u6CD5</code> , \u53C8\u79F0\u201C\u8BBF\u95EE\u7C7B\u578B\u201D\uFF0C\u5176\u4E2D\u7684 <code>type</code> \u5217\u5C31\u8868\u660E\u4E86\u8FD9\u4E2A\u8BBF\u95EE\u65B9\u6CD5\u662F\u5565\uFF0C\u662F\u8F83\u4E3A\u91CD\u8981\u7684\u4E00\u4E2A\u6307\u6807\u3002\u6BD4\u5982\uFF0C\u770B\u5230<code>type</code>\u5217\u7684\u503C\u662F<code>ref</code>\uFF0C\u8868\u660E<code>MySQL</code>\u5373\u5C06\u4F7F\u7528<code>ref</code>\u8BBF\u95EE\u65B9\u6CD5\u6765\u6267\u884C\u5BF9<code>s1</code>\u8868\u7684\u67E5\u8BE2\u3002</p><p>\u5B8C\u6574\u7684\u8BBF\u95EE\u65B9\u6CD5\u5982\u4E0B\uFF1A <code>system \uFF0C const \uFF0C eq_ref \uFF0C ref \uFF0C fulltext \uFF0C ref_or_null \uFF0C index_merge \uFF0C unique_subquery \uFF0C index_subquery \uFF0C range \uFF0C index \uFF0C ALL</code> \u3002</p><p>\u6211\u4EEC\u8BE6\u7EC6\u89E3\u91CA\u4E00\u4E0B\uFF1A</p><ul><li><p><code>system</code></p><p>\u5F53\u8868\u4E2D<code>\u53EA\u6709\u4E00\u6761\u8BB0\u5F55</code>\u5E76\u4E14\u8BE5\u8868\u4F7F\u7528\u7684\u5B58\u50A8\u5F15\u64CE\u7684\u7EDF\u8BA1\u6570\u636E\u662F\u7CBE\u786E\u7684\uFF0C\u6BD4\u5982MyISAM\u3001Memory\uFF0C\u90A3\u4E48\u5BF9\u8BE5\u8868\u7684\u8BBF\u95EE\u65B9\u6CD5\u5C31\u662F<code>system</code>\u3002\u6BD4\u65B9\u8BF4\u6211\u4EEC\u65B0\u5EFA\u4E00\u4E2A<code>MyISAM</code>\u8868\uFF0C\u5E76\u4E3A\u5176\u63D2\u5165\u4E00\u6761\u8BB0\u5F55\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; CREATE TABLE t(i int) Engine=MyISAM;
Query OK, 0 rows affected (0.05 sec)

mysql&gt; INSERT INTO t VALUES(1);
Query OK, 1 row affected (0.01 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u6211\u4EEC\u770B\u4E00\u4E0B\u67E5\u8BE2\u8FD9\u4E2A\u8868\u7684\u6267\u884C\u8BA1\u5212\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM t;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220630164434315.png" alt="image-20220630164434315" style="float:left;"><p>\u53EF\u4EE5\u770B\u5230<code>type</code>\u5217\u7684\u503C\u5C31\u662F<code>system</code>\u4E86\uFF0C</p><blockquote><p>\u6D4B\u8BD5\uFF0C\u53EF\u4EE5\u628A\u8868\u6539\u6210\u4F7F\u7528InnoDB\u5B58\u50A8\u5F15\u64CE\uFF0C\u8BD5\u8BD5\u770B\u6267\u884C\u8BA1\u5212\u7684<code>type</code>\u5217\u662F\u4EC0\u4E48\u3002ALL</p></blockquote></li><li><p><code>const</code></p><p>\u5F53\u6211\u4EEC\u6839\u636E\u4E3B\u952E\u6216\u8005\u552F\u4E00\u4E8C\u7EA7\u7D22\u5F15\u5217\u4E0E\u5E38\u6570\u8FDB\u884C\u7B49\u503C\u5339\u914D\u65F6\uFF0C\u5BF9\u5355\u8868\u7684\u8BBF\u95EE\u65B9\u6CD5\u5C31\u662F<code>const</code>, \u6BD4\u5982\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE id = 10005;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220630164724548.png" alt="image-20220630164724548" style="float:left;"></li><li><p><code>eq_ref</code></p><p>\u5728\u8FDE\u63A5\u67E5\u8BE2\u65F6\uFF0C\u5982\u679C\u88AB\u9A71\u52A8\u8868\u662F\u901A\u8FC7\u4E3B\u952E\u6216\u8005\u552F\u4E00\u4E8C\u7EA7\u7D22\u5F15\u5217\u7B49\u503C\u5339\u914D\u7684\u65B9\u5F0F\u8FDB\u884C\u8BBF\u95EE\u7684\uFF08\u5982\u679C\u8BE5\u4E3B\u952E\u6216\u8005\u552F\u4E00\u4E8C\u7EA7\u7D22\u5F15\u662F\u8054\u5408\u7D22\u5F15\u7684\u8BDD\uFF0C\u6240\u6709\u7684\u7D22\u5F15\u5217\u90FD\u5FC5\u987B\u8FDB\u884C\u7B49\u503C\u6BD4\u8F83\uFF09\u3002\u5219\u5BF9\u8BE5\u88AB\u9A71\u52A8\u8868\u7684\u8BBF\u95EE\u65B9\u6CD5\u5C31\u662F<code>eq_ref</code>\uFF0C\u6BD4\u65B9\u8BF4\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 INNER JOIN s2 ON s1.id = s2.id;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220630164802559.png" alt="image-20220630164802559" style="float:left;"><p>\u4ECE\u6267\u884C\u8BA1\u5212\u7684\u7ED3\u679C\u4E2D\u53EF\u4EE5\u770B\u51FA\uFF0CMySQL\u6253\u7B97\u5C06s2\u4F5C\u4E3A\u9A71\u52A8\u8868\uFF0Cs1\u4F5C\u4E3A\u88AB\u9A71\u52A8\u8868\uFF0C\u91CD\u70B9\u5173\u6CE8s1\u7684\u8BBF\u95EE \u65B9\u6CD5\u662F <code>eq_ref</code> \uFF0C\u8868\u660E\u5728\u8BBF\u95EEs1\u8868\u7684\u65F6\u5019\u53EF\u4EE5 <code>\u901A\u8FC7\u4E3B\u952E\u7684\u7B49\u503C\u5339\u914D</code> \u6765\u8FDB\u884C\u8BBF\u95EE\u3002</p></li><li><p><code>ref</code></p><p>\u5F53\u901A\u8FC7\u666E\u901A\u7684\u4E8C\u7EA7\u7D22\u5F15\u5217\u4E0E\u5E38\u91CF\u8FDB\u884C\u7B49\u503C\u5339\u914D\u65F6\u6765\u67E5\u8BE2\u67D0\u4E2A\u8868\uFF0C\u90A3\u4E48\u5BF9\u8BE5\u8868\u7684\u8BBF\u95EE\u65B9\u6CD5\u5C31\u53EF\u80FD\u662F<code>ref</code>\uFF0C\u6BD4\u65B9\u8BF4\u4E0B\u8FB9\u8FD9\u4E2A\u67E5\u8BE2\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220630164930020.png" alt="image-20220630164930020" style="float:left;"></li><li><p><code>fulltext</code></p><p>\u5168\u6587\u7D22\u5F15</p></li><li><p><code>ref_or_null</code></p><p>\u5F53\u5BF9\u666E\u901A\u4E8C\u7EA7\u7D22\u5F15\u8FDB\u884C\u7B49\u503C\u5339\u914D\u67E5\u8BE2\uFF0C\u8BE5\u7D22\u5F15\u5217\u7684\u503C\u4E5F\u53EF\u4EE5\u662F<code>NULL</code>\u503C\u65F6\uFF0C\u90A3\u4E48\u5BF9\u8BE5\u8868\u7684\u8BBF\u95EE\u65B9\u6CD5\u5C31\u53EF\u80FD\u662F<code>ref_or_null</code>\uFF0C\u6BD4\u5982\u8BF4\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 = &#39;a&#39; OR key1 IS NULL;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220630175133920.png" alt="image-20220630175133920" style="float:left;"></li><li><p><code>index_merge</code></p><p>\u4E00\u822C\u60C5\u51B5\u4E0B\u5BF9\u4E8E\u67D0\u4E2A\u8868\u7684\u67E5\u8BE2\u53EA\u80FD\u4F7F\u7528\u5230\u4E00\u4E2A\u7D22\u5F15\uFF0C\u4F46\u5355\u8868\u8BBF\u95EE\u65B9\u6CD5\u65F6\u5728\u67D0\u4E9B\u573A\u666F\u4E0B\u53EF\u4EE5\u4F7F\u7528<code>Interseation\u3001union\u3001Sort-Union</code>\u8FD9\u4E09\u79CD\u7D22\u5F15\u5408\u5E76\u7684\u65B9\u5F0F\u6765\u6267\u884C\u67E5\u8BE2\u3002\u6211\u4EEC\u770B\u4E00\u4E0B\u6267\u884C\u8BA1\u5212\u4E2D\u662F\u600E\u4E48\u4F53\u73B0MySQL\u4F7F\u7528\u7D22\u5F15\u5408\u5E76\u7684\u65B9\u5F0F\u6765\u5BF9\u67D0\u4E2A\u8868\u6267\u884C\u67E5\u8BE2\u7684\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 = &#39;a&#39; OR key3 = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220630175511644.png" alt="image-20220630175511644" style="float:left;"><p>\u4ECE\u6267\u884C\u8BA1\u5212\u7684 <code>type</code> \u5217\u7684\u503C\u662F <code>index_merge</code> \u5C31\u53EF\u4EE5\u770B\u51FA\uFF0CMySQL \u6253\u7B97\u4F7F\u7528\u7D22\u5F15\u5408\u5E76\u7684\u65B9\u5F0F\u6765\u6267\u884C \u5BF9 s1 \u8868\u7684\u67E5\u8BE2\u3002</p></li><li><p><code>unique_subquery</code></p><p>\u7C7B\u4F3C\u4E8E\u4E24\u8868\u8FDE\u63A5\u4E2D\u88AB\u9A71\u52A8\u8868\u7684<code>eq_ref</code>\u8BBF\u95EE\u65B9\u6CD5\uFF0C<code>unique_subquery</code>\u662F\u9488\u5BF9\u5728\u4E00\u4E9B\u5305\u542B<code>IN</code>\u5B50\u67E5\u8BE2\u7684\u67E5\u8BE2\u8BED\u53E5\u4E2D\uFF0C\u5982\u679C\u67E5\u8BE2\u4F18\u5316\u5668\u51B3\u5B9A\u5C06<code>IN</code>\u5B50\u67E5\u8BE2\u8F6C\u6362\u4E3A<code>EXISTS</code>\u5B50\u67E5\u8BE2\uFF0C\u800C\u4E14\u5B50\u67E5\u8BE2\u53EF\u4EE5\u4F7F\u7528\u5230\u4E3B\u952E\u8FDB\u884C\u7B49\u503C\u5339\u914D\u7684\u8BDD\uFF0C\u90A3\u4E48\u8BE5\u5B50\u67E5\u8BE2\u6267\u884C\u8BA1\u5212\u7684<code>type</code>\u5217\u7684\u503C\u5C31\u662F<code>unique_subquery</code>\uFF0C\u6BD4\u5982\u4E0B\u8FB9\u7684\u8FD9\u4E2A\u67E5\u8BE2\u8BED\u53E5\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key2 IN (SELECT id FROM s2 where s1.key1 = s2.key1) OR key3 = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220630180123913.png" alt="image-20220630180123913" style="float:left;"></li></ul><ul><li><p><code>index_subquery</code></p><p><code>index_subquery</code> \u4E0E <code>unique_subquery</code> \u7C7B\u4F3C\uFF0C\u53EA\u4E0D\u8FC7\u8BBF\u95EE\u5B50\u67E5\u8BE2\u4E2D\u7684\u8868\u65F6\u4F7F\u7528\u7684\u662F\u666E\u901A\u7684\u7D22\u5F15\uFF0C\u6BD4\u5982\u8FD9\u6837\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE common_field IN (SELECT key3 FROM s2 where s1.key1 = s2.key1) OR key3 = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220703214407225.png" alt="image-20220703214407225"></p><ul><li><p><code>range</code></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 IN (&#39;a&#39;, &#39;b&#39;, &#39;c&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220703214633338.png" alt="image-20220703214633338"></p><p>\u6216\u8005\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 &gt; &#39;a&#39; AND key1 &lt; &#39;b&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220703214657251.png" alt="image-20220703214657251"></p></li><li><p><code>index</code></p><p>\u5F53\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528\u7D22\u5F15\u8986\u76D6\uFF0C\u4F46\u9700\u8981\u626B\u63CF\u5168\u90E8\u7684\u7D22\u5F15\u8BB0\u5F55\u65F6\uFF0C\u8BE5\u8868\u7684\u8BBF\u95EE\u65B9\u6CD5\u5C31\u662F<code>index</code>\uFF0C\u6BD4\u5982\u8FD9\u6837\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT key_part2 FROM s1 WHERE key_part3 = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220703214844885.png" alt="image-20220703214844885"></p><p>\u4E0A\u8FF0\u67E5\u8BE2\u4E2D\u7684\u6240\u6709\u5217\u8868\u4E2D\u53EA\u6709key_part2 \u4E00\u4E2A\u5217\uFF0C\u800C\u4E14\u641C\u7D22\u6761\u4EF6\u4E2D\u4E5F\u53EA\u6709 key_part3 \u4E00\u4E2A\u5217\uFF0C\u8FD9\u4E24\u4E2A\u5217\u53C8\u6070\u597D\u5305\u542B\u5728idx_key_part\u8FD9\u4E2A\u7D22\u5F15\u4E2D\uFF0C\u53EF\u662F\u641C\u7D22\u6761\u4EF6key_part3\u4E0D\u80FD\u76F4\u63A5\u4F7F\u7528\u8BE5\u7D22\u5F15\u8FDB\u884C<code>ref</code>\u548C<code>range</code>\u65B9\u5F0F\u7684\u8BBF\u95EE\uFF0C\u53EA\u80FD\u626B\u63CF\u6574\u4E2A<code>idx_key_part</code>\u7D22\u5F15\u7684\u8BB0\u5F55\uFF0C\u6240\u4EE5\u67E5\u8BE2\u8BA1\u5212\u7684<code>type</code>\u5217\u7684\u503C\u5C31\u662F<code>index</code>\u3002</p><blockquote><p>\u518D\u4E00\u6B21\u5F3A\u8C03\uFF0C\u5BF9\u4E8E\u4F7F\u7528InnoDB\u5B58\u50A8\u5F15\u64CE\u7684\u8868\u6765\u8BF4\uFF0C\u4E8C\u7EA7\u7D22\u5F15\u7684\u8BB0\u5F55\u53EA\u5305\u542B\u7D22\u5F15\u5217\u548C\u4E3B\u952E\u5217\u7684\u503C\uFF0C\u800C\u805A\u7C07\u7D22\u5F15\u4E2D\u5305\u542B\u7528\u6237\u5B9A\u4E49\u7684\u5168\u90E8\u5217\u4EE5\u53CA\u4E00\u4E9B\u9690\u85CF\u5217\uFF0C\u6240\u4EE5\u626B\u63CF\u4E8C\u7EA7\u7D22\u5F15\u7684\u4EE3\u4EF7\u6BD4\u76F4\u63A5\u5168\u8868\u626B\u63CF\uFF0C\u4E5F\u5C31\u662F\u626B\u63CF\u805A\u7C07\u7D22\u5F15\u7684\u4EE3\u4EF7\u66F4\u4F4E\u4E00\u4E9B\u3002</p></blockquote></li><li><p><code>ALL</code></p><p>\u6700\u719F\u6089\u7684\u5168\u8868\u626B\u63CF\uFF0C\u5C31\u4E0D\u591A\u8BF4\u4E86\uFF0C\u76F4\u63A5\u770B\u4F8B\u5B50\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220703215958374.png" alt="image-20220703215958374"></p></li></ul><p>**\u5C0F\u7ED3: **</p><p>**\u7ED3\u679C\u503C\u4ECE\u6700\u597D\u5230\u6700\u574F\u4F9D\u6B21\u662F\uFF1A **</p><p><strong>system &gt; const &gt; eq_ref &gt; ref</strong> &gt; fulltext &gt; ref_or_null &gt; index_merge &gt; unique_subquery &gt; index_subquery &gt; range &gt; index &gt; ALL</p><p><strong>\u5176\u4E2D\u6BD4\u8F83\u91CD\u8981\u7684\u51E0\u4E2A\u63D0\u53D6\u51FA\u6765\uFF08\u89C1\u4E0A\u56FE\u4E2D\u7684\u7C97\u4F53\uFF09\u3002SQL \u6027\u80FD\u4F18\u5316\u7684\u76EE\u6807\uFF1A\u81F3\u5C11\u8981\u8FBE\u5230 range \u7EA7\u522B\uFF0C\u8981\u6C42\u662F ref \u7EA7\u522B\uFF0C\u6700\u597D\u662F consts\u7EA7\u522B\u3002\uFF08\u963F\u91CC\u5DF4\u5DF4 \u5F00\u53D1\u624B\u518C\u8981\u6C42\uFF09</strong></p><h6 id="_6-possible-keys\u548Ckey" tabindex="-1"><a class="header-anchor" href="#_6-possible-keys\u548Ckey" aria-hidden="true">#</a> 6. possible_keys\u548Ckey</h6><p>\u5728EXPLAIN\u8BED\u53E5\u8F93\u51FA\u7684\u6267\u884C\u8BA1\u5212\u4E2D\uFF0C<code>possible_keys</code>\u5217\u8868\u793A\u5728\u67D0\u4E2A\u67E5\u8BE2\u8BED\u53E5\u4E2D\uFF0C\u5BF9\u67D0\u4E2A\u5217\u6267\u884C<code>\u5355\u8868\u67E5\u8BE2\u65F6\u53EF\u80FD\u7528\u5230\u7684\u7D22\u5F15</code>\u6709\u54EA\u4E9B\u3002\u4E00\u822C\u67E5\u8BE2\u6D89\u53CA\u5230\u7684\u5B57\u6BB5\u4E0A\u82E5\u5B58\u5728\u7D22\u5F15\uFF0C\u5219\u8BE5\u7D22\u5F15\u5C06\u88AB\u5217\u51FA\uFF0C\u4F46\u4E0D\u4E00\u5B9A\u88AB\u67E5\u8BE2\u4F7F\u7528\u3002<code>key</code>\u5217\u8868\u793A<code>\u5B9E\u9645\u7528\u5230\u7684\u7D22\u5F15</code>\u6709\u54EA\u4E9B\uFF0C\u5982\u679C\u4E3ANULL\uFF0C\u5219\u6CA1\u6709\u4F7F\u7528\u7D22\u5F15\u3002\u6BD4\u65B9\u8BF4\u4E0B\u9762\u8FD9\u4E2A\u67E5\u8BE2\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 &gt; &#39;z&#39; AND key3 = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220703220724964.png" alt="image-20220703220724964"></p><p>\u4E0A\u8FF0\u6267\u884C\u8BA1\u5212\u7684<code>possible_keys</code>\u5217\u7684\u503C\u662F<code>idx_key1, idx_key3</code>\uFF0C\u8868\u793A\u8BE5\u67E5\u8BE2\u53EF\u80FD\u4F7F\u7528\u5230<code>idx_key1, idx_key3</code>\u4E24\u4E2A\u7D22\u5F15\uFF0C\u7136\u540E<code>key</code>\u5217\u7684\u503C\u662F<code>idx_key3</code>\uFF0C\u8868\u793A\u7ECF\u8FC7\u67E5\u8BE2\u4F18\u5316\u5668\u8BA1\u7B97\u4F7F\u7528\u4E0D\u540C\u7D22\u5F15\u7684\u6210\u672C\u540E\uFF0C\u6700\u540E\u51B3\u5B9A\u91C7\u7528<code>idx_key3</code>\u3002</p><h6 id="_7-key-len-\u2606" tabindex="-1"><a class="header-anchor" href="#_7-key-len-\u2606" aria-hidden="true">#</a> 7. key_len \u2606</h6><p>\u5B9E\u9645\u4F7F\u7528\u5230\u7684\u7D22\u5F15\u957F\u5EA6 (\u5373\uFF1A\u5B57\u8282\u6570)</p><p>\u5E2E\u4F60\u68C0\u67E5<code>\u662F\u5426\u5145\u5206\u7684\u5229\u7528\u4E86\u7D22\u5F15</code>\uFF0C<code>\u503C\u8D8A\u5927\u8D8A\u597D</code>\uFF0C\u4E3B\u8981\u9488\u5BF9\u4E8E\u8054\u5408\u7D22\u5F15\uFF0C\u6709\u4E00\u5B9A\u7684\u53C2\u8003\u610F\u4E49\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE id = 10005;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704130030692.png" alt="image-20220704130030692"></p><blockquote><p>int \u5360\u7528 4 \u4E2A\u5B57\u8282</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key2 = 10126;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704130138204.png" alt="image-20220704130138204"></p><blockquote><p>key2\u4E0A\u6709\u4E00\u4E2A\u552F\u4E00\u6027\u7EA6\u675F\uFF0C\u662F\u5426\u4E3ANULL\u5360\u7528\u4E00\u4E2A\u5B57\u8282\uFF0C\u90A3\u4E48\u5C31\u662F5\u4E2A\u5B57\u8282</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704130214482.png" alt="image-20220704130214482"></p><blockquote><p>key1 VARCHAR(100) \u4E00\u4E2A\u5B57\u7B26\u53603\u4E2A\u5B57\u8282\uFF0C100*3\uFF0C\u662F\u5426\u4E3ANULL\u5360\u7528\u4E00\u4E2A\u5B57\u8282\uFF0Cvarchar\u7684\u957F\u5EA6\u4FE1\u606F\u5360\u4E24\u4E2A\u5B57\u8282\u3002</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key_part1 = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704130442095.png" alt="image-20220704130442095"></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key_part1 = &#39;a&#39; AND key_part2 = &#39;b&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704130515031.png" alt="image-20220704130515031"></p><blockquote><p>\u8054\u5408\u7D22\u5F15\u4E2D\u53EF\u4EE5\u6BD4\u8F83\uFF0Ckey_len=606\u7684\u597D\u4E8Ekey_len=303</p></blockquote><p>**\u7EC3\u4E60\uFF1A **</p><p>key_len\u7684\u957F\u5EA6\u8BA1\u7B97\u516C\u5F0F\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>varchar(10)\u53D8\u957F\u5B57\u6BB5\u4E14\u5141\u8BB8NULL = 10 * ( character set\uFF1Autf8=3,gbk=2,latin1=1)+1(NULL)+2(\u53D8\u957F\u5B57\u6BB5)

varchar(10)\u53D8\u957F\u5B57\u6BB5\u4E14\u4E0D\u5141\u8BB8NULL = 10 * ( character set\uFF1Autf8=3,gbk=2,latin1=1)+2(\u53D8\u957F\u5B57\u6BB5)

char(10)\u56FA\u5B9A\u5B57\u6BB5\u4E14\u5141\u8BB8NULL = 10 * ( character set\uFF1Autf8=3,gbk=2,latin1=1)+1(NULL)

char(10)\u56FA\u5B9A\u5B57\u6BB5\u4E14\u4E0D\u5141\u8BB8NULL = 10 * ( character set\uFF1Autf8=3,gbk=2,latin1=1)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_8-ref" tabindex="-1"><a class="header-anchor" href="#_8-ref" aria-hidden="true">#</a> 8. ref</h6><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704131759630.png" alt="image-20220704131759630" style="float:left;"><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704130837498.png" alt="image-20220704130837498"></p><p>\u53EF\u4EE5\u770B\u5230<code>ref</code>\u5217\u7684\u503C\u662F<code>const</code>\uFF0C\u8868\u660E\u5728\u4F7F\u7528<code>idx_key1</code>\u7D22\u5F15\u6267\u884C\u67E5\u8BE2\u65F6\uFF0C\u4E0E<code>key1</code>\u5217\u4F5C\u7B49\u503C\u5339\u914D\u7684\u5BF9\u8C61\u662F\u4E00\u4E2A\u5E38\u6570\uFF0C\u5F53\u7136\u6709\u65F6\u5019\u66F4\u590D\u6742\u4E00\u70B9:</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 INNER JOIN s2 ON s1.id = s2.id;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704130925426.png" alt="image-20220704130925426"></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 INNER JOIN s2 ON s2.key1 = UPPER(s1.key1);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704130957359.png" alt="image-20220704130957359"></p><h6 id="_9-rows-\u2606" tabindex="-1"><a class="header-anchor" href="#_9-rows-\u2606" aria-hidden="true">#</a> 9. rows \u2606</h6><p>\u9884\u4F30\u7684\u9700\u8981\u8BFB\u53D6\u7684\u8BB0\u5F55\u6761\u6570\uFF0C<code>\u503C\u8D8A\u5C0F\u8D8A\u597D</code>\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 &gt; &#39;z&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704131050496.png" alt="image-20220704131050496"></p><h6 id="_10-filtered" tabindex="-1"><a class="header-anchor" href="#_10-filtered" aria-hidden="true">#</a> 10. filtered</h6><p>\u67D0\u4E2A\u8868\u7ECF\u8FC7\u641C\u7D22\u6761\u4EF6\u8FC7\u6EE4\u540E\u5269\u4F59\u8BB0\u5F55\u6761\u6570\u7684\u767E\u5206\u6BD4</p><p>\u5982\u679C\u4F7F\u7528\u7684\u662F\u7D22\u5F15\u6267\u884C\u7684\u5355\u8868\u626B\u63CF\uFF0C\u90A3\u4E48\u8BA1\u7B97\u65F6\u9700\u8981\u4F30\u8BA1\u51FA\u6EE1\u8DB3\u9664\u4F7F\u7528\u5230\u5BF9\u5E94\u7D22\u5F15\u7684\u641C\u7D22\u6761\u4EF6\u5916\u7684\u5176\u4ED6\u641C\u7D22\u6761\u4EF6\u7684\u8BB0\u5F55\u6709\u591A\u5C11\u6761\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 &gt; &#39;z&#39; AND common_field = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704131323242.png" alt="image-20220704131323242"></p><p>\u5BF9\u4E8E\u5355\u8868\u67E5\u8BE2\u6765\u8BF4\uFF0C\u8FD9\u4E2Afiltered\u7684\u503C\u6CA1\u6709\u4EC0\u4E48\u610F\u4E49\uFF0C\u6211\u4EEC<code>\u66F4\u5173\u6CE8\u5728\u8FDE\u63A5\u67E5\u8BE2\u4E2D\u9A71\u52A8\u8868\u5BF9\u5E94\u7684\u6267\u884C\u8BA1\u5212\u8BB0\u5F55\u7684filtered\u503C</code>\uFF0C\u5B83\u51B3\u5B9A\u4E86\u88AB\u9A71\u52A8\u8868\u8981\u6267\u884C\u7684\u6B21\u6570 (\u5373: rows * filtered)</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 INNER JOIN s2 ON s1.key1 = s2.key1 WHERE s1.common_field = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704131644615.png" alt="image-20220704131644615"></p><p>\u4ECE\u6267\u884C\u8BA1\u5212\u4E2D\u53EF\u4EE5\u770B\u51FA\u6765\uFF0C\u67E5\u8BE2\u4F18\u5316\u5668\u6253\u7B97\u628A<code>s1</code>\u4F5C\u4E3A\u9A71\u52A8\u8868\uFF0C<code>s2</code>\u5F53\u505A\u88AB\u9A71\u52A8\u8868\u3002\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u9A71\u52A8\u8868<code>s1</code>\u8868\u7684\u6267\u884C\u8BA1\u5212\u7684<code>rows</code>\u5217\u4E3A<code>9688</code>\uFF0Cfiltered\u5217\u4E3A<code>10.00</code>\uFF0C\u8FD9\u610F\u5473\u7740\u9A71\u52A8\u8868<code>s1</code>\u7684\u6247\u51FA\u503C\u5C31\u662F<code>9688 x 10.00% = 968.8</code>\uFF0C\u8FD9\u8BF4\u660E\u8FD8\u8981\u5BF9\u88AB\u9A71\u52A8\u8868\u6267\u884C\u5927\u7EA6<code>968</code>\u6B21\u67E5\u8BE2\u3002</p><h6 id="_11-extra-\u2606" tabindex="-1"><a class="header-anchor" href="#_11-extra-\u2606" aria-hidden="true">#</a> 11. Extra \u2606</h6><p>\u987E\u540D\u601D\u4E49\uFF0C<code>Extra</code>\u5217\u662F\u7528\u6765\u8BF4\u660E\u4E00\u4E9B\u989D\u5916\u4FE1\u606F\u7684\uFF0C\u5305\u542B\u4E0D\u9002\u5408\u5728\u5176\u4ED6\u5217\u4E2D\u663E\u793A\u4F46\u5341\u5206\u91CD\u8981\u7684\u989D\u5916\u4FE1\u606F\u3002\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u8FD9\u4E9B\u989D\u5916\u4FE1\u606F\u6765<code>\u66F4\u51C6\u786E\u7684\u7406\u89E3MySQL\u5230\u5E95\u5C06\u5982\u4F55\u6267\u884C\u7ED9\u5B9A\u7684\u67E5\u8BE2\u8BED\u53E5</code>\u3002MySQL\u63D0\u4F9B\u7684\u989D\u5916\u4FE1\u606F\u6709\u597D\u51E0\u5341\u4E2A\uFF0C\u6211\u4EEC\u5C31\u4E0D\u4E00\u4E2A\u4E00\u4E2A\u4ECB\u7ECD\u4E86\uFF0C\u6240\u4EE5\u6211\u4EEC\u53EA\u6311\u9009\u6BD4\u8F83\u91CD\u8981\u7684\u989D\u5916\u4FE1\u606F\u4ECB\u7ECD\u7ED9\u5927\u5BB6\u3002</p><ul><li><p><code>No tables used</code></p><p>\u5F53\u67E5\u8BE2\u8BED\u53E5\u6CA1\u6709<code>FROM</code>\u5B50\u53E5\u65F6\u5C06\u4F1A\u63D0\u793A\u8BE5\u989D\u5916\u4FE1\u606F\uFF0C\u6BD4\u5982\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT 1;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704132345383.png" alt="image-20220704132345383"></p></li><li><p><code>Impossible WHERE</code></p><p>\u5F53\u67E5\u8BE2\u8BED\u53E5\u7684<code>WHERE</code>\u5B50\u53E5\u6C38\u8FDC\u4E3A<code>FALSE</code>\u65F6\u5C06\u4F1A\u63D0\u793A\u8BE5\u989D\u5916\u4FE1\u606F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE 1 != 1;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704132458978.png" alt="image-20220704132458978"></p></li><li><p><code>Using where</code></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704140148163.png" alt="image-20220704140148163" style="float:left;"><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE common_field = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704132655342.png" alt="image-20220704132655342"></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704140212813.png" alt="image-20220704140212813" style="float:left;"><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 = &#39;a&#39; AND common_field = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704133130515.png" alt="image-20220704133130515"></p></li><li><p><code>No matching min/max row</code></p><p>\u5F53\u67E5\u8BE2\u5217\u8868\u5904\u6709<code>MIN</code>\u6216\u8005<code>MAX</code>\u805A\u5408\u51FD\u6570\uFF0C\u4F46\u662F\u5E76\u6CA1\u6709\u7B26\u5408<code>WHERE</code>\u5B50\u53E5\u4E2D\u7684\u641C\u7D22\u6761\u4EF6\u7684\u8BB0\u5F55\u65F6\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT MIN(key1) FROM s1 WHERE key1 = &#39;abcdefg&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704134324354.png" alt="image-20220704134324354"></p></li><li><p><code>Using index</code></p><p>\u5F53\u6211\u4EEC\u7684\u67E5\u8BE2\u5217\u8868\u4EE5\u53CA\u641C\u7D22\u6761\u4EF6\u4E2D\u53EA\u5305\u542B\u5C5E\u4E8E\u67D0\u4E2A\u7D22\u5F15\u7684\u5217\uFF0C\u4E5F\u5C31\u662F\u5728\u53EF\u4EE5\u4F7F\u7528\u8986\u76D6\u7D22\u5F15\u7684\u60C5\u51B5\u4E0B\uFF0C\u5728<code>Extra</code>\u5217\u5C06\u4F1A\u63D0\u793A\u8BE5\u989D\u5916\u4FE1\u606F\u3002\u6BD4\u65B9\u8BF4\u4E0B\u8FB9\u8FD9\u4E2A\u67E5\u8BE2\u4E2D\u53EA\u9700\u8981\u7528\u5230<code>idx_key1</code>\u800C\u4E0D\u9700\u8981\u56DE\u8868\u64CD\u4F5C:</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT key1 FROM s1 WHERE key1 = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704134931220.png" alt="image-20220704134931220"></p></li><li><p><code>Using index condition</code></p><p>\u6709\u4E9B\u641C\u7D22\u6761\u4EF6\u4E2D\u867D\u7136\u51FA\u73B0\u4E86\u7D22\u5F15\u5217\uFF0C\u4F46\u5374\u4E0D\u80FD\u4F7F\u7528\u5230\u7D22\u5F15\uFF0C\u6BD4\u5982\u4E0B\u8FB9\u8FD9\u4E2A\u67E5\u8BE2\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT * FROM s1 WHERE key1 &gt; &#39;z&#39; AND key1 LIKE &#39;%a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704140344015.png" alt="image-20220704140344015" style="float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704140411033.png" alt="image-20220704140411033" style="float:left;"><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 &gt; &#39;z&#39; AND key1 LIKE &#39;%b&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704140441702.png" alt="image-20220704140441702"></p></li><li><p><code>Using join buffer (Block Nested Loop)</code></p><p>\u5728\u8FDE\u63A5\u67E5\u8BE2\u6267\u884C\u8FC7\u7A0B\u4E2D\uFF0C\u5F53\u88AB\u9A71\u52A8\u8868\u4E0D\u80FD\u6709\u6548\u7684\u5229\u7528\u7D22\u5F15\u52A0\u5FEB\u8BBF\u95EE\u901F\u5EA6\uFF0CMySQL\u4E00\u822C\u4F1A\u4E3A\u5176\u5206\u914D\u4E00\u5757\u540D\u53EB<code>join buffer</code>\u7684\u5185\u5B58\u5757\u6765\u52A0\u5FEB\u67E5\u8BE2\u901F\u5EA6\uFF0C\u4E5F\u5C31\u662F\u6211\u4EEC\u6240\u8BB2\u7684<code>\u57FA\u4E8E\u5757\u7684\u5D4C\u5957\u5FAA\u73AF\u7B97\u6CD5</code>\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 INNER JOIN s2 ON s1.common_field = s2.common_field;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704140815955.png" alt="image-20220704140815955"></p></li><li><p><code>Not exists</code></p><p>\u5F53\u6211\u4EEC\u4F7F\u7528\u5DE6(\u5916)\u8FDE\u63A5\u65F6\uFF0C\u5982\u679C<code>WHERE</code>\u5B50\u53E5\u4E2D\u5305\u542B\u8981\u6C42\u88AB\u9A71\u52A8\u8868\u7684\u67D0\u4E2A\u5217\u7B49\u4E8E<code>NULL</code>\u503C\u7684\u641C\u7D22\u6761\u4EF6\uFF0C\u800C\u4E14\u90A3\u4E2A\u5217\u662F\u4E0D\u5141\u8BB8\u5B58\u50A8<code>NULL</code>\u503C\u7684\uFF0C\u90A3\u4E48\u5728\u8BE5\u8868\u7684\u6267\u884C\u8BA1\u5212\u7684Extra\u5217\u5C31\u4F1A\u63D0\u793A\u8FD9\u4E2A\u4FE1\u606F\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 LEFT JOIN s2 ON s1.key1 = s2.key1 WHERE s2.id IS NULL;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704142059555.png" alt="image-20220704142059555"></p></li><li><p><code>Using intersect(...) \u3001 Using union(...) \u548C Using sort_union(...)</code></p><p>\u5982\u679C\u6267\u884C\u8BA1\u5212\u7684<code>Extra</code>\u5217\u51FA\u73B0\u4E86<code>Using intersect(...)</code>\u63D0\u793A\uFF0C\u8BF4\u660E\u51C6\u5907\u4F7F\u7528<code>Intersect</code>\u7D22\u5F15\u5408\u5E76\u7684\u65B9\u5F0F\u6267\u884C\u67E5\u8BE2\uFF0C\u62EC\u53F7\u4E2D\u7684<code>...</code>\u8868\u793A\u9700\u8981\u8FDB\u884C\u7D22\u5F15\u5408\u5E76\u7684\u7D22\u5F15\u540D\u79F0\uFF1B</p><p>\u5982\u679C\u51FA\u73B0<code>Using union(...)</code>\u63D0\u793A\uFF0C\u8BF4\u660E\u51C6\u5907\u4F7F\u7528<code>Union</code>\u7D22\u5F15\u5408\u5E76\u7684\u65B9\u5F0F\u6267\u884C\u67E5\u8BE2;</p><p>\u5982\u679C\u51FA\u73B0<code>Using sort_union(...)</code>\u63D0\u793A\uFF0C\u8BF4\u660E\u51C6\u5907\u4F7F\u7528<code>Sort-Union</code>\u7D22\u5F15\u5408\u5E76\u7684\u65B9\u5F0F\u6267\u884C\u67E5\u8BE2\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 = &#39;a&#39; OR key3 = &#39;a&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704142552890.png" alt="image-20220704142552890"></p></li><li><p><code>Zero limit</code></p><p>\u5F53\u6211\u4EEC\u7684<code>LIMIT</code>\u5B50\u53E5\u7684\u53C2\u6570\u4E3A<code>0</code>\u65F6\uFF0C\u8868\u793A\u538B\u6839\u513F\u4E0D\u6253\u7B97\u4ECE\u8868\u4E2D\u8BFB\u53D6\u4EFB\u4F55\u8BB0\u5F55\uFF0C\u5C06\u4F1A\u63D0\u793A\u8BE5\u989D\u5916\u4FE1\u606F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 LIMIT 0;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704142754394.png" alt="image-20220704142754394"></p></li><li><p><code>Using filesort</code></p><p>\u6709\u4E00\u4E9B\u60C5\u51B5\u4E0B\u5BF9\u7ED3\u679C\u96C6\u4E2D\u7684\u8BB0\u5F55\u8FDB\u884C\u6392\u5E8F\u662F\u53EF\u4EE5\u4F7F\u7528\u5230\u7D22\u5F15\u7684\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 ORDER BY key1 LIMIT 10;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704142901857.png" alt="image-20220704142901857"></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704145143170.png" alt="image-20220704145143170" style="float:left;"><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT * FROM s1 ORDER BY common_field LIMIT 10;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704143518857.png" alt="image-20220704143518857"></p><p>\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u5982\u679C\u67E5\u8BE2\u4E2D\u9700\u8981\u4F7F\u7528<code>filesort</code>\u7684\u65B9\u5F0F\u8FDB\u884C\u6392\u5E8F\u7684\u8BB0\u5F55\u975E\u5E38\u591A\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u8FC7\u7A0B\u662F\u5F88\u8017\u8D39\u6027\u80FD\u7684\uFF0C\u6211\u4EEC\u6700\u597D\u60F3\u529E\u6CD5<code>\u5C06\u4F7F\u7528\u6587\u4EF6\u6392\u5E8F\u7684\u6267\u884C\u65B9\u5F0F\u6539\u4E3A\u7D22\u5F15\u8FDB\u884C\u6392\u5E8F</code>\u3002</p></li><li><p><code>Using temporary</code></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704145924130.png" alt="image-20220704145924130" style="float:left;"><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT DISTINCT common_field FROM s1;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704150030005.png" alt="image-20220704150030005"></p><p>\u518D\u6BD4\u5982\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT common_field, COUNT(*) AS amount FROM s1 GROUP BY common_field;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704150156416.png" alt="image-20220704150156416"></p><p>\u6267\u884C\u8BA1\u5212\u4E2D\u51FA\u73B0<code>Using temporary</code>\u5E76\u4E0D\u662F\u4E00\u4E2A\u597D\u7684\u5F81\u5146\uFF0C\u56E0\u4E3A\u5EFA\u7ACB\u4E0E\u7EF4\u62A4\u4E34\u65F6\u8868\u8981\u4ED8\u51FA\u5F88\u5927\u7684\u6210\u672C\u7684\uFF0C\u6240\u4EE5\u6211\u4EEC<code>\u6700\u597D\u80FD\u4F7F\u7528\u7D22\u5F15\u6765\u66FF\u4EE3\u6389\u4F7F\u7528\u4E34\u65F6\u8868</code>\uFF0C\u6BD4\u65B9\u8BF4\u4E0B\u8FB9\u8FD9\u4E2A\u5305\u542B<code>GROUP BY</code>\u5B50\u53E5\u7684\u67E5\u8BE2\u5C31\u4E0D\u9700\u8981\u4F7F\u7528\u4E34\u65F6\u8868\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT key1, COUNT(*) AS amount FROM s1 GROUP BY key1;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704150308189.png" alt="image-20220704150308189"></p><p>\u4ECE <code>Extra</code> \u7684 <code>Using index</code> \u7684\u63D0\u793A\u91CC\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\uFF0C\u4E0A\u8FF0\u67E5\u8BE2\u53EA\u9700\u8981\u626B\u63CF <code>idx_key1</code> \u7D22\u5F15\u5C31\u53EF\u4EE5\u641E \u5B9A\u4E86\uFF0C\u4E0D\u518D\u9700\u8981\u4E34\u65F6\u8868\u4E86\u3002</p></li><li><p>\u5176\u4ED6</p><p>\u5176\u5B83\u7279\u6B8A\u60C5\u51B5\u8FD9\u91CC\u7701\u7565\u3002</p></li></ul><h6 id="_12-\u5C0F\u7ED3" tabindex="-1"><a class="header-anchor" href="#_12-\u5C0F\u7ED3" aria-hidden="true">#</a> 12. \u5C0F\u7ED3</h6><ul><li>EXPLAIN\u4E0D\u8003\u8651\u5404\u79CDCache</li><li>EXPLAIN\u4E0D\u80FD\u663E\u793AMySQL\u5728\u6267\u884C\u67E5\u8BE2\u65F6\u6240\u4F5C\u7684\u4F18\u5316\u5DE5\u4F5C</li><li>EXPLAIN\u4E0D\u4F1A\u544A\u8BC9\u4F60\u5173\u4E8E\u89E6\u53D1\u5668\u3001\u5B58\u50A8\u8FC7\u7A0B\u7684\u4FE1\u606F\u6216\u7528\u6237\u81EA\u5B9A\u4E49\u51FD\u6570\u5BF9\u67E5\u8BE2\u7684\u5F71\u54CD\u60C5\u51B5</li><li>\u90E8\u5206\u7EDF\u8BA1\u4FE1\u606F\u662F\u4F30\u7B97\u7684\uFF0C\u5E76\u975E\u7CBE\u786E\u503C</li></ul><h3 id="_7-explain\u7684\u8FDB\u4E00\u6B65\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_7-explain\u7684\u8FDB\u4E00\u6B65\u4F7F\u7528" aria-hidden="true">#</a> 7. EXPLAIN\u7684\u8FDB\u4E00\u6B65\u4F7F\u7528</h3><h5 id="_7-1-explain\u56DB\u79CD\u8F93\u51FA\u683C\u5F0F" tabindex="-1"><a class="header-anchor" href="#_7-1-explain\u56DB\u79CD\u8F93\u51FA\u683C\u5F0F" aria-hidden="true">#</a> 7.1 EXPLAIN\u56DB\u79CD\u8F93\u51FA\u683C\u5F0F</h5><p>\u8FD9\u91CC\u8C08\u8C08EXPLAIN\u7684\u8F93\u51FA\u683C\u5F0F\u3002EXPLAIN\u53EF\u4EE5\u8F93\u51FA\u56DB\u79CD\u683C\u5F0F\uFF1A <code>\u4F20\u7EDF\u683C\u5F0F</code> \uFF0C<code>JSON\u683C\u5F0F</code> \uFF0C <code>TREE\u683C\u5F0F</code> \u4EE5\u53CA <code>\u53EF\u89C6\u5316\u8F93\u51FA</code> \u3002\u7528\u6237\u53EF\u4EE5\u6839\u636E\u9700\u8981\u9009\u62E9\u9002\u7528\u4E8E\u81EA\u5DF1\u7684\u683C\u5F0F\u3002</p><h6 id="_1-\u4F20\u7EDF\u683C\u5F0F" tabindex="-1"><a class="header-anchor" href="#_1-\u4F20\u7EDF\u683C\u5F0F" aria-hidden="true">#</a> 1. \u4F20\u7EDF\u683C\u5F0F</h6><p>\u4F20\u7EDF\u683C\u5F0F\u7B80\u5355\u660E\u4E86\uFF0C\u8F93\u51FA\u662F\u4E00\u4E2A\u8868\u683C\u5F62\u5F0F\uFF0C\u6982\u8981\u8BF4\u660E\u67E5\u8BE2\u8BA1\u5212\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT s1.key1, s2.key1 FROM s1 LEFT JOIN s2 ON s1.key1 = s2.key1 WHERE s2.common_field IS NOT NULL;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704161702384.png" alt="image-20220704161702384"></p><h6 id="_2-json\u683C\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-json\u683C\u5F0F" aria-hidden="true">#</a> 2. JSON\u683C\u5F0F</h6><p>\u7B2C1\u79CD\u683C\u5F0F\u4E2D\u4ECB\u7ECD\u7684<code>EXPLAIN</code>\u8BED\u53E5\u8F93\u51FA\u4E2D\u7F3A\u5C11\u4E86\u4E00\u4E2A\u8861\u91CF\u6267\u884C\u597D\u574F\u7684\u91CD\u8981\u5C5E\u6027 \u2014\u2014 <code>\u6210\u672C</code>\u3002\u800CJSON\u683C\u5F0F\u662F\u56DB\u79CD\u683C\u5F0F\u91CC\u9762\u8F93\u51FA<code>\u4FE1\u606F\u6700\u8BE6\u5C3D</code>\u7684\u683C\u5F0F\uFF0C\u91CC\u9762\u5305\u542B\u4E86\u6267\u884C\u7684\u6210\u672C\u4FE1\u606F\u3002</p><ul><li>JSON\u683C\u5F0F\uFF1A\u5728EXPLAIN\u5355\u8BCD\u548C\u771F\u6B63\u7684\u67E5\u8BE2\u8BED\u53E5\u4E2D\u95F4\u52A0\u4E0A FORMAT=JSON \u3002</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN FORMAT=JSON SELECT ....
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>EXPLAIN\u7684Column\u4E0EJSON\u7684\u5BF9\u5E94\u5173\u7CFB\uFF1A(\u6765\u6E90\u4E8EMySQL 5.7\u6587\u6863)</li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704164236909.png" alt="image-20220704164236909"></p><p>\u8FD9\u6837\u6211\u4EEC\u5C31\u53EF\u4EE5\u5F97\u5230\u4E00\u4E2Ajson\u683C\u5F0F\u7684\u6267\u884C\u8BA1\u5212\uFF0C\u91CC\u9762\u5305\u542B\u8BE5\u8BA1\u5212\u82B1\u8D39\u7684\u6210\u672C\u3002\u6BD4\u5982\u8FD9\u6837\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN FORMAT=JSON SELECT * FROM s1 INNER JOIN s2 ON s1.key1 = s2.key2 WHERE s1.common_field = &#39;a&#39;\\G
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704172833362.png" alt="image-20220704172833362"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704172920158.png" alt="image-20220704172920158"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704173012413.png" alt="image-20220704173012413"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704173045190.png" alt="image-20220704173045190"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704173108888.png" alt="image-20220704173108888"></p><p>\u6211\u4EEC\u4F7F\u7528 ## \u540E\u8FB9\u8DDF\u968F\u6CE8\u91CA\u7684\u5F62\u5F0F\u4E3A\u5927\u5BB6\u89E3\u91CA\u4E86 <code>EXPLAIN FORMAT=JSON</code> \u8BED\u53E5\u7684\u8F93\u51FA\u5185\u5BB9\uFF0C\u4F46\u662F\u5927\u5BB6\u53EF\u80FD \u6709\u7591\u95EE &quot;<code>cost_info</code>&quot; \u91CC\u8FB9\u7684\u6210\u672C\u770B\u7740\u602A\u602A\u7684\uFF0C\u5B83\u4EEC\u662F\u600E\u4E48\u8BA1\u7B97\u51FA\u6765\u7684\uFF1F\u5148\u770B s1 \u8868\u7684 &quot;<code>cost_info</code>&quot; \u90E8 \u5206\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&quot;cost_info&quot;: {
    &quot;read_cost&quot;: &quot;1840.84&quot;,
    &quot;eval_cost&quot;: &quot;193.76&quot;,
    &quot;prefix_cost&quot;: &quot;2034.60&quot;,
    &quot;data_read_per_join&quot;: &quot;1M&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><code>read_cost</code> \u662F\u7531\u4E0B\u8FB9\u8FD9\u4E24\u90E8\u5206\u7EC4\u6210\u7684\uFF1A</p><ul><li>IO \u6210\u672C</li><li>\u68C0\u6D4B rows \xD7 (1 - filter) \u6761\u8BB0\u5F55\u7684 CPU \u6210\u672C</li></ul><blockquote><p>\u5C0F\u8D34\u58EB\uFF1A rows\u548Cfilter\u90FD\u662F\u6211\u4EEC\u524D\u8FB9\u4ECB\u7ECD\u6267\u884C\u8BA1\u5212\u7684\u8F93\u51FA\u5217\uFF0C\u5728JSON\u683C\u5F0F\u7684\u6267\u884C\u8BA1\u5212\u4E2D\uFF0Crows \u76F8\u5F53\u4E8Erows_examined_per_scan\uFF0Cfiltered\u540D\u79F0\u4E0D\u53D8\u3002</p></blockquote></li></ul><ul><li><p><code>eval_cost</code> \u662F\u8FD9\u6837\u8BA1\u7B97\u7684\uFF1A</p><p>\u68C0\u6D4B rows \xD7 filter \u6761\u8BB0\u5F55\u7684\u6210\u672C\u3002</p></li><li><p><code>prefix_cost</code> \u5C31\u662F\u5355\u72EC\u67E5\u8BE2 s1 \u8868\u7684\u6210\u672C\uFF0C\u4E5F\u5C31\u662F\uFF1A</p><p><code>read_cost + eval_cost</code></p></li><li><p><code>data_read_per_join</code> \u8868\u793A\u5728\u6B64\u6B21\u67E5\u8BE2\u4E2D\u9700\u8981\u8BFB\u53D6\u7684\u6570\u636E\u91CF\u3002</p></li></ul><p>\u5BF9\u4E8E <code>s2</code> \u8868\u7684 &quot;<code>cost_info</code>&quot; \u90E8\u5206\u662F\u8FD9\u6837\u7684\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&quot;cost_info&quot;: {
    &quot;read_cost&quot;: &quot;968.80&quot;,
    &quot;eval_cost&quot;: &quot;193.76&quot;,
    &quot;prefix_cost&quot;: &quot;3197.16&quot;,
    &quot;data_read_per_join&quot;: &quot;1M&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7531\u4E8E <code>s2</code> \u8868\u662F\u88AB\u9A71\u52A8\u8868\uFF0C\u6240\u4EE5\u53EF\u80FD\u88AB\u8BFB\u53D6\u591A\u6B21\uFF0C\u8FD9\u91CC\u7684<code>read_cost</code> \u548C <code>eval_cost</code> \u662F\u8BBF\u95EE\u591A\u6B21 <code>s2</code> \u8868\u540E\u7D2F\u52A0\u8D77\u6765\u7684\u503C\uFF0C\u5927\u5BB6\u4E3B\u8981\u5173\u6CE8\u91CC\u8FB9\u513F\u7684 <code>prefix_cost</code> \u7684\u503C\u4EE3\u8868\u7684\u662F\u6574\u4E2A\u8FDE\u63A5\u67E5\u8BE2\u9884\u8BA1\u7684\u6210\u672C\uFF0C\u4E5F\u5C31\u662F\u5355\u6B21\u67E5\u8BE2 <code>s1</code> \u8868\u548C\u591A\u6B21\u67E5\u8BE2 <code>s2</code> \u8868\u540E\u7684\u6210\u672C\u7684\u548C\uFF0C\u4E5F\u5C31\u662F\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>968.80 + 193.76 + 2034.60 = 3197.16
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h6 id="_3-tree\u683C\u5F0F" tabindex="-1"><a class="header-anchor" href="#_3-tree\u683C\u5F0F" aria-hidden="true">#</a> 3. TREE\u683C\u5F0F</h6><p>TREE\u683C\u5F0F\u662F8.0.16\u7248\u672C\u4E4B\u540E\u5F15\u5165\u7684\u65B0\u683C\u5F0F\uFF0C\u4E3B\u8981\u6839\u636E\u67E5\u8BE2\u7684 <code>\u5404\u4E2A\u90E8\u5206\u4E4B\u95F4\u7684\u5173\u7CFB</code> \u548C <code>\u5404\u90E8\u5206\u7684\u6267\u884C\u987A\u5E8F</code> \u6765\u63CF\u8FF0\u5982\u4F55\u67E5\u8BE2\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN FORMAT=tree SELECT * FROM s1 INNER JOIN s2 ON s1.key1 = s2.key2 WHERE
s1.common_field = &#39;a&#39;\\G
*************************** 1. row ***************************
EXPLAIN: -&gt; Nested loop inner join (cost=1360.08 rows=990)
-&gt; Filter: ((s1.common_field = &#39;a&#39;) and (s1.key1 is not null)) (cost=1013.75
rows=990)
-&gt; Table scan on s1 (cost=1013.75 rows=9895)
-&gt; Single-row index lookup on s2 using idx_key2 (key2=s1.key1), with index
condition: (cast(s1.key1 as double) = cast(s2.key2 as double)) (cost=0.25 rows=1)
1 row in set, 1 warning (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_4-\u53EF\u89C6\u5316\u8F93\u51FA" tabindex="-1"><a class="header-anchor" href="#_4-\u53EF\u89C6\u5316\u8F93\u51FA" aria-hidden="true">#</a> 4. \u53EF\u89C6\u5316\u8F93\u51FA</h6><p>\u53EF\u89C6\u5316\u8F93\u51FA\uFF0C\u53EF\u4EE5\u901A\u8FC7MySQL Workbench\u53EF\u89C6\u5316\u67E5\u770BMySQL\u7684\u6267\u884C\u8BA1\u5212\u3002\u901A\u8FC7\u70B9\u51FBWorkbench\u7684\u653E\u5927\u955C\u56FE\u6807\uFF0C\u5373\u53EF\u751F\u6210\u53EF\u89C6\u5316\u7684\u67E5\u8BE2\u8BA1\u5212\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704174401970.png" alt="image-20220704174401970"></p><p>\u4E0A\u56FE\u6309\u4ECE\u5DE6\u5230\u53F3\u7684\u8FDE\u63A5\u987A\u5E8F\u663E\u793A\u8868\u3002\u7EA2\u8272\u6846\u8868\u793A <code>\u5168\u8868\u626B\u63CF</code> \uFF0C\u800C\u7EFF\u8272\u6846\u8868\u793A\u4F7F\u7528 <code>\u7D22\u5F15\u67E5\u627E</code> \u3002\u5BF9\u4E8E\u6BCF\u4E2A\u8868\uFF0C \u663E\u793A\u4F7F\u7528\u7684\u7D22\u5F15\u3002\u8FD8\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u6BCF\u4E2A\u8868\u683C\u7684\u6846\u4E0A\u65B9\u662F\u6BCF\u4E2A\u8868\u8BBF\u95EE\u6240\u53D1\u73B0\u7684\u884C\u6570\u7684\u4F30\u8BA1\u503C\u4EE5\u53CA\u8BBF\u95EE\u8BE5\u8868\u7684\u6210\u672C\u3002</p><h5 id="_7-2-show-warnings\u7684\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_7-2-show-warnings\u7684\u4F7F\u7528" aria-hidden="true">#</a> 7.2 SHOW WARNINGS\u7684\u4F7F\u7528</h5><p>\u5728\u6211\u4EEC\u4F7F\u7528<code>EXPLAIN</code>\u8BED\u53E5\u67E5\u770B\u4E86\u67D0\u4E2A\u67E5\u8BE2\u7684\u6267\u884C\u8BA1\u5212\u540E\uFF0C\u7D27\u63A5\u7740\u8FD8\u53EF\u4EE5\u4F7F\u7528<code>SHOW WARNINGS</code>\u8BED\u53E5\u67E5\u770B\u4E0E\u8FD9\u4E2A\u67E5\u8BE2\u7684\u6267\u884C\u8BA1\u5212\u6709\u5173\u7684\u4E00\u4E9B\u6269\u5C55\u4FE1\u606F\uFF0C\u6BD4\u5982\u8FD9\u6837\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT s1.key1, s2.key1 FROM s1 LEFT JOIN s2 ON s1.key1 = s2.key1 WHERE s2.common_field IS NOT NULL;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704174543663.png" alt="image-20220704174543663"></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SHOW WARNINGS\\G
*************************** 1. row ***************************
    Level: Note
     Code: 1003
Message: /* select#1 */ select \`atguigu\`.\`s1\`.\`key1\` AS \`key1\`,\`atguigu\`.\`s2\`.\`key1\`
AS \`key1\` from \`atguigu\`.\`s1\` join \`atguigu\`.\`s2\` where ((\`atguigu\`.\`s1\`.\`key1\` =
\`atguigu\`.\`s2\`.\`key1\`) and (\`atguigu\`.\`s2\`.\`common_field\` is not null))
1 row in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5927\u5BB6\u53EF\u4EE5\u770B\u5230<code>SHOW WARNINGS</code>\u5C55\u793A\u51FA\u6765\u7684\u4FE1\u606F\u6709\u4E09\u4E2A\u5B57\u6BB5\uFF0C\u5206\u522B\u662F<code>Level\u3001Code\u3001Message</code>\u3002\u6211\u4EEC\u6700\u5E38\u89C1\u7684\u5C31\u662FCode\u4E3A1003\u7684\u4FE1\u606F\uFF0C\u5F53Code\u503C\u4E3A1003\u65F6\uFF0C<code>Message</code>\u5B57\u6BB5\u5C55\u793A\u7684\u4FE1\u606F\u7C7B\u4F3C\u4E8E\u67E5\u8BE2\u4F18\u5316\u5668\u5C06\u6211\u4EEC\u7684\u67E5\u8BE2\u8BED\u53E5\u91CD\u5199\u540E\u7684\u8BED\u53E5\u3002\u6BD4\u5982\u6211\u4EEC\u4E0A\u8FB9\u7684\u67E5\u8BE2\u672C\u6765\u662F\u4E00\u4E2A\u5DE6(\u5916)\u8FDE\u63A5\u67E5\u8BE2\uFF0C\u4F46\u662F\u6709\u4E00\u4E2As2.common_field IS NOT NULL\u7684\u6761\u4EF6\uFF0C\u8FD9\u5C31\u4F1A\u5BFC\u81F4\u67E5\u8BE2\u4F18\u5316\u5668\u628A\u5DE6(\u5916)\u8FDE\u63A5\u67E5\u8BE2\u4F18\u5316\u4E3A\u5185\u8FDE\u63A5\u67E5\u8BE2\uFF0C\u4ECE<code>SHOW WARNINGS</code>\u7684<code>Message</code>\u5B57\u6BB5\u4E5F\u53EF\u4EE5\u770B\u51FA\u6765\uFF0C\u539F\u672C\u7684LEFE JOIN\u5DF2\u7ECF\u53D8\u6210\u4E86JOIN\u3002</p><p>\u4F46\u662F\u5927\u5BB6\u4E00\u5B9A\u8981\u6CE8\u610F\uFF0C\u6211\u4EEC\u8BF4<code>Message</code>\u5B57\u6BB5\u5C55\u793A\u7684\u4FE1\u606F\u7C7B\u4F3C\u4E8E\u67E5\u8BE2\u4F18\u5316\u5668\u5C06\u6211\u4EEC\u7684\u67E5\u8BE2\u8BED\u53E5<code>\u91CD\u5199\u540E\u7684\u8BED\u53E5</code>\uFF0C\u5E76\u4E0D\u662F\u7B49\u4EF7\u4E8E\uFF0C\u4E5F\u5C31\u662F\u8BF4<code>Message</code>\u5B57\u6BB5\u5C55\u793A\u7684\u4FE1\u606F\u5E76\u4E0D\u662F\u6807\u51C6\u7684\u67E5\u8BE2\u8BED\u53E5\uFF0C\u5728\u5F88\u591A\u60C5\u51B5\u4E0B\u5E76\u4E0D\u80FD\u76F4\u63A5\u62FF\u5230\u9ED1\u6846\u6846\u4E2D\u8FD0\u884C\uFF0C\u5B83\u53EA\u80FD\u4F5C\u4E3A\u5E2E\u52A9\u6211\u4EEC\u7406\u89E3MySQL\u5C06\u5982\u4F55\u6267\u884C\u67E5\u8BE2\u8BED\u53E5\u7684\u4E00\u4E2A\u53C2\u8003\u4F9D\u636E\u800C\u5DF2\u3002</p><h3 id="_8-\u5206\u6790\u4F18\u5316\u5668\u6267\u884C\u8BA1\u5212-trace" tabindex="-1"><a class="header-anchor" href="#_8-\u5206\u6790\u4F18\u5316\u5668\u6267\u884C\u8BA1\u5212-trace" aria-hidden="true">#</a> 8. \u5206\u6790\u4F18\u5316\u5668\u6267\u884C\u8BA1\u5212\uFF1Atrace</h3><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704175711800.png" alt="image-20220704175711800" style="float:left;"><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SET optimizer_trace=&quot;enabled=on&quot;,end_markers_in_json=on;
set optimizer_trace_max_mem_size=1000000;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F00\u542F\u540E\uFF0C\u53EF\u5206\u6790\u5982\u4E0B\u8BED\u53E5\uFF1A</p><ul><li>SELECT</li><li>INSERT</li><li>REPLACE</li><li>UPDATE</li><li>DELETE</li><li>EXPLAIN</li><li>SET</li><li>DECLARE</li><li>CASE</li><li>IF</li><li>RETURN</li><li>CALL</li></ul><p>\u6D4B\u8BD5\uFF1A\u6267\u884C\u5982\u4E0BSQL\u8BED\u53E5</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>select * from student where id &lt; 10;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6700\u540E\uFF0C \u67E5\u8BE2 information_schema.optimizer_trace \u5C31\u53EF\u4EE5\u77E5\u9053MySQL\u662F\u5982\u4F55\u6267\u884CSQL\u7684 \uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>select * from information_schema.optimizer_trace\\G
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>*************************** 1. row ***************************
//\u7B2C1\u90E8\u5206\uFF1A\u67E5\u8BE2\u8BED\u53E5
QUERY: select * from student where id &lt; 10
//\u7B2C2\u90E8\u5206\uFF1AQUERY\u5B57\u6BB5\u5BF9\u5E94\u8BED\u53E5\u7684\u8DDF\u8E2A\u4FE1\u606F
TRACE: {
&quot;steps&quot;: [
{
    &quot;join_preparation&quot;: { //\u9884\u5907\u5DE5\u4F5C
        &quot;select#&quot;: 1,
        &quot;steps&quot;: [
            {
            &quot;expanded_query&quot;: &quot;/* select#1 */ select \`student\`.\`id\` AS
            \`id\`,\`student\`.\`stuno\` AS \`stuno\`,\`student\`.\`name\` AS \`name\`,\`student\`.\`age\` AS
            \`age\`,\`student\`.\`classId\` AS \`classId\` from \`student\` where (\`student\`.\`id\` &lt; 10)&quot;
            }
        ] /* steps */
    } /* join_preparation */
},
{
    &quot;join_optimization&quot;: { //\u8FDB\u884C\u4F18\u5316
    &quot;select#&quot;: 1,
    &quot;steps&quot;: [
        {
        &quot;condition_processing&quot;: { //\u6761\u4EF6\u5904\u7406
        &quot;condition&quot;: &quot;WHERE&quot;,
        &quot;original_condition&quot;: &quot;(\`student\`.\`id\` &lt; 10)&quot;,
        &quot;steps&quot;: [
        {
            &quot;transformation&quot;: &quot;equality_propagation&quot;,
            &quot;resulting_condition&quot;: &quot;(\`student\`.\`id\` &lt; 10)&quot;
        },
        {
            &quot;transformation&quot;: &quot;constant_propagation&quot;,
            &quot;resulting_condition&quot;: &quot;(\`student\`.\`id\` &lt; 10)&quot;
        },
        {
            &quot;transformation&quot;: &quot;trivial_condition_removal&quot;,
            &quot;resulting_condition&quot;: &quot;(\`student\`.\`id\` &lt; 10)&quot;
        }
        ] /* steps */
    } /* condition_processing */
    },
    {
        &quot;substitute_generated_columns&quot;: { //\u66FF\u6362\u751F\u6210\u7684\u5217
        } /* substitute_generated_columns */
    },
    {
        &quot;table_dependencies&quot;: [ //\u8868\u7684\u4F9D\u8D56\u5173\u7CFB
        {
            &quot;table&quot;: &quot;\`student\`&quot;,
            &quot;row_may_be_null&quot;: false,
            &quot;map_bit&quot;: 0,
            &quot;depends_on_map_bits&quot;: [
            ] /* depends_on_map_bits */
        }
    ] /* table_dependencies */
    },
    {
    &quot;ref_optimizer_key_uses&quot;: [ //\u4F7F\u7528\u952E
        ] /* ref_optimizer_key_uses */
        },
    {
        &quot;rows_estimation&quot;: [ //\u884C\u5224\u65AD
        {
            &quot;table&quot;: &quot;\`student\`&quot;,
            &quot;range_analysis&quot;: {
                &quot;table_scan&quot;: {
                    &quot;rows&quot;: 3973767,
                    &quot;cost&quot;: 408558
            } /* table_scan */, //\u626B\u63CF\u8868
            &quot;potential_range_indexes&quot;: [ //\u6F5C\u5728\u7684\u8303\u56F4\u7D22\u5F15
                {
                    &quot;index&quot;: &quot;PRIMARY&quot;,
                    &quot;usable&quot;: true,
                    &quot;key_parts&quot;: [
                    &quot;id&quot;
                    ] /* key_parts */
                }
            ] /* potential_range_indexes */,
        &quot;setup_range_conditions&quot;: [ //\u8BBE\u7F6E\u8303\u56F4\u6761\u4EF6
        ] /* setup_range_conditions */,
        &quot;group_index_range&quot;: {
            &quot;chosen&quot;: false,
            &quot;cause&quot;: &quot;not_group_by_or_distinct&quot;
        } /* group_index_range */,
            &quot;skip_scan_range&quot;: {
                &quot;potential_skip_scan_indexes&quot;: [
                    {
                        &quot;index&quot;: &quot;PRIMARY&quot;,
                        &quot;usable&quot;: false,
                        &quot;cause&quot;: &quot;query_references_nonkey_column&quot;
                    }
                ] /* potential_skip_scan_indexes */
            } /* skip_scan_range */,
        &quot;analyzing_range_alternatives&quot;: { //\u5206\u6790\u8303\u56F4\u9009\u9879
            &quot;range_scan_alternatives&quot;: [
                {
                &quot;index&quot;: &quot;PRIMARY&quot;,
                    &quot;ranges&quot;: [
                        &quot;id &lt; 10&quot;
                    ] /* ranges */,
                &quot;index_dives_for_eq_ranges&quot;: true,
                &quot;rowid_ordered&quot;: true,
                &quot;using_mrr&quot;: false,
                &quot;index_only&quot;: false,
                &quot;rows&quot;: 9,
                &quot;cost&quot;: 1.91986,
                &quot;chosen&quot;: true
                }
            ] /* range_scan_alternatives */,
        &quot;analyzing_roworder_intersect&quot;: {
            &quot;usable&quot;: false,
            &quot;cause&quot;: &quot;too_few_roworder_scans&quot;
        	} /* analyzing_roworder_intersect */
        } /* analyzing_range_alternatives */,
        &quot;chosen_range_access_summary&quot;: { //\u9009\u62E9\u8303\u56F4\u8BBF\u95EE\u6458\u8981
            &quot;range_access_plan&quot;: {
                &quot;type&quot;: &quot;range_scan&quot;,
                &quot;index&quot;: &quot;PRIMARY&quot;,
                &quot;rows&quot;: 9,
                &quot;ranges&quot;: [
                &quot;id &lt; 10&quot;
                ] /* ranges */
                } /* range_access_plan */,
                &quot;rows_for_plan&quot;: 9,
                &quot;cost_for_plan&quot;: 1.91986,
                &quot;chosen&quot;: true
                } /* chosen_range_access_summary */
                } /* range_analysis */
            }
        ] /* rows_estimation */
    },
    {
    &quot;considered_execution_plans&quot;: [ //\u8003\u8651\u6267\u884C\u8BA1\u5212
    {
    &quot;plan_prefix&quot;: [
    ] /* plan_prefix */,
        &quot;table&quot;: &quot;\`student\`&quot;,
        &quot;best_access_path&quot;: { //\u6700\u4F73\u8BBF\u95EE\u8DEF\u5F84
        &quot;considered_access_paths&quot;: [
        {
            &quot;rows_to_scan&quot;: 9,
            &quot;access_type&quot;: &quot;range&quot;,
            &quot;range_details&quot;: {
            &quot;used_index&quot;: &quot;PRIMARY&quot;
        } /* range_details */,
        &quot;resulting_rows&quot;: 9,
        &quot;cost&quot;: 2.81986,
        &quot;chosen&quot;: true
    }
    ] /* considered_access_paths */
    } /* best_access_path */,
        &quot;condition_filtering_pct&quot;: 100, //\u884C\u8FC7\u6EE4\u767E\u5206\u6BD4
        &quot;rows_for_plan&quot;: 9,
        &quot;cost_for_plan&quot;: 2.81986,
        &quot;chosen&quot;: true
    }
    ] /* considered_execution_plans */
    },
    {
        &quot;attaching_conditions_to_tables&quot;: { //\u5C06\u6761\u4EF6\u9644\u52A0\u5230\u8868\u4E0A
        &quot;original_condition&quot;: &quot;(\`student\`.\`id\` &lt; 10)&quot;,
        &quot;attached_conditions_computation&quot;: [
        ] /* attached_conditions_computation */,
        &quot;attached_conditions_summary&quot;: [ //\u9644\u52A0\u6761\u4EF6\u6982\u8981
    {
        &quot;table&quot;: &quot;\`student\`&quot;,
        &quot;attached&quot;: &quot;(\`student\`.\`id\` &lt; 10)&quot;
    }
    ] /* attached_conditions_summary */
    } /* attaching_conditions_to_tables */
    },
    {
    &quot;finalizing_table_conditions&quot;: [
    {
        &quot;table&quot;: &quot;\`student\`&quot;,
        &quot;original_table_condition&quot;: &quot;(\`student\`.\`id\` &lt; 10)&quot;,
        &quot;final_table_condition &quot;: &quot;(\`student\`.\`id\` &lt; 10)&quot;
    }
    ] /* finalizing_table_conditions */
    },
    {
    &quot;refine_plan&quot;: [ //\u7CBE\u7B80\u8BA1\u5212
    {
    	&quot;table&quot;: &quot;\`student\`&quot;
    }
    ] /* refine_plan */
    }
    ] /* steps */
    } /* join_optimization */
},
	{
        &quot;join_execution&quot;: { //\u6267\u884C
            &quot;select#&quot;: 1,
            &quot;steps&quot;: [
            ] /* steps */
        	} /* join_execution */
        }
    ] /* steps */
}
//\u7B2C3\u90E8\u5206\uFF1A\u8DDF\u8E2A\u4FE1\u606F\u8FC7\u957F\u65F6\uFF0C\u88AB\u622A\u65AD\u7684\u8DDF\u8E2A\u4FE1\u606F\u7684\u5B57\u8282\u6570\u3002
MISSING_BYTES_BEYOND_MAX_MEM_SIZE: 0 //\u4E22\u5931\u7684\u8D85\u51FA\u6700\u5927\u5BB9\u91CF\u7684\u5B57\u8282
//\u7B2C4\u90E8\u5206\uFF1A\u6267\u884C\u8DDF\u8E2A\u8BED\u53E5\u7684\u7528\u6237\u662F\u5426\u6709\u67E5\u770B\u5BF9\u8C61\u7684\u6743\u9650\u3002\u5F53\u4E0D\u5177\u6709\u6743\u9650\u65F6\uFF0C\u8BE5\u5217\u4FE1\u606F\u4E3A1\u4E14TRACE\u5B57\u6BB5\u4E3A\u7A7A\uFF0C\u4E00\u822C\u5728
\u8C03\u7528\u5E26\u6709SQL SECURITY DEFINER\u7684\u89C6\u56FE\u6216\u8005\u662F\u5B58\u50A8\u8FC7\u7A0B\u7684\u60C5\u51B5\u4E0B\uFF0C\u4F1A\u51FA\u73B0\u6B64\u95EE\u9898\u3002
INSUFFICIENT_PRIVILEGES: 0 //\u7F3A\u5931\u6743\u9650
1 row in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-mysql\u76D1\u63A7\u5206\u6790\u89C6\u56FE-sys-schema" tabindex="-1"><a class="header-anchor" href="#_9-mysql\u76D1\u63A7\u5206\u6790\u89C6\u56FE-sys-schema" aria-hidden="true">#</a> 9. MySQL\u76D1\u63A7\u5206\u6790\u89C6\u56FE-sys schema</h3><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704190726180.png" alt="image-20220704190726180" style="float:left;"><h5 id="_9-1-sys-schema\u89C6\u56FE\u6458\u8981" tabindex="-1"><a class="header-anchor" href="#_9-1-sys-schema\u89C6\u56FE\u6458\u8981" aria-hidden="true">#</a> 9.1 Sys schema\u89C6\u56FE\u6458\u8981</h5><ol><li><strong>\u4E3B\u673A\u76F8\u5173</strong>\uFF1A\u4EE5host_summary\u5F00\u5934\uFF0C\u4E3B\u8981\u6C47\u603B\u4E86IO\u5EF6\u8FDF\u7684\u4FE1\u606F\u3002</li><li><strong>Innodb\u76F8\u5173</strong>\uFF1A\u4EE5innodb\u5F00\u5934\uFF0C\u6C47\u603B\u4E86innodb buffer\u4FE1\u606F\u548C\u4E8B\u52A1\u7B49\u5F85innodb\u9501\u7684\u4FE1\u606F\u3002</li><li><strong>I/o\u76F8\u5173</strong>\uFF1A\u4EE5io\u5F00\u5934\uFF0C\u6C47\u603B\u4E86\u7B49\u5F85I/O\u3001I/O\u4F7F\u7528\u91CF\u60C5\u51B5\u3002</li><li><strong>\u5185\u5B58\u4F7F\u7528\u60C5\u51B5</strong>\uFF1A\u4EE5memory\u5F00\u5934\uFF0C\u4ECE\u4E3B\u673A\u3001\u7EBF\u7A0B\u3001\u4E8B\u4EF6\u7B49\u89D2\u5EA6\u5C55\u793A\u5185\u5B58\u7684\u4F7F\u7528\u60C5\u51B5</li><li><strong>\u8FDE\u63A5\u4E0E\u4F1A\u8BDD\u4FE1\u606F</strong>\uFF1Aprocesslist\u548Csession\u76F8\u5173\u89C6\u56FE\uFF0C\u603B\u7ED3\u4E86\u4F1A\u8BDD\u76F8\u5173\u4FE1\u606F\u3002</li><li><strong>\u8868\u76F8\u5173</strong>\uFF1A\u4EE5schema_table\u5F00\u5934\u7684\u89C6\u56FE\uFF0C\u5C55\u793A\u4E86\u8868\u7684\u7EDF\u8BA1\u4FE1\u606F\u3002</li><li><strong>\u7D22\u5F15\u4FE1\u606F</strong>\uFF1A\u7EDF\u8BA1\u4E86\u7D22\u5F15\u7684\u4F7F\u7528\u60C5\u51B5\uFF0C\u5305\u542B\u5197\u4F59\u7D22\u5F15\u548C\u672A\u4F7F\u7528\u7684\u7D22\u5F15\u60C5\u51B5\u3002</li><li><strong>\u8BED\u53E5\u76F8\u5173</strong>\uFF1A\u4EE5statement\u5F00\u5934\uFF0C\u5305\u542B\u6267\u884C\u5168\u8868\u626B\u63CF\u3001\u4F7F\u7528\u4E34\u65F6\u8868\u3001\u6392\u5E8F\u7B49\u7684\u8BED\u53E5\u4FE1\u606F\u3002</li><li><strong>\u7528\u6237\u76F8\u5173</strong>\uFF1A\u4EE5user\u5F00\u5934\u7684\u89C6\u56FE\uFF0C\u7EDF\u8BA1\u4E86\u7528\u6237\u4F7F\u7528\u7684\u6587\u4EF6I/O\u3001\u6267\u884C\u8BED\u53E5\u7EDF\u8BA1\u4FE1\u606F\u3002</li><li><strong>\u7B49\u5F85\u4E8B\u4EF6\u76F8\u5173\u4FE1\u606F</strong>\uFF1A\u4EE5wait\u5F00\u5934\uFF0C\u5C55\u793A\u7B49\u5F85\u4E8B\u4EF6\u7684\u5EF6\u8FDF\u60C5\u51B5\u3002</li></ol><h5 id="_9-2-sys-schema\u89C6\u56FE\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_9-2-sys-schema\u89C6\u56FE\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 9.2 Sys schema\u89C6\u56FE\u4F7F\u7528\u573A\u666F</h5><p>\u7D22\u5F15\u60C5\u51B5</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#1. \u67E5\u8BE2\u5197\u4F59\u7D22\u5F15
select * from sys.schema_redundant_indexes;
#2. \u67E5\u8BE2\u672A\u4F7F\u7528\u8FC7\u7684\u7D22\u5F15
select * from sys.schema_unused_indexes;
#3. \u67E5\u8BE2\u7D22\u5F15\u7684\u4F7F\u7528\u60C5\u51B5
select index_name,rows_selected,rows_inserted,rows_updated,rows_deleted
from sys.schema_index_statistics where table_schema=&#39;dbname&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8868\u76F8\u5173</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># 1. \u67E5\u8BE2\u8868\u7684\u8BBF\u95EE\u91CF
select table_schema,table_name,sum(io_read_requests+io_write_requests) as io from
sys.schema_table_statistics group by table_schema,table_name order by io desc;
# 2. \u67E5\u8BE2\u5360\u7528bufferpool\u8F83\u591A\u7684\u8868
select object_schema,object_name,allocated,data
from sys.innodb_buffer_stats_by_table order by allocated limit 10;
# 3. \u67E5\u770B\u8868\u7684\u5168\u8868\u626B\u63CF\u60C5\u51B5
select * from sys.statements_with_full_table_scans where db=&#39;dbname&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BED\u53E5\u76F8\u5173</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#1. \u76D1\u63A7SQL\u6267\u884C\u7684\u9891\u7387
select db,exec_count,query from sys.statement_analysis
order by exec_count desc;
#2. \u76D1\u63A7\u4F7F\u7528\u4E86\u6392\u5E8F\u7684SQL
select db,exec_count,first_seen,last_seen,query
from sys.statements_with_sorting limit 1;
#3. \u76D1\u63A7\u4F7F\u7528\u4E86\u4E34\u65F6\u8868\u6216\u8005\u78C1\u76D8\u4E34\u65F6\u8868\u7684SQL
select db,exec_count,tmp_tables,tmp_disk_tables,query
from sys.statement_analysis where tmp_tables&gt;0 or tmp_disk_tables &gt;0
order by (tmp_tables+tmp_disk_tables) desc;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>IO\u76F8\u5173</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#1. \u67E5\u770B\u6D88\u8017\u78C1\u76D8IO\u7684\u6587\u4EF6
select file,avg_read,avg_write,avg_read+avg_write as avg_io
from sys.io_global_by_file_by_bytes order by avg_read limit 10;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Innodb \u76F8\u5173</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#1. \u884C\u9501\u963B\u585E\u60C5\u51B5
select * from sys.innodb_lock_waits;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704192020603.png" alt="image-20220704192020603" style="float:left;"><h3 id="_10-\u5C0F\u7ED3" tabindex="-1"><a class="header-anchor" href="#_10-\u5C0F\u7ED3" aria-hidden="true">#</a> 10. \u5C0F\u7ED3</h3><p>\u67E5\u8BE2\u662F\u6570\u636E\u5E93\u4E2D\u6700\u9891\u7E41\u7684\u64CD\u4F5C\uFF0C\u63D0\u9AD8\u67E5\u8BE2\u901F\u5EA6\u53EF\u4EE5\u6709\u6548\u5730\u63D0\u9AD8MySQL\u6570\u636E\u5E93\u7684\u6027\u80FD\u3002\u901A\u8FC7\u5BF9\u67E5\u8BE2\u8BED\u53E5\u7684\u5206\u6790\u53EF\u4EE5\u4E86\u89E3\u67E5\u8BE2\u8BED\u53E5\u7684\u6267\u884C\u60C5\u51B5\uFF0C\u627E\u51FA\u67E5\u8BE2\u8BED\u53E5\u6267\u884C\u7684\u74F6\u9888\uFF0C\u4ECE\u800C\u4F18\u5316\u67E5\u8BE2\u8BED\u53E5\u3002</p><h2 id="\u7B2C10\u7AE0-\u7D22\u5F15\u4F18\u5316\u4E0E\u67E5\u8BE2\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#\u7B2C10\u7AE0-\u7D22\u5F15\u4F18\u5316\u4E0E\u67E5\u8BE2\u4F18\u5316" aria-hidden="true">#</a> \u7B2C10\u7AE0_\u7D22\u5F15\u4F18\u5316\u4E0E\u67E5\u8BE2\u4F18\u5316</h2><p>\u90FD\u6709\u54EA\u4E9B\u7EF4\u5EA6\u53EF\u4EE5\u8FDB\u884C\u6570\u636E\u5E93\u8C03\u4F18\uFF1F\u7B80\u8A00\u4E4B\uFF1A</p><ul><li>\u7D22\u5F15\u5931\u6548\u3001\u6CA1\u6709\u5145\u5206\u5229\u7528\u5230\u7D22\u5F15\u2014\u2014\u5EFA\u7ACB\u7D22\u5F15</li><li>\u5173\u8054\u67E5\u8BE2\u592A\u591AJOIN\uFF08\u8BBE\u8BA1\u7F3A\u9677\u6216\u4E0D\u5F97\u5DF2\u7684\u9700\u6C42\uFF09\u2014\u2014SQL\u4F18\u5316</li><li>\u670D\u52A1\u5668\u8C03\u4F18\u53CA\u5404\u4E2A\u53C2\u6570\u8BBE\u7F6E\uFF08\u7F13\u51B2\u3001\u7EBF\u7A0B\u6570\u7B49\uFF09\u2014\u2014\u8C03\u6574my.cnf</li><li>\u6570\u636E\u8FC7\u591A\u2014\u2014\u5206\u5E93\u5206\u8868</li></ul><p>\u5173\u4E8E\u6570\u636E\u5E93\u8C03\u4F18\u7684\u77E5\u8BC6\u975E\u5E38\u5206\u6563\u3002\u4E0D\u540C\u7684DBMS\uFF0C\u4E0D\u540C\u7684\u516C\u53F8\uFF0C\u4E0D\u540C\u7684\u804C\u4F4D\uFF0C\u4E0D\u540C\u7684\u9879\u76EE\u9047\u5230\u7684\u95EE\u9898\u90FD\u4E0D\u5C3D\u76F8\u540C\u3002\u8FD9\u91CC\u6211\u4EEC\u5206\u4E3A\u4E09\u4E2A\u7AE0\u8282\u8FDB\u884C\u7EC6\u81F4\u8BB2\u89E3\u3002</p><p>\u867D\u7136SQL\u67E5\u8BE2\u4F18\u5316\u7684\u6280\u672F\u6709\u5F88\u591A\uFF0C\u4F46\u662F\u5927\u65B9\u5411\u4E0A\u5B8C\u5168\u53EF\u4EE5\u5206\u6210<code>\u7269\u7406\u67E5\u8BE2\u4F18\u5316</code>\u548C<code>\u903B\u8F91\u67E5\u8BE2\u4F18\u5316</code>\u4E24\u5927\u5757\u3002</p><ul><li>\u7269\u7406\u67E5\u8BE2\u4F18\u5316\u662F\u901A\u8FC7<code>\u7D22\u5F15</code>\u548C<code>\u8868\u8FDE\u63A5\u65B9\u5F0F</code>\u7B49\u6280\u672F\u6765\u8FDB\u884C\u4F18\u5316\uFF0C\u8FD9\u91CC\u91CD\u70B9\u9700\u8981\u638C\u63E1\u7D22\u5F15\u7684\u4F7F\u7528\u3002</li><li>\u903B\u8F91\u67E5\u8BE2\u4F18\u5316\u5C31\u662F\u901A\u8FC7SQL<code>\u7B49\u4EF7\u53D8\u6362</code>\u63D0\u5347\u67E5\u8BE2\u6548\u7387\uFF0C\u76F4\u767D\u4E00\u70B9\u5C31\u662F\u8BF4\uFF0C\u6362\u4E00\u79CD\u67E5\u8BE2\u5199\u6CD5\u6548\u7387\u53EF\u80FD\u66F4\u9AD8\u3002</li></ul><h3 id="_1-\u6570\u636E\u51C6\u5907" tabindex="-1"><a class="header-anchor" href="#_1-\u6570\u636E\u51C6\u5907" aria-hidden="true">#</a> 1. \u6570\u636E\u51C6\u5907</h3><p><code>\u5B66\u5458\u8868</code> \u63D2 <code>50\u4E07</code> \u6761\uFF0C<code> \u73ED\u7EA7\u8868</code> \u63D2 <code>1\u4E07</code> \u6761\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE DATABASE atguigudb2;
USE atguigudb2;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6B65\u9AA41\uFF1A\u5EFA\u8868</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE \`class\` (
    \`id\` INT(11) NOT NULL AUTO_INCREMENT,
    \`className\` VARCHAR(30) DEFAULT NULL,
    \`address\` VARCHAR(40) DEFAULT NULL,
    \`monitor\` INT NULL ,
    PRIMARY KEY (\`id\`)
) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

CREATE TABLE \`student\` (
    \`id\` INT(11) NOT NULL AUTO_INCREMENT,
    \`stuno\` INT NOT NULL ,
    \`name\` VARCHAR(20) DEFAULT NULL,
    \`age\` INT(3) DEFAULT NULL,
    \`classId\` INT(11) DEFAULT NULL,
    PRIMARY KEY (\`id\`)
    #CONSTRAINT \`fk_class_id\` FOREIGN KEY (\`classId\`) REFERENCES \`t_class\` (\`id\`)
) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6B65\u9AA42\uFF1A\u8BBE\u7F6E\u53C2\u6570</strong></p><ul><li>\u547D\u4EE4\u5F00\u542F\uFF1A\u5141\u8BB8\u521B\u5EFA\u51FD\u6570\u8BBE\u7F6E\uFF1A</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>set global log_bin_trust_function_creators=1; # \u4E0D\u52A0global\u53EA\u662F\u5F53\u524D\u7A97\u53E3\u6709\u6548\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u6B65\u9AA43\uFF1A\u521B\u5EFA\u51FD\u6570</strong></p><p>\u4FDD\u8BC1\u6BCF\u6761\u6570\u636E\u90FD\u4E0D\u540C\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#\u968F\u673A\u4EA7\u751F\u5B57\u7B26\u4E32
DELIMITER //
CREATE FUNCTION rand_string(n INT) RETURNS VARCHAR(255)
BEGIN
DECLARE chars_str VARCHAR(100) DEFAULT
&#39;abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ&#39;;
DECLARE return_str VARCHAR(255) DEFAULT &#39;&#39;;
DECLARE i INT DEFAULT 0;
WHILE i &lt; n DO
SET return_str =CONCAT(return_str,SUBSTRING(chars_str,FLOOR(1+RAND()*52),1));
SET i = i + 1;
END WHILE;
RETURN return_str;
END //
DELIMITER ;
#\u5047\u5982\u8981\u5220\u9664
#drop function rand_string;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u968F\u673A\u4EA7\u751F\u73ED\u7EA7\u7F16\u53F7</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#\u7528\u4E8E\u968F\u673A\u4EA7\u751F\u591A\u5C11\u5230\u591A\u5C11\u7684\u7F16\u53F7
DELIMITER //
CREATE FUNCTION rand_num (from_num INT ,to_num INT) RETURNS INT(11)
BEGIN
DECLARE i INT DEFAULT 0;
SET i = FLOOR(from_num +RAND()*(to_num - from_num+1)) ;
RETURN i;
END //
DELIMITER ;
#\u5047\u5982\u8981\u5220\u9664
#drop function rand_num;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6B65\u9AA44\uFF1A\u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0B</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#\u521B\u5EFA\u5F80stu\u8868\u4E2D\u63D2\u5165\u6570\u636E\u7684\u5B58\u50A8\u8FC7\u7A0B
DELIMITER //
CREATE PROCEDURE insert_stu( START INT , max_num INT )
BEGIN
DECLARE i INT DEFAULT 0;
SET autocommit = 0; #\u8BBE\u7F6E\u624B\u52A8\u63D0\u4EA4\u4E8B\u52A1
REPEAT #\u5FAA\u73AF
SET i = i + 1; #\u8D4B\u503C
INSERT INTO student (stuno, name ,age ,classId ) VALUES
((START+i),rand_string(6),rand_num(1,50),rand_num(1,1000));
UNTIL i = max_num
END REPEAT;
COMMIT; #\u63D0\u4EA4\u4E8B\u52A1
END //
DELIMITER ;
#\u5047\u5982\u8981\u5220\u9664
#drop PROCEDURE insert_stu;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u521B\u5EFA\u5F80class\u8868\u4E2D\u63D2\u5165\u6570\u636E\u7684\u5B58\u50A8\u8FC7\u7A0B</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#\u6267\u884C\u5B58\u50A8\u8FC7\u7A0B\uFF0C\u5F80class\u8868\u6DFB\u52A0\u968F\u673A\u6570\u636E
DELIMITER //
CREATE PROCEDURE \`insert_class\`( max_num INT )
BEGIN
DECLARE i INT DEFAULT 0;
SET autocommit = 0;
REPEAT
SET i = i + 1;
INSERT INTO class ( classname,address,monitor ) VALUES
(rand_string(8),rand_string(10),rand_num(1,100000));
UNTIL i = max_num
END REPEAT;
COMMIT;
END //
DELIMITER ;
#\u5047\u5982\u8981\u5220\u9664
#drop PROCEDURE insert_class;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6B65\u9AA45\uFF1A\u8C03\u7528\u5B58\u50A8\u8FC7\u7A0B</strong></p><p>class</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#\u6267\u884C\u5B58\u50A8\u8FC7\u7A0B\uFF0C\u5F80class\u8868\u6DFB\u52A01\u4E07\u6761\u6570\u636E
CALL insert_class(10000);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>stu</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#\u6267\u884C\u5B58\u50A8\u8FC7\u7A0B\uFF0C\u5F80stu\u8868\u6DFB\u52A050\u4E07\u6761\u6570\u636E
CALL insert_stu(100000,500000);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6B65\u9AA46\uFF1A\u5220\u9664\u67D0\u8868\u4E0A\u7684\u7D22\u5F15</strong></p><p>\u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0B</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DELIMITER //
CREATE PROCEDURE \`proc_drop_index\`(dbname VARCHAR(200),tablename VARCHAR(200))
BEGIN
        DECLARE done INT DEFAULT 0;
        DECLARE ct INT DEFAULT 0;
        DECLARE _index VARCHAR(200) DEFAULT &#39;&#39;;
        DECLARE _cur CURSOR FOR SELECT index_name FROM
information_schema.STATISTICS WHERE table_schema=dbname AND table_name=tablename AND
seq_in_index=1 AND index_name &lt;&gt;&#39;PRIMARY&#39; ;
#\u6BCF\u4E2A\u6E38\u6807\u5FC5\u987B\u4F7F\u7528\u4E0D\u540C\u7684declare continue handler for not found set done=1\u6765\u63A7\u5236\u6E38\u6807\u7684\u7ED3\u675F
		DECLARE CONTINUE HANDLER FOR NOT FOUND set done=2 ;
#\u82E5\u6CA1\u6709\u6570\u636E\u8FD4\u56DE,\u7A0B\u5E8F\u7EE7\u7EED,\u5E76\u5C06\u53D8\u91CFdone\u8BBE\u4E3A2
        OPEN _cur;
        FETCH _cur INTO _index;
        WHILE _index&lt;&gt;&#39;&#39; DO
            SET @str = CONCAT(&quot;drop index &quot; , _index , &quot; on &quot; , tablename );
            PREPARE sql_str FROM @str ;
            EXECUTE sql_str;
            DEALLOCATE PREPARE sql_str;
            SET _index=&#39;&#39;;
            FETCH _cur INTO _index;
        END WHILE;
    CLOSE _cur;
END //
DELIMITER ;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6267\u884C\u5B58\u50A8\u8FC7\u7A0B</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CALL proc_drop_index(&quot;dbname&quot;,&quot;tablename&quot;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-\u7D22\u5F15\u5931\u6548\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_2-\u7D22\u5F15\u5931\u6548\u6848\u4F8B" aria-hidden="true">#</a> 2. \u7D22\u5F15\u5931\u6548\u6848\u4F8B</h3><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704202453482.png" alt="image-20220704202453482" style="float:left;"><h5 id="_2-1-\u5168\u503C\u5339\u914D\u6211\u6700\u7231" tabindex="-1"><a class="header-anchor" href="#_2-1-\u5168\u503C\u5339\u914D\u6211\u6700\u7231" aria-hidden="true">#</a> 2.1 \u5168\u503C\u5339\u914D\u6211\u6700\u7231</h5><p>\u7CFB\u7EDF\u4E2D\u7ECF\u5E38\u51FA\u73B0\u7684sql\u8BED\u53E5\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE age=30;
EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE age=30 AND classId=4;
EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE age=30 AND classId=4 AND name = &#39;abcd&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5EFA\u7ACB\u7D22\u5F15\u524D\u6267\u884C\uFF1A\uFF08\u5173\u6CE8\u6267\u884C\u65F6\u95F4\uFF09</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT SQL_NO_CACHE * FROM student WHERE age=30 AND classId=4 AND name = &#39;abcd&#39;;
Empty set, 1 warning (0.28 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u5EFA\u7ACB\u7D22\u5F15</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE INDEX idx_age ON student(age);
CREATE INDEX idx_age_classid ON student(age,classId);
CREATE INDEX idx_age_classid_name ON student(age,classId,name);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5EFA\u7ACB\u7D22\u5F15\u540E\u6267\u884C\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT SQL_NO_CACHE * FROM student WHERE age=30 AND classId=4 AND name = &#39;abcd&#39;;
Empty set, 1 warning (0.01 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704204140589.png" alt="image-20220704204140589" style="float:left;"><h5 id="_2-2-\u6700\u4F73\u5DE6\u524D\u7F00\u6CD5\u5219" tabindex="-1"><a class="header-anchor" href="#_2-2-\u6700\u4F73\u5DE6\u524D\u7F00\u6CD5\u5219" aria-hidden="true">#</a> 2.2 \u6700\u4F73\u5DE6\u524D\u7F00\u6CD5\u5219</h5><p>\u5728MySQL\u5EFA\u7ACB\u8054\u5408\u7D22\u5F15\u65F6\u4F1A\u9075\u5B88\u6700\u4F73\u5DE6\u524D\u7F00\u539F\u5219\uFF0C\u5373\u6700\u5DE6\u4F18\u5148\uFF0C\u5728\u68C0\u7D22\u6570\u636E\u65F6\u4ECE\u8054\u5408\u7D22\u5F15\u7684\u6700\u5DE6\u8FB9\u5F00\u59CB\u5339\u914D\u3002</p><p>\u4E3E\u4F8B1\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE student.age=30 AND student.name = &#39;abcd&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E3E\u4F8B2\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE student.classId=1 AND student.name = &#39;abcd&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E3E\u4F8B3\uFF1A\u7D22\u5F15<code>idx_age_classid_name</code>\u8FD8\u80FD\u5426\u6B63\u5E38\u4F7F\u7528\uFF1F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE student.classId=4 AND student.age=30 AND student.name = &#39;abcd&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5982\u679C\u7D22\u5F15\u4E86\u591A\u5217\uFF0C\u8981\u9075\u5B88\u6700\u5DE6\u524D\u7F00\u6CD5\u5219\u3002\u6307\u7684\u662F\u67E5\u8BE2\u4ECE\u7D22\u5F15\u7684\u6700\u5DE6\u524D\u5217\u5F00\u59CB\u5E76\u4E14\u4E0D\u8DF3\u8FC7\u7D22\u5F15\u4E2D\u7684\u5217\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE student.age=30 AND student.name = &#39;abcd&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704211116351.png" alt="image-20220704211116351"></p><p>\u867D\u7136\u53EF\u4EE5\u6B63\u5E38\u4F7F\u7528\uFF0C\u4F46\u662F\u53EA\u6709\u90E8\u5206\u88AB\u4F7F\u7528\u5230\u4E86\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE student.classId=1 AND student.name = &#39;abcd&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704211254581.png" alt="image-20220704211254581"></p><p>\u5B8C\u5168\u6CA1\u6709\u4F7F\u7528\u4E0A\u7D22\u5F15\u3002</p><p>\u7ED3\u8BBA\uFF1AMySQL\u53EF\u4EE5\u4E3A\u591A\u4E2A\u5B57\u6BB5\u521B\u5EFA\u7D22\u5F15\uFF0C\u4E00\u4E2A\u7D22\u5F15\u53EF\u4EE5\u5305\u542B16\u4E2A\u5B57\u6BB5\u3002\u5BF9\u4E8E\u591A\u5217\u7D22\u5F15\uFF0C<strong>\u8FC7\u6EE4\u6761\u4EF6\u8981\u4F7F\u7528\u7D22\u5F15\u5FC5\u987B\u6309\u7167\u7D22\u5F15\u5EFA\u7ACB\u65F6\u7684\u987A\u5E8F\uFF0C\u4F9D\u6B21\u6EE1\u8DB3\uFF0C\u4E00\u65E6\u8DF3\u8FC7\u67D0\u4E2A\u5B57\u6BB5\uFF0C\u7D22\u5F15\u540E\u9762\u7684\u5B57\u6BB5\u90FD\u65E0\u6CD5\u88AB\u4F7F\u7528</strong>\u3002\u5982\u679C\u67E5\u8BE2\u6761\u4EF6\u4E2D\u6CA1\u6709\u7528\u8FD9\u4E9B\u5B57\u6BB5\u4E2D\u7B2C\u4E00\u4E2A\u5B57\u6BB5\u65F6\uFF0C\u591A\u5217\uFF08\u6216\u8054\u5408\uFF09\u7D22\u5F15\u4E0D\u4F1A\u88AB\u4F7F\u7528\u3002</p><blockquote><p>\u62D3\u5C55\uFF1AAlibaba\u300AJava\u5F00\u53D1\u624B\u518C\u300B</p><p>\u7D22\u5F15\u6587\u4EF6\u5177\u6709 B-Tree \u7684\u6700\u5DE6\u524D\u7F00\u5339\u914D\u7279\u6027\uFF0C\u5982\u679C\u5DE6\u8FB9\u7684\u503C\u672A\u786E\u5B9A\uFF0C\u90A3\u4E48\u65E0\u6CD5\u4F7F\u7528\u6B64\u7D22\u5F15\u3002</p></blockquote><h5 id="_2-3-\u4E3B\u952E\u63D2\u5165\u987A\u5E8F" tabindex="-1"><a class="header-anchor" href="#_2-3-\u4E3B\u952E\u63D2\u5165\u987A\u5E8F" aria-hidden="true">#</a> 2.3 \u4E3B\u952E\u63D2\u5165\u987A\u5E8F</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704212354041.png" alt="image-20220704212354041" style="float:left;"><p>\u5982\u679C\u6B64\u65F6\u518D\u63D2\u5165\u4E00\u6761\u4E3B\u952E\u503C\u4E3A 9 \u7684\u8BB0\u5F55\uFF0C\u90A3\u5B83\u63D2\u5165\u7684\u4F4D\u7F6E\u5C31\u5982\u4E0B\u56FE\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704212428607.png" alt="image-20220704212428607"></p><p>\u53EF\u8FD9\u4E2A\u6570\u636E\u9875\u5DF2\u7ECF\u6EE1\u4E86\uFF0C\u518D\u63D2\u8FDB\u6765\u548B\u529E\u5462\uFF1F\u6211\u4EEC\u9700\u8981\u628A\u5F53\u524D <code>\u9875\u9762\u5206\u88C2</code> \u6210\u4E24\u4E2A\u9875\u9762\uFF0C\u628A\u672C\u9875\u4E2D\u7684\u4E00\u4E9B\u8BB0\u5F55\u79FB\u52A8\u5230\u65B0\u521B\u5EFA\u7684\u8FD9\u4E2A\u9875\u4E2D\u3002\u9875\u9762\u5206\u88C2\u548C\u8BB0\u5F55\u79FB\u4F4D\u610F\u5473\u7740\u4EC0\u4E48\uFF1F\u610F\u5473\u7740\uFF1A <code>\u6027\u80FD\u635F\u8017</code> \uFF01\u6240\u4EE5\u5982\u679C\u6211\u4EEC\u60F3\u5C3D\u91CF\u907F\u514D\u8FD9\u6837\u65E0\u8C13\u7684\u6027\u80FD\u635F\u8017\uFF0C\u6700\u597D\u8BA9\u63D2\u5165\u7684\u8BB0\u5F55\u7684 <code>\u4E3B\u952E\u503C\u4F9D\u6B21\u9012\u589E</code> \uFF0C\u8FD9\u6837\u5C31\u4E0D\u4F1A\u53D1\u751F\u8FD9\u6837\u7684\u6027\u80FD\u635F\u8017\u4E86\u3002 \u6240\u4EE5\u6211\u4EEC\u5EFA\u8BAE\uFF1A\u8BA9\u4E3B\u952E\u5177\u6709 <code>AUTO_INCREMENT</code> \uFF0C\u8BA9\u5B58\u50A8\u5F15\u64CE\u81EA\u5DF1\u4E3A\u8868\u751F\u6210\u4E3B\u952E\uFF0C\u800C\u4E0D\u662F\u6211\u4EEC\u624B\u52A8\u63D2\u5165 \uFF0C \u6BD4\u5982\uFF1A <code>person_info</code> \u8868\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE person_info(
    id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL,
    birthday DATE NOT NULL,
    phone_number CHAR(11) NOT NULL,
    country varchar(100) NOT NULL,
    PRIMARY KEY (id),
    KEY idx_name_birthday_phone_number (name(10), birthday, phone_number)
);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u81EA\u5B9A\u4E49\u7684\u4E3B\u952E\u5217 <code>id</code> \u62E5\u6709 <code>AUTO_INCREMENT</code> \u5C5E\u6027\uFF0C\u5728\u63D2\u5165\u8BB0\u5F55\u65F6\u5B58\u50A8\u5F15\u64CE\u4F1A\u81EA\u52A8\u4E3A\u6211\u4EEC\u586B\u5165\u81EA\u589E\u7684\u4E3B\u952E\u503C\u3002\u8FD9\u6837\u7684\u4E3B\u952E\u5360\u7528\u7A7A\u95F4\u5C0F\uFF0C\u987A\u5E8F\u5199\u5165\uFF0C\u51CF\u5C11\u9875\u5206\u88C2\u3002</p><h5 id="_2-4-\u8BA1\u7B97\u3001\u51FD\u6570\u3001\u7C7B\u578B\u8F6C\u6362-\u81EA\u52A8\u6216\u624B\u52A8-\u5BFC\u81F4\u7D22\u5F15\u5931\u6548" tabindex="-1"><a class="header-anchor" href="#_2-4-\u8BA1\u7B97\u3001\u51FD\u6570\u3001\u7C7B\u578B\u8F6C\u6362-\u81EA\u52A8\u6216\u624B\u52A8-\u5BFC\u81F4\u7D22\u5F15\u5931\u6548" aria-hidden="true">#</a> 2.4 \u8BA1\u7B97\u3001\u51FD\u6570\u3001\u7C7B\u578B\u8F6C\u6362(\u81EA\u52A8\u6216\u624B\u52A8)\u5BFC\u81F4\u7D22\u5F15\u5931\u6548</h5><ol><li><p>\u8FD9\u4E24\u6761sql\u54EA\u79CD\u5199\u6CD5\u66F4\u597D</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE student.name LIKE &#39;abc%&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE LEFT(student.name,3) = &#39;abc&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u521B\u5EFA\u7D22\u5F15</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE INDEX idx_name ON student(NAME);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u7B2C\u4E00\u79CD\uFF1A\u7D22\u5F15\u4F18\u5316\u751F\u6548</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE student.name LIKE &#39;abc%&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT SQL_NO_CACHE * FROM student WHERE student.name LIKE &#39;abc%&#39;;
+---------+---------+--------+------+---------+
| id | stuno | name | age | classId |
+---------+---------+--------+------+---------+
| 5301379 | 1233401 | AbCHEa | 164 | 259 |
| 7170042 | 3102064 | ABcHeB | 199 | 161 |
| 1901614 | 1833636 | ABcHeC | 226 | 275 |
| 5195021 | 1127043 | abchEC | 486 | 72 |
| 4047089 | 3810031 | AbCHFd | 268 | 210 |
| 4917074 | 849096 | ABcHfD | 264 | 442 |
| 1540859 | 141979 | abchFF | 119 | 140 |
| 5121801 | 1053823 | AbCHFg | 412 | 327 |
| 2441254 | 2373276 | abchFJ | 170 | 362 |
| 7039146 | 2971168 | ABcHgI | 502 | 465 |
| 1636826 | 1580286 | ABcHgK | 71 | 262 |
| 374344 | 474345 | abchHL | 367 | 212 |
| 1596534 | 169191 | AbCHHl | 102 | 146 |
...
| 5266837 | 1198859 | abclXe | 292 | 298 |
| 8126968 | 4058990 | aBClxE | 316 | 150 |
| 4298305 | 399962 | AbCLXF | 72 | 423 |
| 5813628 | 1745650 | aBClxF | 356 | 323 |
| 6980448 | 2912470 | AbCLXF | 107 | 78 |
| 7881979 | 3814001 | AbCLXF | 89 | 497 |
| 4955576 | 887598 | ABcLxg | 121 | 385 |
| 3653460 | 3585482 | AbCLXJ | 130 | 174 |
| 1231990 | 1283439 | AbCLYH | 189 | 429 |
| 6110615 | 2042637 | ABcLyh | 157 | 40 |
+---------+---------+--------+------+---------+
401 rows in set, 1 warning (0.01 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u7B2C\u4E8C\u79CD\uFF1A\u7D22\u5F15\u4F18\u5316\u5931\u6548</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE LEFT(student.name,3) = &#39;abc&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704214905412.png" alt="image-20220704214905412"></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT SQL_NO_CACHE * FROM student WHERE LEFT(student.name,3) = &#39;abc&#39;;
+---------+---------+--------+------+---------+
| id | stuno | name | age | classId |
+---------+---------+--------+------+---------+
| 5301379 | 1233401 | AbCHEa | 164 | 259 |
| 7170042 | 3102064 | ABcHeB | 199 | 161 |
| 1901614 | 1833636 | ABcHeC | 226 | 275 |
| 5195021 | 1127043 | abchEC | 486 | 72 |
| 4047089 | 3810031 | AbCHFd | 268 | 210 |
| 4917074 | 849096 | ABcHfD | 264 | 442 |
| 1540859 | 141979 | abchFF | 119 | 140 |
| 5121801 | 1053823 | AbCHFg | 412 | 327 |
| 2441254 | 2373276 | abchFJ | 170 | 362 |
| 7039146 | 2971168 | ABcHgI | 502 | 465 |
| 1636826 | 1580286 | ABcHgK | 71 | 262 |
| 374344 | 474345 | abchHL | 367 | 212 |
| 1596534 | 169191 | AbCHHl | 102 | 146 |
...
| 5266837 | 1198859 | abclXe | 292 | 298 |
| 8126968 | 4058990 | aBClxE | 316 | 150 |
| 4298305 | 399962 | AbCLXF | 72 | 423 |
| 5813628 | 1745650 | aBClxF | 356 | 323 |
| 6980448 | 2912470 | AbCLXF | 107 | 78 |
| 7881979 | 3814001 | AbCLXF | 89 | 497 |
| 4955576 | 887598 | ABcLxg | 121 | 385 |
| 3653460 | 3585482 | AbCLXJ | 130 | 174 |
| 1231990 | 1283439 | AbCLYH | 189 | 429 |
| 6110615 | 2042637 | ABcLyh | 157 | 40 |
+---------+---------+--------+------+---------+
401 rows in set, 1 warning (3.62 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>type\u4E3A\u201CALL\u201D\uFF0C\u8868\u793A\u6CA1\u6709\u4F7F\u7528\u5230\u7D22\u5F15\uFF0C\u67E5\u8BE2\u65F6\u95F4\u4E3A 3.62 \u79D2\uFF0C\u67E5\u8BE2\u6548\u7387\u8F83\u4E4B\u524D\u4F4E\u5F88\u591A\u3002</p></li></ol><p><strong>\u518D\u4E3E\u4F8B\uFF1A</strong></p><ul><li><p>student\u8868\u7684\u5B57\u6BB5stuno\u4E0A\u8BBE\u7F6E\u6709\u7D22\u5F15</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE INDEX idx_sno ON student(stuno);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u7D22\u5F15\u4F18\u5316\u5931\u6548\uFF1A\uFF08\u5047\u8BBE\uFF1Astudent\u8868\u7684\u5B57\u6BB5stuno\u4E0A\u8BBE\u7F6E\u6709\u7D22\u5F15\uFF09</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE id, stuno, NAME FROM student WHERE stuno+1 = 900001;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><p>\u8FD0\u884C\u7ED3\u679C\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704215159768.png" alt="image-20220704215159768"></p><ul><li><p>\u7D22\u5F15\u4F18\u5316\u751F\u6548\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE id, stuno, NAME FROM student WHERE stuno = 900000;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><p><strong>\u518D\u4E3E\u4F8B\uFF1A</strong></p><ul><li><p>student\u8868\u7684\u5B57\u6BB5name\u4E0A\u8BBE\u7F6E\u6709\u7D22\u5F15</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE INDEX idx_name ON student(NAME);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT id, stuno, name FROM student WHERE SUBSTRING(name, 1,3)=&#39;abc&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704215533871.png" alt="image-20220704215533871"></p></li><li><p>\u7D22\u5F15\u4F18\u5316\u751F\u6548</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT id, stuno, NAME FROM student WHERE NAME LIKE &#39;abc%&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704215600507.png" alt="image-20220704215600507"></p></li></ul><h5 id="_2-5-\u7C7B\u578B\u8F6C\u6362\u5BFC\u81F4\u7D22\u5F15\u5931\u6548" tabindex="-1"><a class="header-anchor" href="#_2-5-\u7C7B\u578B\u8F6C\u6362\u5BFC\u81F4\u7D22\u5F15\u5931\u6548" aria-hidden="true">#</a> 2.5 \u7C7B\u578B\u8F6C\u6362\u5BFC\u81F4\u7D22\u5F15\u5931\u6548</h5><p>\u4E0B\u5217\u54EA\u4E2Asql\u8BED\u53E5\u53EF\u4EE5\u7528\u5230\u7D22\u5F15\u3002\uFF08\u5047\u8BBEname\u5B57\u6BB5\u4E0A\u8BBE\u7F6E\u6709\u7D22\u5F15\uFF09</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u672A\u4F7F\u7528\u5230\u7D22\u5F15
EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE name=123;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704215658526.png" alt="image-20220704215658526"></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u4F7F\u7528\u5230\u7D22\u5F15
EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE name=&#39;123&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704215721216.png" alt="image-20220704215721216"></p><p>name=123\u53D1\u751F\u7C7B\u578B\u8F6C\u6362\uFF0C\u7D22\u5F15\u5931\u6548\u3002</p><h5 id="_2-6-\u8303\u56F4\u6761\u4EF6\u53F3\u8FB9\u7684\u5217\u7D22\u5F15\u5931\u6548" tabindex="-1"><a class="header-anchor" href="#_2-6-\u8303\u56F4\u6761\u4EF6\u53F3\u8FB9\u7684\u5217\u7D22\u5F15\u5931\u6548" aria-hidden="true">#</a> 2.6 \u8303\u56F4\u6761\u4EF6\u53F3\u8FB9\u7684\u5217\u7D22\u5F15\u5931\u6548</h5><ol><li>\u7CFB\u7EDF\u7ECF\u5E38\u51FA\u73B0\u7684sql\u5982\u4E0B\uFF1A</li></ol><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE student DROP INDEX idx_name;
ALTER TABLE student DROP INDEX idx_age;
ALTER TABLE student DROP INDEX idx_age_classid;

EXPLAIN SELECT SQL_NO_CACHE * FROM student
WHERE student.age=30 AND student.classId&gt;20 AND student.name = &#39;abc&#39; ;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704220123647.png" alt="image-20220704220123647"></p><ol start="2"><li>\u90A3\u4E48\u7D22\u5F15 idx_age_classId_name \u8FD9\u4E2A\u7D22\u5F15\u8FD8\u80FD\u6B63\u5E38\u4F7F\u7528\u4E48\uFF1F</li></ol><ul><li>\u4E0D\u80FD\uFF0C\u8303\u56F4\u53F3\u8FB9\u7684\u5217\u4E0D\u80FD\u4F7F\u7528\u3002\u6BD4\u5982\uFF1A(&lt;) (&lt;=) (&gt;) (&gt;=) \u548C between \u7B49</li><li>\u5982\u679C\u8FD9\u79CDsql\u51FA\u73B0\u8F83\u591A\uFF0C\u5E94\u8BE5\u5EFA\u7ACB\uFF1A</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>create index idx_age_name_classId on student(age,name,classId);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>\u5C06\u8303\u56F4\u67E5\u8BE2\u6761\u4EF6\u653E\u7F6E\u8BED\u53E5\u6700\u540E\uFF1A</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE student.age=30 AND student.name = &#39;abc&#39; AND student.classId&gt;20;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>\u5E94\u7528\u5F00\u53D1\u4E2D\u8303\u56F4\u67E5\u8BE2\uFF0C\u4F8B\u5982\uFF1A\u91D1\u989D\u67E5\u8BE2\uFF0C\u65E5\u671F\u67E5\u8BE2\u5F80\u5F80\u90FD\u662F\u8303\u56F4\u67E5\u8BE2\u3002\u5E94\u5C06\u67E5\u8BE2\u6761\u4EF6\u653E\u7F6Ewhere\u8BED\u53E5\u6700\u540E\u3002\uFF08\u521B\u5EFA\u7684\u8054\u5408\u7D22\u5F15\u4E2D\uFF0C\u52A1\u5FC5\u628A\u8303\u56F4\u6D89\u53CA\u5230\u7684\u5B57\u6BB5\u5199\u5728\u6700\u540E\uFF09</p></blockquote><ol start="3"><li>\u6548\u679C</li></ol><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704223211981.png" alt="image-20220704223211981"></p><h5 id="_2-7-\u4E0D\u7B49\u4E8E-\u6216\u8005-\u7D22\u5F15\u5931\u6548" tabindex="-1"><a class="header-anchor" href="#_2-7-\u4E0D\u7B49\u4E8E-\u6216\u8005-\u7D22\u5F15\u5931\u6548" aria-hidden="true">#</a> 2.7 \u4E0D\u7B49\u4E8E(!= \u6216\u8005&lt;&gt;)\u7D22\u5F15\u5931\u6548</h5><ul><li>\u4E3Aname\u5B57\u6BB5\u521B\u5EFA\u7D22\u5F15</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE INDEX idx_name ON student(NAME);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>\u67E5\u770B\u7D22\u5F15\u662F\u5426\u5931\u6548</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE student.name &lt;&gt; &#39;abc&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704224552374.png" alt="image-20220704224552374"></p><p>\u6216\u8005</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE student.name != &#39;abc&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704224916117.png" alt="image-20220704224916117"></p><p>\u573A\u666F\u4E3E\u4F8B\uFF1A\u7528\u6237\u63D0\u51FA\u9700\u6C42\uFF0C\u5C06\u8D22\u52A1\u6570\u636E\uFF0C\u4EA7\u54C1\u5229\u6DA6\u91D1\u989D\u4E0D\u7B49\u4E8E0\u7684\u90FD\u7EDF\u8BA1\u51FA\u6765\u3002</p><h5 id="_2-8-is-null\u53EF\u4EE5\u4F7F\u7528\u7D22\u5F15-is-not-null\u65E0\u6CD5\u4F7F\u7528\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_2-8-is-null\u53EF\u4EE5\u4F7F\u7528\u7D22\u5F15-is-not-null\u65E0\u6CD5\u4F7F\u7528\u7D22\u5F15" aria-hidden="true">#</a> 2.8 is null\u53EF\u4EE5\u4F7F\u7528\u7D22\u5F15\uFF0Cis not null\u65E0\u6CD5\u4F7F\u7528\u7D22\u5F15</h5><ul><li>IS NULL: \u53EF\u4EE5\u89E6\u53D1\u7D22\u5F15</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE age IS NULL;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>IS NOT NULL: \u65E0\u6CD5\u89E6\u53D1\u7D22\u5F15</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE age IS NOT NULL;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220704225333199.png" alt="image-20220704225333199"></p><blockquote><p>\u7ED3\u8BBA\uFF1A\u6700\u597D\u5728\u8BBE\u8BA1\u6570\u636E\u5E93\u7684\u65F6\u5019\u5C31\u5C06<code>\u5B57\u6BB5\u8BBE\u7F6E\u4E3A NOT NULL \u7EA6\u675F</code>\uFF0C\u6BD4\u5982\u4F60\u53EF\u4EE5\u5C06 INT \u7C7B\u578B\u7684\u5B57\u6BB5\uFF0C\u9ED8\u8BA4\u503C\u8BBE\u7F6E\u4E3A0\u3002\u5C06\u5B57\u7B26\u7C7B\u578B\u7684\u9ED8\u8BA4\u503C\u8BBE\u7F6E\u4E3A\u7A7A\u5B57\u7B26\u4E32(&#39;&#39;)\u3002</p><p>\u6269\u5C55\uFF1A\u540C\u7406\uFF0C\u5728\u67E5\u8BE2\u4E2D\u4F7F\u7528<code>not like</code>\u4E5F\u65E0\u6CD5\u4F7F\u7528\u7D22\u5F15\uFF0C\u5BFC\u81F4\u5168\u8868\u626B\u63CF\u3002</p></blockquote><h5 id="_2-9-like\u4EE5\u901A\u914D\u7B26-\u5F00\u5934\u7D22\u5F15\u5931\u6548" tabindex="-1"><a class="header-anchor" href="#_2-9-like\u4EE5\u901A\u914D\u7B26-\u5F00\u5934\u7D22\u5F15\u5931\u6548" aria-hidden="true">#</a> 2.9 like\u4EE5\u901A\u914D\u7B26%\u5F00\u5934\u7D22\u5F15\u5931\u6548</h5><p>\u5728\u4F7F\u7528LIKE\u5173\u952E\u5B57\u8FDB\u884C\u67E5\u8BE2\u7684\u67E5\u8BE2\u8BED\u53E5\u4E2D\uFF0C\u5982\u679C\u5339\u914D\u5B57\u7B26\u4E32\u7684\u7B2C\u4E00\u4E2A\u5B57\u7B26\u4E3A&#39;%&#39;\uFF0C\u7D22\u5F15\u5C31\u4E0D\u4F1A\u8D77\u4F5C\u7528\u3002\u53EA\u6709&#39;%&#39;\u4E0D\u5728\u7B2C\u4E00\u4E2A\u4F4D\u7F6E\uFF0C\u7D22\u5F15\u624D\u4F1A\u8D77\u4F5C\u7528\u3002</p><ul><li>\u4F7F\u7528\u5230\u7D22\u5F15</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE name LIKE &#39;ab%&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705131643304.png" alt="image-20220705131643304"></p><ul><li>\u672A\u4F7F\u7528\u5230\u7D22\u5F15</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE name LIKE &#39;%ab%&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705131717329.png" alt="image-20220705131717329"></p><blockquote><p>\u62D3\u5C55\uFF1AAlibaba\u300AJava\u5F00\u53D1\u624B\u518C\u300B</p><p>\u3010\u5F3A\u5236\u3011\u9875\u9762\u641C\u7D22\u4E25\u7981\u5DE6\u6A21\u7CCA\u6216\u8005\u5168\u6A21\u7CCA\uFF0C\u5982\u679C\u9700\u8981\u8BF7\u8D70\u641C\u7D22\u5F15\u64CE\u6765\u89E3\u51B3\u3002</p></blockquote><h5 id="_2-10-or-\u524D\u540E\u5B58\u5728\u975E\u7D22\u5F15\u7684\u5217-\u7D22\u5F15\u5931\u6548" tabindex="-1"><a class="header-anchor" href="#_2-10-or-\u524D\u540E\u5B58\u5728\u975E\u7D22\u5F15\u7684\u5217-\u7D22\u5F15\u5931\u6548" aria-hidden="true">#</a> 2.10 OR \u524D\u540E\u5B58\u5728\u975E\u7D22\u5F15\u7684\u5217\uFF0C\u7D22\u5F15\u5931\u6548</h5><p>\u5728WHERE\u5B50\u53E5\u4E2D\uFF0C\u5982\u679C\u5728OR\u524D\u7684\u6761\u4EF6\u5217\u8FDB\u884C\u4E86\u7D22\u5F15\uFF0C\u800C\u5728OR\u540E\u7684\u6761\u4EF6\u5217\u6CA1\u6709\u8FDB\u884C\u7D22\u5F15\uFF0C\u90A3\u4E48\u7D22\u5F15\u4F1A\u5931\u6548\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C<strong>OR\u524D\u540E\u7684\u4E24\u4E2A\u6761\u4EF6\u4E2D\u7684\u5217\u90FD\u662F\u7D22\u5F15\u65F6\uFF0C\u67E5\u8BE2\u4E2D\u624D\u4F7F\u7528\u7D22\u5F15\u3002</strong></p><p>\u56E0\u4E3AOR\u7684\u542B\u4E49\u5C31\u662F\u4E24\u4E2A\u53EA\u8981\u6EE1\u8DB3\u4E00\u4E2A\u5373\u53EF\uFF0C\u56E0\u6B64<code>\u53EA\u6709\u4E00\u4E2A\u6761\u4EF6\u5217\u8FDB\u884C\u4E86\u7D22\u5F15\u662F\u6CA1\u6709\u610F\u4E49\u7684</code>\uFF0C\u53EA\u8981\u6709\u6761\u4EF6\u5217\u6CA1\u6709\u8FDB\u884C\u7D22\u5F15\uFF0C\u5C31\u4F1A\u8FDB\u884C<code>\u5168\u8868\u626B\u63CF</code>\uFF0C\u56E0\u6B64\u6240\u4EE5\u7684\u6761\u4EF6\u5217\u4E5F\u4F1A\u5931\u6548\u3002</p><p>\u67E5\u8BE2\u8BED\u53E5\u4F7F\u7528OR\u5173\u952E\u5B57\u7684\u60C5\u51B5\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u672A\u4F7F\u7528\u5230\u7D22\u5F15
EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE age = 10 OR classid = 100;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705132221045.png" alt="image-20220705132221045"></p><p>\u56E0\u4E3AclassId\u5B57\u6BB5\u4E0A\u6CA1\u6709\u7D22\u5F15\uFF0C\u6240\u4EE5\u4E0A\u8FF0\u67E5\u8BE2\u8BED\u53E5\u6CA1\u6709\u4F7F\u7528\u7D22\u5F15\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#\u4F7F\u7528\u5230\u7D22\u5F15
EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE age = 10 OR name = &#39;Abel&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705132239232.png" alt="image-20220705132239232"></p><p>\u56E0\u4E3Aage\u5B57\u6BB5\u548Cname\u5B57\u6BB5\u4E0A\u90FD\u6709\u7D22\u5F15\uFF0C\u6240\u4EE5\u67E5\u8BE2\u4E2D\u4F7F\u7528\u4E86\u7D22\u5F15\u3002\u4F60\u80FD\u770B\u5230\u8FD9\u91CC\u4F7F\u7528\u5230\u4E86<code>index_merge</code>\uFF0C\u7B80\u5355\u6765\u8BF4index_merge\u5C31\u662F\u5BF9age\u548Cname\u5206\u522B\u8FDB\u884C\u4E86\u626B\u63CF\uFF0C\u7136\u540E\u5C06\u8FD9\u4E24\u4E2A\u7ED3\u679C\u96C6\u8FDB\u884C\u4E86\u5408\u5E76\u3002\u8FD9\u6837\u505A\u7684\u597D\u5904\u5C31\u662F<code>\u907F\u514D\u4E86\u5168\u8868\u626B\u63CF</code>\u3002</p><h5 id="_2-11-\u6570\u636E\u5E93\u548C\u8868\u7684\u5B57\u7B26\u96C6\u7EDF\u4E00\u4F7F\u7528utf8mb4" tabindex="-1"><a class="header-anchor" href="#_2-11-\u6570\u636E\u5E93\u548C\u8868\u7684\u5B57\u7B26\u96C6\u7EDF\u4E00\u4F7F\u7528utf8mb4" aria-hidden="true">#</a> 2.11 \u6570\u636E\u5E93\u548C\u8868\u7684\u5B57\u7B26\u96C6\u7EDF\u4E00\u4F7F\u7528utf8mb4</h5><p>\u7EDF\u4E00\u4F7F\u7528utf8mb4( 5.5.3\u7248\u672C\u4EE5\u4E0A\u652F\u6301)\u517C\u5BB9\u6027\u66F4\u597D\uFF0C\u7EDF\u4E00\u5B57\u7B26\u96C6\u53EF\u4EE5\u907F\u514D\u7531\u4E8E\u5B57\u7B26\u96C6\u8F6C\u6362\u4EA7\u751F\u7684\u4E71\u7801\u3002\u4E0D \u540C\u7684 <code>\u5B57\u7B26\u96C6</code> \u8FDB\u884C\u6BD4\u8F83\u524D\u9700\u8981\u8FDB\u884C <code>\u8F6C\u6362</code> \u4F1A\u9020\u6210\u7D22\u5F15\u5931\u6548\u3002</p><h5 id="_2-12-\u7EC3\u4E60\u53CA\u4E00\u822C\u6027\u5EFA\u8BAE" tabindex="-1"><a class="header-anchor" href="#_2-12-\u7EC3\u4E60\u53CA\u4E00\u822C\u6027\u5EFA\u8BAE" aria-hidden="true">#</a> 2.12 \u7EC3\u4E60\u53CA\u4E00\u822C\u6027\u5EFA\u8BAE</h5><p>**\u7EC3\u4E60\uFF1A**\u5047\u8BBE\uFF1Aindex(a,b,c)</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705145225852.png" alt="image-20220705145225852"></p><p><strong>\u4E00\u822C\u6027\u5EFA\u8BAE</strong></p><ul><li>\u5BF9\u4E8E\u5355\u5217\u7D22\u5F15\uFF0C\u5C3D\u91CF\u9009\u62E9\u9488\u5BF9\u5F53\u524Dquery\u8FC7\u6EE4\u6027\u66F4\u597D\u7684\u7D22\u5F15</li><li>\u5728\u9009\u62E9\u7EC4\u5408\u7D22\u5F15\u7684\u65F6\u5019\uFF0C\u5F53\u524Dquery\u4E2D\u8FC7\u6EE4\u6027\u6700\u597D\u7684\u5B57\u6BB5\u5728\u7D22\u5F15\u5B57\u6BB5\u987A\u5E8F\u4E2D\uFF0C\u4F4D\u7F6E\u8D8A\u9760\u524D\u8D8A\u597D\u3002</li><li>\u5728\u9009\u62E9\u7EC4\u5408\u7D22\u5F15\u7684\u65F6\u5019\uFF0C\u5C3D\u91CF\u9009\u62E9\u80FD\u591F\u5F53\u524Dquery\u4E2Dwhere\u5B50\u53E5\u4E2D\u66F4\u591A\u7684\u7D22\u5F15\u3002</li><li>\u5728\u9009\u62E9\u7EC4\u5408\u7D22\u5F15\u7684\u65F6\u5019\uFF0C\u5982\u679C\u67D0\u4E2A\u5B57\u6BB5\u53EF\u80FD\u51FA\u73B0\u8303\u56F4\u67E5\u8BE2\u65F6\uFF0C\u5C3D\u91CF\u628A\u8FD9\u4E2A\u5B57\u6BB5\u653E\u5728\u7D22\u5F15\u6B21\u5E8F\u7684\u6700\u540E\u9762\u3002</li></ul><p><strong>\u603B\u4E4B\uFF0C\u4E66\u5199SQL\u8BED\u53E5\u65F6\uFF0C\u5C3D\u91CF\u907F\u514D\u9020\u6210\u7D22\u5F15\u5931\u6548\u7684\u60C5\u51B5</strong></p><h3 id="_3-\u5173\u8054\u67E5\u8BE2\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#_3-\u5173\u8054\u67E5\u8BE2\u4F18\u5316" aria-hidden="true">#</a> 3. \u5173\u8054\u67E5\u8BE2\u4F18\u5316</h3><h5 id="_3-1-\u6570\u636E\u51C6\u5907-1" tabindex="-1"><a class="header-anchor" href="#_3-1-\u6570\u636E\u51C6\u5907-1" aria-hidden="true">#</a> 3.1 \u6570\u636E\u51C6\u5907</h5><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u5206\u7C7B
CREATE TABLE IF NOT EXISTS \`type\` (
\`id\` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
\`card\` INT(10) UNSIGNED NOT NULL,
PRIMARY KEY (\`id\`)
);
#\u56FE\u4E66
CREATE TABLE IF NOT EXISTS \`book\` (
\`bookid\` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
\`card\` INT(10) UNSIGNED NOT NULL,
PRIMARY KEY (\`bookid\`)
);

#\u5411\u5206\u7C7B\u8868\u4E2D\u6DFB\u52A020\u6761\u8BB0\u5F55
INSERT INTO \`type\`(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO \`type\`(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO \`type\`(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO \`type\`(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO \`type\`(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO \`type\`(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO \`type\`(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO \`type\`(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO \`type\`(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO \`type\`(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO \`type\`(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO \`type\`(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO \`type\`(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO \`type\`(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO \`type\`(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO \`type\`(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO \`type\`(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO \`type\`(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO \`type\`(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO \`type\`(card) VALUES(FLOOR(1 + (RAND() * 20)));

#\u5411\u56FE\u4E66\u8868\u4E2D\u6DFB\u52A020\u6761\u8BB0\u5F55
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-2-\u91C7\u7528\u5DE6\u5916\u8FDE\u63A5" tabindex="-1"><a class="header-anchor" href="#_3-2-\u91C7\u7528\u5DE6\u5916\u8FDE\u63A5" aria-hidden="true">#</a> 3.2 \u91C7\u7528\u5DE6\u5916\u8FDE\u63A5</h5><p>\u4E0B\u9762\u5F00\u59CB EXPLAIN \u5206\u6790</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE * FROM \`type\` LEFT JOIN book ON type.card = book.card;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705160504018.png" alt="image-20220705160504018"></p><p>\u7ED3\u8BBA\uFF1Atype \u6709All</p><p>\u6DFB\u52A0\u7D22\u5F15\u4F18\u5316</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE book ADD INDEX Y ( card); #\u3010\u88AB\u9A71\u52A8\u8868\u3011\uFF0C\u53EF\u4EE5\u907F\u514D\u5168\u8868\u626B\u63CF
EXPLAIN SELECT SQL_NO_CACHE * FROM \`type\` LEFT JOIN book ON type.card = book.card;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705160935109.png" alt="image-20220705160935109"></p><p>\u53EF\u4EE5\u770B\u5230\u7B2C\u4E8C\u884C\u7684 type \u53D8\u4E3A\u4E86 ref\uFF0Crows \u4E5F\u53D8\u6210\u4E86\u4F18\u5316\u6BD4\u8F83\u660E\u663E\u3002\u8FD9\u662F\u7531\u5DE6\u8FDE\u63A5\u7279\u6027\u51B3\u5B9A\u7684\u3002LEFT JOIN \u6761\u4EF6\u7528\u4E8E\u786E\u5B9A\u5982\u4F55\u4ECE\u53F3\u8868\u641C\u7D22\u884C\uFF0C\u5DE6\u8FB9\u4E00\u5B9A\u90FD\u6709\uFF0C\u6240\u4EE5 <code>\u53F3\u8FB9\u662F\u6211\u4EEC\u7684\u5173\u952E\u70B9,\u4E00\u5B9A\u9700\u8981\u5EFA\u7ACB\u7D22\u5F15</code> \u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \`type\` ADD INDEX X (card); #\u3010\u9A71\u52A8\u8868\u3011\uFF0C\u65E0\u6CD5\u907F\u514D\u5168\u8868\u626B\u63CF
EXPLAIN SELECT SQL_NO_CACHE * FROM \`type\` LEFT JOIN book ON type.card = book.card;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705161243838.png" alt="image-20220705161243838"></p><p>\u63A5\u7740\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DROP INDEX Y ON book;
EXPLAIN SELECT SQL_NO_CACHE * FROM \`type\` LEFT JOIN book ON type.card = book.card;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705161515545.png" alt="image-20220705161515545"></p><h5 id="_3-3-\u91C7\u7528\u5185\u8FDE\u63A5" tabindex="-1"><a class="header-anchor" href="#_3-3-\u91C7\u7528\u5185\u8FDE\u63A5" aria-hidden="true">#</a> 3.3 \u91C7\u7528\u5185\u8FDE\u63A5</h5><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>drop index X on type;
drop index Y on book;\uFF08\u5982\u679C\u5DF2\u7ECF\u5220\u9664\u4E86\u53EF\u4EE5\u4E0D\u7528\u518D\u6267\u884C\u8BE5\u64CD\u4F5C\uFF09
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6362\u6210 inner join\uFF08MySQL\u81EA\u52A8\u9009\u62E9\u9A71\u52A8\u8868\uFF09</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE * FROM type INNER JOIN book ON type.card=book.card;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705161602362.png" alt="image-20220705161602362"></p><p>\u6DFB\u52A0\u7D22\u5F15\u4F18\u5316</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE book ADD INDEX Y (card);
EXPLAIN SELECT SQL_NO_CACHE * FROM type INNER JOIN book ON type.card=book.card;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705161746184.png" alt="image-20220705161746184"></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE type ADD INDEX X (card);
EXPLAIN SELECT SQL_NO_CACHE * FROM type INNER JOIN book ON type.card=book.card;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705161843558.png" alt="image-20220705161843558"></p><p>\u5BF9\u4E8E\u5185\u8FDE\u63A5\u6765\u8BF4\uFF0C\u67E5\u8BE2\u4F18\u5316\u5668\u53EF\u4EE5\u51B3\u5B9A\u8C01\u4F5C\u4E3A\u9A71\u52A8\u8868\uFF0C\u8C01\u4F5C\u4E3A\u88AB\u9A71\u52A8\u8868\u51FA\u73B0\u7684</p><p>\u63A5\u7740\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DROP INDEX X ON \`type\`;
EXPLAIN SELECT SQL_NO_CACHE * FROM TYPE INNER JOIN book ON type.card=book.card;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705161929544.png" alt="image-20220705161929544"></p><p>\u63A5\u7740\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \`type\` ADD INDEX X (card);
EXPLAIN SELECT SQL_NO_CACHE * FROM \`type\` INNER JOIN book ON type.card=book.card;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705162009145.png" alt="image-20220705162009145"></p><p>\u63A5\u7740\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#\u5411\u56FE\u4E66\u8868\u4E2D\u6DFB\u52A020\u6761\u8BB0\u5F55
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));
INSERT INTO book(card) VALUES(FLOOR(1 + (RAND() * 20)));

ALTER TABLE book ADD INDEX Y (card);
EXPLAIN SELECT SQL_NO_CACHE * FROM \`type\` INNER JOIN book ON \`type\`.card = book.card;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705163833445.png" alt="image-20220705163833445"></p><p>\u56FE\u4E2D\u53D1\u73B0\uFF0C\u7531\u4E8Etype\u8868\u6570\u636E\u5927\u4E8Ebook\u8868\u6570\u636E\uFF0CMySQL\u9009\u62E9\u5C06type\u4F5C\u4E3A\u88AB\u9A71\u52A8\u8868\u3002</p><h5 id="_3-4-join\u8BED\u53E5\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_3-4-join\u8BED\u53E5\u539F\u7406" aria-hidden="true">#</a> 3.4 join\u8BED\u53E5\u539F\u7406</h5><p>join\u65B9\u5F0F\u8FDE\u63A5\u591A\u4E2A\u8868\uFF0C\u672C\u8D28\u5C31\u662F\u5404\u4E2A\u8868\u4E4B\u95F4\u6570\u636E\u7684\u5FAA\u73AF\u5339\u914D\u3002MySQL5.5\u7248\u672C\u4E4B\u524D\uFF0CMySQL\u53EA\u652F\u6301\u4E00\u79CD\u8868\u95F4\u5173\u8054\u65B9\u5F0F\uFF0C\u5C31\u662F\u5D4C\u5957\u5FAA\u73AF(Nested Loop Join)\u3002\u5982\u679C\u5173\u8054\u8868\u7684\u6570\u636E\u91CF\u5F88\u5927\uFF0C\u5219join\u5173\u8054\u7684\u6267\u884C\u65F6\u95F4\u4F1A\u5F88\u957F\u3002\u5728MySQL5.5\u4EE5\u540E\u7684\u7248\u672C\u4E2D\uFF0CMySQL\u901A\u8FC7\u5F15\u5165BNLJ\u7B97\u6CD5\u6765\u4F18\u5316\u5D4C\u5957\u6267\u884C\u3002</p><h6 id="_1-\u9A71\u52A8\u8868\u548C\u88AB\u9A71\u52A8\u8868" tabindex="-1"><a class="header-anchor" href="#_1-\u9A71\u52A8\u8868\u548C\u88AB\u9A71\u52A8\u8868" aria-hidden="true">#</a> 1. \u9A71\u52A8\u8868\u548C\u88AB\u9A71\u52A8\u8868</h6><p>\u9A71\u52A8\u8868\u5C31\u662F\u4E3B\u8868\uFF0C\u88AB\u9A71\u52A8\u8868\u5C31\u662F\u4ECE\u8868\u3001\u975E\u9A71\u52A8\u8868\u3002</p><ul><li>\u5BF9\u4E8E\u5185\u8FDE\u63A5\u6765\u8BF4\uFF1A</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT * FROM A JOIN B ON ...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>A\u4E00\u5B9A\u662F\u9A71\u52A8\u8868\u5417\uFF1F\u4E0D\u4E00\u5B9A\uFF0C\u4F18\u5316\u5668\u4F1A\u6839\u636E\u4F60\u67E5\u8BE2\u8BED\u53E5\u505A\u4F18\u5316\uFF0C\u51B3\u5B9A\u5148\u67E5\u54EA\u5F20\u8868\u3002\u5148\u67E5\u8BE2\u7684\u90A3\u5F20\u8868\u5C31\u662F\u9A71\u52A8\u8868\uFF0C\u53CD\u4E4B\u5C31\u662F\u88AB\u9A71\u52A8\u8868\u3002\u901A\u8FC7explain\u5173\u952E\u5B57\u53EF\u4EE5\u67E5\u770B\u3002</p><ul><li>\u5BF9\u4E8E\u5916\u8FDE\u63A5\u6765\u8BF4\uFF1A</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT * FROM A LEFT JOIN B ON ...
# \u6216
SELECT * FROM B RIGHT JOIN A ON ... 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u901A\u5E38\uFF0C\u5927\u5BB6\u4F1A\u8BA4\u4E3AA\u5C31\u662F\u9A71\u52A8\u8868\uFF0CB\u5C31\u662F\u88AB\u9A71\u52A8\u8868\u3002\u4F46\u4E5F\u672A\u5FC5\u3002\u6D4B\u8BD5\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE a(f1 INT, f2 INT, INDEX(f1)) ENGINE=INNODB;
CREATE TABLE b(f1 INT, f2 INT) ENGINE=INNODB;

INSERT INTO a VALUES(1,1),(2,2),(3,3),(4,4),(5,5),(6,6);
INSERT INTO b VALUES(3,3),(4,4),(5,5),(6,6),(7,7),(8,8);

SELECT * FROM b;

# \u6D4B\u8BD51
EXPLAIN SELECT * FROM a LEFT JOIN b ON(a.f1=b.f1) WHERE (a.f2=b.f2);

# \u6D4B\u8BD52
EXPLAIN SELECT * FROM a LEFT JOIN b ON(a.f1=b.f1) AND (a.f2=b.f2);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_2-simple-nested-loop-join-\u7B80\u5355\u5D4C\u5957\u5FAA\u73AF\u8FDE\u63A5" tabindex="-1"><a class="header-anchor" href="#_2-simple-nested-loop-join-\u7B80\u5355\u5D4C\u5957\u5FAA\u73AF\u8FDE\u63A5" aria-hidden="true">#</a> 2. Simple Nested-Loop Join (\u7B80\u5355\u5D4C\u5957\u5FAA\u73AF\u8FDE\u63A5)</h6><p>\u7B97\u6CD5\u76F8\u5F53\u7B80\u5355\uFF0C\u4ECE\u8868A\u4E2D\u53D6\u51FA\u4E00\u6761\u6570\u636E1\uFF0C\u904D\u5386\u8868B\uFF0C\u5C06\u5339\u914D\u5230\u7684\u6570\u636E\u653E\u5230result.. \u4EE5\u6B64\u7C7B\u63A8\uFF0C\u9A71\u52A8\u8868A\u4E2D\u7684\u6BCF\u4E00\u6761\u8BB0\u5F55\u4E0E\u88AB\u9A71\u52A8\u8868B\u7684\u8BB0\u5F55\u8FDB\u884C\u5224\u65AD\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705165559127.png" alt="image-20220705165559127"></p><p>\u53EF\u4EE5\u770B\u5230\u8FD9\u79CD\u65B9\u5F0F\u6548\u7387\u662F\u975E\u5E38\u4F4E\u7684\uFF0C\u4EE5\u4E0A\u8FF0\u8868A\u6570\u636E100\u6761\uFF0C\u8868B\u6570\u636E1000\u6761\u8BA1\u7B97\uFF0C\u5219A*B=10\u4E07\u6B21\u3002\u5F00\u9500\u7EDF\u8BA1\u5982\u4E0B:</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705165646252.png" alt="image-20220705165646252"></p><p>\u5F53\u7136mysql\u80AF\u5B9A\u4E0D\u4F1A\u8FD9\u4E48\u7C97\u66B4\u7684\u53BB\u8FDB\u884C\u8868\u7684\u8FDE\u63A5\uFF0C\u6240\u4EE5\u5C31\u51FA\u73B0\u4E86\u540E\u9762\u7684\u4E24\u79CD\u5BF9Nested-Loop Join\u4F18\u5316\u7B97\u6CD5\u3002</p><h6 id="_3-index-nested-loop-join-\u7D22\u5F15\u5D4C\u5957\u5FAA\u73AF\u8FDE\u63A5" tabindex="-1"><a class="header-anchor" href="#_3-index-nested-loop-join-\u7D22\u5F15\u5D4C\u5957\u5FAA\u73AF\u8FDE\u63A5" aria-hidden="true">#</a> 3. Index Nested-Loop Join \uFF08\u7D22\u5F15\u5D4C\u5957\u5FAA\u73AF\u8FDE\u63A5\uFF09</h6><p>Index Nested-Loop Join\u5176\u4F18\u5316\u7684\u601D\u8DEF\u4E3B\u8981\u662F\u4E3A\u4E86<code>\u51CF\u5C11\u5185\u5B58\u8868\u6570\u636E\u7684\u5339\u914D\u6B21\u6570</code>\uFF0C\u6240\u4EE5\u8981\u6C42\u88AB\u9A71\u52A8\u8868\u4E0A\u5FC5\u987B<code>\u6709\u7D22\u5F15</code>\u624D\u884C\u3002\u901A\u8FC7\u5916\u5C42\u8868\u5339\u914D\u6761\u4EF6\u76F4\u63A5\u4E0E\u5185\u5C42\u8868\u7D22\u5F15\u8FDB\u884C\u5339\u914D\uFF0C\u907F\u514D\u548C\u5185\u5B58\u8868\u7684\u6BCF\u6761\u8BB0\u5F55\u53BB\u8FDB\u884C\u6BD4\u8F83\uFF0C\u8FD9\u6837\u6781\u5927\u7684\u51CF\u5C11\u4E86\u5BF9\u5185\u5B58\u8868\u7684\u5339\u914D\u6B21\u6570\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705172315554.png" alt="image-20220705172315554"></p><p>\u9A71\u52A8\u8868\u4E2D\u7684\u6BCF\u6761\u8BB0\u5F55\u901A\u8FC7\u88AB\u9A71\u52A8\u8868\u7684\u7D22\u5F15\u8FDB\u884C\u8BBF\u95EE\uFF0C\u56E0\u4E3A\u7D22\u5F15\u67E5\u8BE2\u7684\u6210\u672C\u662F\u6BD4\u8F83\u56FA\u5B9A\u7684\uFF0C\u6545mysql\u4F18\u5316\u5668\u90FD\u503E\u5411\u4E8E\u4F7F\u7528\u8BB0\u5F55\u6570\u5C11\u7684\u8868\u4F5C\u4E3A\u9A71\u52A8\u8868\uFF08\u5916\u8868\uFF09\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705172650749.png" alt="image-20220705172650749"></p><p>\u5982\u679C\u88AB\u9A71\u52A8\u8868\u52A0\u7D22\u5F15\uFF0C\u6548\u7387\u662F\u975E\u5E38\u9AD8\u7684\uFF0C\u4F46\u5982\u679C\u7D22\u5F15\u4E0D\u662F\u4E3B\u952E\u7D22\u5F15\uFF0C\u6240\u4EE5\u8FD8\u5F97\u8FDB\u884C\u4E00\u6B21\u56DE\u8868\u67E5\u8BE2\u3002\u76F8\u6BD4\uFF0C\u88AB\u9A71\u52A8\u8868\u7684\u7D22\u5F15\u662F\u4E3B\u952E\u7D22\u5F15\uFF0C\u6548\u7387\u4F1A\u66F4\u9AD8\u3002</p><h6 id="_4-block-nested-loop-join-\u5757\u5D4C\u5957\u5FAA\u73AF\u8FDE\u63A5" tabindex="-1"><a class="header-anchor" href="#_4-block-nested-loop-join-\u5757\u5D4C\u5957\u5FAA\u73AF\u8FDE\u63A5" aria-hidden="true">#</a> 4. Block Nested-Loop Join\uFF08\u5757\u5D4C\u5957\u5FAA\u73AF\u8FDE\u63A5\uFF09</h6><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705173047234.png" alt="image-20220705173047234" style="float:left;"><blockquote><p>\u6CE8\u610F\uFF1A</p><p>\u8FD9\u91CC\u7F13\u5B58\u7684\u4E0D\u53EA\u662F\u5173\u8054\u8868\u7684\u5217\uFF0Cselect\u540E\u9762\u7684\u5217\u4E5F\u4F1A\u7F13\u5B58\u8D77\u6765\u3002</p><p>\u5728\u4E00\u4E2A\u6709N\u4E2Ajoin\u5173\u8054\u7684sql\u4E2D\u4F1A\u5206\u914DN-1\u4E2Ajoin buffer\u3002\u6240\u4EE5\u67E5\u8BE2\u7684\u65F6\u5019\u5C3D\u91CF\u51CF\u5C11\u4E0D\u5FC5\u8981\u7684\u5B57\u6BB5\uFF0C\u53EF\u4EE5\u8BA9join buffer\u4E2D\u53EF\u4EE5\u5B58\u653E\u66F4\u591A\u7684\u5217\u3002</p></blockquote><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705174005280.png" alt="image-20220705174005280"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705174250551.png" alt="image-20220705174250551"></p><p>\u53C2\u6570\u8BBE\u7F6E\uFF1A</p><ul><li>block_nested_loop</li></ul><p>\u901A\u8FC7<code>show variables like &#39;%optimizer_switch%</code> \u67E5\u770B <code>block_nested_loop</code>\u72B6\u6001\u3002\u9ED8\u8BA4\u662F\u5F00\u542F\u7684\u3002</p><ul><li>join_buffer_size</li></ul><p>\u9A71\u52A8\u8868\u80FD\u4E0D\u80FD\u4E00\u6B21\u52A0\u8F7D\u5B8C\uFF0C\u8981\u770Bjoin buffer\u80FD\u4E0D\u80FD\u5B58\u50A8\u6240\u6709\u7684\u6570\u636E\uFF0C\u9ED8\u8BA4\u60C5\u51B5\u4E0B<code>join_buffer_size=256k</code>\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; show variables like &#39;%join_buffer%&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>join_buffer_size\u7684\u6700\u5927\u503C\u572832\u4F4D\u64CD\u4F5C\u7CFB\u7EDF\u53EF\u4EE5\u7533\u8BF74G\uFF0C\u800C\u572864\u4F4D\u64CD\u4F5C\u7CFB\u7EDF\u4E0B\u53EF\u4EE5\u7533\u8BF7\u5927\u4E8E4G\u7684Join Buffer\u7A7A\u95F4\uFF0864\u4F4DWindows\u9664\u5916\uFF0C\u5176\u5927\u503C\u4F1A\u88AB\u622A\u65AD\u4E3A4GB\u5E76\u53D1\u51FA\u8B66\u544A\uFF09\u3002</p><h6 id="_5-join\u5C0F\u7ED3" tabindex="-1"><a class="header-anchor" href="#_5-join\u5C0F\u7ED3" aria-hidden="true">#</a> 5. Join\u5C0F\u7ED3</h6><p>1\u3001<strong>\u6574\u4F53\u6548\u7387\u6BD4\u8F83\uFF1AINLJ &gt; BNLJ &gt; SNLJ</strong></p><p>2\u3001\u6C38\u8FDC\u7528\u5C0F\u7ED3\u679C\u96C6\u9A71\u52A8\u5927\u7ED3\u679C\u96C6\uFF08\u5176\u672C\u8D28\u5C31\u662F\u51CF\u5C11\u5916\u5C42\u5FAA\u73AF\u7684\u6570\u636E\u6570\u91CF\uFF09\uFF08\u5C0F\u7684\u5EA6\u91CF\u5355\u4F4D\u6307\u7684\u662F\u8868\u884C\u6570 * \u6BCF\u884C\u5927\u5C0F\uFF09</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>select t1.b,t2.* from t1 straight_join t2 on (t1.b=t2.b) where t2.id&lt;=100; # \u63A8\u8350
select t1.b,t2.* from t2 straight_join t1 on (t1.b=t2.b) where t2.id&lt;=100; # \u4E0D\u63A8\u8350
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>3\u3001\u4E3A\u88AB\u9A71\u52A8\u8868\u5339\u914D\u7684\u6761\u4EF6\u589E\u52A0\u7D22\u5F15(\u51CF\u5C11\u5185\u5B58\u8868\u7684\u5FAA\u73AF\u5339\u914D\u6B21\u6570)</p><p>4\u3001\u589E\u5927join buffer size\u7684\u5927\u5C0F\uFF08\u4E00\u6B21\u7D22\u5F15\u7684\u6570\u636E\u8D8A\u591A\uFF0C\u90A3\u4E48\u5185\u5C42\u5305\u7684\u626B\u63CF\u6B21\u6570\u5C31\u8D8A\u5C11\uFF09</p><p>5\u3001\u51CF\u5C11\u9A71\u52A8\u8868\u4E0D\u5FC5\u8981\u7684\u5B57\u6BB5\u67E5\u8BE2\uFF08\u5B57\u6BB5\u8D8A\u5C11\uFF0Cjoin buffer\u6240\u7F13\u5B58\u7684\u6570\u636E\u5C31\u8D8A\u591A\uFF09</p><h6 id="_6-hash-join" tabindex="-1"><a class="header-anchor" href="#_6-hash-join" aria-hidden="true">#</a> 6. Hash Join</h6><p><strong>\u4ECEMySQL\u76848.0.20\u7248\u672C\u5F00\u59CB\u5C06\u5E9F\u5F03BNLJ\uFF0C\u56E0\u4E3A\u4ECEMySQL8.0.18\u7248\u672C\u5F00\u59CB\u5C31\u52A0\u5165\u4E86hash join\u9ED8\u8BA4\u90FD\u4F1A\u4F7F\u7528hash join</strong></p><ul><li><p>Nested Loop:</p><p>\u5BF9\u4E8E\u88AB\u8FDE\u63A5\u7684\u6570\u636E\u5B50\u96C6\u8F83\u5C0F\u7684\u60C5\u51B5\uFF0CNested Loop\u662F\u4E2A\u8F83\u597D\u7684\u9009\u62E9\u3002</p></li><li><p>Hash Join\u662F\u505A<code>\u5927\u6570\u636E\u96C6\u8FDE\u63A5</code>\u65F6\u7684\u5E38\u7528\u65B9\u5F0F\uFF0C\u4F18\u5316\u5668\u4F7F\u7528\u4E24\u4E2A\u8868\u4E2D\u8F83\u5C0F\uFF08\u76F8\u5BF9\u8F83\u5C0F\uFF09\u7684\u8868\u5229\u7528Join Key\u5728\u5185\u5B58\u4E2D\u5EFA\u7ACB<code>\u6563\u5217\u8868</code>\uFF0C\u7136\u540E\u626B\u63CF\u8F83\u5927\u7684\u8868\u5E76\u63A2\u6D4B\u6563\u5217\u8868\uFF0C\u627E\u51FA\u4E0EHash\u8868\u5339\u914D\u7684\u884C\u3002</p><ul><li>\u8FD9\u79CD\u65B9\u5F0F\u9002\u5408\u4E8E\u8F83\u5C0F\u7684\u8868\u5B8C\u5168\u53EF\u4EE5\u653E\u4E8E\u5185\u5B58\u4E2D\u7684\u60C5\u51B5\uFF0C\u8FD9\u6837\u603B\u6210\u672C\u5C31\u662F\u8BBF\u95EE\u4E24\u4E2A\u8868\u7684\u6210\u672C\u4E4B\u548C\u3002</li><li>\u5728\u8868\u5F88\u5927\u7684\u60C5\u51B5\u4E0B\u5E76\u4E0D\u80FD\u5B8C\u5168\u653E\u5165\u5185\u5B58\uFF0C\u8FD9\u65F6\u4F18\u5316\u5668\u4F1A\u5C06\u5B83\u5206\u5272\u6210<code>\u82E5\u5E72\u4E0D\u540C\u7684\u5206\u533A</code>\uFF0C\u4E0D\u80FD\u653E\u5165\u5185\u5B58\u7684\u90E8\u5206\u5C31\u628A\u8BE5\u5206\u533A\u5199\u5165\u78C1\u76D8\u7684\u4E34\u65F6\u6BB5\uFF0C\u6B64\u65F6\u8981\u6C42\u6709\u8F83\u5927\u7684\u4E34\u65F6\u6BB5\u4ECE\u800C\u5C3D\u91CF\u63D0\u9AD8I/O\u7684\u6027\u80FD\u3002</li><li>\u5B83\u80FD\u591F\u5F88\u597D\u7684\u5DE5\u4F5C\u4E8E\u6CA1\u6709\u7D22\u5F15\u7684\u5927\u8868\u548C\u5E76\u884C\u67E5\u8BE2\u7684\u73AF\u5883\u4E2D\uFF0C\u5E76\u63D0\u4F9B\u6700\u597D\u7684\u6027\u80FD\u3002\u5927\u591A\u6570\u4EBA\u90FD\u8BF4\u5B83\u662FJoin\u7684\u91CD\u578B\u5347\u964D\u673A\u3002Hash Join\u53EA\u80FD\u5E94\u7528\u4E8E\u7B49\u503C\u8FDE\u63A5\uFF08\u5982WHERE A.COL1 = B.COL2\uFF09\uFF0C\u8FD9\u662F\u7531Hash\u7684\u7279\u70B9\u51B3\u5B9A\u7684\u3002</li></ul></li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705205050280.png" alt="image-20220705205050280"></p><h5 id="_3-5-\u5C0F\u7ED3" tabindex="-1"><a class="header-anchor" href="#_3-5-\u5C0F\u7ED3" aria-hidden="true">#</a> 3.5 \u5C0F\u7ED3</h5><ul><li>\u4FDD\u8BC1\u88AB\u9A71\u52A8\u8868\u7684JOIN\u5B57\u6BB5\u5DF2\u7ECF\u521B\u5EFA\u4E86\u7D22\u5F15</li><li>\u9700\u8981JOIN \u7684\u5B57\u6BB5\uFF0C\u6570\u636E\u7C7B\u578B\u4FDD\u6301\u7EDD\u5BF9\u4E00\u81F4\u3002</li><li>LEFT JOIN \u65F6\uFF0C\u9009\u62E9\u5C0F\u8868\u4F5C\u4E3A\u9A71\u52A8\u8868\uFF0C \u5927\u8868\u4F5C\u4E3A\u88AB\u9A71\u52A8\u8868 \u3002\u51CF\u5C11\u5916\u5C42\u5FAA\u73AF\u7684\u6B21\u6570\u3002</li><li>INNER JOIN \u65F6\uFF0CMySQL\u4F1A\u81EA\u52A8\u5C06 \u5C0F\u7ED3\u679C\u96C6\u7684\u8868\u9009\u4E3A\u9A71\u52A8\u8868 \u3002\u9009\u62E9\u76F8\u4FE1MySQL\u4F18\u5316\u7B56\u7565\u3002</li><li>\u80FD\u591F\u76F4\u63A5\u591A\u8868\u5173\u8054\u7684\u5C3D\u91CF\u76F4\u63A5\u5173\u8054\uFF0C\u4E0D\u7528\u5B50\u67E5\u8BE2\u3002(\u51CF\u5C11\u67E5\u8BE2\u7684\u8D9F\u6570)</li><li>\u4E0D\u5EFA\u8BAE\u4F7F\u7528\u5B50\u67E5\u8BE2\uFF0C\u5EFA\u8BAE\u5C06\u5B50\u67E5\u8BE2SQL\u62C6\u5F00\u7ED3\u5408\u7A0B\u5E8F\u591A\u6B21\u67E5\u8BE2\uFF0C\u6216\u4F7F\u7528 JOIN \u6765\u4EE3\u66FF\u5B50\u67E5\u8BE2\u3002</li><li>\u884D\u751F\u8868\u5EFA\u4E0D\u4E86\u7D22\u5F15</li></ul><h3 id="_4-\u5B50\u67E5\u8BE2\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#_4-\u5B50\u67E5\u8BE2\u4F18\u5316" aria-hidden="true">#</a> 4. \u5B50\u67E5\u8BE2\u4F18\u5316</h3><p>MySQL\u4ECE4.1\u7248\u672C\u5F00\u59CB\u652F\u6301\u5B50\u67E5\u8BE2\uFF0C\u4F7F\u7528\u5B50\u67E5\u8BE2\u53EF\u4EE5\u8FDB\u884CSELECT\u8BED\u53E5\u7684\u5D4C\u5957\u67E5\u8BE2\uFF0C\u5373\u4E00\u4E2ASELECT\u67E5\u8BE2\u7684\u7ED3 \u679C\u4F5C\u4E3A\u53E6\u4E00\u4E2ASELECT\u8BED\u53E5\u7684\u6761\u4EF6\u3002 <code>\u5B50\u67E5\u8BE2\u53EF\u4EE5\u4E00\u6B21\u6027\u5B8C\u6210\u5F88\u591A\u903B\u8F91\u4E0A\u9700\u8981\u591A\u4E2A\u6B65\u9AA4\u624D\u80FD\u5B8C\u6210\u7684SQL\u64CD\u4F5C</code> \u3002</p><p>**\u5B50\u67E5\u8BE2\u662F MySQL \u7684\u4E00\u9879\u91CD\u8981\u7684\u529F\u80FD\uFF0C\u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u901A\u8FC7\u4E00\u4E2A SQL \u8BED\u53E5\u5B9E\u73B0\u6BD4\u8F83\u590D\u6742\u7684\u67E5\u8BE2\u3002\u4F46\u662F\uFF0C\u5B50 \u67E5\u8BE2\u7684\u6267\u884C\u6548\u7387\u4E0D\u9AD8\u3002**\u539F\u56E0\uFF1A</p><p>\u2460 \u6267\u884C\u5B50\u67E5\u8BE2\u65F6\uFF0CMySQL\u9700\u8981\u4E3A\u5185\u5C42\u67E5\u8BE2\u8BED\u53E5\u7684\u67E5\u8BE2\u7ED3\u679C \u5EFA\u7ACB\u4E00\u4E2A\u4E34\u65F6\u8868 \uFF0C\u7136\u540E\u5916\u5C42\u67E5\u8BE2\u8BED\u53E5\u4ECE\u4E34\u65F6\u8868 \u4E2D\u67E5\u8BE2\u8BB0\u5F55\u3002\u67E5\u8BE2\u5B8C\u6BD5\u540E\uFF0C\u518D \u64A4\u9500\u8FD9\u4E9B\u4E34\u65F6\u8868 \u3002\u8FD9\u6837\u4F1A\u6D88\u8017\u8FC7\u591A\u7684CPU\u548CIO\u8D44\u6E90\uFF0C\u4EA7\u751F\u5927\u91CF\u7684\u6162\u67E5\u8BE2\u3002</p><p>\u2461 \u5B50\u67E5\u8BE2\u7684\u7ED3\u679C\u96C6\u5B58\u50A8\u7684\u4E34\u65F6\u8868\uFF0C\u4E0D\u8BBA\u662F\u5185\u5B58\u4E34\u65F6\u8868\u8FD8\u662F\u78C1\u76D8\u4E34\u65F6\u8868\u90FD \u4E0D\u4F1A\u5B58\u5728\u7D22\u5F15 \uFF0C\u6240\u4EE5\u67E5\u8BE2\u6027\u80FD\u4F1A \u53D7\u5230\u4E00\u5B9A\u7684\u5F71\u54CD\u3002</p><p>\u2462 \u5BF9\u4E8E\u8FD4\u56DE\u7ED3\u679C\u96C6\u6BD4\u8F83\u5927\u7684\u5B50\u67E5\u8BE2\uFF0C\u5176\u5BF9\u67E5\u8BE2\u6027\u80FD\u7684\u5F71\u54CD\u4E5F\u5C31\u8D8A\u5927\u3002</p><p>**\u5728MySQL\u4E2D\uFF0C\u53EF\u4EE5\u4F7F\u7528\u8FDE\u63A5\uFF08JOIN\uFF09\u67E5\u8BE2\u6765\u66FF\u4EE3\u5B50\u67E5\u8BE2\u3002**\u8FDE\u63A5\u67E5\u8BE2 <code>\u4E0D\u9700\u8981\u5EFA\u7ACB\u4E34\u65F6\u8868</code> \uFF0C\u5176 <code>\u901F\u5EA6\u6BD4\u5B50\u67E5\u8BE2</code> \u8981\u5FEB \uFF0C\u5982\u679C\u67E5\u8BE2\u4E2D\u4F7F\u7528\u7D22\u5F15\u7684\u8BDD\uFF0C\u6027\u80FD\u5C31\u4F1A\u66F4\u597D\u3002</p><p>\u4E3E\u4F8B1\uFF1A\u67E5\u8BE2\u5B66\u751F\u8868\u4E2D\u662F\u73ED\u957F\u7684\u5B66\u751F\u4FE1\u606F</p><ul><li>\u4F7F\u7528\u5B50\u67E5\u8BE2</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u521B\u5EFA\u73ED\u7EA7\u8868\u4E2D\u73ED\u957F\u7684\u7D22\u5F15
CREATE INDEX idx_monitor ON class(monitor);

EXPLAIN SELECT * FROM student stu1
WHERE stu1.\`stuno\` IN (
SELECT monitor
FROM class c
WHERE monitor IS NOT NULL
)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u63A8\u8350\u4F7F\u7528\u591A\u8868\u67E5\u8BE2</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT stu1.* FROM student stu1 JOIN class c
ON stu1.\`stuno\` = c.\`monitor\`
WHERE c.\`monitor\` is NOT NULL;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E3E\u4F8B2\uFF1A\u53D6\u6240\u6709\u4E0D\u4E3A\u73ED\u957F\u7684\u540C\u5B66</p><ul><li>\u4E0D\u63A8\u8350</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE a.*
FROM student a
WHERE a.stuno NOT IN (
	SELECT monitor FROM class b
    WHERE monitor IS NOT NULL
);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6267\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705210708343.png" alt="image-20220705210708343"></p><ul><li>\u63A8\u8350\uFF1A</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE a.*
FROM student a LEFT OUTER JOIN class b
ON a.stuno = b.monitor
WHERE b.monitor IS NULL;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705210839437.png" alt="image-20220705210839437"></p><blockquote><p>\u7ED3\u8BBA\uFF1A\u5C3D\u91CF\u4E0D\u8981\u4F7F\u7528NOT IN\u6216\u8005NOT EXISTS\uFF0C\u7528LEFT JOIN xxx ON xx WHERE xx IS NULL\u66FF\u4EE3</p></blockquote><h3 id="_5-\u6392\u5E8F\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#_5-\u6392\u5E8F\u4F18\u5316" aria-hidden="true">#</a> 5. \u6392\u5E8F\u4F18\u5316</h3><h5 id="_5-1-\u6392\u5E8F\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#_5-1-\u6392\u5E8F\u4F18\u5316" aria-hidden="true">#</a> 5.1 \u6392\u5E8F\u4F18\u5316</h5><p><strong>\u95EE\u9898</strong>\uFF1A\u5728 WHERE \u6761\u4EF6\u5B57\u6BB5\u4E0A\u52A0\u7D22\u5F15\uFF0C\u4F46\u662F\u4E3A\u4EC0\u4E48\u5728 ORDER BY \u5B57\u6BB5\u4E0A\u8FD8\u8981\u52A0\u7D22\u5F15\u5462\uFF1F</p><p><strong>\u56DE\u7B54\uFF1A</strong></p><p>\u5728MySQL\u4E2D\uFF0C\u652F\u6301\u4E24\u79CD\u6392\u5E8F\u65B9\u5F0F\uFF0C\u5206\u522B\u662F <code>FileSort</code> \u548C <code>Index</code> \u6392\u5E8F\u3002</p><ul><li>Index \u6392\u5E8F\u4E2D\uFF0C\u7D22\u5F15\u53EF\u4EE5\u4FDD\u8BC1\u6570\u636E\u7684\u6709\u5E8F\u6027\uFF0C\u4E0D\u9700\u8981\u518D\u8FDB\u884C\u6392\u5E8F\uFF0C<code>\u6548\u7387\u66F4\u9AD8</code>\u3002</li><li>FileSort \u6392\u5E8F\u5219\u4E00\u822C\u5728 <code>\u5185\u5B58\u4E2D</code> \u8FDB\u884C\u6392\u5E8F\uFF0C\u5360\u7528<code>CPU\u8F83\u591A</code>\u3002\u5982\u679C\u5F85\u6392\u7ED3\u679C\u8F83\u5927\uFF0C\u4F1A\u4EA7\u751F\u4E34\u65F6\u6587\u4EF6 I/O \u5230\u78C1\u76D8\u8FDB\u884C\u6392\u5E8F\u7684\u60C5\u51B5\uFF0C\u6548\u7387\u8F83\u4F4E\u3002</li></ul><p><strong>\u4F18\u5316\u5EFA\u8BAE\uFF1A</strong></p><ol><li>SQL \u4E2D\uFF0C\u53EF\u4EE5\u5728 WHERE \u5B50\u53E5\u548C ORDER BY \u5B50\u53E5\u4E2D\u4F7F\u7528\u7D22\u5F15\uFF0C\u76EE\u7684\u662F\u5728 WHERE \u5B50\u53E5\u4E2D <code>\u907F\u514D\u5168\u8868\u626B\u63CF</code> \uFF0C\u5728 ORDER BY \u5B50\u53E5 <code>\u907F\u514D\u4F7F\u7528 FileSort \u6392\u5E8F</code> \u3002\u5F53\u7136\uFF0C\u67D0\u4E9B\u60C5\u51B5\u4E0B\u5168\u8868\u626B\u63CF\uFF0C\u6216\u8005 FileSort \u6392\u5E8F\u4E0D\u4E00\u5B9A\u6BD4\u7D22\u5F15\u6162\u3002\u4F46\u603B\u7684\u6765\u8BF4\uFF0C\u6211\u4EEC\u8FD8\u662F\u8981\u907F\u514D\uFF0C\u4EE5\u63D0\u9AD8\u67E5\u8BE2\u6548\u7387\u3002</li><li>\u5C3D\u91CF\u4F7F\u7528 Index \u5B8C\u6210 ORDER BY \u6392\u5E8F\u3002\u5982\u679C WHERE \u548C ORDER BY \u540E\u9762\u662F\u76F8\u540C\u7684\u5217\u5C31\u4F7F\u7528\u5355\u7D22\u5F15\u5217\uFF1B \u5982\u679C\u4E0D\u540C\u5C31\u4F7F\u7528\u8054\u5408\u7D22\u5F15\u3002</li><li>\u65E0\u6CD5\u4F7F\u7528 Index \u65F6\uFF0C\u9700\u8981\u5BF9 FileSort \u65B9\u5F0F\u8FDB\u884C\u8C03\u4F18\u3002</li></ol><h5 id="_5-2-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_5-2-\u6D4B\u8BD5" aria-hidden="true">#</a> 5.2 \u6D4B\u8BD5</h5><p>\u5220\u9664student\u8868\u548Cclass\u8868\u4E2D\u5DF2\u521B\u5EFA\u7684\u7D22\u5F15\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u65B9\u5F0F1
DROP INDEX idx_monitor ON class;
DROP INDEX idx_cid ON student;
DROP INDEX idx_age ON student;
DROP INDEX idx_name ON student;
DROP INDEX idx_age_name_classId ON student;
DROP INDEX idx_age_classId_name ON student;

# \u65B9\u5F0F2
call proc_drop_index(&#39;atguigudb2&#39;,&#39;student&#39;;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5\u4E0B\u662F\u5426\u80FD\u4F7F\u7528\u5230\u7D22\u5F15\uFF0C<code>\u80FD\u5426\u53BB\u6389using filesort</code></p><p><strong>\u8FC7\u7A0B\u4E00\uFF1A</strong></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705215436102.png" alt="image-20220705215436102"></p><p><strong>\u8FC7\u7A0B\u4E8C\uFF1A order by \u65F6\u4E0Dlimit,\u7D22\u5F15\u5931\u6548</strong></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705215909350.png" alt="image-20220705215909350"></p><p><strong>\u8FC7\u7A0B\u4E09\uFF1Aorder by \u65F6\u987A\u5E8F\u9519\u8BEF\uFF0C\u7D22\u5F15\u5931\u6548</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705220033520.png" alt="image-20220705220033520" style="zoom:80%;float:left;"><p><strong>\u8FC7\u7A0B\u56DB\uFF1Aorder by \u65F6\u89C4\u5219\u4E0D\u4E00\u81F4\uFF0C\u7D22\u5F15\u5931\u6548\uFF08\u987A\u5E8F\u9519\uFF0C\u4E0D\u7D22\u5F15\uFF1B\u65B9\u5411\u53CD\uFF0C\u4E0D\u7D22\u5F15\uFF09</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705220404802.png" alt="image-20220705220404802" style="zoom:80%;float:left;"><blockquote><p>\u7ED3\u8BBA\uFF1AORDER BY \u5B50\u53E5\uFF0C\u5C3D\u91CF\u4F7F\u7528 Index \u65B9\u5F0F\u6392\u5E8F\uFF0C\u907F\u514D\u4F7F\u7528 FileSort \u65B9\u5F0F\u6392\u5E8F</p></blockquote><p><strong>\u8FC7\u7A0B\u4E94\uFF1A\u65E0\u8FC7\u6EE4\uFF0C\u4E0D\u7D22\u5F15</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705221212879.png" alt="image-20220705221212879" style="zoom:80%;float:left;"><p><strong>\u5C0F\u7ED3</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>INDEX a_b_c(a,b,c)
order by \u80FD\u4F7F\u7528\u7D22\u5F15\u6700\u5DE6\u524D\u7F00
- ORDER BY a
- ORDER BY a,b
- ORDER BY a,b,c
- ORDER BY a DESC,b DESC,c DESC
\u5982\u679CWHERE\u4F7F\u7528\u7D22\u5F15\u7684\u6700\u5DE6\u524D\u7F00\u5B9A\u4E49\u4E3A\u5E38\u91CF\uFF0C\u5219order by \u80FD\u4F7F\u7528\u7D22\u5F15
- WHERE a = const ORDER BY b,c
- WHERE a = const AND b = const ORDER BY c
- WHERE a = const ORDER BY b,c
- WHERE a = const AND b &gt; const ORDER BY b,c
\u4E0D\u80FD\u4F7F\u7528\u7D22\u5F15\u8FDB\u884C\u6392\u5E8F
- ORDER BY a ASC,b DESC,c DESC /* \u6392\u5E8F\u4E0D\u4E00\u81F4 */
- WHERE g = const ORDER BY b,c /*\u4E22\u5931a\u7D22\u5F15*/
- WHERE a = const ORDER BY c /*\u4E22\u5931b\u7D22\u5F15*/
- WHERE a = const ORDER BY a,d /*d\u4E0D\u662F\u7D22\u5F15\u7684\u4E00\u90E8\u5206*/
- WHERE a in (...) ORDER BY b,c /*\u5BF9\u4E8E\u6392\u5E8F\u6765\u8BF4\uFF0C\u591A\u4E2A\u76F8\u7B49\u6761\u4EF6\u4E5F\u662F\u8303\u56F4\u67E5\u8BE2*/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_5-3-\u6848\u4F8B\u5B9E\u6218" tabindex="-1"><a class="header-anchor" href="#_5-3-\u6848\u4F8B\u5B9E\u6218" aria-hidden="true">#</a> 5.3 \u6848\u4F8B\u5B9E\u6218</h5><p>ORDER BY\u5B50\u53E5\uFF0C\u5C3D\u91CF\u4F7F\u7528Index\u65B9\u5F0F\u6392\u5E8F\uFF0C\u907F\u514D\u4F7F\u7528FileSort\u65B9\u5F0F\u6392\u5E8F\u3002</p><p>\u6267\u884C\u6848\u4F8B\u524D\u5148\u6E05\u9664student\u4E0A\u7684\u7D22\u5F15\uFF0C\u53EA\u7559\u4E3B\u952E\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DROP INDEX idx_age ON student;
DROP INDEX idx_age_classid_stuno ON student;
DROP INDEX idx_age_classid_name ON student;

#\u6216\u8005
call proc_drop_index(&#39;atguigudb2&#39;,&#39;student&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u573A\u666F:\u67E5\u8BE2\u5E74\u9F84\u4E3A30\u5C81\u7684\uFF0C\u4E14\u5B66\u751F\u7F16\u53F7\u5C0F\u4E8E101000\u7684\u5B66\u751F\uFF0C\u6309\u7528\u6237\u540D\u79F0\u6392\u5E8F</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE age = 30 AND stuno &lt;101000 ORDER BY NAME ;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705222027812.png" alt="image-20220705222027812"></p><p>\u67E5\u8BE2\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT SQL_NO_CACHE * FROM student WHERE age = 30 AND stuno &lt;101000 ORDER BY NAME;
+---------+--------+--------+------+---------+
| id      | stuno  |  name  | age  | classId |
+---------+--------+--------+------+---------+
| 922     | 100923 | elTLXD | 30   | 249     |
| 3723263 | 100412 | hKcjLb | 30   | 59      |
| 3724152 | 100827 | iHLJmh | 30   | 387     |
| 3724030 | 100776 | LgxWoD | 30   | 253     |
| 30      | 100031 | LZMOIa | 30   | 97      |
| 3722887 | 100237 | QzbJdx | 30   | 440     |
| 609     | 100610 | vbRimN | 30   | 481     |
| 139     | 100140 | ZqFbuR | 30   | 351     |
+---------+--------+--------+------+---------+
8 rows in set, 1 warning (3.16 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u7ED3\u8BBA\uFF1Atype \u662F ALL\uFF0C\u5373\u6700\u574F\u7684\u60C5\u51B5\u3002Extra \u91CC\u8FD8\u51FA\u73B0\u4E86 Using filesort,\u4E5F\u662F\u6700\u574F\u7684\u60C5\u51B5\u3002\u4F18\u5316\u662F\u5FC5\u987B\u7684\u3002</p></blockquote><p><strong>\u65B9\u6848\u4E00: \u4E3A\u4E86\u53BB\u6389filesort\u6211\u4EEC\u53EF\u4EE5\u628A\u7D22\u5F15\u5EFA\u6210</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#\u521B\u5EFA\u65B0\u7D22\u5F15
CREATE INDEX idx_age_name ON student(age,NAME);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE age = 30 AND stuno &lt;101000 ORDER BY NAME;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705222912521.png" alt="image-20220705222912521"></p><p>\u8FD9\u6837\u6211\u4EEC\u4F18\u5316\u6389\u4E86 using filesort</p><p>\u67E5\u8BE2\u7ED3\u679C\u5982\u4E0B\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705222954971.png" alt="image-20220705222954971" style="float:left;"><p><strong>\u65B9\u6848\u4E8C\uFF1A\u5C3D\u91CF\u8BA9where\u7684\u8FC7\u6EE4\u6761\u4EF6\u548C\u6392\u5E8F\u4F7F\u7528\u4E0A\u7D22\u5F15</strong></p><p>\u5EFA\u4E00\u4E2A\u4E09\u4E2A\u5B57\u6BB5\u7684\u7EC4\u5408\u7D22\u5F15\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DROP INDEX idx_age_name ON student;
CREATE INDEX idx_age_stuno_name ON student (age,stuno,NAME);
EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE age = 30 AND stuno &lt;101000 ORDER BY NAME;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705223111883.png" alt="image-20220705223111883"></p><p>\u6211\u4EEC\u53D1\u73B0using filesort\u4F9D\u7136\u5B58\u5728\uFF0C\u6240\u4EE5name\u5E76\u6CA1\u6709\u7528\u5230\u7D22\u5F15\uFF0C\u800C\u4E14type\u8FD8\u662Frange\u5149\u770B\u540D\u5B57\u5176\u5B9E\u5E76\u4E0D\u7F8E\u597D\u3002\u539F\u56E0\u662F\uFF0C\u56E0\u4E3A<code>stuno\u662F\u4E00\u4E2A\u8303\u56F4\u8FC7\u6EE4</code>\uFF0C\u6240\u4EE5\u7D22\u5F15\u540E\u9762\u7684\u5B57\u6BB5\u4E0D\u4F1A\u5728\u4F7F\u7528\u7D22\u5F15\u4E86 \u3002</p><p>\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT SQL_NO_CACHE * FROM student
-&gt; WHERE age = 30 AND stuno &lt;101000 ORDER BY NAME ;
+-----+--------+--------+------+---------+
| id | stuno | name | age | classId |
+-----+--------+--------+------+---------+
| 167 | 100168 | AClxEF | 30 | 319 |
| 323 | 100324 | bwbTpQ | 30 | 654 |
| 651 | 100652 | DRwIac | 30 | 997 |
| 517 | 100518 | HNSYqJ | 30 | 256 |
| 344 | 100345 | JuepiX | 30 | 329 |
| 905 | 100906 | JuWALd | 30 | 892 |
| 574 | 100575 | kbyqjX | 30 | 260 |
| 703 | 100704 | KJbprS | 30 | 594 |
| 723 | 100724 | OTdJkY | 30 | 236 |
| 656 | 100657 | Pfgqmj | 30 | 600 |
| 982 | 100983 | qywLqw | 30 | 837 |
| 468 | 100469 | sLEKQW | 30 | 346 |
| 988 | 100989 | UBYqJl | 30 | 457 |
| 173 | 100174 | UltkTN | 30 | 830 |
| 332 | 100333 | YjWiZw | 30 | 824 |
+-----+--------+--------+------+---------+
15 rows in set, 1 warning (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ED3\u679C\u7ADF\u7136\u6709 filesort\u7684 sql \u8FD0\u884C\u901F\u5EA6\uFF0C \u8D85\u8FC7\u4E86\u5DF2\u7ECF\u4F18\u5316\u6389 filesort\u7684 sql \uFF0C\u800C\u4E14\u5FEB\u4E86\u5F88\u591A\uFF0C\u51E0\u4E4E\u4E00\u77AC\u95F4\u5C31\u51FA\u73B0\u4E86\u7ED3\u679C\u3002</p><p>\u539F\u56E0\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705223329164.png" alt="image-20220705223329164" style="zoom:80%;float:left;"><blockquote><p>\u7ED3\u8BBA\uFF1A</p><ol><li>\u4E24\u4E2A\u7D22\u5F15\u540C\u65F6\u5B58\u5728\uFF0Cmysql\u81EA\u52A8\u9009\u62E9\u6700\u4F18\u7684\u65B9\u6848\u3002\uFF08\u5BF9\u4E8E\u8FD9\u4E2A\u4F8B\u5B50\uFF0Cmysql\u9009\u62E9 idx_age_stuno_name\uFF09\u3002\u4F46\u662F\uFF0C <code>\u968F\u7740\u6570\u636E\u91CF\u7684\u53D8\u5316\uFF0C\u9009\u62E9\u7684\u7D22\u5F15\u4E5F\u4F1A\u968F\u4E4B\u53D8\u5316\u7684 </code>\u3002</li><li><strong>\u5F53\u3010\u8303\u56F4\u6761\u4EF6\u3011\u548C\u3010group by \u6216\u8005 order by\u3011\u7684\u5B57\u6BB5\u51FA\u73B0\u4E8C\u9009\u4E00\u65F6\uFF0C\u4F18\u5148\u89C2\u5BDF\u6761\u4EF6\u5B57\u6BB5\u7684\u8FC7 \u6EE4\u6570\u91CF\uFF0C\u5982\u679C\u8FC7\u6EE4\u7684\u6570\u636E\u8DB3\u591F\u591A\uFF0C\u800C\u9700\u8981\u6392\u5E8F\u7684\u6570\u636E\u5E76\u4E0D\u591A\u65F6\uFF0C\u4F18\u5148\u628A\u7D22\u5F15\u653E\u5728\u8303\u56F4\u5B57\u6BB5\u4E0A\u3002\u53CD\u4E4B\uFF0C\u4EA6\u7136\u3002</strong></li></ol></blockquote><p>\u601D\u8003\uFF1A\u8FD9\u91CC\u6211\u4EEC\u4F7F\u7528\u5982\u4E0B\u7D22\u5F15\uFF0C\u662F\u5426\u53EF\u884C\uFF1F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DROP INDEX idx_age_stuno_name ON student;

CREATE INDEX idx_age_stuno ON student(age,stuno);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F53\u7136\u53EF\u4EE5\u3002</p><h5 id="_5-4-filesort\u7B97\u6CD5-\u53CC\u8DEF\u6392\u5E8F\u548C\u5355\u8DEF\u6392\u5E8F" tabindex="-1"><a class="header-anchor" href="#_5-4-filesort\u7B97\u6CD5-\u53CC\u8DEF\u6392\u5E8F\u548C\u5355\u8DEF\u6392\u5E8F" aria-hidden="true">#</a> 5.4 filesort\u7B97\u6CD5\uFF1A\u53CC\u8DEF\u6392\u5E8F\u548C\u5355\u8DEF\u6392\u5E8F</h5><p>\u6392\u5E8F\u7684\u5B57\u6BB5\u82E5\u4E0D\u5728\u7D22\u5F15\u5217\u4E0A\uFF0C\u5219filesort\u4F1A\u6709\u4E24\u79CD\u7B97\u6CD5\uFF1A\u53CC\u8DEF\u6392\u5E8F\u548C\u5355\u8DEF\u6392\u5E8F</p><p><strong>\u53CC\u8DEF\u6392\u5E8F \uFF08\u6162\uFF09</strong></p><ul><li>MySQL 4.1\u4E4B\u524D\u662F\u4F7F\u7528\u53CC\u8DEF\u6392\u5E8F \uFF0C\u5B57\u9762\u610F\u601D\u5C31\u662F\u4E24\u6B21\u626B\u63CF\u78C1\u76D8\uFF0C\u6700\u7EC8\u5F97\u5230\u6570\u636E\uFF0C \u8BFB\u53D6\u884C\u6307\u9488\u548C order by\u5217 \uFF0C\u5BF9\u4ED6\u4EEC\u8FDB\u884C\u6392\u5E8F\uFF0C\u7136\u540E\u626B\u63CF\u5DF2\u7ECF\u6392\u5E8F\u597D\u7684\u5217\u8868\uFF0C\u6309\u7167\u5217\u8868\u4E2D\u7684\u503C\u91CD\u65B0\u4ECE\u5217\u8868\u4E2D\u8BFB\u53D6\u5BF9\u5E94\u7684\u6570\u636E\u8F93\u51FA</li><li>\u4ECE\u78C1\u76D8\u53D6\u6392\u5E8F\u5B57\u6BB5\uFF0C\u5728buffer\u8FDB\u884C\u6392\u5E8F\uFF0C\u518D\u4ECE\u78C1\u76D8\u53D6\u5176\u4ED6\u5B57\u6BB5 \u3002</li></ul><p>\u53D6\u4E00\u6279\u6570\u636E\uFF0C\u8981\u5BF9\u78C1\u76D8\u8FDB\u884C\u4E24\u6B21\u626B\u63CF\uFF0C\u4F17\u6240\u5468\u77E5\uFF0CIO\u662F\u5F88\u8017\u65F6\u7684\uFF0C\u6240\u4EE5\u5728mysql4.1\u4E4B\u540E\uFF0C\u51FA\u73B0\u4E86\u7B2C\u4E8C\u79CD \u6539\u8FDB\u7684\u7B97\u6CD5\uFF0C\u5C31\u662F\u5355\u8DEF\u6392\u5E8F\u3002</p><p><strong>\u5355\u8DEF\u6392\u5E8F \uFF08\u5FEB\uFF09</strong></p><p>\u4ECE\u78C1\u76D8\u8BFB\u53D6\u67E5\u8BE2\u9700\u8981\u7684 \u6240\u6709\u5217 \uFF0C\u6309\u7167order by\u5217\u5728buffer\u5BF9\u5B83\u4EEC\u8FDB\u884C\u6392\u5E8F\uFF0C\u7136\u540E\u626B\u63CF\u6392\u5E8F\u540E\u7684\u5217\u8868\u8FDB\u884C\u8F93\u51FA\uFF0C \u5B83\u7684\u6548\u7387\u66F4\u5FEB\u4E00\u4E9B\uFF0C\u907F\u514D\u4E86\u7B2C\u4E8C\u6B21\u8BFB\u53D6\u6570\u636E\u3002\u5E76\u4E14\u628A\u968F\u673AIO\u53D8\u6210\u4E86\u987A\u5E8FIO\uFF0C\u4F46\u662F\u5B83\u4F1A\u4F7F\u7528\u66F4\u591A\u7684\u7A7A\u95F4\uFF0C \u56E0\u4E3A\u5B83\u628A\u6BCF\u4E00\u884C\u90FD\u4FDD\u5B58\u5728\u5185\u5B58\u4E2D\u4E86\u3002</p><p><strong>\u7ED3\u8BBA\u53CA\u5F15\u7533\u51FA\u7684\u95EE\u9898</strong></p><ul><li>\u7531\u4E8E\u5355\u8DEF\u662F\u540E\u51FA\u7684\uFF0C\u603B\u4F53\u800C\u8A00\u597D\u8FC7\u53CC\u8DEF</li><li>\u4F46\u662F\u7528\u5355\u8DEF\u6709\u95EE\u9898 <ul><li>\u5728sort_buffer\u4E2D\uFF0C\u5355\u8DEF\u8981\u6BD4\u591A\u8DEF\u591A\u5360\u7528\u5F88\u591A\u7A7A\u95F4\uFF0C\u56E0\u4E3A\u5355\u8DEF\u662F\u628A\u6240\u6709\u5B57\u6BB5\u90FD\u53D6\u51FA\uFF0C\u6240\u4EE5\u6709\u53EF\u80FD\u53D6\u51FA\u7684\u6570\u636E\u7684\u603B\u5927\u5C0F\u8D85\u51FA\u4E86<code>sort_buffer</code>\u7684\u5BB9\u91CF\uFF0C\u5BFC\u81F4\u6BCF\u6B21\u53EA\u80FD\u53D6<code>sort_buffer</code>\u5BB9\u91CF\u5927\u5C0F\u7684\u6570\u636E\uFF0C\u8FDB\u884C\u6392\u5E8F\uFF08\u521B\u5EFAtmp\u6587\u4EF6\uFF0C\u591A\u8DEF\u5408\u5E76\uFF09\uFF0C\u6392\u5B8C\u518D\u53D6sort_buffer\u5BB9\u91CF\u5927\u5C0F\uFF0C\u518D\u6392...\u4ECE\u800C\u591A\u6B21I/O\u3002</li><li>\u5355\u8DEF\u672C\u6765\u60F3\u7701\u4E00\u6B21I/O\u64CD\u4F5C\uFF0C\u53CD\u800C\u5BFC\u81F4\u4E86\u5927\u91CF\u7684I/O\u64CD\u4F5C\uFF0C\u53CD\u800C\u5F97\u4E0D\u507F\u5931\u3002</li></ul></li></ul><p><strong>\u4F18\u5316\u7B56\u7565</strong></p><p><strong>1. \u5C1D\u8BD5\u63D0\u9AD8 sort_buffer_size</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705224410340.png" alt="image-20220705224410340" style="zoom:80%;float:left;"><p><strong>2. \u5C1D\u8BD5\u63D0\u9AD8 max_length_for_sort_data</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705224505668.png" alt="image-20220705224505668" style="zoom:80%;float:left;"><p><strong>3. Order by \u65F6select * \u662F\u4E00\u4E2A\u5927\u5FCC\u3002\u6700\u597D\u53EAQuery\u9700\u8981\u7684\u5B57\u6BB5\u3002</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705224551104.png" alt="image-20220705224551104" style="float:left;"><h3 id="_6-group-by\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#_6-group-by\u4F18\u5316" aria-hidden="true">#</a> 6. GROUP BY\u4F18\u5316</h3><ul><li>group by \u4F7F\u7528\u7D22\u5F15\u7684\u539F\u5219\u51E0\u4E4E\u8DDForder by\u4E00\u81F4 \uFF0Cgroup by \u5373\u4F7F\u6CA1\u6709\u8FC7\u6EE4\u6761\u4EF6\u7528\u5230\u7D22\u5F15\uFF0C\u4E5F\u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528\u7D22\u5F15\u3002</li><li>group by \u5148\u6392\u5E8F\u518D\u5206\u7EC4\uFF0C\u9075\u7167\u7D22\u5F15\u5EFA\u7684\u6700\u4F73\u5DE6\u524D\u7F00\u6CD5\u5219</li><li>\u5F53\u65E0\u6CD5\u4F7F\u7528\u7D22\u5F15\u5217\uFF0C\u589E\u5927 max_length_for_sort_data \u548C sort_buffer_size \u53C2\u6570\u7684\u8BBE\u7F6E</li><li>where\u6548\u7387\u9AD8\u4E8Ehaving\uFF0C\u80FD\u5199\u5728where\u9650\u5B9A\u7684\u6761\u4EF6\u5C31\u4E0D\u8981\u5199\u5728having\u4E2D\u4E86</li><li>\u51CF\u5C11\u4F7F\u7528order by\uFF0C\u548C\u4E1A\u52A1\u6C9F\u901A\u80FD\u4E0D\u6392\u5E8F\u5C31\u4E0D\u6392\u5E8F\uFF0C\u6216\u5C06\u6392\u5E8F\u653E\u5230\u7A0B\u5E8F\u7AEF\u53BB\u505A\u3002Order by\u3001group by\u3001distinct\u8FD9\u4E9B\u8BED\u53E5\u8F83\u4E3A\u8017\u8D39CPU\uFF0C\u6570\u636E\u5E93\u7684CPU\u8D44\u6E90\u662F\u6781\u5176\u5B9D\u8D35\u7684\u3002</li><li>\u5305\u542B\u4E86order by\u3001group by\u3001distinct\u8FD9\u4E9B\u67E5\u8BE2\u7684\u8BED\u53E5\uFF0Cwhere\u6761\u4EF6\u8FC7\u6EE4\u51FA\u6765\u7684\u7ED3\u679C\u96C6\u8BF7\u4FDD\u6301\u57281000\u884C \u4EE5\u5185\uFF0C\u5426\u5219SQL\u4F1A\u5F88\u6162\u3002</li></ul><h3 id="_7-\u4F18\u5316\u5206\u9875\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_7-\u4F18\u5316\u5206\u9875\u67E5\u8BE2" aria-hidden="true">#</a> 7. \u4F18\u5316\u5206\u9875\u67E5\u8BE2</h3><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705225329130.png" alt="image-20220705225329130" style="float:left;"><p><strong>\u4F18\u5316\u601D\u8DEF\u4E00</strong></p><p>\u5728\u7D22\u5F15\u4E0A\u5B8C\u6210\u6392\u5E8F\u5206\u9875\u64CD\u4F5C\uFF0C\u6700\u540E\u6839\u636E\u4E3B\u952E\u5173\u8054\u56DE\u539F\u8868\u67E5\u8BE2\u6240\u9700\u8981\u7684\u5176\u4ED6\u5217\u5185\u5BB9\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT * FROM student t,(SELECT id FROM student ORDER BY id LIMIT 2000000,10) a WHERE t.id = a.id;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705225625166.png" alt="image-20220705225625166"></p><p><strong>\u4F18\u5316\u601D\u8DEF\u4E8C</strong></p><p>\u8BE5\u65B9\u6848\u9002\u7528\u4E8E\u4E3B\u952E\u81EA\u589E\u7684\u8868\uFF0C\u53EF\u4EE5\u628ALimit \u67E5\u8BE2\u8F6C\u6362\u6210\u67D0\u4E2A\u4F4D\u7F6E\u7684\u67E5\u8BE2 \u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT * FROM student WHERE id &gt; 2000000 LIMIT 10;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220705225654124.png" alt="image-20220705225654124"></p><h3 id="_8-\u4F18\u5148\u8003\u8651\u8986\u76D6\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_8-\u4F18\u5148\u8003\u8651\u8986\u76D6\u7D22\u5F15" aria-hidden="true">#</a> 8. \u4F18\u5148\u8003\u8651\u8986\u76D6\u7D22\u5F15</h3><h5 id="_8-1-\u4EC0\u4E48\u662F\u8986\u76D6\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_8-1-\u4EC0\u4E48\u662F\u8986\u76D6\u7D22\u5F15" aria-hidden="true">#</a> 8.1 \u4EC0\u4E48\u662F\u8986\u76D6\u7D22\u5F15\uFF1F</h5><p><strong>\u7406\u89E3\u65B9\u5F0F\u4E00</strong>\uFF1A\u7D22\u5F15\u662F\u9AD8\u6548\u627E\u5230\u884C\u7684\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u4F46\u662F\u4E00\u822C\u6570\u636E\u5E93\u4E5F\u80FD\u4F7F\u7528\u7D22\u5F15\u627E\u5230\u4E00\u4E2A\u5217\u7684\u6570\u636E\uFF0C\u56E0\u6B64\u5B83\u4E0D\u5FC5\u8BFB\u53D6\u6574\u4E2A\u884C\u3002\u6BD5\u7ADF\u7D22\u5F15\u53F6\u5B50\u8282\u70B9\u5B58\u50A8\u4E86\u5B83\u4EEC\u7D22\u5F15\u7684\u6570\u636E\uFF1B\u5F53\u80FD\u901A\u8FC7\u8BFB\u53D6\u7D22\u5F15\u5C31\u53EF\u4EE5\u5F97\u5230\u60F3\u8981\u7684\u6570\u636E\uFF0C\u90A3\u5C31\u4E0D\u9700\u8981\u8BFB\u53D6\u884C\u4E86\u3002<strong>\u4E00\u4E2A\u7D22\u5F15\u5305\u542B\u4E86\u6EE1\u8DB3\u67E5\u8BE2\u7ED3\u679C\u7684\u6570\u636E\u5C31\u53EB\u505A\u8986\u76D6\u7D22\u5F15</strong>\u3002</p><p><strong>\u7406\u89E3\u65B9\u5F0F\u4E8C</strong>\uFF1A\u975E\u805A\u7C07\u590D\u5408\u7D22\u5F15\u7684\u4E00\u79CD\u5F62\u5F0F\uFF0C\u5B83\u5305\u62EC\u5728\u67E5\u8BE2\u91CC\u7684SELECT\u3001JOIN\u548CWHERE\u5B50\u53E5\u7528\u5230\u7684\u6240\u6709\u5217 \uFF08\u5373\u5EFA\u7D22\u5F15\u7684\u5B57\u6BB5\u6B63\u597D\u662F\u8986\u76D6\u67E5\u8BE2\u6761\u4EF6\u4E2D\u6240\u6D89\u53CA\u7684\u5B57\u6BB5\uFF09\u3002</p><p>\u7B80\u5355\u8BF4\u5C31\u662F\uFF0C <code>\u7D22\u5F15\u5217+\u4E3B\u952E</code> \u5305\u542B <code>SELECT \u5230 FROM\u4E4B\u95F4\u67E5\u8BE2\u7684\u5217</code> \u3002</p><p><strong>\u4E3E\u4F8B\u4E00\uFF1A</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u5220\u9664\u4E4B\u524D\u7684\u7D22\u5F15
DROP INDEX idx_age_stuno ON student;
CREATE INDEX idx_age_name ON student(age, NAME);
EXPLAIN SELECT * FROM student WHERE age &lt;&gt; 20;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706124528680.png" alt="image-20220706124528680"></p><p><strong>\u4E3E\u4F8B\u4E8C\uFF1A</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT * FROM student WHERE NAME LIKE &#39;%abc&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706124612180.png" alt="image-20220706124612180"></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE INDEX idx_age_name ON student(age, NAME);
EXPLAIN SELECT id,age,NAME FROM student WHERE NAME LIKE &#39;%abc&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706125113658.png" alt="image-20220706125113658"></p><p>\u4E0A\u8FF0\u90FD\u4F7F\u7528\u5230\u4E86\u58F0\u660E\u7684\u7D22\u5F15\uFF0C\u4E0B\u9762\u7684\u60C5\u51B5\u5219\u4E0D\u7136\uFF0C\u67E5\u8BE2\u5217\u4F9D\u7136\u591A\u4E86classId,\u7ED3\u679C\u662F\u672A\u4F7F\u7528\u5230\u7D22\u5F15\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>EXPLAIN SELECT id,age,NAME,classId FROM student WHERE NAME LIKE &#39;%abc&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706125351116.png" alt="image-20220706125351116"></p><h5 id="_8-2-\u8986\u76D6\u7D22\u5F15\u7684\u5229\u5F0A" tabindex="-1"><a class="header-anchor" href="#_8-2-\u8986\u76D6\u7D22\u5F15\u7684\u5229\u5F0A" aria-hidden="true">#</a> 8.2 \u8986\u76D6\u7D22\u5F15\u7684\u5229\u5F0A</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706125943936.png" alt="image-20220706125943936" style="zoom:80%;float:left;"><h3 id="_9-\u5982\u4F55\u7ED9\u5B57\u7B26\u4E32\u6DFB\u52A0\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_9-\u5982\u4F55\u7ED9\u5B57\u7B26\u4E32\u6DFB\u52A0\u7D22\u5F15" aria-hidden="true">#</a> 9. \u5982\u4F55\u7ED9\u5B57\u7B26\u4E32\u6DFB\u52A0\u7D22\u5F15</h3><p>\u6709\u4E00\u5F20\u6559\u5E08\u8868\uFF0C\u8868\u5B9A\u4E49\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>create table teacher(
ID bigint unsigned primary key,
email varchar(64),
...
)engine=innodb;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BB2\u5E08\u8981\u4F7F\u7528\u90AE\u7BB1\u767B\u5F55\uFF0C\u6240\u4EE5\u4E1A\u52A1\u4EE3\u7801\u4E2D\u4E00\u5B9A\u4F1A\u51FA\u73B0\u7C7B\u4F3C\u4E8E\u8FD9\u6837\u7684\u8BED\u53E5\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; select col1, col2 from teacher where email=&#39;xxx&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5982\u679Cemail\u8FD9\u4E2A\u5B57\u6BB5\u4E0A\u6CA1\u6709\u7D22\u5F15\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u8BED\u53E5\u5C31\u53EA\u80FD\u505A <code>\u5168\u8868\u626B\u63CF</code> \u3002</p><h5 id="_9-1-\u524D\u7F00\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_9-1-\u524D\u7F00\u7D22\u5F15" aria-hidden="true">#</a> 9.1 \u524D\u7F00\u7D22\u5F15</h5><p>MySQL\u662F\u652F\u6301\u524D\u7F00\u7D22\u5F15\u7684\u3002\u9ED8\u8BA4\u5730\uFF0C\u5982\u679C\u4F60\u521B\u5EFA\u7D22\u5F15\u7684\u8BED\u53E5\u4E0D\u6307\u5B9A\u524D\u7F00\u957F\u5EA6\uFF0C\u90A3\u4E48\u7D22\u5F15\u5C31\u4F1A\u5305\u542B\u6574\u4E2A\u5B57 \u7B26\u4E32\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; alter table teacher add index index1(email);
#\u6216
mysql&gt; alter table teacher add index index2(email(6));
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u4E24\u79CD\u4E0D\u540C\u7684\u5B9A\u4E49\u5728\u6570\u636E\u7ED3\u6784\u548C\u5B58\u50A8\u4E0A\u6709\u4EC0\u4E48\u533A\u522B\u5462\uFF1F\u4E0B\u56FE\u5C31\u662F\u8FD9\u4E24\u4E2A\u7D22\u5F15\u7684\u793A\u610F\u56FE\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706130901307.png" alt="image-20220706130901307"></p><p>\u4EE5\u53CA</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706130921934.png" alt="image-20220706130921934" style="zoom:70%;"><p><strong>\u5982\u679C\u4F7F\u7528\u7684\u662Findex1</strong>\uFF08\u5373email\u6574\u4E2A\u5B57\u7B26\u4E32\u7684\u7D22\u5F15\u7ED3\u6784\uFF09\uFF0C\u6267\u884C\u987A\u5E8F\u662F\u8FD9\u6837\u7684\uFF1A</p><ol><li>\u4ECEindex1\u7D22\u5F15\u6811\u627E\u5230\u6EE1\u8DB3\u7D22\u5F15\u503C\u662F\u2019 <a href="mailto:zhangssxyz@xxx.com">zhangssxyz@xxx.com</a>\u2019\u7684\u8FD9\u6761\u8BB0\u5F55\uFF0C\u53D6\u5F97ID2\u7684\u503C\uFF1B</li><li>\u5230\u4E3B\u952E\u4E0A\u67E5\u5230\u4E3B\u952E\u503C\u662FID2\u7684\u884C\uFF0C\u5224\u65ADemail\u7684\u503C\u662F\u6B63\u786E\u7684\uFF0C\u5C06\u8FD9\u884C\u8BB0\u5F55\u52A0\u5165\u7ED3\u679C\u96C6\uFF1B</li><li>\u53D6index1\u7D22\u5F15\u6811\u4E0A\u521A\u521A\u67E5\u5230\u7684\u4F4D\u7F6E\u7684\u4E0B\u4E00\u6761\u8BB0\u5F55\uFF0C\u53D1\u73B0\u5DF2\u7ECF\u4E0D\u6EE1\u8DB3email=&#39; <a href="mailto:zhangssxyz@xxx.com">zhangssxyz@xxx.com</a> \u2019\u7684 \u6761\u4EF6\u4E86\uFF0C\u5FAA\u73AF\u7ED3\u675F\u3002</li></ol><p>\u8FD9\u4E2A\u8FC7\u7A0B\u4E2D\uFF0C\u53EA\u9700\u8981\u56DE\u4E3B\u952E\u7D22\u5F15\u53D6\u4E00\u6B21\u6570\u636E\uFF0C\u6240\u4EE5\u7CFB\u7EDF\u8BA4\u4E3A\u53EA\u626B\u63CF\u4E86\u4E00\u884C\u3002</p><p><strong>\u5982\u679C\u4F7F\u7528\u7684\u662Findex2</strong>\uFF08\u5373email(6)\u7D22\u5F15\u7ED3\u6784\uFF09\uFF0C\u6267\u884C\u987A\u5E8F\u662F\u8FD9\u6837\u7684\uFF1A</p><ol><li>\u4ECEindex2\u7D22\u5F15\u6811\u627E\u5230\u6EE1\u8DB3\u7D22\u5F15\u503C\u662F\u2019zhangs\u2019\u7684\u8BB0\u5F55\uFF0C\u627E\u5230\u7684\u7B2C\u4E00\u4E2A\u662FID1\uFF1B</li><li>\u5230\u4E3B\u952E\u4E0A\u67E5\u5230\u4E3B\u952E\u503C\u662FID1\u7684\u884C\uFF0C\u5224\u65AD\u51FAemail\u7684\u503C\u4E0D\u662F\u2019 <a href="mailto:zhangssxyz@xxx.com">zhangssxyz@xxx.com</a> \u2019\uFF0C\u8FD9\u884C\u8BB0\u5F55\u4E22\u5F03\uFF1B</li><li>\u53D6index2\u4E0A\u521A\u521A\u67E5\u5230\u7684\u4F4D\u7F6E\u7684\u4E0B\u4E00\u6761\u8BB0\u5F55\uFF0C\u53D1\u73B0\u4ECD\u7136\u662F\u2019zhangs\u2019\uFF0C\u53D6\u51FAID2\uFF0C\u518D\u5230ID\u7D22\u5F15\u4E0A\u53D6\u6574\u884C\u7136 \u540E\u5224\u65AD\uFF0C\u8FD9\u6B21\u503C\u5BF9\u4E86\uFF0C\u5C06\u8FD9\u884C\u8BB0\u5F55\u52A0\u5165\u7ED3\u679C\u96C6\uFF1B</li><li>\u91CD\u590D\u4E0A\u4E00\u6B65\uFF0C\u76F4\u5230\u5728idxe2\u4E0A\u53D6\u5230\u7684\u503C\u4E0D\u662F\u2019zhangs\u2019\u65F6\uFF0C\u5FAA\u73AF\u7ED3\u675F\u3002</li></ol><p>\u4E5F\u5C31\u662F\u8BF4**\u4F7F\u7528\u524D\u7F00\u7D22\u5F15\uFF0C\u5B9A\u4E49\u597D\u957F\u5EA6\uFF0C\u5C31\u53EF\u4EE5\u505A\u5230\u65E2\u8282\u7701\u7A7A\u95F4\uFF0C\u53C8\u4E0D\u7528\u989D\u5916\u589E\u52A0\u592A\u591A\u7684\u67E5\u8BE2\u6210\u672C\u3002**\u524D\u9762 \u5DF2\u7ECF\u8BB2\u8FC7\u533A\u5206\u5EA6\uFF0C\u533A\u5206\u5EA6\u8D8A\u9AD8\u8D8A\u597D\u3002\u56E0\u4E3A\u533A\u5206\u5EA6\u8D8A\u9AD8\uFF0C\u610F\u5473\u7740\u91CD\u590D\u7684\u952E\u503C\u8D8A\u5C11\u3002</p><h5 id="_9-2-\u524D\u7F00\u7D22\u5F15\u5BF9\u8986\u76D6\u7D22\u5F15\u7684\u5F71\u54CD" tabindex="-1"><a class="header-anchor" href="#_9-2-\u524D\u7F00\u7D22\u5F15\u5BF9\u8986\u76D6\u7D22\u5F15\u7684\u5F71\u54CD" aria-hidden="true">#</a> 9.2 \u524D\u7F00\u7D22\u5F15\u5BF9\u8986\u76D6\u7D22\u5F15\u7684\u5F71\u54CD</h5><blockquote><p>\u7ED3\u8BBA\uFF1A \u4F7F\u7528\u524D\u7F00\u7D22\u5F15\u5C31\u7528\u4E0D\u4E0A\u8986\u76D6\u7D22\u5F15\u5BF9\u67E5\u8BE2\u6027\u80FD\u7684\u4F18\u5316\u4E86\uFF0C\u8FD9\u4E5F\u662F\u4F60\u5728\u9009\u62E9\u662F\u5426\u4F7F\u7528\u524D\u7F00\u7D22\u5F15\u65F6\u9700\u8981\u8003\u8651\u7684\u4E00\u4E2A\u56E0\u7D20\u3002</p></blockquote><h3 id="_10-\u7D22\u5F15\u4E0B\u63A8" tabindex="-1"><a class="header-anchor" href="#_10-\u7D22\u5F15\u4E0B\u63A8" aria-hidden="true">#</a> 10. \u7D22\u5F15\u4E0B\u63A8</h3><h5 id="_10-1-\u4F7F\u7528\u524D\u540E\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#_10-1-\u4F7F\u7528\u524D\u540E\u5BF9\u6BD4" aria-hidden="true">#</a> 10.1 \u4F7F\u7528\u524D\u540E\u5BF9\u6BD4</h5><p>Index Condition Pushdown(ICP)\u662FMySQL 5.6\u4E2D\u65B0\u7279\u6027\uFF0C\u662F\u4E00\u79CD\u5728\u5B58\u50A8\u5F15\u64CE\u5C42\u4F7F\u7528\u7D22\u5F15\u8FC7\u6EE4\u6570\u636E\u7684\u4E00\u79CD\u4F18\u5316\u65B9\u5F0F\u3002</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706131320477.png" alt="image-20220706131320477" style="zoom:80%;float:left;"><h5 id="_10-2-icp\u7684\u5F00\u542F-\u5173\u95ED" tabindex="-1"><a class="header-anchor" href="#_10-2-icp\u7684\u5F00\u542F-\u5173\u95ED" aria-hidden="true">#</a> 10.2 ICP\u7684\u5F00\u542F/\u5173\u95ED</h5><ul><li>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u542F\u52A8\u7D22\u5F15\u6761\u4EF6\u4E0B\u63A8\u3002\u53EF\u4EE5\u901A\u8FC7\u8BBE\u7F6E\u7CFB\u7EDF\u53D8\u91CF<code>optimizer_switch</code>\u63A7\u5236\uFF1A<code>index_condition_pushdown</code></li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u6253\u5F00\u7D22\u5F15\u4E0B\u63A8
SET optimizer_switch = &#39;index_condition_pushdown=on&#39;;

# \u5173\u95ED\u7D22\u5F15\u4E0B\u63A8
SET optimizer_switch = &#39;index_condition_pushdown=off&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5F53\u4F7F\u7528\u7D22\u5F15\u6761\u4EF6\u4E0B\u63A8\u662F\uFF0C<code>EXPLAIN</code>\u8BED\u53E5\u8F93\u51FA\u7ED3\u679C\u4E2D<code>Extra</code>\u5217\u5185\u5BB9\u663E\u793A\u4E3A<code>Using index condition</code>\u3002</li></ul><h5 id="_10-3-icp\u4F7F\u7528\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_10-3-icp\u4F7F\u7528\u6848\u4F8B" aria-hidden="true">#</a> 10.3 ICP\u4F7F\u7528\u6848\u4F8B</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706135436316.png" alt="image-20220706135436316" style="zoom:80%;float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706135506409.png" alt="image-20220706135506409" style="zoom:80%;float:left;"><ul><li>\u4E3B\u952E\u7D22\u5F15 (\u7B80\u56FE)</li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706135633814.png" alt="image-20220706135633814"></p><p>\u4E8C\u7EA7\u7D22\u5F15zip_last_first (\u7B80\u56FE\uFF0C\u8FD9\u91CC\u7701\u7565\u4E86\u6570\u636E\u9875\u7B49\u4FE1\u606F)</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706135701187.png" alt="image-20220706135701187"></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706135723203.png" alt="image-20220706135723203" style="zoom:80%;float:left;"><h5 id="_10-4-\u5F00\u542F\u548C\u5173\u95EDicp\u6027\u80FD\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#_10-4-\u5F00\u542F\u548C\u5173\u95EDicp\u6027\u80FD\u5BF9\u6BD4" aria-hidden="true">#</a> 10.4 \u5F00\u542F\u548C\u5173\u95EDICP\u6027\u80FD\u5BF9\u6BD4</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706135904713.png" alt="image-20220706135904713" style="zoom:80%;float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706140213382.png" alt="image-20220706140213382" style="zoom:80%;float:left;"><h5 id="_10-5-icp\u7684\u4F7F\u7528\u6761\u4EF6" tabindex="-1"><a class="header-anchor" href="#_10-5-icp\u7684\u4F7F\u7528\u6761\u4EF6" aria-hidden="true">#</a> 10.5 ICP\u7684\u4F7F\u7528\u6761\u4EF6</h5><ol><li>\u5982\u679C\u8868\u7684\u8BBF\u95EE\u7C7B\u578B\u4E3A range \u3001 ref \u3001 eq_ref \u6216\u8005 ref_or_null \u53EF\u4EE5\u4F7F\u7528ICP\u3002</li><li>ICP\u53EF\u4EE5\u4F7F\u7528<code>InnDB</code>\u548C<code>MyISAM</code>\u8868\uFF0C\u5305\u62EC\u5206\u533A\u8868<code>InnoDB</code>\u548C<code>MyISAM</code>\u8868</li><li>\u5BF9\u4E8E<code>InnoDB</code>\u8868\uFF0CICP\u4EC5\u7528\u4E8E<code>\u4E8C\u7EA7\u7D22\u5F15</code>\u3002ICP\u7684\u76EE\u6807\u662F\u51CF\u5C11\u5168\u884C\u8BFB\u53D6\u6B21\u6570\uFF0C\u4ECE\u800C\u51CF\u5C11I/O\u64CD\u4F5C\u3002</li><li>\u5F53SQL\u4F7F\u7528\u8986\u76D6\u7D22\u5F15\u65F6\uFF0C\u4E0D\u652F\u6301ICP\u4F18\u5316\u65B9\u6CD5\u3002\u56E0\u4E3A\u8FD9\u79CD\u60C5\u51B5\u4E0B\u4F7F\u7528ICP\u4E0D\u4F1A\u51CF\u5C11I/O\u3002</li><li>\u76F8\u5173\u5B50\u67E5\u8BE2\u7684\u6761\u4EF6\u4E0D\u80FD\u4F7F\u7528ICP</li></ol><h3 id="_11-\u666E\u901A\u7D22\u5F15-vs-\u552F\u4E00\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_11-\u666E\u901A\u7D22\u5F15-vs-\u552F\u4E00\u7D22\u5F15" aria-hidden="true">#</a> 11. \u666E\u901A\u7D22\u5F15 vs \u552F\u4E00\u7D22\u5F15</h3><p>\u4ECE\u6027\u80FD\u7684\u89D2\u5EA6\u8003\u8651\uFF0C\u4F60\u9009\u62E9\u552F\u4E00\u7D22\u5F15\u8FD8\u662F\u666E\u901A\u7D22\u5F15\u5462\uFF1F\u9009\u62E9\u7684\u4F9D\u636E\u662F\u4EC0\u4E48\u5462\uFF1F</p><p>\u5047\u8BBE\uFF0C\u6211\u4EEC\u6709\u4E00\u4E2A\u4E3B\u952E\u5217\u4E3AID\u7684\u8868\uFF0C\u8868\u4E2D\u6709\u5B57\u6BB5k\uFF0C\u5E76\u4E14\u5728k\u4E0A\u6709\u7D22\u5F15\uFF0C\u5047\u8BBE\u5B57\u6BB5 k \u4E0A\u7684\u503C\u90FD\u4E0D\u91CD\u590D\u3002</p><p>\u8FD9\u4E2A\u8868\u7684\u5EFA\u8868\u8BED\u53E5\u662F\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; create table test(
id int primary key,
k int not null,
name varchar(16),
index (k)
)engine=InnoDB;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8868\u4E2DR1~R5\u7684(ID,k)\u503C\u5206\u522B\u4E3A(100,1)\u3001(200,2)\u3001(300,3)\u3001(500,5)\u548C(600,6)\u3002</p><h5 id="_11-1-\u67E5\u8BE2\u8FC7\u7A0B" tabindex="-1"><a class="header-anchor" href="#_11-1-\u67E5\u8BE2\u8FC7\u7A0B" aria-hidden="true">#</a> 11.1 \u67E5\u8BE2\u8FC7\u7A0B</h5><p>\u5047\u8BBE\uFF0C\u6267\u884C\u67E5\u8BE2\u7684\u8BED\u53E5\u662F select id from test where k=5\u3002</p><ul><li>\u5BF9\u4E8E\u666E\u901A\u7D22\u5F15\u6765\u8BF4\uFF0C\u67E5\u627E\u5230\u6EE1\u8DB3\u6761\u4EF6\u7684\u7B2C\u4E00\u4E2A\u8BB0\u5F55(5,500)\u540E\uFF0C\u9700\u8981\u67E5\u627E\u4E0B\u4E00\u4E2A\u8BB0\u5F55\uFF0C\u76F4\u5230\u78B0\u5230\u7B2C\u4E00 \u4E2A\u4E0D\u6EE1\u8DB3k=5\u6761\u4EF6\u7684\u8BB0\u5F55\u3002</li><li>\u5BF9\u4E8E\u552F\u4E00\u7D22\u5F15\u6765\u8BF4\uFF0C\u7531\u4E8E\u7D22\u5F15\u5B9A\u4E49\u4E86\u552F\u4E00\u6027\uFF0C\u67E5\u627E\u5230\u7B2C\u4E00\u4E2A\u6EE1\u8DB3\u6761\u4EF6\u7684\u8BB0\u5F55\u540E\uFF0C\u5C31\u4F1A\u505C\u6B62\u7EE7\u7EED\u68C0 \u7D22\u3002</li></ul><p>\u90A3\u4E48\uFF0C\u8FD9\u4E2A\u4E0D\u540C\u5E26\u6765\u7684\u6027\u80FD\u5DEE\u8DDD\u4F1A\u6709\u591A\u5C11\u5462\uFF1F\u7B54\u6848\u662F\uFF0C \u5FAE\u4E4E\u5176\u5FAE \u3002</p><h5 id="_11-2-\u66F4\u65B0\u8FC7\u7A0B" tabindex="-1"><a class="header-anchor" href="#_11-2-\u66F4\u65B0\u8FC7\u7A0B" aria-hidden="true">#</a> 11.2 \u66F4\u65B0\u8FC7\u7A0B</h5><p>\u4E3A\u4E86\u8BF4\u660E\u666E\u901A\u7D22\u5F15\u548C\u552F\u4E00\u7D22\u5F15\u5BF9\u66F4\u65B0\u8BED\u53E5\u6027\u80FD\u7684\u5F71\u54CD\u8FD9\u4E2A\u95EE\u9898\uFF0C\u4ECB\u7ECD\u4E00\u4E0Bchange buffer\u3002</p><p>\u5F53\u9700\u8981\u66F4\u65B0\u4E00\u4E2A\u6570\u636E\u9875\u65F6\uFF0C\u5982\u679C\u6570\u636E\u9875\u5728\u5185\u5B58\u4E2D\u5C31\u76F4\u63A5\u66F4\u65B0\uFF0C\u800C\u5982\u679C\u8FD9\u4E2A\u6570\u636E\u9875\u8FD8\u6CA1\u6709\u5728\u5185\u5B58\u4E2D\u7684\u8BDD\uFF0C \u5728\u4E0D\u5F71\u54CD\u6570\u636E\u4E00\u81F4\u6027\u7684\u524D\u63D0\u4E0B\uFF0C <code>InooDB\u4F1A\u5C06\u8FD9\u4E9B\u66F4\u65B0\u64CD\u4F5C\u7F13\u5B58\u5728change buffer\u4E2D</code> \uFF0C\u8FD9\u6837\u5C31\u4E0D\u9700\u8981\u4ECE\u78C1\u76D8\u4E2D\u8BFB\u5165\u8FD9\u4E2A\u6570\u636E\u9875\u4E86\u3002\u5728\u4E0B\u6B21\u67E5\u8BE2\u9700\u8981\u8BBF\u95EE\u8FD9\u4E2A\u6570\u636E\u9875\u7684\u65F6\u5019\uFF0C\u5C06\u6570\u636E\u9875\u8BFB\u5165\u5185\u5B58\uFF0C\u7136\u540E\u6267\u884Cchange buffer\u4E2D\u4E0E\u8FD9\u4E2A\u9875\u6709\u5173\u7684\u64CD\u4F5C\u3002\u901A\u8FC7\u8FD9\u79CD\u65B9\u5F0F\u5C31\u80FD\u4FDD\u8BC1\u8FD9\u4E2A\u6570\u636E\u903B\u8F91\u7684\u6B63\u786E\u6027\u3002</p><p>\u5C06change buffer\u4E2D\u7684\u64CD\u4F5C\u5E94\u7528\u5230\u539F\u6570\u636E\u9875\uFF0C\u5F97\u5230\u6700\u65B0\u7ED3\u679C\u7684\u8FC7\u7A0B\u79F0\u4E3A merge \u3002\u9664\u4E86 <code>\u8BBF\u95EE\u8FD9\u4E2A\u6570\u636E\u9875</code> \u4F1A\u89E6 \u53D1merge\u5916\uFF0C\u7CFB\u7EDF\u6709 <code>\u540E\u53F0\u7EBF\u7A0B\u4F1A\u5B9A\u671F</code> merge\u3002\u5728 <code>\u6570\u636E\u5E93\u6B63\u5E38\u5173\u95ED\uFF08shutdown\uFF09</code> \u7684\u8FC7\u7A0B\u4E2D\uFF0C\u4E5F\u4F1A\u6267\u884Cmerge \u64CD\u4F5C\u3002</p><p>\u5982\u679C\u80FD\u591F\u5C06\u66F4\u65B0\u64CD\u4F5C\u5148\u8BB0\u5F55\u5728change buffer\uFF0C <code>\u51CF\u5C11\u8BFB\u78C1\u76D8</code> \uFF0C\u8BED\u53E5\u7684\u6267\u884C\u901F\u5EA6\u4F1A\u5F97\u5230\u660E\u663E\u7684\u63D0\u5347\u3002\u800C\u4E14\uFF0C \u6570\u636E\u8BFB\u5165\u5185\u5B58\u662F\u9700\u8981\u5360\u7528 buffer pool \u7684\uFF0C\u6240\u4EE5\u8FD9\u79CD\u65B9\u5F0F\u8FD8\u80FD\u591F <code>\u907F\u514D\u5360\u7528\u5185\u5B58 </code>\uFF0C\u63D0\u9AD8\u5185\u5B58\u5229\u7528\u7387\u3002</p><p><code>\u552F\u4E00\u7D22\u5F15\u7684\u66F4\u65B0\u5C31\u4E0D\u80FD\u4F7F\u7528change buffer</code> \uFF0C\u5B9E\u9645\u4E0A\u4E5F\u53EA\u6709\u666E\u901A\u7D22\u5F15\u53EF\u4EE5\u4F7F\u7528\u3002</p><p>\u5982\u679C\u8981\u5728\u8FD9\u5F20\u8868\u4E2D\u63D2\u5165\u4E00\u4E2A\u65B0\u8BB0\u5F55(4,400)\u7684\u8BDD\uFF0CInnoDB\u7684\u5904\u7406\u6D41\u7A0B\u662F\u600E\u6837\u7684\uFF1F</p><h5 id="_11-3-change-buffer\u7684\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_11-3-change-buffer\u7684\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 11.3 change buffer\u7684\u4F7F\u7528\u573A\u666F</h5><ol><li>\u666E\u901A\u7D22\u5F15\u548C\u552F\u4E00\u7D22\u5F15\u5E94\u8BE5\u600E\u4E48\u9009\u62E9\uFF1F\u5176\u5B9E\uFF0C\u8FD9\u4E24\u7C7B\u7D22\u5F15\u5728\u67E5\u8BE2\u80FD\u529B\u4E0A\u662F\u6CA1\u5DEE\u522B\u7684\uFF0C\u4E3B\u8981\u8003\u8651\u7684\u662F \u5BF9 \u66F4\u65B0\u6027\u80FD \u7684\u5F71\u54CD\u3002\u6240\u4EE5\uFF0C\u5EFA\u8BAE\u4F60 \u5C3D\u91CF\u9009\u62E9\u666E\u901A\u7D22\u5F15 \u3002</li><li>\u5728\u5B9E\u9645\u4F7F\u7528\u4E2D\u4F1A\u53D1\u73B0\uFF0C \u666E\u901A\u7D22\u5F15 \u548C change buffer \u7684\u914D\u5408\u4F7F\u7528\uFF0C\u5BF9\u4E8E \u6570\u636E\u91CF\u5927 \u7684\u8868\u7684\u66F4\u65B0\u4F18\u5316 \u8FD8\u662F\u5F88\u660E\u663E\u7684\u3002</li><li>\u5982\u679C\u6240\u6709\u7684\u66F4\u65B0\u540E\u9762\uFF0C\u90FD\u9A6C\u4E0A \u4F34\u968F\u7740\u5BF9\u8FD9\u4E2A\u8BB0\u5F55\u7684\u67E5\u8BE2 \uFF0C\u90A3\u4E48\u4F60\u5E94\u8BE5 \u5173\u95EDchange buffer \u3002\u800C\u5728 \u5176\u4ED6\u60C5\u51B5\u4E0B\uFF0Cchange buffer\u90FD\u80FD\u63D0\u5347\u66F4\u65B0\u6027\u80FD\u3002</li><li>\u7531\u4E8E\u552F\u4E00\u7D22\u5F15\u7528\u4E0D\u4E0Achange buffer\u7684\u4F18\u5316\u673A\u5236\uFF0C\u56E0\u6B64\u5982\u679C \u4E1A\u52A1\u53EF\u4EE5\u63A5\u53D7 \uFF0C\u4ECE\u6027\u80FD\u89D2\u5EA6\u51FA\u53D1\u5EFA\u8BAE\u4F18 \u5148\u8003\u8651\u975E\u552F\u4E00\u7D22\u5F15\u3002\u4F46\u662F\u5982\u679C&quot;\u4E1A\u52A1\u53EF\u80FD\u65E0\u6CD5\u786E\u4FDD&quot;\u7684\u60C5\u51B5\u4E0B\uFF0C\u600E\u4E48\u5904\u7406\u5462\uFF1F</li></ol><ul><li>\u9996\u5148\uFF0C \u4E1A\u52A1\u6B63\u786E\u6027\u4F18\u5148 \u3002\u6211\u4EEC\u7684\u524D\u63D0\u662F\u201C\u4E1A\u52A1\u4EE3\u7801\u5DF2\u7ECF\u4FDD\u8BC1\u4E0D\u4F1A\u5199\u5165\u91CD\u590D\u6570\u636E\u201D\u7684\u60C5\u51B5\u4E0B\uFF0C\u8BA8\u8BBA\u6027\u80FD \u95EE\u9898\u3002\u5982\u679C\u4E1A\u52A1\u4E0D\u80FD\u4FDD\u8BC1\uFF0C\u6216\u8005\u4E1A\u52A1\u5C31\u662F\u8981\u6C42\u6570\u636E\u5E93\u6765\u505A\u7EA6\u675F\uFF0C\u90A3\u4E48\u6CA1\u5F97\u9009\uFF0C\u5FC5\u987B\u521B\u5EFA\u552F\u4E00\u7D22\u5F15\u3002 \u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u672C\u8282\u7684\u610F\u4E49\u5728\u4E8E\uFF0C\u5982\u679C\u78B0\u4E0A\u4E86\u5927\u91CF\u63D2\u5165\u6570\u636E\u6162\u3001\u5185\u5B58\u547D\u4E2D\u7387\u4F4E\u7684\u65F6\u5019\uFF0C\u7ED9\u4F60\u591A\u63D0\u4F9B\u4E00 \u4E2A\u6392\u67E5\u601D\u8DEF\u3002</li><li>\u7136\u540E\uFF0C\u5728\u4E00\u4E9B\u201C \u5F52\u6863\u5E93 \u201D\u7684\u573A\u666F\uFF0C\u4F60\u662F\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u552F\u4E00\u7D22\u5F15\u7684\u3002\u6BD4\u5982\uFF0C\u7EBF\u4E0A\u6570\u636E\u53EA\u9700\u8981\u4FDD\u7559\u534A\u5E74\uFF0C \u7136\u540E\u5386\u53F2\u6570\u636E\u4FDD\u5B58\u5728\u5F52\u6863\u5E93\u3002\u8FD9\u65F6\u5019\uFF0C\u5F52\u6863\u6570\u636E\u5DF2\u7ECF\u662F\u786E\u4FDD\u6CA1\u6709\u552F\u4E00\u952E\u51B2\u7A81\u4E86\u3002\u8981\u63D0\u9AD8\u5F52\u6863\u6548\u7387\uFF0C \u53EF\u4EE5\u8003\u8651\u628A\u8868\u91CC\u9762\u7684\u552F\u4E00\u7D22\u5F15\u6539\u6210\u666E\u901A\u7D22\u5F15\u3002</li></ul><h3 id="_12-\u5176\u5B83\u67E5\u8BE2\u4F18\u5316\u7B56\u7565" tabindex="-1"><a class="header-anchor" href="#_12-\u5176\u5B83\u67E5\u8BE2\u4F18\u5316\u7B56\u7565" aria-hidden="true">#</a> 12. \u5176\u5B83\u67E5\u8BE2\u4F18\u5316\u7B56\u7565</h3><h5 id="_12-1-exists-\u548C-in-\u7684\u533A\u5206" tabindex="-1"><a class="header-anchor" href="#_12-1-exists-\u548C-in-\u7684\u533A\u5206" aria-hidden="true">#</a> 12.1 EXISTS \u548C IN \u7684\u533A\u5206</h5><p><strong>\u95EE\u9898\uFF1A</strong></p><p>\u4E0D\u592A\u7406\u89E3\u54EA\u79CD\u60C5\u51B5\u4E0B\u5E94\u8BE5\u4F7F\u7528 EXISTS\uFF0C\u54EA\u79CD\u60C5\u51B5\u5E94\u8BE5\u7528 IN\u3002\u9009\u62E9\u7684\u6807\u51C6\u662F\u770B\u80FD\u5426\u4F7F\u7528\u8868\u7684\u7D22\u5F15\u5417\uFF1F</p><p><strong>\u56DE\u7B54\uFF1A</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706141957185.png" alt="image-20220706141957185" style="zoom:80%;float:left;"><h5 id="_12-2-count-\u4E0Ecount-\u5177\u4F53\u5B57\u6BB5-\u6548\u7387" tabindex="-1"><a class="header-anchor" href="#_12-2-count-\u4E0Ecount-\u5177\u4F53\u5B57\u6BB5-\u6548\u7387" aria-hidden="true">#</a> 12.2 COUNT(*)\u4E0ECOUNT(\u5177\u4F53\u5B57\u6BB5)\u6548\u7387</h5><p>\u95EE\uFF1A\u5728 MySQL \u4E2D\u7EDF\u8BA1\u6570\u636E\u8868\u7684\u884C\u6570\uFF0C\u53EF\u4EE5\u4F7F\u7528\u4E09\u79CD\u65B9\u5F0F\uFF1A SELECT COUNT(*) \u3001 SELECT COUNT(1) \u548C SELECT COUNT(\u5177\u4F53\u5B57\u6BB5) \uFF0C\u4F7F\u7528\u8FD9\u4E09\u8005\u4E4B\u95F4\u7684\u67E5\u8BE2\u6548\u7387\u662F\u600E\u6837\u7684\uFF1F</p><p>\u7B54\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706142648452.png" alt="image-20220706142648452" style="zoom:80%;float:left;"><h5 id="_12-3-\u5173\u4E8Eselect" tabindex="-1"><a class="header-anchor" href="#_12-3-\u5173\u4E8Eselect" aria-hidden="true">#</a> 12.3 \u5173\u4E8ESELECT(*)</h5><p>\u5728\u8868\u67E5\u8BE2\u4E2D\uFF0C\u5EFA\u8BAE\u660E\u786E\u5B57\u6BB5\uFF0C\u4E0D\u8981\u4F7F\u7528 * \u4F5C\u4E3A\u67E5\u8BE2\u7684\u5B57\u6BB5\u5217\u8868\uFF0C\u63A8\u8350\u4F7F\u7528SELECT &lt;\u5B57\u6BB5\u5217\u8868&gt; \u67E5\u8BE2\u3002\u539F\u56E0\uFF1A</p><p>\u2460 MySQL \u5728\u89E3\u6790\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u4F1A\u901A\u8FC7\u67E5\u8BE2\u6570\u636E\u5B57\u5178 \u5C06&quot;*&quot;\u6309\u5E8F\u8F6C\u6362\u6210\u6240\u6709\u5217\u540D\uFF0C\u8FD9\u4F1A\u5927\u5927\u7684\u8017\u8D39\u8D44\u6E90\u548C\u65F6\u95F4\u3002</p><p>\u2461 \u65E0\u6CD5\u4F7F\u7528 \u8986\u76D6\u7D22\u5F15</p><h5 id="_12-4-limit-1-\u5BF9\u4F18\u5316\u7684\u5F71\u54CD" tabindex="-1"><a class="header-anchor" href="#_12-4-limit-1-\u5BF9\u4F18\u5316\u7684\u5F71\u54CD" aria-hidden="true">#</a> 12.4 LIMIT 1 \u5BF9\u4F18\u5316\u7684\u5F71\u54CD</h5><p>\u9488\u5BF9\u7684\u662F\u4F1A\u626B\u63CF\u5168\u8868\u7684 SQL \u8BED\u53E5\uFF0C\u5982\u679C\u4F60\u53EF\u4EE5\u786E\u5B9A\u7ED3\u679C\u96C6\u53EA\u6709\u4E00\u6761\uFF0C\u90A3\u4E48\u52A0\u4E0A LIMIT 1 \u7684\u65F6\u5019\uFF0C\u5F53\u627E\u5230\u4E00\u6761\u7ED3\u679C\u7684\u65F6\u5019\u5C31\u4E0D\u4F1A\u7EE7\u7EED\u626B\u63CF\u4E86\uFF0C\u8FD9\u6837\u4F1A\u52A0\u5FEB\u67E5\u8BE2\u901F\u5EA6\u3002</p><p>\u5982\u679C\u6570\u636E\u8868\u5DF2\u7ECF\u5BF9\u5B57\u6BB5\u5EFA\u7ACB\u4E86\u552F\u4E00\u7D22\u5F15\uFF0C\u90A3\u4E48\u53EF\u4EE5\u901A\u8FC7\u7D22\u5F15\u8FDB\u884C\u67E5\u8BE2\uFF0C\u4E0D\u4F1A\u5168\u8868\u626B\u63CF\u7684\u8BDD\uFF0C\u5C31\u4E0D\u9700\u8981\u52A0\u4E0A LIMIT 1 \u4E86\u3002</p><h5 id="_12-5-\u591A\u4F7F\u7528commit" tabindex="-1"><a class="header-anchor" href="#_12-5-\u591A\u4F7F\u7528commit" aria-hidden="true">#</a> 12.5 \u591A\u4F7F\u7528COMMIT</h5><p>\u53EA\u8981\u6709\u53EF\u80FD\uFF0C\u5728\u7A0B\u5E8F\u4E2D\u5C3D\u91CF\u591A\u4F7F\u7528 COMMIT\uFF0C\u8FD9\u6837\u7A0B\u5E8F\u7684\u6027\u80FD\u5F97\u5230\u63D0\u9AD8\uFF0C\u9700\u6C42\u4E5F\u4F1A\u56E0\u4E3A COMMIT \u6240\u91CA\u653E \u7684\u8D44\u6E90\u800C\u51CF\u5C11\u3002</p><p>COMMIT \u6240\u91CA\u653E\u7684\u8D44\u6E90\uFF1A</p><ul><li>\u56DE\u6EDA\u6BB5\u4E0A\u7528\u4E8E\u6062\u590D\u6570\u636E\u7684\u4FE1\u606F</li><li>\u88AB\u7A0B\u5E8F\u8BED\u53E5\u83B7\u5F97\u7684\u9501</li><li>redo / undo log buffer \u4E2D\u7684\u7A7A\u95F4</li><li>\u7BA1\u7406\u4E0A\u8FF0 3 \u79CD\u8D44\u6E90\u4E2D\u7684\u5185\u90E8\u82B1\u8D39</li></ul><h3 id="_13-\u6DD8\u5B9D\u6570\u636E\u5E93-\u4E3B\u952E\u5982\u4F55\u8BBE\u8BA1\u7684" tabindex="-1"><a class="header-anchor" href="#_13-\u6DD8\u5B9D\u6570\u636E\u5E93-\u4E3B\u952E\u5982\u4F55\u8BBE\u8BA1\u7684" aria-hidden="true">#</a> 13. \u6DD8\u5B9D\u6570\u636E\u5E93\uFF0C\u4E3B\u952E\u5982\u4F55\u8BBE\u8BA1\u7684\uFF1F</h3><p>\u804A\u4E00\u4E2A\u5B9E\u9645\u95EE\u9898\uFF1A\u6DD8\u5B9D\u7684\u6570\u636E\u5E93\uFF0C\u4E3B\u952E\u662F\u5982\u4F55\u8BBE\u8BA1\u7684\uFF1F</p><p>\u67D0\u4E9B\u9519\u7684\u79BB\u8C31\u7684\u7B54\u6848\u8FD8\u5728\u7F51\u4E0A\u5E74\u590D\u4E00\u5E74\u7684\u6D41\u4F20\u7740\uFF0C\u751A\u81F3\u8FD8\u6210\u4E3A\u4E86\u6240\u8C13\u7684MySQL\u519B\u89C4\u3002\u5176\u4E2D\uFF0C\u4E00\u4E2A\u6700\u660E\u663E\u7684\u9519\u8BEF\u5C31\u662F\u5173\u4E8EMySQL\u7684\u4E3B\u952E\u8BBE\u8BA1\u3002</p><p>\u5927\u90E8\u5206\u4EBA\u7684\u56DE\u7B54\u5982\u6B64\u81EA\u4FE1\uFF1A\u75288\u5B57\u8282\u7684 BIGINT \u505A\u4E3B\u952E\uFF0C\u800C\u4E0D\u8981\u7528INT\u3002 <code>\u9519 </code>\uFF01</p><p>\u8FD9\u6837\u7684\u56DE\u7B54\uFF0C\u53EA\u7AD9\u5728\u4E86\u6570\u636E\u5E93\u8FD9\u4E00\u5C42\uFF0C\u800C\u6CA1\u6709 <code>\u4ECE\u4E1A\u52A1\u7684\u89D2\u5EA6</code> \u601D\u8003\u4E3B\u952E\u3002\u4E3B\u952E\u5C31\u662F\u4E00\u4E2A\u81EA\u589EID\u5417\uFF1F\u7AD9\u5728 2022\u5E74\u7684\u65B0\u5E74\u6863\u53E3\uFF0C\u7528\u81EA\u589E\u505A\u4E3B\u952E\uFF0C\u67B6\u6784\u8BBE\u8BA1\u4E0A\u53EF\u80FD <code>\u8FDE\u53CA\u683C\u90FD\u62FF\u4E0D\u5230</code> \u3002</p><h5 id="_13-1-\u81EA\u589Eid\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_13-1-\u81EA\u589Eid\u7684\u95EE\u9898" aria-hidden="true">#</a> 13.1 \u81EA\u589EID\u7684\u95EE\u9898</h5><p>\u81EA\u589EID\u505A\u4E3B\u952E\uFF0C\u7B80\u5355\u6613\u61C2\uFF0C\u51E0\u4E4E\u6240\u6709\u6570\u636E\u5E93\u90FD\u652F\u6301\u81EA\u589E\u7C7B\u578B\uFF0C\u53EA\u662F\u5B9E\u73B0\u4E0A\u5404\u81EA\u6709\u6240\u4E0D\u540C\u800C\u5DF2\u3002\u81EA\u589EID\u9664 \u4E86\u7B80\u5355\uFF0C\u5176\u4ED6\u90FD\u662F\u7F3A\u70B9\uFF0C\u603B\u4F53\u6765\u770B\u5B58\u5728\u4EE5\u4E0B\u51E0\u65B9\u9762\u7684\u95EE\u9898\uFF1A</p><ol><li><p><strong>\u53EF\u9760\u6027\u4E0D\u9AD8</strong></p><p>\u5B58\u5728\u81EA\u589EID\u56DE\u6EAF\u7684\u95EE\u9898\uFF0C\u8FD9\u4E2A\u95EE\u9898\u76F4\u5230\u6700\u65B0\u7248\u672C\u7684MySQL 8.0\u624D\u4FEE\u590D\u3002</p></li><li><p>**\u5B89\u5168\u6027\u4E0D\u9AD8 **</p><p>\u5BF9\u5916\u66B4\u9732\u7684\u63A5\u53E3\u53EF\u4EE5\u975E\u5E38\u5BB9\u6613\u731C\u6D4B\u5BF9\u5E94\u7684\u4FE1\u606F\u3002\u6BD4\u5982\uFF1A/User/1/\u8FD9\u6837\u7684\u63A5\u53E3\uFF0C\u53EF\u4EE5\u975E\u5E38\u5BB9\u6613\u731C\u6D4B\u7528\u6237ID\u7684 \u503C\u4E3A\u591A\u5C11\uFF0C\u603B\u7528\u6237\u6570\u91CF\u6709\u591A\u5C11\uFF0C\u4E5F\u53EF\u4EE5\u975E\u5E38\u5BB9\u6613\u5730\u901A\u8FC7\u63A5\u53E3\u8FDB\u884C\u6570\u636E\u7684\u722C\u53D6\u3002</p></li><li><p><strong>\u6027\u80FD\u5DEE</strong></p><p>\u81EA\u589EID\u7684\u6027\u80FD\u8F83\u5DEE\uFF0C\u9700\u8981\u5728\u6570\u636E\u5E93\u670D\u52A1\u5668\u7AEF\u751F\u6210\u3002</p></li><li><p><strong>\u4EA4\u4E92\u591A</strong></p><p>\u4E1A\u52A1\u8FD8\u9700\u8981\u989D\u5916\u6267\u884C\u4E00\u6B21\u7C7B\u4F3C last_insert_id() \u7684\u51FD\u6570\u624D\u80FD\u77E5\u9053\u521A\u624D\u63D2\u5165\u7684\u81EA\u589E\u503C\uFF0C\u8FD9\u9700\u8981\u591A\u4E00\u6B21\u7684 \u7F51\u7EDC\u4EA4\u4E92\u3002\u5728\u6D77\u91CF\u5E76\u53D1\u7684\u7CFB\u7EDF\u4E2D\uFF0C\u591A1\u6761SQL\uFF0C\u5C31\u591A\u4E00\u6B21\u6027\u80FD\u4E0A\u7684\u5F00\u9500\u3002</p></li><li><p>**\u5C40\u90E8\u552F\u4E00\u6027 **</p><p>\u6700\u91CD\u8981\u7684\u4E00\u70B9\uFF0C\u81EA\u589EID\u662F\u5C40\u90E8\u552F\u4E00\uFF0C\u53EA\u5728\u5F53\u524D\u6570\u636E\u5E93\u5B9E\u4F8B\u4E2D\u552F\u4E00\uFF0C\u800C\u4E0D\u662F\u5168\u5C40\u552F\u4E00\uFF0C\u5728\u4EFB\u610F\u670D\u52A1\u5668\u95F4\u90FD \u662F\u552F\u4E00\u7684\u3002\u5BF9\u4E8E\u76EE\u524D\u5206\u5E03\u5F0F\u7CFB\u7EDF\u6765\u8BF4\uFF0C\u8FD9\u7B80\u76F4\u5C31\u662F\u5669\u68A6\u3002</p></li></ol><h5 id="_13-2-\u4E1A\u52A1\u5B57\u6BB5\u505A\u4E3B\u952E" tabindex="-1"><a class="header-anchor" href="#_13-2-\u4E1A\u52A1\u5B57\u6BB5\u505A\u4E3B\u952E" aria-hidden="true">#</a> 13.2 \u4E1A\u52A1\u5B57\u6BB5\u505A\u4E3B\u952E</h5><p>\u4E3A\u4E86\u80FD\u591F\u552F\u4E00\u5730\u6807\u8BC6\u4E00\u4E2A\u4F1A\u5458\u7684\u4FE1\u606F\uFF0C\u9700\u8981\u4E3A \u4F1A\u5458\u4FE1\u606F\u8868 \u8BBE\u7F6E\u4E00\u4E2A\u4E3B\u952E\u3002\u90A3\u4E48\uFF0C\u600E\u4E48\u4E3A\u8FD9\u4E2A\u8868\u8BBE\u7F6E\u4E3B \u952E\uFF0C\u624D\u80FD\u8FBE\u5230\u6211\u4EEC\u7406\u60F3\u7684\u76EE\u6807\u5462\uFF1F \u8FD9\u91CC\u6211\u4EEC\u8003\u8651\u4E1A\u52A1\u5B57\u6BB5\u505A\u4E3B\u952E\u3002</p><p>\u8868\u6570\u636E\u5982\u4E0B\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706151506580.png" alt="image-20220706151506580"></p><p>\u5728\u8FD9\u4E2A\u8868\u91CC\uFF0C\u54EA\u4E2A\u5B57\u6BB5\u6BD4\u8F83\u5408\u9002\u5462\uFF1F</p><ul><li><strong>\u9009\u62E9\u5361\u53F7\uFF08cardno\uFF09</strong></li></ul><p>\u4F1A\u5458\u5361\u53F7\uFF08cardno\uFF09\u770B\u8D77\u6765\u6BD4\u8F83\u5408\u9002\uFF0C\u56E0\u4E3A\u4F1A\u5458\u5361\u53F7\u4E0D\u80FD\u4E3A\u7A7A\uFF0C\u800C\u4E14\u6709\u552F\u4E00\u6027\uFF0C\u53EF\u4EE5\u7528\u6765 \u6807\u8BC6\u4E00\u6761\u4F1A\u5458 \u8BB0\u5F55\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; CREATE TABLE demo.membermaster
-&gt; (
-&gt; cardno CHAR(8) PRIMARY KEY, -- \u4F1A\u5458\u5361\u53F7\u4E3A\u4E3B\u952E
-&gt; membername TEXT,
-&gt; memberphone TEXT,
-&gt; memberpid TEXT,
-&gt; memberaddress TEXT,
-&gt; sex TEXT,
-&gt; birthday DATETIME
-&gt; );
Query OK, 0 rows affected (0.06 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0D\u540C\u7684\u4F1A\u5458\u5361\u53F7\u5BF9\u5E94\u4E0D\u540C\u7684\u4F1A\u5458\uFF0C\u5B57\u6BB5\u201Ccardno\u201D\u552F\u4E00\u5730\u6807\u8BC6\u67D0\u4E00\u4E2A\u4F1A\u5458\u3002\u5982\u679C\u90FD\u662F\u8FD9\u6837\uFF0C\u4F1A\u5458\u5361\u53F7\u4E0E\u4F1A \u5458\u4E00\u4E00\u5BF9\u5E94\uFF0C\u7CFB\u7EDF\u662F\u53EF\u4EE5\u6B63\u5E38\u8FD0\u884C\u7684\u3002</p><p>\u4F46\u5B9E\u9645\u60C5\u51B5\u662F\uFF0C \u4F1A\u5458\u5361\u53F7\u53EF\u80FD\u5B58\u5728\u91CD\u590D\u4F7F\u7528 \u7684\u60C5\u51B5\u3002\u6BD4\u5982\uFF0C\u5F20\u4E09\u56E0\u4E3A\u5DE5\u4F5C\u53D8\u52A8\u642C\u79BB\u4E86\u539F\u6765\u7684\u5730\u5740\uFF0C\u4E0D\u518D \u5230\u5546\u5BB6\u7684\u95E8\u5E97\u6D88\u8D39\u4E86 \uFF08\u9000\u8FD8\u4E86\u4F1A\u5458\u5361\uFF09\uFF0C\u4E8E\u662F\u5F20\u4E09\u5C31\u4E0D\u518D\u662F\u8FD9\u4E2A\u5546\u5BB6\u95E8\u5E97\u7684\u4F1A\u5458\u4E86\u3002\u4F46\u662F\uFF0C\u5546\u5BB6\u4E0D\u60F3\u8BA9 \u8FD9\u4E2A\u4F1A \u5458\u5361\u7A7A\u7740\uFF0C\u5C31\u628A\u5361\u53F7\u662F\u201C10000001\u201D\u7684\u4F1A\u5458\u5361\u53D1\u7ED9\u4E86\u738B\u4E94\u3002</p><p>\u4ECE\u7CFB\u7EDF\u8BBE\u8BA1\u7684\u89D2\u5EA6\u770B\uFF0C\u8FD9\u4E2A\u53D8\u5316\u53EA\u662F\u4FEE\u6539\u4E86\u4F1A\u5458\u4FE1\u606F\u8868\u4E2D\u7684\u5361\u53F7\u662F\u201C10000001\u201D\u8FD9\u4E2A\u4F1A\u5458 \u4FE1\u606F\uFF0C\u5E76\u4E0D\u4F1A\u5F71 \u54CD\u5230\u6570\u636E\u4E00\u81F4\u6027\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u4FEE\u6539\u4F1A\u5458\u5361\u53F7\u662F\u201C10000001\u201D\u7684\u4F1A\u5458\u4FE1\u606F\uFF0C \u7CFB\u7EDF\u7684\u5404\u4E2A\u6A21\u5757\uFF0C\u90FD\u4F1A\u83B7\u53D6\u5230\u4FEE \u6539\u540E\u7684\u4F1A\u5458\u4FE1\u606F\uFF0C\u4E0D\u4F1A\u51FA\u73B0\u201C\u6709\u7684\u6A21\u5757\u83B7\u53D6\u5230\u4FEE\u6539\u4E4B\u524D\u7684\u4F1A\u5458\u4FE1\u606F\uFF0C\u6709\u7684\u6A21\u5757\u83B7\u53D6\u5230\u4FEE\u6539\u540E\u7684\u4F1A\u5458\u4FE1\u606F\uFF0C \u800C\u5BFC\u81F4\u7CFB\u7EDF\u5185\u90E8\u6570\u636E\u4E0D\u4E00\u81F4\u201D\u7684\u60C5\u51B5\u3002\u56E0\u6B64\uFF0C\u4ECE \u4FE1\u606F\u7CFB\u7EDF\u5C42\u9762 \u4E0A\u770B\u662F\u6CA1\u95EE\u9898\u7684\u3002</p><p>\u4F46\u662F\u4ECE\u4F7F\u7528 \u7CFB\u7EDF\u7684\u4E1A\u52A1\u5C42\u9762 \u6765\u770B\uFF0C\u5C31\u6709\u5F88\u5927\u7684\u95EE\u9898 \u4E86\uFF0C\u4F1A\u5BF9\u5546\u5BB6\u9020\u6210\u5F71\u54CD\u3002</p><p>\u6BD4\u5982\uFF0C\u6211\u4EEC\u6709\u4E00\u4E2A\u9500\u552E\u6D41\u6C34\u8868\uFF08trans\uFF09\uFF0C\u8BB0\u5F55\u4E86\u6240\u6709\u7684\u9500\u552E\u6D41\u6C34\u660E\u7EC6\u30022020 \u5E74 12 \u6708 01 \u65E5\uFF0C\u5F20\u4E09\u5728\u95E8\u5E97 \u8D2D\u4E70\u4E86\u4E00\u672C\u4E66\uFF0C\u6D88\u8D39\u4E86 89 \u5143\u3002\u90A3\u4E48\uFF0C\u7CFB\u7EDF\u4E2D\u5C31\u6709\u4E86\u5F20\u4E09\u4E70\u4E66\u7684\u6D41\u6C34\u8BB0\u5F55\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706151715106.png" alt="image-20220706151715106"></p><p>\u63A5\u7740\uFF0C\u6211\u4EEC\u67E5\u8BE2\u4E00\u4E0B 2020 \u5E74 12 \u6708 01 \u65E5\u7684\u4F1A\u5458\u9500\u552E\u8BB0\u5F55\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT b.membername,c.goodsname,a.quantity,a.salesvalue,a.transdate
-&gt; FROM demo.trans AS a
-&gt; JOIN demo.membermaster AS b
-&gt; JOIN demo.goodsmaster AS c
-&gt; ON (a.cardno = b.cardno AND a.itemnumber=c.itemnumber);
+------------+-----------+----------+------------+---------------------+
| membername | goodsname | quantity | salesvalue | transdate |
+------------+-----------+----------+------------+---------------------+
|     \u5F20\u4E09   | \u4E66         | 1.000    | 89.00      | 2020-12-01 00:00:00 |
+------------+-----------+----------+------------+---------------------+
1 row in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u4F1A\u5458\u5361\u201C10000001\u201D\u53C8\u53D1\u7ED9\u4E86\u738B\u4E94\uFF0C\u6211\u4EEC\u4F1A\u66F4\u6539\u4F1A\u5458\u4FE1\u606F\u8868\u3002\u5BFC\u81F4\u67E5\u8BE2\u65F6\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT b.membername,c.goodsname,a.quantity,a.salesvalue,a.transdate
-&gt; FROM demo.trans AS a
-&gt; JOIN demo.membermaster AS b
-&gt; JOIN demo.goodsmaster AS c
-&gt; ON (a.cardno = b.cardno AND a.itemnumber=c.itemnumber);
+------------+-----------+----------+------------+---------------------+
| membername | goodsname | quantity | salesvalue | transdate |
+------------+-----------+----------+------------+---------------------+
| \u738B\u4E94        | \u4E66        | 1.000    | 89.00      | 2020-12-01 00:00:00 |
+------------+-----------+----------+------------+---------------------+
1 row in set (0.01 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u6B21\u5F97\u5230\u7684\u7ED3\u679C\u662F\uFF1A\u738B\u4E94\u5728 2020 \u5E74 12 \u6708 01 \u65E5\uFF0C\u4E70\u4E86\u4E00\u672C\u4E66\uFF0C\u6D88\u8D39 89 \u5143\u3002\u663E\u7136\u662F\u9519\u8BEF\u7684\uFF01\u7ED3\u8BBA\uFF1A\u5343\u4E07 \u4E0D\u80FD\u628A\u4F1A\u5458\u5361\u53F7\u5F53\u505A\u4E3B\u952E\u3002</p><ul><li><strong>\u9009\u62E9\u4F1A\u5458\u7535\u8BDD \u6216 \u8EAB\u4EFD\u8BC1\u53F7</strong></li></ul><p>\u4F1A\u5458\u7535\u8BDD\u53EF\u4EE5\u505A\u4E3B\u952E\u5417\uFF1F\u4E0D\u884C\u7684\u3002\u5728\u5B9E\u9645\u64CD\u4F5C\u4E2D\uFF0C\u624B\u673A\u53F7\u4E5F\u5B58\u5728 \u88AB\u8FD0\u8425\u5546\u6536\u56DE \uFF0C\u91CD\u65B0\u53D1\u7ED9\u522B\u4EBA\u7528\u7684\u60C5\u51B5\u3002</p><p>\u90A3\u8EAB\u4EFD\u8BC1\u53F7\u884C\u4E0D\u884C\u5462\uFF1F\u597D\u50CF\u53EF\u4EE5\u3002\u56E0\u4E3A\u8EAB\u4EFD\u8BC1\u51B3\u4E0D\u4F1A\u91CD\u590D\uFF0C\u8EAB\u4EFD\u8BC1\u53F7\u4E0E\u4E00\u4E2A\u4EBA\u5B58\u5728\u4E00\u4E00\u5BF9 \u5E94\u7684\u5173\u7CFB\u3002\u53EF \u95EE\u9898\u662F\uFF0C\u8EAB\u4EFD\u8BC1\u53F7\u5C5E\u4E8E \u4E2A\u4EBA\u9690\u79C1 \uFF0C\u987E\u5BA2\u4E0D\u4E00\u5B9A\u613F\u610F\u7ED9\u4F60\u3002\u8981\u662F\u5F3A\u5236\u8981\u6C42\u4F1A\u5458\u5FC5\u987B\u767B\u8BB0\u8EAB\u4EFD\u8BC1\u53F7\uFF0C\u4F1A\u628A\u5F88 \u591A\u5BA2\u4EBA\u8D76\u8DD1\u7684\u3002\u5176\u5B9E\uFF0C\u5BA2\u6237\u7535\u8BDD\u4E5F\u6709\u8FD9\u4E2A\u95EE\u9898\uFF0C\u8FD9\u4E5F\u662F\u6211\u4EEC\u5728\u8BBE\u8BA1\u4F1A\u5458\u4FE1\u606F\u8868\u7684\u65F6\u5019\uFF0C\u5141\u8BB8\u8EAB\u4EFD\u8BC1\u53F7\u548C \u7535\u8BDD\u90FD\u4E3A\u7A7A\u7684\u539F\u56E0\u3002</p><p><strong>\u6240\u4EE5\uFF0C\u5EFA\u8BAE\u5C3D\u91CF\u4E0D\u8981\u7528\u8DDF\u4E1A\u52A1\u6709\u5173\u7684\u5B57\u6BB5\u505A\u4E3B\u952E\u3002\u6BD5\u7ADF\uFF0C\u4F5C\u4E3A\u9879\u76EE\u8BBE\u8BA1\u7684\u6280\u672F\u4EBA\u5458\uFF0C\u6211\u4EEC\u8C01\u4E5F\u65E0\u6CD5\u9884\u6D4B \u5728\u9879\u76EE\u7684\u6574\u4E2A\u751F\u547D\u5468\u671F\u4E2D\uFF0C\u54EA\u4E2A\u4E1A\u52A1\u5B57\u6BB5\u4F1A\u56E0\u4E3A\u9879\u76EE\u7684\u4E1A\u52A1\u9700\u6C42\u800C\u6709\u91CD\u590D\uFF0C\u6216\u8005\u91CD\u7528\u4E4B\u7C7B\u7684\u60C5\u51B5\u51FA\u73B0\u3002</strong></p><blockquote><p>\u7ECF\u9A8C\uFF1A \u521A\u5F00\u59CB\u4F7F\u7528 MySQL \u65F6\uFF0C\u5F88\u591A\u4EBA\u90FD\u5F88\u5BB9\u6613\u72AF\u7684\u9519\u8BEF\u662F\u559C\u6B22\u7528\u4E1A\u52A1\u5B57\u6BB5\u505A\u4E3B\u952E\uFF0C\u60F3\u5F53\u7136\u5730\u8BA4\u4E3A\u4E86\u89E3\u4E1A \u52A1\u9700\u6C42\uFF0C\u4F46\u5B9E\u9645\u60C5\u51B5\u5F80\u5F80\u51FA\u4E4E\u610F\u6599\uFF0C\u800C\u66F4\u6539\u4E3B\u952E\u8BBE\u7F6E\u7684\u6210\u672C\u975E\u5E38\u9AD8\u3002</p></blockquote><h5 id="_13-3-\u6DD8\u5B9D\u7684\u4E3B\u952E\u8BBE\u8BA1" tabindex="-1"><a class="header-anchor" href="#_13-3-\u6DD8\u5B9D\u7684\u4E3B\u952E\u8BBE\u8BA1" aria-hidden="true">#</a> 13.3 \u6DD8\u5B9D\u7684\u4E3B\u952E\u8BBE\u8BA1</h5><p>\u5728\u6DD8\u5B9D\u7684\u7535\u5546\u4E1A\u52A1\u4E2D\uFF0C\u8BA2\u5355\u670D\u52A1\u662F\u4E00\u4E2A\u6838\u5FC3\u4E1A\u52A1\u3002\u8BF7\u95EE\uFF0C \u8BA2\u5355\u8868\u7684\u4E3B\u952E \u6DD8\u5B9D\u662F\u5982\u4F55\u8BBE\u8BA1\u7684\u5462\uFF1F\u662F\u81EA\u589EID \u5417\uFF1F</p><p>\u6253\u5F00\u6DD8\u5B9D\uFF0C\u770B\u4E00\u4E0B\u8BA2\u5355\u4FE1\u606F\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706161436920.png" alt="image-20220706161436920"></p><p>\u4ECE\u4E0A\u56FE\u53EF\u4EE5\u53D1\u73B0\uFF0C\u8BA2\u5355\u53F7\u4E0D\u662F\u81EA\u589EID\uFF01\u6211\u4EEC\u8BE6\u7EC6\u770B\u4E0B\u4E0A\u8FF04\u4E2A\u8BA2\u5355\u53F7\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>1550672064762308113
1481195847180308113
1431156171142308113
1431146631521308113
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BA2\u5355\u53F7\u662F19\u4F4D\u7684\u957F\u5EA6\uFF0C\u4E14\u8BA2\u5355\u7684\u6700\u540E5\u4F4D\u90FD\u662F\u4E00\u6837\u7684\uFF0C\u90FD\u662F08113\u3002\u4E14\u8BA2\u5355\u53F7\u7684\u524D\u976214\u4F4D\u90E8\u5206\u662F\u5355\u8C03\u9012\u589E\u7684\u3002</p><p>\u5927\u80C6\u731C\u6D4B\uFF0C\u6DD8\u5B9D\u7684\u8BA2\u5355ID\u8BBE\u8BA1\u5E94\u8BE5\u662F\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>\u8BA2\u5355ID = \u65F6\u95F4 + \u53BB\u91CD\u5B57\u6BB5 + \u7528\u6237ID\u540E6\u4F4D\u5C3E\u53F7
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD9\u6837\u7684\u8BBE\u8BA1\u80FD\u505A\u5230\u5168\u5C40\u552F\u4E00\uFF0C\u4E14\u5BF9\u5206\u5E03\u5F0F\u7CFB\u7EDF\u67E5\u8BE2\u53CA\u5176\u53CB\u597D\u3002</p><h5 id="_13-4-\u63A8\u8350\u7684\u4E3B\u952E\u8BBE\u8BA1" tabindex="-1"><a class="header-anchor" href="#_13-4-\u63A8\u8350\u7684\u4E3B\u952E\u8BBE\u8BA1" aria-hidden="true">#</a> 13.4 \u63A8\u8350\u7684\u4E3B\u952E\u8BBE\u8BA1</h5><p><strong>\u975E\u6838\u5FC3\u4E1A\u52A1</strong> \uFF1A\u5BF9\u5E94\u8868\u7684\u4E3B\u952E\u81EA\u589EID\uFF0C\u5982\u544A\u8B66\u3001\u65E5\u5FD7\u3001\u76D1\u63A7\u7B49\u4FE1\u606F\u3002</p><p><strong>\u6838\u5FC3\u4E1A\u52A1</strong> \uFF1A<code>\u4E3B\u952E\u8BBE\u8BA1\u81F3\u5C11\u5E94\u8BE5\u662F\u5168\u5C40\u552F\u4E00\u4E14\u662F\u5355\u8C03\u9012\u589E</code>\u3002\u5168\u5C40\u552F\u4E00\u4FDD\u8BC1\u5728\u5404\u7CFB\u7EDF\u4E4B\u95F4\u90FD\u662F\u552F\u4E00\u7684\uFF0C\u5355\u8C03 \u9012\u589E\u662F\u5E0C\u671B\u63D2\u5165\u65F6\u4E0D\u5F71\u54CD\u6570\u636E\u5E93\u6027\u80FD\u3002</p><p>\u8FD9\u91CC\u63A8\u8350\u6700\u7B80\u5355\u7684\u4E00\u79CD\u4E3B\u952E\u8BBE\u8BA1\uFF1AUUID\u3002</p><p><strong>UUID\u7684\u7279\u70B9\uFF1A</strong></p><p>\u5168\u5C40\u552F\u4E00\uFF0C\u5360\u752836\u5B57\u8282\uFF0C\u6570\u636E\u65E0\u5E8F\uFF0C\u63D2\u5165\u6027\u80FD\u5DEE\u3002</p><p><strong>\u8BA4\u8BC6UUID\uFF1A</strong></p><ul><li>\u4E3A\u4EC0\u4E48UUID\u662F\u5168\u5C40\u552F\u4E00\u7684\uFF1F</li><li>\u4E3A\u4EC0\u4E48UUID\u5360\u752836\u4E2A\u5B57\u8282\uFF1F</li><li>\u4E3A\u4EC0\u4E48UUID\u662F\u65E0\u5E8F\u7684\uFF1F</li></ul><p>MySQL\u6570\u636E\u5E93\u7684UUID\u7EC4\u6210\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>UUID = \u65F6\u95F4+UUID\u7248\u672C\uFF0816\u5B57\u8282\uFF09- \u65F6\u949F\u5E8F\u5217\uFF084\u5B57\u8282\uFF09 - MAC\u5730\u5740\uFF0812\u5B57\u8282\uFF09
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6211\u4EEC\u4EE5UUID\u503Ce0ea12d4-6473-11eb-943c-00155dbaa39d\u4E3E\u4F8B\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706162131362.png" alt="image-20220706162131362"></p><p><code>\u4E3A\u4EC0\u4E48UUID\u662F\u5168\u5C40\u552F\u4E00\u7684\uFF1F</code></p><p>\u5728UUID\u4E2D\u65F6\u95F4\u90E8\u5206\u5360\u752860\u4F4D\uFF0C\u5B58\u50A8\u7684\u7C7B\u4F3CTIMESTAMP\u7684\u65F6\u95F4\u6233\uFF0C\u4F46\u8868\u793A\u7684\u662F\u4ECE1582-10-15 00\uFF1A00\uFF1A00.00 \u5230\u73B0\u5728\u7684100ns\u7684\u8BA1\u6570\u3002\u53EF\u4EE5\u770B\u5230UUID\u5B58\u50A8\u7684\u65F6\u95F4\u7CBE\u5EA6\u6BD4TIMESTAMPE\u66F4\u9AD8\uFF0C\u65F6\u95F4\u7EF4\u5EA6\u53D1\u751F\u91CD\u590D\u7684\u6982\u7387\u964D \u4F4E\u52301/100ns\u3002</p><p>\u65F6\u949F\u5E8F\u5217\u662F\u4E3A\u4E86\u907F\u514D\u65F6\u949F\u88AB\u56DE\u62E8\u5BFC\u81F4\u4EA7\u751F\u65F6\u95F4\u91CD\u590D\u7684\u53EF\u80FD\u6027\u3002MAC\u5730\u5740\u7528\u4E8E\u5168\u5C40\u552F\u4E00\u3002</p><p><code>\u4E3A\u4EC0\u4E48UUID\u5360\u752836\u4E2A\u5B57\u8282\uFF1F</code></p><p>UUID\u6839\u636E\u5B57\u7B26\u4E32\u8FDB\u884C\u5B58\u50A8\uFF0C\u8BBE\u8BA1\u65F6\u8FD8\u5E26\u6709\u65E0\u7528&quot;-&quot;\u5B57\u7B26\u4E32\uFF0C\u56E0\u6B64\u603B\u5171\u9700\u898136\u4E2A\u5B57\u8282\u3002</p><p><code>\u4E3A\u4EC0\u4E48UUID\u662F\u968F\u673A\u65E0\u5E8F\u7684\u5462\uFF1F</code></p><p>\u56E0\u4E3AUUID\u7684\u8BBE\u8BA1\u4E2D\uFF0C\u5C06\u65F6\u95F4\u4F4E\u4F4D\u653E\u5728\u6700\u524D\u9762\uFF0C\u800C\u8FD9\u90E8\u5206\u7684\u6570\u636E\u662F\u4E00\u76F4\u5728\u53D8\u5316\u7684\uFF0C\u5E76\u4E14\u662F\u65E0\u5E8F\u3002</p><p><strong>\u6539\u9020UUID</strong></p><p>\u82E5\u5C06\u65F6\u95F4\u9AD8\u4F4E\u4F4D\u4E92\u6362\uFF0C\u5219\u65F6\u95F4\u5C31\u662F\u5355\u8C03\u9012\u589E\u7684\u4E86\uFF0C\u4E5F\u5C31\u53D8\u5F97\u5355\u8C03\u9012\u589E\u4E86\u3002MySQL 8.0\u53EF\u4EE5\u66F4\u6362\u65F6\u95F4\u4F4E\u4F4D\u548C\u65F6\u95F4\u9AD8\u4F4D\u7684\u5B58\u50A8\u65B9\u5F0F\uFF0C\u8FD9\u6837UUID\u5C31\u662F\u6709\u5E8F\u7684UUID\u4E86\u3002</p><p>MySQL 8.0\u8FD8\u89E3\u51B3\u4E86UUID\u5B58\u5728\u7684\u7A7A\u95F4\u5360\u7528\u7684\u95EE\u9898\uFF0C\u9664\u53BB\u4E86UUID\u5B57\u7B26\u4E32\u4E2D\u65E0\u610F\u4E49\u7684&quot;-&quot;\u5B57\u7B26\u4E32\uFF0C\u5E76\u4E14\u5C06\u5B57\u7B26\u4E32\u7528\u4E8C\u8FDB\u5236\u7C7B\u578B\u4FDD\u5B58\uFF0C\u8FD9\u6837\u5B58\u50A8\u7A7A\u95F4\u964D\u4F4E\u4E3A\u4E8616\u5B57\u8282\u3002</p><p>\u53EF\u4EE5\u901A\u8FC7MySQL8.0\u63D0\u4F9B\u7684uuid_to_bin\u51FD\u6570\u5B9E\u73B0\u4E0A\u8FF0\u529F\u80FD\uFF0C\u540C\u6837\u7684\uFF0CMySQL\u4E5F\u63D0\u4F9B\u4E86bin_to_uuid\u51FD\u6570\u8FDB\u884C\u8F6C\u5316\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SET @uuid = UUID();
SELECT @uuid,uuid_to_bin(@uuid),uuid_to_bin(@uuid,TRUE);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706162657448.png" alt="image-20220706162657448"></p><p><strong>\u901A\u8FC7\u51FD\u6570uuid_to_bin(@uuid,true)\u5C06UUID\u8F6C\u5316\u4E3A\u6709\u5E8FUUID\u4E86</strong>\u3002\u5168\u5C40\u552F\u4E00 + \u5355\u8C03\u9012\u589E\uFF0C\u8FD9\u4E0D\u5C31\u662F\u6211\u4EEC\u60F3\u8981\u7684\u4E3B\u952E\uFF01</p><p><strong>\u6709\u5E8FUUID\u6027\u80FD\u6D4B\u8BD5</strong></p><p>16\u5B57\u8282\u7684\u6709\u5E8FUUID\uFF0C\u76F8\u6BD4\u4E4B\u524D8\u5B57\u8282\u7684\u81EA\u589EID\uFF0C\u6027\u80FD\u548C\u5B58\u50A8\u7A7A\u95F4\u5BF9\u6BD4\u7A76\u7ADF\u5982\u4F55\u5462\uFF1F</p><p>\u6211\u4EEC\u6765\u505A\u4E00\u4E2A\u6D4B\u8BD5\uFF0C\u63D2\u51651\u4EBF\u6761\u6570\u636E\uFF0C\u6BCF\u6761\u6570\u636E\u5360\u7528500\u5B57\u8282\uFF0C\u542B\u67093\u4E2A\u4E8C\u7EA7\u7D22\u5F15\uFF0C\u6700\u7EC8\u7684\u7ED3\u679C\u5982\u4E0B\u6240\u793A\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706162947613.png" alt="image-20220706162947613" style="zoom:67%;"><p>\u4ECE\u4E0A\u56FE\u53EF\u4EE5\u770B\u5230\u63D2\u51651\u4EBF\u6761\u6570\u636E\u6709\u5E8FUUID\u662F\u6700\u5FEB\u7684\uFF0C\u800C\u4E14\u5728\u5B9E\u9645\u4E1A\u52A1\u4F7F\u7528\u4E2D\u6709\u5E8FUUID\u5728 <code>\u4E1A\u52A1\u7AEF\u5C31\u53EF\u4EE5\u751F\u6210</code> \u3002\u8FD8\u53EF\u4EE5\u8FDB\u4E00\u6B65\u51CF\u5C11SQL\u7684\u4EA4\u4E92\u6B21\u6570\u3002</p><p>\u53E6\u5916\uFF0C\u867D\u7136\u6709\u5E8FUUID\u76F8\u6BD4\u81EA\u589EID\u591A\u4E868\u4E2A\u5B57\u8282\uFF0C\u4F46\u5B9E\u9645\u53EA\u589E\u5927\u4E863G\u7684\u5B58\u50A8\u7A7A\u95F4\uFF0C\u8FD8\u53EF\u4EE5\u63A5\u53D7\u3002</p><blockquote><p>\u5728\u5F53\u4ECA\u7684\u4E92\u8054\u7F51\u73AF\u5883\u4E2D\uFF0C\u975E\u5E38\u4E0D\u63A8\u8350\u81EA\u589EID\u4F5C\u4E3A\u4E3B\u952E\u7684\u6570\u636E\u5E93\u8BBE\u8BA1\u3002\u66F4\u63A8\u8350\u7C7B\u4F3C\u6709\u5E8FUUID\u7684\u5168\u5C40 \u552F\u4E00\u7684\u5B9E\u73B0\u3002</p><p>\u53E6\u5916\u5728\u771F\u5B9E\u7684\u4E1A\u52A1\u7CFB\u7EDF\u4E2D\uFF0C\u4E3B\u952E\u8FD8\u53EF\u4EE5\u52A0\u5165\u4E1A\u52A1\u548C\u7CFB\u7EDF\u5C5E\u6027\uFF0C\u5982\u7528\u6237\u7684\u5C3E\u53F7\uFF0C\u673A\u623F\u7684\u4FE1\u606F\u7B49\u3002\u8FD9\u6837 \u7684\u4E3B\u952E\u8BBE\u8BA1\u5C31\u66F4\u4E3A\u8003\u9A8C\u67B6\u6784\u5E08\u7684\u6C34\u5E73\u4E86\u3002</p></blockquote><p><strong>\u5982\u679C\u4E0D\u662FMySQL8.0 \u80BF\u4E48\u529E\uFF1F</strong></p><p>\u624B\u52A8\u8D4B\u503C\u5B57\u6BB5\u505A\u4E3B\u952E\uFF01</p><p>\u6BD4\u5982\uFF0C\u8BBE\u8BA1\u5404\u4E2A\u5206\u5E97\u7684\u4F1A\u5458\u8868\u7684\u4E3B\u952E\uFF0C\u56E0\u4E3A\u5982\u679C\u6BCF\u53F0\u673A\u5668\u5404\u81EA\u4EA7\u751F\u7684\u6570\u636E\u9700\u8981\u5408\u5E76\uFF0C\u5C31\u53EF\u80FD\u4F1A\u51FA\u73B0\u4E3B\u952E\u91CD\u590D\u7684\u95EE\u9898\u3002</p><p>\u53EF\u4EE5\u5728\u603B\u90E8 MySQL \u6570\u636E\u5E93\u4E2D\uFF0C\u6709\u4E00\u4E2A\u7BA1\u7406\u4FE1\u606F\u8868\uFF0C\u5728\u8FD9\u4E2A\u8868\u4E2D\u6DFB\u52A0\u4E00\u4E2A\u5B57\u6BB5\uFF0C\u4E13\u95E8\u7528\u6765\u8BB0\u5F55\u5F53\u524D\u4F1A\u5458\u7F16\u53F7\u7684\u6700\u5927\u503C\u3002</p><p>\u95E8\u5E97\u5728\u6DFB\u52A0\u4F1A\u5458\u7684\u65F6\u5019\uFF0C\u5148\u5230\u603B\u90E8 MySQL \u6570\u636E\u5E93\u4E2D\u83B7\u53D6\u8FD9\u4E2A\u6700\u5927\u503C\uFF0C\u5728\u8FD9\u4E2A\u57FA\u7840\u4E0A\u52A0 1\uFF0C\u7136\u540E\u7528\u8FD9\u4E2A\u503C \u4F5C\u4E3A\u65B0\u4F1A\u5458\u7684\u201Cid\u201D\uFF0C\u540C\u65F6\uFF0C\u66F4\u65B0\u603B\u90E8 MySQL \u6570\u636E\u5E93\u7BA1\u7406\u4FE1\u606F\u8868\u4E2D\u7684\u5F53\u524D\u4F1A\u5458\u7F16\u53F7\u7684\u6700\u5927\u503C\u3002</p><p>\u8FD9\u6837\u4E00\u6765\uFF0C\u5404\u4E2A\u95E8\u5E97\u6DFB\u52A0\u4F1A\u5458\u7684\u65F6\u5019\uFF0C\u90FD\u5BF9\u540C\u4E00\u4E2A\u603B\u90E8 MySQL \u6570\u636E\u5E93\u4E2D\u7684\u6570\u636E\u8868\u5B57\u6BB5\u8FDB\u884C\u64CD\u4F5C\uFF0C\u5C31\u89E3 \u51B3\u4E86\u5404\u95E8\u5E97\u6DFB\u52A0\u4F1A\u5458\u65F6\u4F1A\u5458\u7F16\u53F7\u51B2\u7A81\u7684\u95EE\u9898\u3002</p><h2 id="\u7B2C11\u7AE0-\u6570\u636E\u5E93\u7684\u8BBE\u8BA1\u89C4\u8303" tabindex="-1"><a class="header-anchor" href="#\u7B2C11\u7AE0-\u6570\u636E\u5E93\u7684\u8BBE\u8BA1\u89C4\u8303" aria-hidden="true">#</a> \u7B2C11\u7AE0_\u6570\u636E\u5E93\u7684\u8BBE\u8BA1\u89C4\u8303</h2><h3 id="_1-\u4E3A\u4EC0\u4E48\u9700\u8981\u6570\u636E\u5E93\u8BBE\u8BA1" tabindex="-1"><a class="header-anchor" href="#_1-\u4E3A\u4EC0\u4E48\u9700\u8981\u6570\u636E\u5E93\u8BBE\u8BA1" aria-hidden="true">#</a> 1. \u4E3A\u4EC0\u4E48\u9700\u8981\u6570\u636E\u5E93\u8BBE\u8BA1</h3><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706164201695.png" alt="image-20220706164201695" style="zoom:80%;float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706164359539.png" alt="image-20220706164359539" style="zoom:80%;float:left;"><h3 id="_2-\u8303-\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-\u8303-\u5F0F" aria-hidden="true">#</a> 2. \u8303 \u5F0F</h3><h5 id="_2-1-\u8303\u5F0F\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#_2-1-\u8303\u5F0F\u7B80\u4ECB" aria-hidden="true">#</a> 2.1 \u8303\u5F0F\u7B80\u4ECB</h5><p>\u5728\u5173\u7CFB\u578B\u6570\u636E\u5E93\u4E2D\uFF0C\u5173\u4E8E\u6570\u636E\u8868\u8BBE\u8BA1\u7684\u57FA\u672C\u539F\u5219\u3001\u89C4\u5219\u5C31\u79F0\u4E3A\u8303\u5F0F\u3002\u53EF\u4EE5\u7406\u89E3\u4E3A\uFF0C\u4E00\u5F20\u6570\u636E\u8868\u7684\u8BBE\u8BA1\u7ED3 \u6784\u9700\u8981\u6EE1\u8DB3\u7684\u67D0\u79CD\u8BBE\u8BA1\u6807\u51C6\u7684 \u7EA7\u522B \u3002\u8981\u60F3\u8BBE\u8BA1\u4E00\u4E2A\u7ED3\u6784\u5408\u7406\u7684\u5173\u7CFB\u578B\u6570\u636E\u5E93\uFF0C\u5FC5\u987B\u6EE1\u8DB3\u4E00\u5B9A\u7684\u8303\u5F0F\u3002</p><h5 id="_2-2-\u8303\u5F0F\u90FD\u5305\u62EC\u54EA\u4E9B" tabindex="-1"><a class="header-anchor" href="#_2-2-\u8303\u5F0F\u90FD\u5305\u62EC\u54EA\u4E9B" aria-hidden="true">#</a> 2.2 \u8303\u5F0F\u90FD\u5305\u62EC\u54EA\u4E9B</h5><p>\u76EE\u524D\u5173\u7CFB\u578B\u6570\u636E\u5E93\u6709\u516D\u79CD\u5E38\u89C1\u8303\u5F0F\uFF0C\u6309\u7167\u8303\u5F0F\u7EA7\u522B\uFF0C\u4ECE\u4F4E\u5230\u9AD8\u5206\u522B\u662F\uFF1A\u7B2C\u4E00\u8303\u5F0F\uFF081NF\uFF09\u3001\u7B2C\u4E8C\u8303\u5F0F \uFF082NF\uFF09\u3001\u7B2C\u4E09\u8303\u5F0F\uFF083NF\uFF09\u3001\u5DF4\u65AF-\u79D1\u5FB7\u8303\u5F0F\uFF08BCNF\uFF09\u3001\u7B2C\u56DB\u8303\u5F0F(4NF\uFF09\u548C\u7B2C\u4E94\u8303\u5F0F\uFF085NF\uFF0C\u53C8\u79F0\u5B8C\u7F8E\u8303\u5F0F\uFF09\u3002</p><p>\u6570\u636E\u5E93\u7684\u8303\u5F0F\u8BBE\u8BA1\u8D8A\u9AD8\u9636\uFF0C\u592F\u4F59\u5EA6\u5C31\u8D8A\u4F4E\uFF0C\u540C\u65F6\u9AD8\u9636\u7684\u8303\u5F0F\u4E00\u5B9A\u7B26\u5408\u4F4E\u9636\u8303\u5F0F\u7684\u8981\u6C42\uFF0C\u6EE1\u8DB3\u6700\u4F4E\u8981\u6C42\u7684\u8303\u5F0F\u662F\u7B2C\u4E00\u8303\u5F0F\uFF081NF\uFF09\u3002\u5728\u7B2C\u4E00\u8303\u5F0F\u7684\u57FA\u7840\u4E0A\u8FDB\u4E00\u6B65\u6EE1\u8DB3\u66F4\u591A\u89C4\u8303\u7684\u8981\u6C42\u79F0\u4E3A\u7B2C\u4E8C\u8303\u5F0F\uFF082NF\uFF09\uFF0C\u5176\u4F59\u8303\u5F0F\u4EE5\u6B64\u7C7B\u63A8\u3002</p><p>\u4E00\u822C\u6765\u8BF4\uFF0C\u5728\u5173\u7CFB\u578B\u6570\u636E\u5E93\u8BBE\u8BA1\u4E2D\uFF0C\u6700\u9AD8\u4E5F\u5C31\u9075\u5FAA\u5230<code>BCNF</code>, \u666E\u904D\u8FD8\u662F<code>3NF</code>\u3002\u4F46\u4E5F\u4E0D\u7EDD\u5BF9\uFF0C\u6709\u65F6\u5019\u4E3A\u4E86\u63D0\u9AD8\u67D0\u4E9B\u67E5\u8BE2\u6027\u80FD\uFF0C\u6211\u4EEC\u8FD8\u9700\u8981\u7834\u574F\u8303\u5F0F\u89C4\u5219\uFF0C\u4E5F\u5C31\u662F<code>\u53CD\u89C4\u8303\u5316</code>\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706165020939.png" alt="image-20220706165020939"></p><h5 id="_2-3-\u952E\u548C\u76F8\u5173\u5C5E\u6027\u7684\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_2-3-\u952E\u548C\u76F8\u5173\u5C5E\u6027\u7684\u6982\u5FF5" aria-hidden="true">#</a> 2.3 \u952E\u548C\u76F8\u5173\u5C5E\u6027\u7684\u6982\u5FF5</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706165231022.png" alt="image-20220706165231022" style="float:left;"><p><strong>\u4E3E\u4F8B:</strong></p><p>\u8FD9\u91CC\u6709\u4E24\u4E2A\u8868\uFF1A</p><p><code>\u7403\u5458\u8868(player)</code> \uFF1A\u7403\u5458\u7F16\u53F7 | \u59D3\u540D | \u8EAB\u4EFD\u8BC1\u53F7 | \u5E74\u9F84 | \u7403\u961F\u7F16\u53F7</p><p><code>\u7403\u961F\u8868(team) </code>\uFF1A\u7403\u961F\u7F16\u53F7 | \u4E3B\u6559\u7EC3 | \u7403\u961F\u6240\u5728\u5730</p><ul><li>\u8D85\u952E \uFF1A\u5BF9\u4E8E\u7403\u5458\u8868\u6765\u8BF4\uFF0C\u8D85\u952E\u5C31\u662F\u5305\u62EC\u7403\u5458\u7F16\u53F7\u6216\u8005\u8EAB\u4EFD\u8BC1\u53F7\u7684\u4EFB\u610F\u7EC4\u5408\uFF0C\u6BD4\u5982\uFF08\u7403\u5458\u7F16\u53F7\uFF09 \uFF08\u7403\u5458\u7F16\u53F7\uFF0C\u59D3\u540D\uFF09\uFF08\u8EAB\u4EFD\u8BC1\u53F7\uFF0C\u5E74\u9F84\uFF09\u7B49\u3002</li><li>\u5019\u9009\u952E \uFF1A\u5C31\u662F\u6700\u5C0F\u7684\u8D85\u952E\uFF0C\u5BF9\u4E8E\u7403\u5458\u8868\u6765\u8BF4\uFF0C\u5019\u9009\u952E\u5C31\u662F\uFF08\u7403\u5458\u7F16\u53F7\uFF09\u6216\u8005\uFF08\u8EAB\u4EFD\u8BC1\u53F7\uFF09\u3002</li><li>\u4E3B\u952E \uFF1A\u6211\u4EEC\u81EA\u5DF1\u9009\u5B9A\uFF0C\u4E5F\u5C31\u662F\u4ECE\u5019\u9009\u952E\u4E2D\u9009\u62E9\u4E00\u4E2A\uFF0C\u6BD4\u5982\uFF08\u7403\u5458\u7F16\u53F7\uFF09\u3002</li><li>\u5916\u952E \uFF1A\u7403\u5458\u8868\u4E2D\u7684\u7403\u961F\u7F16\u53F7\u3002</li><li>\u4E3B\u5C5E\u6027 \u3001 \u975E\u4E3B\u5C5E\u6027 \uFF1A\u5728\u7403\u5458\u8868\u4E2D\uFF0C\u4E3B\u5C5E\u6027\u662F\uFF08\u7403\u5458\u7F16\u53F7\uFF09\uFF08\u8EAB\u4EFD\u8BC1\u53F7\uFF09\uFF0C\u5176\u4ED6\u7684\u5C5E\u6027\uFF08\u59D3\u540D\uFF09 \uFF08\u5E74\u9F84\uFF09\uFF08\u7403\u961F\u7F16\u53F7\uFF09\u90FD\u662F\u975E\u4E3B\u5C5E\u6027\u3002</li></ul><h5 id="_2-4-\u7B2C\u4E00\u8303\u5F0F-1st-nf" tabindex="-1"><a class="header-anchor" href="#_2-4-\u7B2C\u4E00\u8303\u5F0F-1st-nf" aria-hidden="true">#</a> 2.4 \u7B2C\u4E00\u8303\u5F0F(1st NF)</h5><p>\u7B2C\u4E00\u8303\u5F0F\u4E3B\u8981\u786E\u4FDD\u6570\u636E\u5E93\u4E2D\u6BCF\u4E2A\u5B57\u6BB5\u7684\u503C\u5FC5\u987B\u5177\u6709<code>\u539F\u5B50\u6027</code>\uFF0C\u4E5F\u5C31\u662F\u8BF4\u6570\u636E\u8868\u4E2D\u6BCF\u4E2A\u5B57\u6BB5\u7684\u503C\u4E3A<code>\u4E0D\u53EF\u518D\u6B21\u62C6\u5206</code>\u7684\u6700\u5C0F\u6570\u636E\u5355\u5143\u3002</p><p>\u6211\u4EEC\u5728\u8BBE\u8BA1\u67D0\u4E2A\u5B57\u6BB5\u7684\u65F6\u5019\uFF0C\u5BF9\u4E8E\u5B57\u6BB5X\u6765\u8BF4\uFF0C\u4E0D\u80FD\u628A\u5B57\u6BB5X\u62C6\u5206\u6210\u5B57\u6BB5X-1\u548C\u5B57\u6BB5X-2\u3002\u4E8B\u5B9E\u4E0A\uFF0C\u4EFB\u4F55\u7684DBMS\u90FD\u4F1A\u6EE1\u8DB3\u7B2C\u4E00\u8303\u5F0F\u7684\u8981\u6C42\uFF0C\u4E0D\u4F1A\u5C06\u5B57\u6BB5\u8FDB\u884C\u62C6\u5206\u3002</p><p><strong>\u4E3E\u4F8B1\uFF1A</strong></p><p>\u5047\u8BBE\u4E00\u5BB6\u516C\u53F8\u8981\u5B58\u50A8\u5458\u5DE5\u7684\u59D3\u540D\u548C\u8054\u7CFB\u65B9\u5F0F\u3002\u5B83\u521B\u5EFA\u4E00\u4E2A\u5982\u4E0B\u8868\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706171057270.png" alt="image-20220706171057270"></p><p>\u8BE5\u8868\u4E0D\u7B26\u5408 1NF \uFF0C\u56E0\u4E3A\u89C4\u5219\u8BF4\u201C\u8868\u7684\u6BCF\u4E2A\u5C5E\u6027\u5FC5\u987B\u5177\u6709\u539F\u5B50\uFF08\u5355\u4E2A\uFF09\u503C\u201D\uFF0Clisi\u548Czhaoliu\u5458\u5DE5\u7684 emp_mobile \u503C\u8FDD\u53CD\u4E86\u8BE5\u89C4\u5219\u3002\u4E3A\u4E86\u4F7F\u8868\u7B26\u5408 1NF \uFF0C\u6211\u4EEC\u5E94\u8BE5\u6709\u5982\u4E0B\u8868\u6570\u636E\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706171130851.png" alt="image-20220706171130851"></p><p><strong>\u4E3E\u4F8B2\uFF1A</strong></p><p>user \u8868\u7684\u8BBE\u8BA1\u4E0D\u7B26\u5408\u7B2C\u4E00\u8303\u5F0F</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706171225292.png" alt="image-20220706171225292"></p><p>\u5176\u4E2D\uFF0Cuser_info\u5B57\u6BB5\u4E3A\u7528\u6237\u4FE1\u606F\uFF0C\u53EF\u4EE5\u8FDB\u4E00\u6B65\u62C6\u5206\u6210\u66F4\u5C0F\u7C92\u5EA6\u7684\u5B57\u6BB5\uFF0C\u4E0D\u7B26\u5408\u6570\u636E\u5E93\u8BBE\u8BA1\u5BF9\u7B2C\u4E00\u8303\u5F0F\u7684 \u8981\u6C42\u3002\u5C06user_info\u62C6\u5206\u540E\u5982\u4E0B\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706171242455.png" alt="image-20220706171242455"></p><p><strong>\u4E3E\u4F8B3\uFF1A</strong></p><p>\u5C5E\u6027\u7684\u539F\u5B50\u6027\u662F \u4E3B\u89C2\u7684 \u3002\u4F8B\u5982\uFF0CEmployees\u5173\u7CFB\u4E2D\u96C7\u5458\u59D3\u540D\u5E94\u5F53\u4F7F\u75281\u4E2A\uFF08fullname\uFF09\u30012\u4E2A\uFF08firstname \u548Clastname\uFF09\u8FD8\u662F3\u4E2A\uFF08firstname\u3001middlename\u548Clastname\uFF09\u5C5E\u6027\u8868\u793A\u5462\uFF1F\u7B54\u6848\u53D6\u51B3\u4E8E\u5E94\u7528\u7A0B\u5E8F\u3002\u5982\u679C\u5E94 \u7528\u7A0B\u5E8F\u9700\u8981\u5206\u522B\u5904\u7406\u96C7\u5458\u7684\u59D3\u540D\u90E8\u5206\uFF08\u5982\uFF1A\u7528\u4E8E\u641C\u7D22\u76EE\u7684\uFF09\uFF0C\u5219\u6709\u5FC5\u8981\u628A\u5B83\u4EEC\u5206\u5F00\u3002\u5426\u5219\uFF0C\u4E0D\u9700\u8981\u3002</p><p>\u88681\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706171442919.png" alt="image-20220706171442919"></p><p>\u88682\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220706171456873.png" alt="image-20220706171456873"></p><h5 id="_2-5-\u7B2C\u4E8C\u8303\u5F0F-2nd-nf" tabindex="-1"><a class="header-anchor" href="#_2-5-\u7B2C\u4E8C\u8303\u5F0F-2nd-nf" aria-hidden="true">#</a> 2.5 \u7B2C\u4E8C\u8303\u5F0F(2nd NF)</h5><p>\u7B2C\u4E8C\u8303\u5F0F\u8981\u6C42\uFF0C\u5728\u6EE1\u8DB3\u7B2C\u4E00\u8303\u5F0F\u7684\u57FA\u7840\u4E0A\uFF0C\u8FD8\u8981<strong>\u6EE1\u8DB3\u6570\u636E\u5E93\u91CC\u7684\u6BCF\u4E00\u6761\u6570\u636E\u8BB0\u5F55\uFF0C\u90FD\u662F\u53EF\u552F\u4E00\u6807\u8BC6\u7684\u3002\u800C\u4E14\u6240\u6709\u975E\u4E3B\u952E\u5B57\u6BB5\uFF0C\u90FD\u5FC5\u987B\u5B8C\u5168\u4F9D\u8D56\u4E3B\u952E\uFF0C\u4E0D\u80FD\u53EA\u4F9D\u8D56\u4E3B\u952E\u7684\u4E00\u90E8\u5206</strong>\u3002\u5982\u679C\u77E5\u9053\u4E3B\u952E\u7684\u6240\u6709\u5C5E\u6027\u7684\u503C\uFF0C\u5C31\u53EF\u4EE5\u68C0\u7D22\u5230\u4EFB\u4F55\u5143\u7EC4\uFF08\u884C\uFF09\u7684\u4EFB\u4F55\u5C5E\u6027\u7684\u4EFB\u4F55\u503C\u3002\uFF08\u8981\u6C42\u4E2D\u7684\u4E3B\u952E\uFF0C\u5176\u5B9E\u53EF\u4EE5\u6269\u5C55\u66FF\u6362\u4E3A\u5019\u9009\u952E\uFF09\u3002</p><p><strong>\u4E3E\u4F8B1\uFF1A</strong></p><p><code>\u6210\u7EE9\u8868</code> \uFF08\u5B66\u53F7\uFF0C\u8BFE\u7A0B\u53F7\uFF0C\u6210\u7EE9\uFF09\u5173\u7CFB\u4E2D\uFF0C\uFF08\u5B66\u53F7\uFF0C\u8BFE\u7A0B\u53F7\uFF09\u53EF\u4EE5\u51B3\u5B9A\u6210\u7EE9\uFF0C\u4F46\u662F\u5B66\u53F7\u4E0D\u80FD\u51B3\u5B9A\u6210\u7EE9\uFF0C\u8BFE \u7A0B\u53F7\u4E5F\u4E0D\u80FD\u51B3\u5B9A\u6210\u7EE9\uFF0C\u6240\u4EE5\u201C\uFF08\u5B66\u53F7\uFF0C\u8BFE\u7A0B\u53F7\uFF09\u2192\u6210\u7EE9\u201D\u5C31\u662F <code>\u5B8C\u5168\u4F9D\u8D56\u5173\u7CFB</code> \u3002</p><p><strong>\u4E3E\u4F8B2\uFF1A</strong></p><p><code>\u6BD4\u8D5B\u8868 player_game</code> \uFF0C\u91CC\u9762\u5305\u542B\u7403\u5458\u7F16\u53F7\u3001\u59D3\u540D\u3001\u5E74\u9F84\u3001\u6BD4\u8D5B\u7F16\u53F7\u3001\u6BD4\u8D5B\u65F6\u95F4\u548C\u6BD4\u8D5B\u573A\u5730\u7B49\u5C5E\u6027\uFF0C\u8FD9 \u91CC\u5019\u9009\u952E\u548C\u4E3B\u952E\u90FD\u4E3A\uFF08\u7403\u5458\u7F16\u53F7\uFF0C\u6BD4\u8D5B\u7F16\u53F7\uFF09\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u5019\u9009\u952E\uFF08\u6216\u4E3B\u952E\uFF09\u6765\u51B3\u5B9A\u5982\u4E0B\u7684\u5173\u7CFB\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>(\u7403\u5458\u7F16\u53F7, \u6BD4\u8D5B\u7F16\u53F7) \u2192 (\u59D3\u540D, \u5E74\u9F84, \u6BD4\u8D5B\u65F6\u95F4, \u6BD4\u8D5B\u573A\u5730\uFF0C\u5F97\u5206)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4F46\u662F\u8FD9\u4E2A\u6570\u636E\u8868\u4E0D\u6EE1\u8DB3\u7B2C\u4E8C\u8303\u5F0F\uFF0C\u56E0\u4E3A\u6570\u636E\u8868\u4E2D\u7684\u5B57\u6BB5\u4E4B\u95F4\u8FD8\u5B58\u5728\u7740\u5982\u4E0B\u7684\u5BF9\u5E94\u5173\u7CFB\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>(\u7403\u5458\u7F16\u53F7) \u2192 (\u59D3\u540D\uFF0C\u5E74\u9F84)

(\u6BD4\u8D5B\u7F16\u53F7) \u2192 (\u6BD4\u8D5B\u65F6\u95F4, \u6BD4\u8D5B\u573A\u5730)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BF9\u4E8E\u975E\u4E3B\u5C5E\u6027\u6765\u8BF4\uFF0C\u5E76\u975E\u5B8C\u5168\u4F9D\u8D56\u5019\u9009\u952E\u3002\u8FD9\u6837\u4F1A\u4EA7\u751F\u600E\u6837\u7684\u95EE\u9898\u5462\uFF1F</p><ol><li><code>\u6570\u636E\u5197\u4F59</code> \uFF1A\u5982\u679C\u4E00\u4E2A\u7403\u5458\u53EF\u4EE5\u53C2\u52A0 m \u573A\u6BD4\u8D5B\uFF0C\u90A3\u4E48\u7403\u5458\u7684\u59D3\u540D\u548C\u5E74\u9F84\u5C31\u91CD\u590D\u4E86 m-1 \u6B21\u3002\u4E00\u4E2A\u6BD4\u8D5B \u4E5F\u53EF\u80FD\u4F1A\u6709 n \u4E2A\u7403\u5458\u53C2\u52A0\uFF0C\u6BD4\u8D5B\u7684\u65F6\u95F4\u548C\u5730\u70B9\u5C31\u91CD\u590D\u4E86 n-1 \u6B21\u3002</li><li><code>\u63D2\u5165\u5F02\u5E38</code> \uFF1A\u5982\u679C\u6211\u4EEC\u60F3\u8981\u6DFB\u52A0\u4E00\u573A\u65B0\u7684\u6BD4\u8D5B\uFF0C\u4F46\u662F\u8FD9\u65F6\u8FD8\u6CA1\u6709\u786E\u5B9A\u53C2\u52A0\u7684\u7403\u5458\u90FD\u6709\u8C01\uFF0C\u90A3\u4E48\u5C31\u6CA1\u6CD5\u63D2\u5165\u3002</li><li><code>\u5220\u9664\u5F02\u5E38</code> \uFF1A\u5982\u679C\u6211\u8981\u5220\u9664\u67D0\u4E2A\u7403\u5458\u7F16\u53F7\uFF0C\u5982\u679C\u6CA1\u6709\u5355\u72EC\u4FDD\u5B58\u6BD4\u8D5B\u8868\u7684\u8BDD\uFF0C\u5C31\u4F1A\u540C\u65F6\u628A\u6BD4\u8D5B\u4FE1\u606F\u5220 \u9664\u6389\u3002</li><li><code>\u66F4\u65B0\u5F02\u5E38</code> \uFF1A\u5982\u679C\u6211\u4EEC\u8C03\u6574\u4E86\u67D0\u4E2A\u6BD4\u8D5B\u7684\u65F6\u95F4\uFF0C\u90A3\u4E48\u6570\u636E\u8868\u4E2D\u6240\u6709\u8FD9\u4E2A\u6BD4\u8D5B\u7684\u65F6\u95F4\u90FD\u9700\u8981\u8FDB\u884C\u8C03 \u6574\uFF0C\u5426\u5219\u5C31\u4F1A\u51FA\u73B0\u4E00\u573A\u6BD4\u8D5B\u65F6\u95F4\u4E0D\u540C\u7684\u60C5\u51B5\u3002</li></ol><p>\u4E3A\u4E86\u907F\u514D\u51FA\u73B0\u4E0A\u8FF0\u7684\u60C5\u51B5\uFF0C\u6211\u4EEC\u53EF\u4EE5\u628A\u7403\u5458\u6BD4\u8D5B\u8868\u8BBE\u8BA1\u4E3A\u4E0B\u9762\u7684\u4E09\u5F20\u8868\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707122639894.png" alt="image-20220707122639894"></p><p>\u8FD9\u6837\u7684\u8BDD\uFF0C\u6BCF\u5F20\u6570\u636E\u8868\u90FD\u7B26\u5408\u7B2C\u4E8C\u8303\u5F0F\uFF0C\u4E5F\u5C31\u907F\u514D\u4E86\u5F02\u5E38\u60C5\u51B5\u7684\u53D1\u751F\u3002</p><blockquote><p>1NF \u544A\u8BC9\u6211\u4EEC\u5B57\u6BB5\u5C5E\u6027\u9700\u8981\u662F\u539F\u5B50\u6027\u7684\uFF0C\u800C 2NF \u544A\u8BC9\u6211\u4EEC\u4E00\u5F20\u8868\u5C31\u662F\u4E00\u4E2A\u72EC\u7ACB\u7684\u5BF9\u8C61\uFF0C\u4E00\u5F20\u8868\u53EA\u8868\u8FBE\u4E00\u4E2A\u610F\u601D\u3002</p></blockquote><p><strong>\u4E3E\u4F8B3\uFF1A</strong></p><p>\u5B9A\u4E49\u4E86\u4E00\u4E2A\u540D\u4E3A Orders \u7684\u5173\u7CFB\uFF0C\u8868\u793A\u8BA2\u5355\u548C\u8BA2\u5355\u884C\u7684\u4FE1\u606F\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707123038469.png" alt="image-20220707123038469"></p><p>\u8FDD\u53CD\u4E86\u7B2C\u4E8C\u8303\u5F0F\uFF0C\u56E0\u4E3A\u6709\u975E\u4E3B\u952E\u5C5E\u6027\u4EC5\u4F9D\u8D56\u4E8E\u5019\u9009\u952E\uFF08\u6216\u4E3B\u952E\uFF09\u7684\u4E00\u90E8\u5206\u3002\u4F8B\u5982\uFF0C\u53EF\u4EE5\u4EC5\u901A\u8FC7orderid\u627E \u5230\u8BA2\u5355\u7684 orderdate\uFF0C\u4EE5\u53CA customerid \u548C companyname\uFF0C\u800C\u6CA1\u6709\u5FC5\u8981\u518D\u53BB\u4F7F\u7528productid\u3002</p><p>\u4FEE\u6539\uFF1A</p><p>Orders\u8868\u548COrderDetails\u8868\u5982\u4E0B\uFF0C\u6B64\u65F6\u7B26\u5408\u7B2C\u4E8C\u8303\u5F0F\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707123104009.png" alt="image-20220707123104009"></p><blockquote><p>\u5C0F\u7ED3\uFF1A\u7B2C\u4E8C\u8303\u5F0F\uFF082NF\uFF09\u8981\u6C42\u5B9E\u4F53\u7684\u5C5E\u6027\u5B8C\u5168\u4F9D\u8D56\u4E3B\u5173\u952E\u5B57\u3002\u5982\u679C\u5B58\u5728\u4E0D\u5B8C\u5168\u4F9D\u8D56\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u5C5E\u6027\u548C\u4E3B\u5173\u952E\u5B57\u7684\u8FD9\u4E00\u90E8\u5206\u5E94\u8BE5\u5206\u79BB\u51FA\u6765\u5F62\u6210\u4E00\u4E2A\u65B0\u7684\u5B9E\u4F53\uFF0C\u65B0\u5B9E\u4F53\u4E0E\u5143\u5B9E\u4F53\u4E4B\u95F4\u662F\u4E00\u5BF9\u591A\u7684\u5173\u7CFB\u3002</p></blockquote><h5 id="_2-6-\u7B2C\u4E09\u8303\u5F0F-3rd-nf" tabindex="-1"><a class="header-anchor" href="#_2-6-\u7B2C\u4E09\u8303\u5F0F-3rd-nf" aria-hidden="true">#</a> 2.6 \u7B2C\u4E09\u8303\u5F0F(3rd NF)</h5><p>\u7B2C\u4E09\u8303\u5F0F\u662F\u5728\u7B2C\u4E8C\u8303\u5F0F\u7684\u57FA\u7840\u4E0A\uFF0C\u786E\u4FDD\u6570\u636E\u8868\u4E2D\u7684\u6BCF\u4E00\u4E2A\u975E\u4E3B\u952E\u5B57\u6BB5\u90FD\u548C\u4E3B\u952E\u5B57\u6BB5\u76F4\u63A5\u76F8\u5173\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF0C<strong>\u8981\u6C42\u6570\u636E\u8868\u4E2D\u7684\u6240\u6709\u975E\u4E3B\u952E\u5B57\u6BB5\u4E0D\u80FD\u4F9D\u8D56\u4E8E\u5176\u4ED6\u975E\u4E3B\u952E\u5B57\u6BB5</strong>\u3002\uFF08\u5373\uFF0C\u4E0D\u80FD\u5B58\u5728\u975E\u4E3B\u5C5E\u6027A\u4F9D\u8D56\u4E8E\u975E\u4E3B\u5C5E\u6027B\uFF0C\u975E\u4E3B\u5C5E\u6027B\u4F9D\u8D56\u4E8E\u4E3B\u952EC\u7684\u60C5\u51B5\uFF0C\u5373\u5B58\u5728\u201CA-&gt;B-&gt;C&quot;\u7684\u51B3\u5B9A\u5173\u7CFB\uFF09\u901A\u4FD7\u5730\u8BB2\uFF0C\u8BE5\u89C4\u5219\u7684\u610F\u601D\u662F\u6240\u6709<code>\u975E\u4E3B\u952E\u5C5E\u6027</code>\u4E4B\u95F4\u4E0D\u80FD\u7531\u4F9D\u8D56\u5173\u7CFB\uFF0C\u5FC5\u987B<code>\u76F8\u4E92\u72EC\u7ACB</code>\u3002</p><p>\u8FD9\u91CC\u7684\u4E3B\u952E\u53EF\u4EE5\u6269\u5C55\u4E3A\u5019\u9009\u952E\u3002</p><p><strong>\u4E3E\u4F8B1\uFF1A</strong></p><p><code>\u90E8\u95E8\u4FE1\u606F\u8868</code> \uFF1A\u6BCF\u4E2A\u90E8\u95E8\u6709\u90E8\u95E8\u7F16\u53F7\uFF08dept_id\uFF09\u3001\u90E8\u95E8\u540D\u79F0\u3001\u90E8\u95E8\u7B80\u4ECB\u7B49\u4FE1\u606F\u3002</p><p><code>\u5458\u5DE5\u4FE1\u606F\u8868 </code>\uFF1A\u6BCF\u4E2A\u5458\u5DE5\u6709\u5458\u5DE5\u7F16\u53F7\u3001\u59D3\u540D\u3001\u90E8\u95E8\u7F16\u53F7\u3002\u5217\u51FA\u90E8\u95E8\u7F16\u53F7\u540E\u5C31\u4E0D\u80FD\u518D\u5C06\u90E8\u95E8\u540D\u79F0\u3001\u90E8\u95E8\u7B80\u4ECB \u7B49\u4E0E\u90E8\u95E8\u6709\u5173\u7684\u4FE1\u606F\u518D\u52A0\u5165\u5458\u5DE5\u4FE1\u606F\u8868\u4E2D\u3002</p><p>\u5982\u679C\u4E0D\u5B58\u5728\u90E8\u95E8\u4FE1\u606F\u8868\uFF0C\u5219\u6839\u636E\u7B2C\u4E09\u8303\u5F0F\uFF083NF\uFF09\u4E5F\u5E94\u8BE5\u6784\u5EFA\u5B83\uFF0C\u5426\u5219\u5C31\u4F1A\u6709\u5927\u91CF\u7684\u6570\u636E\u5197\u4F59\u3002</p><p><strong>\u4E3E\u4F8B2\uFF1A</strong></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707124011654.png" alt="image-20220707124011654"></p><p>\u5546\u54C1\u7C7B\u522B\u540D\u79F0\u4F9D\u8D56\u4E8E\u5546\u54C1\u7C7B\u522B\u7F16\u53F7\uFF0C\u4E0D\u7B26\u5408\u7B2C\u4E09\u8303\u5F0F\u3002</p><p>\u4FEE\u6539\uFF1A</p><p>\u88681\uFF1A\u7B26\u5408\u7B2C\u4E09\u8303\u5F0F\u7684 <code>\u5546\u54C1\u7C7B\u522B\u8868</code> \u7684\u8BBE\u8BA1</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707124040899.png" alt="image-20220707124040899"></p><p>\u88682\uFF1A\u7B26\u5408\u7B2C\u4E09\u8303\u5F0F\u7684 <code>\u5546\u54C1\u8868</code> \u7684\u8BBE\u8BA1</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707124058174.png" alt="image-20220707124058174"></p><p>\u5546\u54C1\u8868goods\u901A\u8FC7\u5546\u54C1\u7C7B\u522Bid\u5B57\u6BB5\uFF08category_id\uFF09\u4E0E\u5546\u54C1\u7C7B\u522B\u8868goods_category\u8FDB\u884C\u5173\u8054\u3002</p><p><strong>\u4E3E\u4F8B3\uFF1A</strong></p><p><code>\u7403\u5458player\u8868</code> \uFF1A\u7403\u5458\u7F16\u53F7\u3001\u59D3\u540D\u3001\u7403\u961F\u540D\u79F0\u548C\u7403\u961F\u4E3B\u6559\u7EC3\u3002\u73B0\u5728\uFF0C\u6211\u4EEC\u628A\u5C5E\u6027\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u753B\u51FA\u6765\uFF0C\u5982\u4E0B\u56FE\u6240\u793A:</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707124136228.png" alt="image-20220707124136228"></p><p>\u4F60\u80FD\u770B\u5230\u7403\u5458\u7F16\u53F7\u51B3\u5B9A\u4E86\u7403\u961F\u540D\u79F0\uFF0C\u540C\u65F6\u7403\u961F\u540D\u79F0\u51B3\u5B9A\u4E86\u7403\u961F\u4E3B\u6559\u7EC3\uFF0C\u975E\u4E3B\u5C5E\u6027\u7403\u961F\u4E3B\u6559\u7EC3\u5C31\u4F1A\u4F20\u9012\u4F9D \u8D56\u4E8E\u7403\u5458\u7F16\u53F7\uFF0C\u56E0\u6B64\u4E0D\u7B26\u5408 3NF \u7684\u8981\u6C42\u3002</p><p>\u5982\u679C\u8981\u8FBE\u5230 3NF \u7684\u8981\u6C42\uFF0C\u9700\u8981\u628A\u6570\u636E\u8868\u62C6\u6210\u4E0B\u9762\u8FD9\u6837\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707124152312.png" alt="image-20220707124152312"></p><p><strong>\u4E3E\u4F8B4\uFF1A</strong></p><p>\u4FEE\u6539\u7B2C\u4E8C\u8303\u5F0F\u4E2D\u7684\u4E3E\u4F8B3\u3002</p><p>\u6B64\u65F6\u7684Orders\u5173\u7CFB\u5305\u542B orderid\u3001orderdate\u3001customerid \u548C companyname \u5C5E\u6027\uFF0C\u4E3B\u952E\u5B9A\u4E49\u4E3A orderid\u3002 customerid \u548Ccompanyname\u5747\u4F9D\u8D56\u4E8E\u4E3B\u952E\u2014\u2014orderid\u3002\u4F8B\u5982\uFF0C\u4F60\u9700\u8981\u901A\u8FC7orderid\u4E3B\u952E\u6765\u67E5\u627E\u4EE3\u8868\u8BA2\u5355\u4E2D \u5BA2\u6237\u7684customerid\uFF0C\u540C\u6837\uFF0C\u4F60\u9700\u8981\u901A\u8FC7 orderid \u4E3B\u952E\u67E5\u627E\u8BA2\u5355\u4E2D\u5BA2\u6237\u7684\u516C\u53F8\u540D\u79F0\uFF08companyname\uFF09\u3002\u7136 \u800C\uFF0C customerid\u548Ccompanyname\u4E5F\u662F\u4E92\u76F8\u4F9D\u9760\u7684\u3002\u4E3A\u6EE1\u8DB3\u7B2C\u4E09\u8303\u5F0F\uFF0C\u53EF\u4EE5\u6539\u5199\u5982\u4E0B\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707124212114.png" alt="image-20220707124212114"></p><blockquote><p>\u7B26\u54083NF\u540E\u7684\u6570\u636E\u6A21\u578B\u901A\u4FD7\u5730\u8BB2\uFF0C2NF\u548C3NF\u901A\u5E38\u4EE5\u8FD9\u53E5\u8BDD\u6982\u62EC\uFF1A\u201C\u6BCF\u4E2A\u975E\u952E\u5C5E\u6027\u4F9D\u8D56\u4E8E\u952E\uFF0C\u4F9D\u8D56\u4E8E \u6574\u4E2A\u952E\uFF0C\u5E76\u4E14\u9664\u4E86\u952E\u522B\u65E0\u4ED6\u7269\u201D\u3002</p></blockquote><h5 id="_2-7-\u5C0F\u7ED3" tabindex="-1"><a class="header-anchor" href="#_2-7-\u5C0F\u7ED3" aria-hidden="true">#</a> 2.7 \u5C0F\u7ED3</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707124343085.png" alt="image-20220707124343085" style="zoom:80%;float:left;"><h3 id="_3-\u53CD\u8303\u5F0F\u5316" tabindex="-1"><a class="header-anchor" href="#_3-\u53CD\u8303\u5F0F\u5316" aria-hidden="true">#</a> 3. \u53CD\u8303\u5F0F\u5316</h3><h5 id="_3-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_3-1-\u6982\u8FF0" aria-hidden="true">#</a> 3.1 \u6982\u8FF0</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707124741675.png" alt="image-20220707124741675" style="zoom:80%;float:left;"><p><strong>\u89C4\u8303\u5316 vs \u6027\u80FD</strong></p><blockquote><ol><li>\u4E3A\u6EE1\u8DB3\u67D0\u79CD\u5546\u4E1A\u76EE\u6807 , \u6570\u636E\u5E93\u6027\u80FD\u6BD4\u89C4\u8303\u5316\u6570\u636E\u5E93\u66F4\u91CD\u8981</li><li>\u5728\u6570\u636E\u89C4\u8303\u5316\u7684\u540C\u65F6 , \u8981\u7EFC\u5408\u8003\u8651\u6570\u636E\u5E93\u7684\u6027\u80FD</li><li>\u901A\u8FC7\u5728\u7ED9\u5B9A\u7684\u8868\u4E2D\u6DFB\u52A0\u989D\u5916\u7684\u5B57\u6BB5\uFF0C\u4EE5\u5927\u91CF\u51CF\u5C11\u9700\u8981\u4ECE\u4E2D\u641C\u7D22\u4FE1\u606F\u6240\u9700\u7684\u65F6\u95F4</li><li>\u901A\u8FC7\u5728\u7ED9\u5B9A\u7684\u8868\u4E2D\u63D2\u5165\u8BA1\u7B97\u5217\uFF0C\u4EE5\u65B9\u4FBF\u67E5\u8BE2</li></ol></blockquote><h5 id="_3-2-\u5E94\u7528\u4E3E\u4F8B" tabindex="-1"><a class="header-anchor" href="#_3-2-\u5E94\u7528\u4E3E\u4F8B" aria-hidden="true">#</a> 3.2 \u5E94\u7528\u4E3E\u4F8B</h5><p><strong>\u4E3E\u4F8B1\uFF1A</strong></p><p>\u5458\u5DE5\u7684\u4FE1\u606F\u5B58\u50A8\u5728 <code>employees \u8868</code> \u4E2D\uFF0C\u90E8\u95E8\u4FE1\u606F\u5B58\u50A8\u5728 <code>departments \u8868</code> \u4E2D\u3002\u901A\u8FC7 employees \u8868\u4E2D\u7684 department_id\u5B57\u6BB5\u4E0E departments \u8868\u5EFA\u7ACB\u5173\u8054\u5173\u7CFB\u3002\u5982\u679C\u8981\u67E5\u8BE2\u4E00\u4E2A\u5458\u5DE5\u6240\u5728\u90E8\u95E8\u7684\u540D\u79F0\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>select employee_id,department_name
from employees e join departments d
on e.department_id = d.department_id;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u7ECF\u5E38\u9700\u8981\u8FDB\u884C\u8FD9\u4E2A\u64CD\u4F5C\uFF0C\u8FDE\u63A5\u67E5\u8BE2\u5C31\u4F1A\u6D6A\u8D39\u5F88\u591A\u65F6\u95F4\u3002\u53EF\u4EE5\u5728 employees \u8868\u4E2D\u589E\u52A0\u4E00\u4E2A\u5197\u4F59\u5B57\u6BB5 department_name\uFF0C\u8FD9\u6837\u5C31\u4E0D\u7528\u6BCF\u6B21\u90FD\u8FDB\u884C\u8FDE\u63A5\u64CD\u4F5C\u4E86\u3002</p><p><strong>\u4E3E\u4F8B2\uFF1A</strong></p><p>\u53CD\u8303\u5F0F\u5316\u7684 <code>goods\u5546\u54C1\u4FE1\u606F\u8868</code> \u8BBE\u8BA1\u5982\u4E0B\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707125118808.png" alt="image-20220707125118808"></p><p><strong>\u4E3E\u4F8B3\uFF1A</strong></p><p>\u6211\u4EEC\u6709 2 \u4E2A\u8868\uFF0C\u5206\u522B\u662F <code>\u5546\u54C1\u6D41\u6C34\u8868\uFF08atguigu.trans \uFF09</code>\u548C <code>\u5546\u54C1\u4FE1\u606F\u8868 \uFF08atguigu.goodsinfo\uFF09</code> \u3002\u5546\u54C1\u6D41\u6C34\u8868\u91CC\u6709 400 \u4E07\u6761\u6D41\u6C34\u8BB0\u5F55\uFF0C\u5546\u54C1\u4FE1\u606F\u8868\u91CC\u6709 2000 \u6761\u5546\u54C1\u8BB0\u5F55\u3002</p><p>\u5546\u54C1\u6D41\u6C34\u8868\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707125401029.png" alt="image-20220707125401029"></p><p>\u5546\u54C1\u4FE1\u606F\u8868\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707125447317.png" alt="image-20220707125447317"></p><p>\u65B0\u7684\u5546\u54C1\u6D41\u6C34\u8868\u5982\u4E0B\u6240\u793A\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707125500378.png" alt="image-20220707125500378"></p><p><strong>\u4E3E\u4F8B4\uFF1A</strong></p><p><code>\u8BFE\u7A0B\u8BC4\u8BBA\u8868 class_comment</code> \uFF0C\u5BF9\u5E94\u7684\u5B57\u6BB5\u540D\u79F0\u53CA\u542B\u4E49\u5982\u4E0B\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707125531172.png" alt="image-20220707125531172"></p><p><code>\u5B66\u751F\u8868 student</code> \uFF0C\u5BF9\u5E94\u7684\u5B57\u6BB5\u540D\u79F0\u53CA\u542B\u4E49\u5982\u4E0B\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707125545891.png" alt="image-20220707125545891" style="zoom:80%;"><p>\u5728\u5B9E\u9645\u5E94\u7528\u4E2D\uFF0C\u6211\u4EEC\u5728\u663E\u793A\u8BFE\u7A0B\u8BC4\u8BBA\u7684\u65F6\u5019\uFF0C\u901A\u5E38\u4F1A\u663E\u793A\u8FD9\u4E2A\u5B66\u751F\u7684\u6635\u79F0\uFF0C\u800C\u4E0D\u662F\u5B66\u751F ID\uFF0C\u56E0\u6B64\u5F53\u6211\u4EEC \u60F3\u8981\u67E5\u8BE2\u67D0\u4E2A\u8BFE\u7A0B\u7684\u524D 1000 \u6761\u8BC4\u8BBA\u65F6\uFF0C\u9700\u8981\u5173\u8054 class_comment \u548C student\u8FD9\u4E24\u5F20\u8868\u6765\u8FDB\u884C\u67E5\u8BE2\u3002</p><p><strong>\u5B9E\u9A8C\u6570\u636E\uFF1A\u6A21\u62DF\u4E24\u5F20\u767E\u4E07\u91CF\u7EA7\u7684\u6570\u636E\u8868</strong></p><p>\u4E3A\u4E86\u66F4\u597D\u5730\u8FDB\u884C SQL \u4F18\u5316\u5B9E\u9A8C\uFF0C\u6211\u4EEC\u9700\u8981\u7ED9\u5B66\u751F\u8868\u548C\u8BFE\u7A0B\u8BC4\u8BBA\u8868\u968F\u673A\u6A21\u62DF\u51FA\u767E\u4E07\u91CF\u7EA7\u7684\u6570\u636E\u3002\u6211\u4EEC\u53EF\u4EE5 \u901A\u8FC7\u5B58\u50A8\u8FC7\u7A0B\u6765\u5B9E\u73B0\u6A21\u62DF\u6570\u636E\u3002</p><p><strong>\u53CD\u8303\u5F0F\u4F18\u5316\u5B9E\u9A8C\u5BF9\u6BD4</strong></p><p>\u5982\u679C\u6211\u4EEC\u60F3\u8981\u67E5\u8BE2\u8BFE\u7A0B ID \u4E3A 10001 \u7684\u524D 1000 \u6761\u8BC4\u8BBA\uFF0C\u9700\u8981\u5199\u6210\u4E0B\u9762\u8FD9\u6837\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT p.comment_text, p.comment_time, stu.stu_name
FROM class_comment AS p LEFT JOIN student AS stu
ON p.stu_id = stu.stu_id
WHERE p.class_id = 10001
ORDER BY p.comment_id DESC
LIMIT 1000;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\uFF081000 \u6761\u6570\u636E\u884C\uFF09\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707125642908.png" alt="image-20220707125642908" style="zoom:80%;"><p>\u8FD0\u884C\u65F6\u957F\u4E3A 0.395 \u79D2\uFF0C\u5BF9\u4E8E\u7F51\u7AD9\u7684\u54CD\u5E94\u6765\u8BF4\uFF0C\u8FD9\u5DF2\u7ECF\u5F88\u6162\u4E86\uFF0C\u7528\u6237\u4F53\u9A8C\u4F1A\u975E\u5E38\u5DEE\u3002</p><p>\u5982\u679C\u6211\u4EEC\u60F3\u8981\u63D0\u5347\u67E5\u8BE2\u7684\u6548\u7387\uFF0C\u53EF\u4EE5\u5141\u8BB8\u9002\u5F53\u7684\u6570\u636E\u5197\u4F59\uFF0C\u4E5F\u5C31\u662F\u5728\u5546\u54C1\u8BC4\u8BBA\u8868\u4E2D\u589E\u52A0\u7528\u6237\u6635\u79F0\u5B57\u6BB5\uFF0C \u5728 class_comment \u6570\u636E\u8868\u7684\u57FA\u7840\u4E0A\u589E\u52A0 stu_name \u5B57\u6BB5\uFF0C\u5C31\u5F97\u5230\u4E86 class_comment2 \u6570\u636E\u8868\u3002</p><p>\u8FD9\u6837\u4E00\u6765\uFF0C\u53EA\u9700\u5355\u8868\u67E5\u8BE2\u5C31\u53EF\u4EE5\u5F97\u5230\u6570\u636E\u96C6\u7ED3\u679C\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT comment_text, comment_time, stu_name
FROM class_comment2
WHERE class_id = 10001
ORDER BY class_id DESC LIMIT 1000;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\uFF081000 \u6761\u6570\u636E\uFF09\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707125718469.png" alt="image-20220707125718469" style="zoom:80%;"><p>\u4F18\u5316\u4E4B\u540E\u53EA\u9700\u8981\u626B\u63CF\u4E00\u6B21\u805A\u96C6\u7D22\u5F15\u5373\u53EF\uFF0C\u8FD0\u884C\u65F6\u95F4\u4E3A 0.039 \u79D2\uFF0C\u67E5\u8BE2\u65F6\u95F4\u662F\u4E4B\u524D\u7684 1/10\u3002 \u4F60\u80FD\u770B\u5230\uFF0C \u5728\u6570\u636E\u91CF\u5927\u7684\u60C5\u51B5\u4E0B\uFF0C\u67E5\u8BE2\u6548\u7387\u4F1A\u6709\u663E\u8457\u7684\u63D0\u5347\u3002</p><h5 id="_3-3-\u53CD\u8303\u5F0F\u7684\u65B0\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_3-3-\u53CD\u8303\u5F0F\u7684\u65B0\u95EE\u9898" aria-hidden="true">#</a> 3.3 \u53CD\u8303\u5F0F\u7684\u65B0\u95EE\u9898</h5><ul><li>\u5B58\u50A8 \u7A7A\u95F4\u53D8\u5927\u4E86</li><li>\u4E00\u4E2A\u8868\u4E2D\u5B57\u6BB5\u505A\u4E86\u4FEE\u6539\uFF0C\u53E6\u4E00\u4E2A\u8868\u4E2D <code>\u5197\u4F59\u7684\u5B57\u6BB5</code> \u4E5F\u9700\u8981\u505A <code>\u540C\u6B65\u4FEE\u6539</code> \uFF0C\u5426\u5219 \u6570\u636E\u4E0D\u4E00\u81F4</li><li>\u82E5\u91C7\u7528\u5B58\u50A8\u8FC7\u7A0B\u6765\u652F\u6301\u6570\u636E\u7684\u66F4\u65B0\u3001\u5220\u9664\u7B49\u989D\u5916\u64CD\u4F5C\uFF0C\u5982\u679C\u66F4\u65B0\u9891\u7E41\uFF0C\u4F1A\u975E\u5E38 \u6D88\u8017\u7CFB\u7EDF\u8D44\u6E90</li><li>\u5728 \u6570\u636E\u91CF\u5C0F \u7684\u60C5\u51B5\u4E0B\uFF0C\u53CD\u8303\u5F0F\u4E0D\u80FD\u4F53\u73B0\u6027\u80FD\u7684\u4F18\u52BF\uFF0C\u53EF\u80FD\u8FD8\u4F1A\u8BA9\u6570\u636E\u5E93\u7684\u8BBE\u8BA1\u66F4\u52A0\u590D\u6742</li></ul><h5 id="_3-4-\u53CD\u8303\u5F0F\u7684\u9002\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_3-4-\u53CD\u8303\u5F0F\u7684\u9002\u7528\u573A\u666F" aria-hidden="true">#</a> 3.4 \u53CD\u8303\u5F0F\u7684\u9002\u7528\u573A\u666F</h5><p>\u5F53\u5197\u4F59\u4FE1\u606F\u6709\u4EF7\u503C\u6216\u8005\u80FD <code>\u5927\u5E45\u5EA6\u63D0\u9AD8\u67E5\u8BE2\u6548\u7387</code> \u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u624D\u4F1A\u91C7\u53D6\u53CD\u8303\u5F0F\u7684\u4F18\u5316\u3002</p><h6 id="_1-\u589E\u52A0\u5197\u4F59\u5B57\u6BB5\u7684\u5EFA\u8BAE" tabindex="-1"><a class="header-anchor" href="#_1-\u589E\u52A0\u5197\u4F59\u5B57\u6BB5\u7684\u5EFA\u8BAE" aria-hidden="true">#</a> 1. \u589E\u52A0\u5197\u4F59\u5B57\u6BB5\u7684\u5EFA\u8BAE</h6><p>\u589E\u52A0\u5197\u4F59\u5B57\u6BB5\u4E00\u5B9A\u8981\u7B26\u5408\u5982\u4E0B\u4E24\u4E2A\u6761\u4EF6\u3002\u53EA\u8981\u6EE1\u8DB3\u8FD9\u4E24\u4E2A\u6761\u4EF6\uFF0C\u624D\u53EF\u4EE5\u8003\u8651\u589E\u52A0\u592F\u4F59\u5B57\u6BB5\u3002</p><p>1\uFF09\u8FD9\u4E2A\u5197\u4F59\u5B57\u6BB5<code>\u4E0D\u9700\u8981\u7ECF\u5E38\u8FDB\u884C\u4FEE\u6539</code>\u3002</p><p>2\uFF09\u8FD9\u4E2A\u5197\u4F59\u5B57\u6BB5<code>\u67E5\u8BE2\u7684\u65F6\u5019\u4E0D\u53EF\u6216\u7F3A</code>\u3002</p><h6 id="_2-\u5386\u53F2\u5FEB\u7167\u3001\u5386\u53F2\u6570\u636E\u7684\u9700\u8981" tabindex="-1"><a class="header-anchor" href="#_2-\u5386\u53F2\u5FEB\u7167\u3001\u5386\u53F2\u6570\u636E\u7684\u9700\u8981" aria-hidden="true">#</a> 2. \u5386\u53F2\u5FEB\u7167\u3001\u5386\u53F2\u6570\u636E\u7684\u9700\u8981</h6><p>\u5728\u73B0\u5B9E\u751F\u6D3B\u4E2D\uFF0C\u6211\u4EEC\u7ECF\u5E38\u9700\u8981\u4E00\u4E9B\u5197\u4F59\u4FE1\u606F\uFF0C\u6BD4\u5982\u8BA2\u5355\u4E2D\u7684\u6536\u8D27\u4EBA\u4FE1\u606F\uFF0C\u5305\u62EC\u59D3\u540D\u3001\u7535\u8BDD\u548C\u5730\u5740\u7B49\u3002\u6BCF \u6B21\u53D1\u751F\u7684 <code>\u8BA2\u5355\u6536\u8D27\u4FE1\u606F</code> \u90FD\u5C5E\u4E8E <code>\u5386\u53F2\u5FEB\u7167</code> \uFF0C\u9700\u8981\u8FDB\u884C\u4FDD\u5B58\uFF0C\u4F46\u7528\u6237\u53EF\u4EE5\u968F\u65F6\u4FEE\u6539\u81EA\u5DF1\u7684\u4FE1\u606F\uFF0C\u8FD9\u65F6\u4FDD\u5B58\u8FD9 \u4E9B\u5197\u4F59\u4FE1\u606F\u662F\u975E\u5E38\u6709\u5FC5\u8981\u7684\u3002</p><p>\u53CD\u8303\u5F0F\u4F18\u5316\u4E5F\u5E38\u7528\u5728 <code>\u6570\u636E\u4ED3\u5E93</code> \u7684\u8BBE\u8BA1\u4E2D\uFF0C\u56E0\u4E3A\u6570\u636E\u4ED3\u5E93\u901A\u5E38<code>\u5B58\u50A8\u5386\u53F2\u6570\u636E</code> \uFF0C\u5BF9\u589E\u5220\u6539\u7684\u5B9E\u65F6\u6027\u8981\u6C42\u4E0D \u5F3A\uFF0C\u5BF9\u5386\u53F2\u6570\u636E\u7684\u5206\u6790\u9700\u6C42\u5F3A\u3002\u8FD9\u65F6\u9002\u5F53\u5141\u8BB8\u6570\u636E\u7684\u5197\u4F59\u5EA6\uFF0C\u66F4\u65B9\u4FBF\u8FDB\u884C\u6570\u636E\u5206\u6790\u3002</p><p>\u6211\u7B80\u5355\u603B\u7ED3\u4E0B\u6570\u636E\u4ED3\u5E93\u548C\u6570\u636E\u5E93\u5728\u4F7F\u7528\u4E0A\u7684\u533A\u522B\uFF1A</p><ol><li>\u6570\u636E\u5E93\u8BBE\u8BA1\u7684\u76EE\u7684\u5728\u4E8E<code>\u6355\u6349\u6570\u636E</code>\uFF0C\u800C\u6570\u636E\u4ED3\u5E93\u8BBE\u8BA1\u7684\u76EE\u7684\u5728\u4E8E<code>\u5206\u6790\u6570\u636E</code>\u3002</li><li>\u6570\u636E\u5E93\u5BF9\u6570\u636E\u7684<code>\u589E\u5220\u6539\u5B9E\u65F6\u6027</code>\u8981\u6C42\u5F3A\uFF0C\u9700\u8981\u5B58\u50A8\u5728\u7EBF\u7684\u7528\u6237\u6570\u636E\uFF0C\u800C\u6570\u636E\u4ED3\u5E93\u5B58\u50A8\u7684\u4E00\u822C\u662F<code>\u5386\u53F2\u6570\u636E</code>\u3002</li><li>\u6570\u636E\u5E93\u8BBE\u8BA1\u9700\u8981<code>\u5C3D\u91CF\u907F\u514D\u5197\u4F59</code>\uFF0C\u4F46\u4E3A\u4E86\u63D0\u9AD8\u67E5\u8BE2\u6548\u7387\u4E5F\u5141\u8BB8\u4E00\u5B9A\u7684<code>\u5197\u4F59\u5EA6</code>\uFF0C\u800C\u6570\u636E\u4ED3\u5E93\u5728\u8BBE\u8BA1\u4E0A\u66F4\u504F\u5411\u91C7\u7528\u53CD\u8303\u5F0F\u8BBE\u8BA1\uFF0C</li></ol><h3 id="_4-bcnf-\u5DF4\u65AF\u8303\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-bcnf-\u5DF4\u65AF\u8303\u5F0F" aria-hidden="true">#</a> 4. BCNF(\u5DF4\u65AF\u8303\u5F0F)</h3><p>\u4EBA\u4EEC\u57283NF\u7684\u57FA\u7840\u4E0A\u8FDB\u884C\u4E86\u6539\u8FDB\uFF0C\u63D0\u51FA\u4E86\u5DF4\u65AF\u8303\u5F0F\uFF08BCNF\uFF09\uFF0C\u9875\u811A\u5DF4\u65AF - \u79D1\u5FB7\u8303\u5F0F\uFF08Boyce - Codd Normal Form\uFF09\u3002BCNF\u88AB\u8BA4\u4E3A\u6CA1\u6709\u65B0\u7684\u8BBE\u8BA1\u89C4\u8303\u52A0\u5165\uFF0C\u53EA\u662F\u5BF9\u7B2C\u4E09\u8303\u5F0F\u4E2D\u8BBE\u8BA1\u89C4\u8303\u8981\u6C42\u66F4\u5F3A\uFF0C\u4F7F\u5F97\u6570\u636E\u5E93\u5197\u4F59\u5EA6\u66F4\u5C0F\u3002\u6240\u4EE5\uFF0C\u79F0\u4E3A\u662F<code>\u4FEE\u6B63\u7684\u7B2C\u4E09\u8303\u5F0F</code>\uFF0C\u6216<code>\u6269\u5145\u7684\u7B2C\u4E09\u8303\u5F0F</code>\uFF0CBCNF\u4E0D\u88AB\u79F0\u4E3A\u7B2C\u56DB\u8303\u5F0F\u3002</p><p>\u82E5\u4E00\u4E2A\u5173\u7CFB\u8FBE\u5230\u4E86\u7B2C\u4E09\u8303\u5F0F\uFF0C\u5E76\u4E14\u5B83\u53EA\u6709\u4E00\u4E2A\u5019\u9009\u952E\uFF0C\u6216\u8005\u5B83\u7684\u6BCF\u4E2A\u5019\u9009\u952E\u90FD\u662F\u5355\u5C5E\u6027\uFF0C\u5219\u8BE5\u5173\u7CFB\u81EA\u7136\u8FBE\u5230BC\u8303\u5F0F\u3002</p><p>\u4E00\u822C\u6765\u8BF4\uFF0C\u4E00\u4E2A\u6570\u636E\u5E93\u8BBE\u7B26\u54083NF\u6216\u8005BCNF\u5C31\u53EF\u4EE5\u4E86\u3002</p><p><strong>1. \u6848\u4F8B</strong></p><p>\u6211\u4EEC\u5206\u6790\u5982\u4E0B\u8868\u7684\u8303\u5F0F\u60C5\u51B5\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707131428597.png" alt="image-20220707131428597" style="zoom:80%;"><p>\u5728\u8FD9\u4E2A\u8868\u4E2D\uFF0C\u4E00\u4E2A\u4ED3\u5E93\u53EA\u6709\u4E00\u4E2A\u7BA1\u7406\u5458\uFF0C\u540C\u65F6\u4E00\u4E2A\u7BA1\u7406\u5458\u4E5F\u53EA\u7BA1\u7406\u4E00\u4E2A\u4ED3\u5E93\u3002\u6211\u4EEC\u5148\u6765\u68B3\u7406\u4E0B\u8FD9\u4E9B\u5C5E\u6027\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u3002</p><p>\u4ED3\u5E93\u540D\u51B3\u5B9A\u4E86\u7BA1\u7406\u5458\uFF0C\u7BA1\u7406\u5458\u4E5F\u51B3\u5B9A\u4E86\u4ED3\u5E93\u540D\uFF0C\u540C\u65F6\uFF08\u4ED3\u5E93\u540D\uFF0C\u7269\u54C1\u540D\uFF09\u7684\u5C5E\u6027\u96C6\u5408\u53EF\u4EE5\u51B3\u5B9A\u6570\u91CF\u8FD9\u4E2A \u5C5E\u6027\u3002\u8FD9\u6837\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u627E\u5230\u6570\u636E\u8868\u7684\u5019\u9009\u952E\u3002</p><p><code>\u5019\u9009\u952E </code>\uFF1A\u662F\uFF08\u7BA1\u7406\u5458\uFF0C\u7269\u54C1\u540D\uFF09\u548C\uFF08\u4ED3\u5E93\u540D\uFF0C\u7269\u54C1\u540D\uFF09\uFF0C\u7136\u540E\u6211\u4EEC\u4ECE\u5019\u9009\u952E\u4E2D\u9009\u62E9\u4E00\u4E2A\u4F5C\u4E3A\u4E3B\u952E \uFF0C\u6BD4 \u5982\uFF08\u4ED3\u5E93\u540D\uFF0C\u7269\u54C1\u540D\uFF09\u3002</p><p><code>\u4E3B\u5C5E\u6027</code> \uFF1A\u5305\u542B\u5728\u4EFB\u4E00\u5019\u9009\u952E\u4E2D\u7684\u5C5E\u6027\uFF0C\u4E5F\u5C31\u662F\u4ED3\u5E93\u540D\uFF0C\u7BA1\u7406\u5458\u548C\u7269\u54C1\u540D\u3002</p><p><code>\u975E\u4E3B\u5C5E\u6027</code> \uFF1A\u6570\u91CF\u8FD9\u4E2A\u5C5E\u6027\u3002</p><p><strong>2. \u662F\u5426\u7B26\u5408\u4E09\u8303\u5F0F</strong></p><p>\u5982\u4F55\u5224\u65AD\u4E00\u5F20\u8868\u7684\u8303\u5F0F\u5462\uFF1F\u6211\u4EEC\u9700\u8981\u6839\u636E\u8303\u5F0F\u7684\u7B49\u7EA7\uFF0C\u4ECE\u4F4E\u5230\u9AD8\u6765\u8FDB\u884C\u5224\u65AD\u3002</p><p>\u9996\u5148\uFF0C\u6570\u636E\u8868\u6BCF\u4E2A\u5C5E\u6027\u90FD\u662F\u539F\u5B50\u6027\u7684\uFF0C\u7B26\u5408 1NF \u7684\u8981\u6C42\uFF1B</p><p>\u5176\u6B21\uFF0C\u6570\u636E\u8868\u4E2D\u975E\u4E3B\u5C5E\u6027\u201D\u6570\u91CF\u201C\u90FD\u4E0E\u5019\u9009\u952E\u5168\u90E8\u4F9D\u8D56\uFF0C\uFF08\u4ED3\u5E93\u540D\uFF0C\u7269\u54C1\u540D\uFF09\u51B3\u5B9A\u6570\u91CF\uFF0C\uFF08\u7BA1\u7406\u5458\uFF0C\u7269\u54C1 \u540D\uFF09\u51B3\u5B9A\u6570\u91CF\u3002\u56E0\u6B64\uFF0C\u6570\u636E\u8868\u7B26\u5408 2NF \u7684\u8981\u6C42\uFF1B</p><p>\u6700\u540E\uFF0C\u6570\u636E\u8868\u4E2D\u7684\u975E\u4E3B\u5C5E\u6027\uFF0C\u4E0D\u4F20\u9012\u4F9D\u8D56\u4E8E\u5019\u9009\u952E\u3002\u56E0\u6B64\u7B26\u5408 3NF \u7684\u8981\u6C42\u3002</p><p><strong>3. \u5B58\u5728\u7684\u95EE\u9898</strong></p><p>\u65E2\u7136\u6570\u636E\u8868\u5DF2\u7ECF\u7B26\u5408\u4E86 3NF \u7684\u8981\u6C42\uFF0C\u662F\u4E0D\u662F\u5C31\u4E0D\u5B58\u5728\u95EE\u9898\u4E86\u5462\uFF1F\u6211\u4EEC\u6765\u770B\u4E0B\u9762\u7684\u60C5\u51B5\uFF1A</p><ol><li>\u589E\u52A0\u4E00\u4E2A\u4ED3\u5E93\uFF0C\u4F46\u662F\u8FD8\u6CA1\u6709\u5B58\u653E\u4EFB\u4F55\u7269\u54C1\u3002\u6839\u636E\u6570\u636E\u8868\u5B9E\u4F53\u5B8C\u6574\u6027\u7684\u8981\u6C42\uFF0C\u4E3B\u952E\u4E0D\u80FD\u6709\u7A7A\u503C\uFF0C\u56E0 \u6B64\u4F1A\u51FA\u73B0 \u63D2\u5165\u5F02\u5E38 \uFF1B</li><li>\u5982\u679C\u4ED3\u5E93\u66F4\u6362\u4E86\u7BA1\u7406\u5458\uFF0C\u6211\u4EEC\u5C31\u53EF\u80FD\u4F1A\u4FEE\u6539\u6570\u636E\u8868\u4E2D\u7684\u591A\u6761\u8BB0\u5F55 \uFF1B</li><li>\u5982\u679C\u4ED3\u5E93\u91CC\u7684\u5546\u54C1\u90FD\u5356\u7A7A\u4E86\uFF0C\u90A3\u4E48\u6B64\u65F6\u4ED3\u5E93\u540D\u79F0\u548C\u76F8\u5E94\u7684\u7BA1\u7406\u5458\u540D\u79F0\u4E5F\u4F1A\u968F\u4E4B\u88AB\u5220\u9664\u3002</li></ol><p>\u4F60\u80FD\u770B\u5230\uFF0C\u5373\u4FBF\u6570\u636E\u8868\u7B26\u5408 3NF \u7684\u8981\u6C42\uFF0C\u540C\u6837\u53EF\u80FD\u5B58\u5728\u63D2\u5165\uFF0C\u66F4\u65B0\u548C\u5220\u9664\u6570\u636E\u7684\u5F02\u5E38\u60C5\u51B5\u3002</p><p><strong>4. \u95EE\u9898\u89E3\u51B3</strong></p><p>\u9996\u5148\u6211\u4EEC\u9700\u8981\u786E\u8BA4\u9020\u6210\u5F02\u5E38\u7684\u539F\u56E0\uFF1A\u4E3B\u5C5E\u6027\u4ED3\u5E93\u540D\u5BF9\u4E8E\u5019\u9009\u952E\uFF08\u7BA1\u7406\u5458\uFF0C\u7269\u54C1\u540D\uFF09\u662F\u90E8\u5206\u4F9D\u8D56\u7684\u5173\u7CFB\uFF0C \u8FD9\u6837\u5C31\u6709\u53EF\u80FD\u5BFC\u81F4\u4E0A\u9762\u7684\u5F02\u5E38\u60C5\u51B5\u3002\u56E0\u6B64\u5F15\u5165BCNF\uFF0C<strong>\u5B83\u5728 3NF \u7684\u57FA\u7840\u4E0A\u6D88\u9664\u4E86\u4E3B\u5C5E\u6027\u5BF9\u5019\u9009\u952E\u7684\u90E8\u5206\u4F9D\u8D56\u6216\u8005\u4F20\u9012\u4F9D\u8D56\u5173\u7CFB</strong>\u3002</p><ul><li>\u5982\u679C\u5728\u5173\u7CFBR\u4E2D\uFF0CU\u4E3A\u4E3B\u952E\uFF0CA\u5C5E\u6027\u662F\u4E3B\u952E\u7684\u4E00\u4E2A\u5C5E\u6027\uFF0C\u82E5\u5B58\u5728A-&gt;Y\uFF0CY\u4E3A\u4E3B\u5C5E\u6027\uFF0C\u5219\u8BE5\u5173\u7CFB\u4E0D\u5C5E\u4E8E BCNF\u3002</li></ul><p>\u6839\u636E BCNF \u7684\u8981\u6C42\uFF0C\u6211\u4EEC\u9700\u8981\u628A\u4ED3\u5E93\u7BA1\u7406\u5173\u7CFB warehouse_keeper \u8868\u62C6\u5206\u6210\u4E0B\u9762\u8FD9\u6837\uFF1A</p><p><code>\u4ED3\u5E93\u8868</code> \uFF1A\uFF08\u4ED3\u5E93\u540D\uFF0C\u7BA1\u7406\u5458\uFF09</p><p><code>\u5E93\u5B58\u8868 </code>\uFF1A\uFF08\u4ED3\u5E93\u540D\uFF0C\u7269\u54C1\u540D\uFF0C\u6570\u91CF\uFF09</p><p>\u8FD9\u6837\u5C31\u4E0D\u5B58\u5728\u4E3B\u5C5E\u6027\u5BF9\u4E8E\u5019\u9009\u952E\u7684\u90E8\u5206\u4F9D\u8D56\u6216\u4F20\u9012\u4F9D\u8D56\uFF0C\u4E0A\u9762\u6570\u636E\u8868\u7684\u8BBE\u8BA1\u5C31\u7B26\u5408 BCNF\u3002</p><p>\u518D\u4E3E\u4F8B\uFF1A</p><p>\u6709\u4E00\u4E2A <code>\u5B66\u751F\u5BFC\u5E08\u8868</code> \uFF0C\u5176\u4E2D\u5305\u542B\u5B57\u6BB5\uFF1A\u5B66\u751FID\uFF0C\u4E13\u4E1A\uFF0C\u5BFC\u5E08\uFF0C\u4E13\u4E1AGPA\uFF0C\u8FD9\u5176\u4E2D\u5B66\u751FID\u548C\u4E13\u4E1A\u662F\u8054\u5408\u4E3B\u952E\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707132038425.png" alt="image-20220707132038425"></p><p>\u8FD9\u4E2A\u8868\u7684\u8BBE\u8BA1\u6EE1\u8DB3\u4E09\u8303\u5F0F\uFF0C\u4F46\u662F\u8FD9\u91CC\u5B58\u5728\u53E6\u4E00\u4E2A\u4F9D\u8D56\u5173\u7CFB\uFF0C\u201C\u4E13\u4E1A\u201D\u4F9D\u8D56\u4E8E\u201C\u5BFC\u5E08\u201D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u6BCF\u4E2A\u5BFC\u5E08\u53EA\u505A\u4E00\u4E2A\u4E13\u4E1A\u65B9\u9762\u7684\u5BFC\u5E08\uFF0C\u53EA\u8981\u77E5\u9053\u4E86\u662F\u54EA\u4E2A\u5BFC\u5E08\uFF0C\u6211\u4EEC\u81EA\u7136\u5C31\u77E5\u9053\u662F\u54EA\u4E2A\u4E13\u4E1A\u7684\u4E86\u3002</p><p>\u6240\u4EE5\u8FD9\u4E2A\u8868\u7684\u90E8\u5206\u4E3B\u952EMajor\u4F9D\u8D56\u4E8E\u975E\u4E3B\u952E\u5C5E\u6027Advisor\uFF0C\u90A3\u4E48\u6211\u4EEC\u53EF\u4EE5\u8FDB\u884C\u4EE5\u4E0B\u7684\u8C03\u6574\uFF0C\u62C6\u5206\u62102\u4E2A\u8868\uFF1A</p><p>\u5B66\u751F\u5BFC\u5E08\u8868\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707132344634.png" alt="image-20220707132344634"></p><p>\u5BFC\u5E08\u8868\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707132355841.png" alt="image-20220707132355841"></p><h3 id="_5-\u7B2C\u56DB\u8303\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-\u7B2C\u56DB\u8303\u5F0F" aria-hidden="true">#</a> 5. \u7B2C\u56DB\u8303\u5F0F</h3><p>\u591A\u503C\u4F9D\u8D56\u7684\u6982\u5FF5\uFF1A</p><ul><li><code>\u591A\u503C\u4F9D\u8D56</code>\u5373\u5C5E\u6027\u4E4B\u95F4\u7684\u4E00\u5BF9\u591A\u5173\u7CFB\uFF0C\u8BB0\u4E3AK\u2014&gt;\u2014&gt;A\u3002</li><li><code>\u51FD\u6570\u4F9D\u8D56</code>\u4E8B\u5B9E\u4E0A\u662F\u5355\u503C\u4F9D\u8D56\uFF0C\u6240\u4EE5\u4E0D\u80FD\u8868\u8FBE\u5C5E\u6027\u503C\u4E4B\u95F4\u7684\u4E00\u5BF9\u591A\u5173\u7CFB\u3002</li><li><code>\u5E73\u51E1\u7684\u591A\u503C\u4F9D\u8D56</code>\uFF1A\u5168\u96C6U=K+A\uFF0C\u4E00\u4E2AK\u53EF\u4EE5\u5BF9\u5E94\u4E8E\u591A\u4E2AA\uFF0C\u5373K\u2014&gt;\u2014&gt;A\u3002\u6B64\u65F6\u6574\u4E2A\u8868\u5C31\u662F\u4E00\u7EC4\u4E00\u5BF9\u591A\u5173\u7CFB\u3002</li><li><code>\u975E\u5E73\u51E1\u7684\u591A\u503C\u4F9D\u8D56</code>\uFF1A\u5168\u96C6U=K+A+B\uFF0C\u4E00\u4E2AK\u53EF\u4EE5\u5BF9\u5E94\u4E8E\u591A\u4E2AA\uFF0C\u4E5F\u53EF\u4EE5\u5BF9\u5E94\u4E8E\u591A\u4E2AB\uFF0CA\u4E0EB\u76F8\u4E92\u72EC\u7ACB\uFF0C\u5373K\u2014&gt;\u2014&gt;A\uFF0CK\u2014&gt;\u2014&gt;B\u3002\u6574\u4E2A\u8868\u6709\u591A\u7EC4\u4E00\u5BF9\u591A\u5173\u7CFB\uFF0C\u4E14\u6709\uFF1A&quot;\u4E00&quot;\u90E8\u5206\u662F\u76F8\u540C\u7684\u5C5E\u6027\u96C6\u5408\uFF0C\u201C\u591A\u201D\u90E8\u5206\u662F\u76F8\u4E92\u72EC\u7ACB\u7684\u5C5E\u6027\u96C6\u5408\u3002</li></ul><p>\u7B2C\u56DB\u8303\u5F0F\u5373\u5728\u6EE1\u8DB3\u5DF4\u65AF - \u79D1\u5FB7\u8303\u5F0F\uFF08BCNF\uFF09\u7684\u57FA\u7840\u4E0A\uFF0C\u6D88\u9664\u975E\u5E73\u51E1\u4E14\u975E\u51FD\u6570\u4F9D\u8D56\u7684\u591A\u503C\u4F9D\u8D56\uFF08\u5373\u628A\u540C\u4E00\u8868\u7684\u591A\u5BF9\u591A\u5173\u7CFB\u5220\u9664\uFF09\u3002</p><p>**\u4E3E\u4F8B1\uFF1A**\u804C\u5DE5\u8868(\u804C\u5DE5\u7F16\u53F7\uFF0C\u804C\u5DE5\u5B69\u5B50\u59D3\u540D\uFF0C\u804C\u5DE5\u9009\u4FEE\u8BFE\u7A0B)\u3002</p><p>\u5728\u8FD9\u4E2A\u8868\u4E2D\uFF0C\u540C\u4E00\u4E2A\u804C\u5DE5\u53EF\u80FD\u4F1A\u6709\u591A\u4E2A\u804C\u5DE5\u5B69\u5B50\u59D3\u540D\u3002\u540C\u6837\uFF0C\u540C\u4E00\u4E2A\u804C\u5DE5\u4E5F\u53EF\u80FD\u4F1A\u6709\u591A\u4E2A\u804C\u5DE5\u9009\u4FEE\u8BFE\u7A0B\uFF0C\u5373\u8FD9\u91CC\u5B58\u5728\u7740\u591A\u503C\u4E8B\u5B9E\uFF0C\u4E0D\u7B26\u5408\u7B2C\u56DB\u8303\u5F0F\u3002</p><p>\u5982\u679C\u8981\u7B26\u5408\u7B2C\u56DB\u8303\u5F0F\uFF0C\u53EA\u9700\u8981\u5C06\u4E0A\u8868\u5206\u4E3A\u4E24\u4E2A\u8868\uFF0C\u4F7F\u5B83\u4EEC\u53EA\u6709\u4E00\u4E2A\u591A\u503C\u4E8B\u5B9E\uFF0C\u4F8B\u5982\uFF1A <code>\u804C\u5DE5\u8868\u4E00</code> (\u804C\u5DE5\u7F16 \u53F7\uFF0C\u804C\u5DE5\u5B69\u5B50\u59D3\u540D)\uFF0C <code>\u804C\u5DE5\u8868\u4E8C</code>(\u804C\u5DE5\u7F16\u53F7\uFF0C\u804C\u5DE5\u9009\u4FEE\u8BFE\u7A0B)\uFF0C\u4E24\u4E2A\u8868\u90FD\u53EA\u6709\u4E00\u4E2A\u591A\u503C\u4E8B\u5B9E\uFF0C\u6240\u4EE5\u7B26\u5408\u7B2C\u56DB\u8303\u5F0F\u3002</p><p><strong>\u4E3E\u4F8B2\uFF1A</strong></p><p>\u6BD4\u5982\u6211\u4EEC\u5EFA\u7ACB\u8BFE\u7A0B\u3001\u6559\u5E08\u3001\u6559\u6750\u7684\u6A21\u578B\u3002\u6211\u4EEC\u89C4\u5B9A\uFF0C\u6BCF\u95E8\u8BFE\u7A0B\u6709\u5BF9\u5E94\u7684\u4E00\u7EC4\u6559\u5E08\uFF0C\u6BCF\u95E8\u8BFE\u7A0B\u4E5F\u6709\u5BF9\u5E94\u7684\u4E00\u7EC4\u6559\u6750\uFF0C\u4E00\u95E8\u8BFE\u7A0B\u4F7F\u7528\u7684\u6559\u6750\u548C\u6559\u5E08\u6CA1\u6709\u5173\u7CFB\u3002\u6211\u4EEC\u5EFA\u7ACB\u7684\u5173\u7CFB\u8868\u5982\u4E0B\uFF1A</p><p>\u8BFE\u7A0BID\uFF0C\u6559\u5E08ID\uFF0C\u6559\u6750ID\uFF1B\u8FD9\u4E09\u5217\u4F5C\u4E3A\u8054\u5408\u4E3B\u952E\u3002</p><p>\u4E3A\u4E86\u8868\u8FF0\u65B9\u4FBF\uFF0C\u6211\u4EEC\u7528Name\u4EE3\u66FFID\uFF0C\u8FD9\u6837\u66F4\u5BB9\u6613\u770B\u61C2\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707133830721.png" alt="image-20220707133830721"></p><p>\u8FD9\u4E2A\u8868\u9664\u4E86\u4E3B\u952E\uFF0C\u5C31\u6CA1\u6709\u5176\u4ED6\u5B57\u6BB5\u4E86\uFF0C\u6240\u4EE5\u80AF\u5B9A\u6EE1\u8DB3BC\u8303\u5F0F\uFF0C\u4F46\u662F\u5374\u5B58\u5728 <code>\u591A\u503C\u4F9D\u8D56</code> \u5BFC\u81F4\u7684\u5F02\u5E38\u3002</p><p>\u5047\u5982\u6211\u4EEC\u4E0B\u5B66\u671F\u60F3\u91C7\u7528\u4E00\u672C\u65B0\u7684\u82F1\u7248\u9AD8\u6570\u6559\u6750\uFF0C\u4F46\u662F\u8FD8\u6CA1\u786E\u5B9A\u5177\u4F53\u54EA\u4E2A\u8001\u5E08\u6765\u6559\uFF0C\u90A3\u4E48\u6211\u4EEC\u5C31\u65E0\u6CD5\u5728\u8FD9 \u4E2A\u8868\u4E2D\u7EF4\u62A4Course\u9AD8\u6570\u548CBook\u82F1\u7248\u9AD8\u6570\u6559\u6750\u7684\u7684\u5173\u7CFB\u3002</p><p>\u89E3\u51B3\u529E\u6CD5\u662F\u6211\u4EEC\u628A\u8FD9\u4E2A\u591A\u503C\u4F9D\u8D56\u7684\u8868\u62C6\u89E3\u62102\u4E2A\u8868\uFF0C\u5206\u522B\u5EFA\u7ACB\u5173\u7CFB\u3002\u8FD9\u662F\u6211\u4EEC\u62C6\u5206\u540E\u7684\u8868\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707134028730.png" alt="image-20220707134028730"></p><p>\u4EE5\u53CA</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707134220820.png" alt="image-20220707134220820"></p><h3 id="_6-\u7B2C\u4E94\u8303\u5F0F\u3001\u57DF\u952E\u8303\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-\u7B2C\u4E94\u8303\u5F0F\u3001\u57DF\u952E\u8303\u5F0F" aria-hidden="true">#</a> 6. \u7B2C\u4E94\u8303\u5F0F\u3001\u57DF\u952E\u8303\u5F0F</h3><p>\u9664\u4E86\u7B2C\u56DB\u8303\u5F0F\u5916\uFF0C\u6211\u4EEC\u8FD8\u6709\u66F4\u9AD8\u7EA7\u7684\u7B2C\u4E94\u8303\u5F0F\uFF08\u53C8\u79F0\u5B8C\u7F8E\u8303\u5F0F\uFF09\u548C\u57DF\u952E\u8303\u5F0F\uFF08DKNF\uFF09\u3002</p><p>\u5728\u6EE1\u8DB3\u7B2C\u56DB\u8303\u5F0F\uFF084NF\uFF09\u7684\u57FA\u7840\u4E0A\uFF0C\u6D88\u9664\u4E0D\u662F\u7531\u5019\u9009\u952E\u6240\u8574\u542B\u7684\u8FDE\u63A5\u4F9D\u8D56\u3002<strong>\u5982\u679C\u5173\u7CFB\u6A21\u5F0FR\u4E2D\u7684\u6BCF\u4E00\u4E2A\u8FDE \u63A5\u4F9D\u8D56\u5747\u7531R\u7684\u5019\u9009\u952E\u6240\u9690\u542B</strong>\uFF0C\u5219\u79F0\u6B64\u5173\u7CFB\u6A21\u5F0F\u7B26\u5408\u7B2C\u4E94\u8303\u5F0F\u3002</p><p>\u51FD\u6570\u4F9D\u8D56\u662F\u591A\u503C\u4F9D\u8D56\u7684\u4E00\u79CD\u7279\u6B8A\u7684\u60C5\u51B5\uFF0C\u800C\u591A\u503C\u4F9D\u8D56\u5B9E\u9645\u4E0A\u662F\u8FDE\u63A5\u4F9D\u8D56\u7684\u4E00\u79CD\u7279\u6B8A\u60C5\u51B5\u3002\u4F46\u8FDE\u63A5\u4F9D\u8D56\u4E0D \u50CF\u51FD\u6570\u4F9D\u8D56\u548C\u591A\u503C\u4F9D\u8D56\u53EF\u4EE5\u7531 <code>\u8BED\u4E49\u76F4\u63A5\u5BFC\u51FA</code> \uFF0C\u800C\u662F\u5728 <code>\u5173\u7CFB\u8FDE\u63A5\u8FD0\u7B97</code> \u65F6\u624D\u53CD\u6620\u51FA\u6765\u3002\u5B58\u5728\u8FDE\u63A5\u4F9D\u8D56\u7684\u5173\u7CFB \u6A21\u5F0F\u4ECD\u53EF\u80FD\u9047\u5230\u6570\u636E\u5197\u4F59\u53CA\u63D2\u5165\u3001\u4FEE\u6539\u3001\u5220\u9664\u5F02\u5E38\u7B49\u95EE\u9898\u3002</p><p>\u7B2C\u4E94\u8303\u5F0F\u5904\u7406\u7684\u662F <code>\u65E0\u635F\u8FDE\u63A5\u95EE\u9898</code> \uFF0C\u8FD9\u4E2A\u8303\u5F0F\u57FA\u672C <code>\u6CA1\u6709\u5B9E\u9645\u610F\u4E49</code> \uFF0C\u56E0\u4E3A\u65E0\u635F\u8FDE\u63A5\u5F88\u5C11\u51FA\u73B0\uFF0C\u800C\u4E14\u96BE\u4EE5\u5BDF\u89C9\u3002\u800C\u57DF\u952E\u8303\u5F0F\u8BD5\u56FE\u5B9A\u4E49\u4E00\u4E2A <code>\u7EC8\u6781\u8303\u5F0F</code> \uFF0C\u8BE5\u8303\u5F0F\u8003\u8651\u6240\u6709\u7684\u4F9D\u8D56\u548C\u7EA6\u675F\u7C7B\u578B\uFF0C\u4F46\u662F\u5B9E\u7528\u4EF7\u503C\u4E5F\u662F\u6700\u5C0F\u7684\uFF0C\u53EA\u5B58\u5728\u7406\u8BBA\u7814\u7A76\u4E2D\u3002</p><h3 id="_7-\u5B9E\u6218\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_7-\u5B9E\u6218\u6848\u4F8B" aria-hidden="true">#</a> 7. \u5B9E\u6218\u6848\u4F8B</h3><p>\u5546\u8D85\u8FDB\u8D27\u7CFB\u7EDF\u4E2D\u7684<code>\u8FDB\u8D27\u5355\u8868</code>\u8FDB\u884C\u5256\u6790\uFF1A</p><p>\u8FDB\u8D27\u5355\u8868\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707134636225.png" alt="image-20220707134636225"></p><p>\u8FD9\u4E2A\u8868\u4E2D\u7684\u5B57\u6BB5\u5F88\u591A\uFF0C\u8868\u91CC\u7684\u6570\u636E\u91CF\u4E5F\u5F88\u60CA\u4EBA\u3002\u5927\u91CF\u91CD\u590D\u5BFC\u81F4\u8868\u53D8\u5F97\u5E9E\u5927\uFF0C\u6548\u7387\u6781\u4F4E\u3002\u5982\u4F55\u6539\u9020\uFF1F</p><blockquote><p>\u5728\u5B9E\u9645\u5DE5\u4F5C\u573A\u666F\u4E2D\uFF0C\u8FD9\u79CD\u7531\u4E8E\u6570\u636E\u8868\u7ED3\u6784\u8BBE\u8BA1\u4E0D\u5408\u7406\uFF0C\u800C\u5BFC\u81F4\u7684\u6570\u636E\u91CD\u590D\u7684\u73B0\u8C61\u5E76\u4E0D\u5C11\u89C1\u3002\u5F80\u5F80\u662F\u7CFB\u7EDF\u867D\u7136\u80FD\u591F\u8FD0\u884C\uFF0C\u627F\u8F7D\u80FD\u529B\u5374\u5F88\u5DEE\uFF0C\u7A0D\u5FAE\u6709\u70B9\u6D41\u91CF\uFF0C\u5C31\u4F1A\u51FA\u73B0\u5185\u5B58\u4E0D\u8DB3\u3001CPU\u4F7F\u7528\u7387\u98D9\u5347\u7684\u60C5\u51B5\uFF0C\u751A\u81F3\u4F1A\u5BFC\u81F4\u6574\u4E2A\u9879\u76EE\u5931\u8D25\u3002</p></blockquote><h5 id="_7-1-\u8FED\u4EE31\u6B21-\u8003\u86511nf" tabindex="-1"><a class="header-anchor" href="#_7-1-\u8FED\u4EE31\u6B21-\u8003\u86511nf" aria-hidden="true">#</a> 7.1 \u8FED\u4EE31\u6B21\uFF1A\u8003\u86511NF</h5><p>\u7B2C\u4E00\u8303\u5F0F\u8981\u6C42\uFF1A<strong>\u6240\u6709\u7684\u5B57\u6BB5\u90FD\u662F\u57FA\u672C\u6570\u636E\u7C7B\u578B\uFF0C\u4E0D\u53EF\u8FDB\u884C\u62C6\u5206</strong>\u3002\u8FD9\u91CC\u9700\u8981\u786E\u8BA4\uFF0C\u6240\u6709\u7684\u5217\u4E2D\uFF0C\u6BCF\u4E2A\u5B57\u6BB5\u53EA\u5305\u542B\u4E00\u79CD\u6570\u636E\u3002</p><p>\u8FD9\u5F20\u8868\u91CC\uFF0C\u6211\u4EEC\u628A\u201Cproperty&quot;\u8FD9\u4E00\u5B57\u6BB5\uFF0C\u62C6\u5206\u6210\u201Dspecification (\u89C4\u683C)&quot; \u548C &quot;unit (\u5355\u4F4D)&quot;\uFF0C\u8FD9\u4E24\u4E2A\u5B57\u6BB5\u5982\u4E0B\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707154400580.png" alt="image-20220707154400580"></p><h5 id="_7-2-\u8FED\u4EE32\u6B21-\u8003\u86512nf" tabindex="-1"><a class="header-anchor" href="#_7-2-\u8FED\u4EE32\u6B21-\u8003\u86512nf" aria-hidden="true">#</a> 7.2 \u8FED\u4EE32\u6B21\uFF1A\u8003\u86512NF</h5><p>\u7B2C\u4E8C\u8303\u5F0F\u8981\u6C42\uFF0C\u5728\u6EE1\u8DB3\u7B2C\u4E00\u8303\u5F0F\u7684\u57FA\u7840\u4E0A\uFF0C<strong>\u8FD8\u8981\u6EE1\u8DB3\u6570\u636E\u8868\u91CC\u7684\u6BCF\u4E00\u6761\u6570\u636E\u8BB0\u5F55\uFF0C\u90FD\u662F\u53EF\u552F\u4E00\u6807\u8BC6\u7684\u3002\u800C\u4E14\u6240\u6709\u5B57\u6BB5\uFF0C\u90FD\u5FC5\u987B\u5B8C\u5168\u4F9D\u8D56\u4E3B\u952E\uFF0C\u4E0D\u80FD\u53EA\u4F9D\u8D56\u4E3B\u952E\u7684\u4E00\u90E8\u5206</strong>\u3002</p><p>\u7B2C1\u6B65\uFF0C\u5C31\u662F\u8981\u786E\u5B9A\u8FD9\u4E2A\u8868\u7684\u4E3B\u952E\u3002\u901A\u8FC7\u89C2\u5BDF\u53D1\u73B0\uFF0C\u5B57\u6BB5\u201Clistnumber\uFF08\u5355\u53F7\uFF09&quot;+&quot;barcode\uFF08\u6761\u7801\uFF09&quot;\u53EF\u4EE5\u552F\u4E00\u6807\u8BC6\u6BCF\u4E00\u6761\u8BB0\u5F55\uFF0C\u53EF\u4EE5\u4F5C\u4E3A\u4E3B\u952E\u3002</p><p>\u7B2C2\u6B65\uFF0C\u786E\u5B9A\u597D\u4E86\u4E3B\u952E\u4EE5\u540E\uFF0C\u5224\u65AD\u54EA\u4E9B\u5B57\u6BB5\u5B8C\u5168\u4F9D\u8D56\u4E3B\u952E\uFF0C\u54EA\u4E9B\u5B57\u6BB5\u53EA\u4F9D\u8D56\u4E8E\u4E3B\u952E\u7684\u4E00\u90E8\u5206\u3002\u628A\u53EA\u4F9D\u8D56\u4E8E\u4E3B\u952E\u4E00\u90E8\u5206\u7684\u5B57\u6BB5\u62C6\u51FA\u53BB\uFF0C\u5F62\u6210\u65B0\u7684\u6570\u636E\u8868\u3002</p><p>\u9996\u5148\uFF0C\u8FDB\u8D27\u5355\u660E\u7EC6\u8868\u91CC\u9762\u7684&quot;goodsname(\u540D\u79F0)&quot;&quot;specification(\u89C4\u683C)&quot;&quot;unit(\u5355\u4F4D)&quot;\u8FD9\u4E9B\u4FE1\u606F\u662F\u5546\u54C1\u7684\u5C5E\u6027\uFF0C\u53EA\u4F9D\u8D56\u4E8E&quot;batcode(\u6761\u7801)&quot;\uFF0C\u4E0D\u5B8C\u5168\u4F9D\u8D56\u4E3B\u952E\uFF0C\u53EF\u4EE5\u62C6\u5206\u51FA\u53BB\u3002\u6211\u4EEC\u628A\u8FD93\u4E2A\u5B57\u6BB5\u52A0\u4E0A\u5B83\u4EEC\u6240\u4F9D\u8D56\u7684\u5B57\u6BB5&quot;barcode(\u6761\u7801)&quot;\uFF0C\u62C6\u5206\u5F62\u6210\u65B0\u7684\u6570\u636E\u8868&quot;\u5546\u54C1\u4FE1\u606F\u8868&quot;\u3002</p><p>\u8FD9\u6837\u4E00\u6765\uFF0C\u539F\u6765\u7684\u6570\u636E\u8868\u5C31\u88AB\u62C6\u5206\u6210\u4E86\u4E24\u4E2A\u8868\u3002</p><p>\u5546\u54C1\u4FE1\u606F\u8868\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707163807205.png" alt="image-20220707163807205" style="float:left;"><p>\u8FDB\u8D27\u5355\u8868\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707163828614.png" alt="image-20220707163828614" style="float:left;"><p>\u6B64\u5916\uFF0C\u5B57\u6BB5&quot;supplierid(\u4F9B\u5E94\u5546\u7F16\u53F7)&quot;&quot;suppliername(\u4F9B\u5E94\u5546\u540D\u79F0)&quot;&quot;stock(\u4ED3\u5E93)\u201C\u53EA\u4F9D\u8D56\u4E8E&quot;listnumber(\u5355\u53F7)&quot;\uFF0C\u4E0D\u5B8C\u5168\u4F9D\u8D56\u4E8E\u4E3B\u952E\uFF0C\u6240\u4EE5\uFF0C\u6211\u4EEC\u53EF\u4EE5\u628A&quot;supplierid&quot;&quot;suppliername&quot;&quot;stock&quot;\u8FD93\u4E2A\u5B57\u6BB5\u62C6\u51FA\u53BB\uFF0C\u518D\u52A0\u4E0A\u5B83\u4EEC\u4F9D\u8D56\u7684\u5B57\u6BB5&quot;listnumber(\u5355\u53F7)&quot;\uFF0C\u5C31\u5F62\u6210\u4E86\u4E00\u4E2A\u65B0\u7684\u8868&quot;\u8FDB\u8D27\u5355\u5934\u8868&quot;\u3002\u5269\u4E0B\u7684\u5B57\u6BB5\uFF0C\u4F1A\u7EC4\u6210\u65B0\u7684\u8868\uFF0C\u6211\u4EEC\u53EB\u5B83&quot;\u8FDB\u8D27\u5355\u660E\u7EC6\u8868&quot;\u3002</p><p>\u539F\u6765\u7684\u6570\u636E\u8868\u5C31\u62C6\u5206\u6210\u4E863\u4E2A\u8868\u3002</p><p>\u8FDB\u8D27\u5355\u5934\u8868\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707164128704.png" alt="image-20220707164128704"></p><p>\u8FDB\u8D27\u5355\u660E\u7EC6\u8868\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707164146216.png" alt="image-20220707164146216"></p><p>\u5546\u54C1\u4FE1\u606F\u8868\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707164227845.png" alt="image-20220707164227845"></p><p>\u73B0\u5728\uFF0C\u6211\u4EEC\u518D\u6765\u5206\u6790\u4E00\u4E0B\u62C6\u5206\u540E\u76843\u4E2A\u8868\uFF0C\u4FDD\u8BC1\u8FD93\u4E2A\u8868\u90FD\u6EE1\u8DB3\u7B2C\u4E8C\u8303\u5F0F\u7684\u8981\u6C42\u3002</p><p>\u7B2C3\u6B65\uFF0C\u5728\u201C\u5546\u54C1\u4FE1\u606F\u8868\u201D\u4E2D\uFF0C\u5B57\u6BB5\u201Cbarcode&quot;\u662F\u6709<code>\u53EF\u80FD\u5B58\u5728\u91CD\u590D</code>\u7684\uFF0C\u6BD4\u5982\uFF0C\u7528\u6237\u95E8\u5E97\u53EF\u80FD\u6709\u6563\u88C5\u79F0\u91CD\u5546\u54C1\u548C\u81EA\u4EA7\u5546\u54C1\uFF0C\u4F1A\u5B58\u5728\u6761\u7801\u5171\u7528\u7684\u60C5\u51B5\u3002\u6240\u4EE5\uFF0C\u6240\u6709\u7684\u5B57\u6BB5\u90FD\u4E0D\u80FD\u552F\u4E00\u6807\u8BC6\u8868\u91CC\u7684\u8BB0\u5F55\u3002\u8FD9\u4E2A\u65F6\u5019\uFF0C\u6211\u4EEC\u5FC5\u987B\u7ED9\u8FD9\u4E2A\u8868\u52A0\u4E0A\u4E00\u4E2A\u4E3B\u952E\uFF0C\u6BD4\u5982\u8BF4\u662F<code>\u81EA\u589E\u5B57\u6BB5&quot;itemnumber&quot;</code>\u3002</p><h5 id="_7-3-\u8FED\u4EE33\u6B21-\u8003\u86513nf" tabindex="-1"><a class="header-anchor" href="#_7-3-\u8FED\u4EE33\u6B21-\u8003\u86513nf" aria-hidden="true">#</a> 7.3 \u8FED\u4EE33\u6B21\uFF1A\u8003\u86513NF</h5><p>\u6211\u4EEC\u7684\u8FDB\u8D27\u5355\u5934\u8868\uFF0C\u8FD8\u6709\u6570\u636E\u5197\u4F59\u7684\u53EF\u80FD\u3002\u56E0\u4E3A&quot;suppliername&quot;\u4F9D\u8D56&quot;supplierid&quot;\uFF0C\u90A3\u4E48\u5C31\u53EF\u4EE5\u6309\u7167\u7B2C\u4E09\u8303\u5F0F\u7684\u539F\u5219\u8FDB\u884C\u62C6\u5206\u4E86\u3002\u6211\u4EEC\u5C31\u8FDB\u4E00\u6B65\u62C6\u5206\u8FDB\u8D27\u5355\u5934\u8868\uFF0C\u628A\u5B83\u62C6\u89E3\u9648\u4F9B\u8D27\u5546\u8868\u548C\u8FDB\u8D27\u5355\u5934\u8868\u3002</p><p>\u4F9B\u8D27\u5546\u8868\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707165011050.png" alt="image-20220707165011050" style="float:left;"><p>\u8FDB\u8D27\u5355\u5934\u8868\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707165038108.png" alt="image-20220707165038108" style="float:left;"><p>\u8FD92\u4E2A\u8868\u90FD\u6EE1\u8DB3\u7B2C\u4E09\u8303\u5F0F\u7684\u8981\u6C42\u4E86\u3002</p><h5 id="_7-4-\u53CD\u8303\u5F0F\u5316-\u4E1A\u52A1\u4F18\u5148\u7684\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_7-4-\u53CD\u8303\u5F0F\u5316-\u4E1A\u52A1\u4F18\u5148\u7684\u539F\u5219" aria-hidden="true">#</a> 7.4 \u53CD\u8303\u5F0F\u5316\uFF1A\u4E1A\u52A1\u4F18\u5148\u7684\u539F\u5219</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707165459547.png" alt="image-20220707165459547" style="zoom:80%;float:left;"><p>\u56E0\u6B64\uFF0C\u6700\u540E\u6211\u4EEC\u53EF\u4EE5\u628A\u8FDB\u8D27\u5355\u8868\u62C6\u5206\u6210\u4E0B\u9762\u76844\u4E2A\u8868\uFF1A</p><p>\u4F9B\u8D27\u5546\u8868\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707165011050.png" alt="image-20220707165011050" style="float:left;"><p>\u8FDB\u8D27\u5355\u5934\u8868\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707165038108.png" alt="image-20220707165038108" style="float:left;"><p>\u8FDB\u8D27\u5355\u660E\u7EC6\u8868\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707164146216.png" alt="image-20220707164146216" style="zoom:80%;float:left;"><p>\u5546\u54C1\u4FE1\u606F\u8868\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707164227845.png" alt="image-20220707164227845" style="zoom:80%;float:left;"><p>\u8FD9\u6837\u4E00\u6765\uFF0C\u6211\u4EEC\u5C31\u907F\u514D\u4E86\u5197\u4F59\u6570\u636E\uFF0C\u800C\u4E14\u8FD8\u80FD\u591F\u6EE1\u8DB3\u4E1A\u52A1\u7684\u9700\u6C42\uFF0C\u8FD9\u6837\u7684\u6570\u636E\u5E93\u8BBE\u8BA1\uFF0C\u624D\u662F\u5408\u683C\u7684\u8BBE\u8BA1\u3002</p><h3 id="_8-er\u6A21\u578B" tabindex="-1"><a class="header-anchor" href="#_8-er\u6A21\u578B" aria-hidden="true">#</a> 8. ER\u6A21\u578B</h3><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707170027637.png" alt="image-20220707170027637" style="zoom:80%;float:left;"><h5 id="_8-1-er\u6A21\u578B\u5305\u62EC\u54EA\u4E9B\u8981\u7D20" tabindex="-1"><a class="header-anchor" href="#_8-1-er\u6A21\u578B\u5305\u62EC\u54EA\u4E9B\u8981\u7D20" aria-hidden="true">#</a> 8.1 ER\u6A21\u578B\u5305\u62EC\u54EA\u4E9B\u8981\u7D20\uFF1F</h5><p><strong>ER \u6A21\u578B\u4E2D\u6709\u4E09\u4E2A\u8981\u7D20\uFF0C\u5206\u522B\u662F\u5B9E\u4F53\u3001\u5C5E\u6027\u548C\u5173\u7CFB\u3002</strong></p><p><code>\u5B9E\u4F53</code> \uFF0C\u53EF\u4EE5\u770B\u505A\u662F\u6570\u636E\u5BF9\u8C61\uFF0C\u5F80\u5F80\u5BF9\u5E94\u4E8E\u73B0\u5B9E\u751F\u6D3B\u4E2D\u7684\u771F\u5B9E\u5B58\u5728\u7684\u4E2A\u4F53\u3002\u5728 ER \u6A21\u578B\u4E2D\uFF0C\u7528 \u77E9\u5F62 \u6765\u8868 \u793A\u3002\u5B9E\u4F53\u5206\u4E3A\u4E24\u7C7B\uFF0C\u5206\u522B\u662F \u5F3A\u5B9E\u4F53 \u548C \u5F31\u5B9E\u4F53 \u3002\u5F3A\u5B9E\u4F53\u662F\u6307\u4E0D\u4F9D\u8D56\u4E8E\u5176\u4ED6\u5B9E\u4F53\u7684\u5B9E\u4F53\uFF1B\u5F31\u5B9E\u4F53\u662F\u6307\u5BF9\u53E6 \u4E00\u4E2A\u5B9E\u4F53\u6709\u5F88\u5F3A\u7684\u4F9D\u8D56\u5173\u7CFB\u7684\u5B9E\u4F53\u3002</p><p><code>\u5C5E\u6027</code> \uFF0C\u5219\u662F\u6307\u5B9E\u4F53\u7684\u7279\u6027\u3002\u6BD4\u5982\u8D85\u5E02\u7684\u5730\u5740\u3001\u8054\u7CFB\u7535\u8BDD\u3001\u5458\u5DE5\u6570\u7B49\u3002\u5728 ER \u6A21\u578B\u4E2D\u7528 \u692D\u5706\u5F62 \u6765\u8868\u793A\u3002</p><p><code>\u5173\u7CFB</code> \uFF0C\u5219\u662F\u6307\u5B9E\u4F53\u4E4B\u95F4\u7684\u8054\u7CFB\u3002\u6BD4\u5982\u8D85\u5E02\u628A\u5546\u54C1\u5356\u7ED9\u987E\u5BA2\uFF0C\u5C31\u662F\u4E00\u79CD\u8D85\u5E02\u4E0E\u987E\u5BA2\u4E4B\u95F4\u7684\u8054\u7CFB\u3002\u5728 ER \u6A21 \u578B\u4E2D\u7528 \u83F1\u5F62 \u6765\u8868\u793A\u3002</p><p>\u6CE8\u610F\uFF1A\u5B9E\u4F53\u548C\u5C5E\u6027\u4E0D\u5BB9\u6613\u533A\u5206\u3002\u8FD9\u91CC\u63D0\u4F9B\u4E00\u4E2A\u539F\u5219\uFF1A\u6211\u4EEC\u8981\u4ECE\u7CFB\u7EDF\u6574\u4F53\u7684\u89D2\u5EA6\u51FA\u53D1\u53BB\u770B\uFF0C<strong>\u53EF\u4EE5\u72EC\u7ACB\u5B58\u5728\u7684\u662F\u5B9E\u4F53\uFF0C\u4E0D\u53EF\u518D\u5206\u7684\u662F\u5C5E\u6027</strong>\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5C5E\u6027\u4E0D\u80FD\u5305\u542B\u5176\u4ED6\u5C5E\u6027\u3002</p><h5 id="_8-2-\u5173\u7CFB\u7684\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#_8-2-\u5173\u7CFB\u7684\u7C7B\u578B" aria-hidden="true">#</a> 8.2 \u5173\u7CFB\u7684\u7C7B\u578B</h5><p>\u5728 ER \u6A21\u578B\u7684 3 \u4E2A\u8981\u7D20\u4E2D\uFF0C\u5173\u7CFB\u53C8\u53EF\u4EE5\u5206\u4E3A 3 \u79CD\u7C7B\u578B\uFF0C\u5206\u522B\u662F \u4E00\u5BF9\u4E00\u3001\u4E00\u5BF9\u591A\u3001\u591A\u5BF9\u591A\u3002</p><p><code>\u4E00\u5BF9\u4E00</code> \uFF1A\u6307\u5B9E\u4F53\u4E4B\u95F4\u7684\u5173\u7CFB\u662F\u4E00\u4E00\u5BF9\u5E94\u7684\uFF0C\u6BD4\u5982\u4E2A\u4EBA\u4E0E\u8EAB\u4EFD\u8BC1\u4FE1\u606F\u4E4B\u95F4\u7684\u5173\u7CFB\u5C31\u662F\u4E00\u5BF9\u4E00\u7684\u5173\u7CFB\u3002\u4E00\u4E2A\u4EBA\u53EA\u80FD\u6709\u4E00\u4E2A\u8EAB\u4EFD\u8BC1\u4FE1\u606F\uFF0C\u4E00\u4E2A\u8EAB\u4EFD\u8BC1\u4FE1\u606F\u4E5F\u53EA\u5C5E\u4E8E\u4E00\u4E2A\u4EBA\u3002</p><p><code>\u4E00\u5BF9\u591A</code> \uFF1A\u6307\u4E00\u8FB9\u7684\u5B9E\u4F53\u901A\u8FC7\u5173\u7CFB\uFF0C\u53EF\u4EE5\u5BF9\u5E94\u591A\u4E2A\u53E6\u5916\u4E00\u8FB9\u7684\u5B9E\u4F53\u3002\u76F8\u53CD\uFF0C\u53E6\u5916\u4E00\u8FB9\u7684\u5B9E\u4F53\u901A\u8FC7\u8FD9\u4E2A\u5173\u7CFB\uFF0C\u5219\u53EA\u80FD\u5BF9\u5E94\u552F\u4E00\u7684\u4E00\u8FB9\u7684\u5B9E\u4F53\u3002\u6BD4\u5982\u8BF4\uFF0C\u6211\u4EEC\u65B0\u5EFA\u4E00\u4E2A\u73ED\u7EA7\u8868\uFF0C\u800C\u6BCF\u4E2A\u73ED\u7EA7\u90FD\u6709\u591A\u4E2A\u5B66\u751F\uFF0C\u6BCF\u4E2A\u5B66 \u751F\u5219\u5BF9\u5E94\u4E00\u4E2A\u73ED\u7EA7\uFF0C\u73ED\u7EA7\u5BF9\u5B66\u751F\u5C31\u662F\u4E00\u5BF9\u591A\u7684\u5173\u7CFB\u3002</p><p><code>\u591A\u5BF9\u591A</code> \uFF1A\u6307\u5173\u7CFB\u4E24\u8FB9\u7684\u5B9E\u4F53\u90FD\u53EF\u4EE5\u901A\u8FC7\u5173\u7CFB\u5BF9\u5E94\u591A\u4E2A\u5BF9\u65B9\u7684\u5B9E\u4F53\u3002\u6BD4\u5982\u5728\u8FDB\u8D27\u6A21\u5757\u4E2D\uFF0C\u4F9B\u8D27\u5546\u4E0E\u8D85\u5E02\u4E4B \u95F4\u7684\u5173\u7CFB\u5C31\u662F\u591A\u5BF9\u591A\u7684\u5173\u7CFB\uFF0C\u4E00\u4E2A\u4F9B\u8D27\u5546\u53EF\u4EE5\u7ED9\u591A\u4E2A\u8D85\u5E02\u4F9B\u8D27\uFF0C\u4E00\u4E2A\u8D85\u5E02\u4E5F\u53EF\u4EE5\u4ECE\u591A\u4E2A\u4F9B\u8D27\u5546\u90A3\u91CC\u91C7\u8D2D \u5546\u54C1\u3002\u518D\u6BD4\u5982\u4E00\u4E2A\u9009\u8BFE\u8868\uFF0C\u6709\u8BB8\u591A\u79D1\u76EE\uFF0C\u6BCF\u4E2A\u79D1\u76EE\u6709\u5F88\u591A\u5B66\u751F\u9009\uFF0C\u800C\u6BCF\u4E2A\u5B66\u751F\u53C8\u53EF\u4EE5\u9009\u62E9\u591A\u4E2A\u79D1\u76EE\uFF0C\u8FD9 \u5C31\u662F\u591A\u5BF9\u591A\u7684\u5173\u7CFB\u3002</p><h5 id="_8-3-\u5EFA\u6A21\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#_8-3-\u5EFA\u6A21\u5206\u6790" aria-hidden="true">#</a> 8.3 \u5EFA\u6A21\u5206\u6790</h5><p>ER \u6A21\u578B\u770B\u8D77\u6765\u6BD4\u8F83\u9EBB\u70E6\uFF0C\u4F46\u662F\u5BF9\u6211\u4EEC\u628A\u63A7\u9879\u76EE\u6574\u4F53\u975E\u5E38\u91CD\u8981\u3002\u5982\u679C\u4F60\u53EA\u662F\u5F00\u53D1\u4E00\u4E2A\u5C0F\u5E94\u7528\uFF0C\u6216\u8BB8\u7B80\u5355\u8BBE \u8BA1\u51E0\u4E2A\u8868\u591F\u7528\u4E86\uFF0C\u4E00\u65E6\u8981\u8BBE\u8BA1\u6709\u4E00\u5B9A\u89C4\u6A21\u7684\u5E94\u7528\uFF0C\u5728\u9879\u76EE\u7684\u521D\u59CB\u9636\u6BB5\uFF0C\u5EFA\u7ACB\u5B8C\u6574\u7684 ER \u6A21\u578B\u5C31\u975E\u5E38\u5173\u952E \u4E86\u3002\u5F00\u53D1\u5E94\u7528\u9879\u76EE\u7684\u5B9E\u8D28\uFF0C\u5176\u5B9E\u5C31\u662F \u5EFA\u6A21 \u3002</p><p>\u6211\u4EEC\u8BBE\u8BA1\u7684\u6848\u4F8B\u662F \u7535\u5546\u4E1A\u52A1 \uFF0C\u7531\u4E8E\u7535\u5546\u4E1A\u52A1\u592A\u8FC7\u5E9E\u5927\u4E14\u590D\u6742\uFF0C\u6240\u4EE5\u6211\u4EEC\u505A\u4E86\u4E1A\u52A1\u7B80\u5316\uFF0C\u6BD4\u5982\u9488\u5BF9 SKU\uFF08StockKeepingUnit\uFF0C\u5E93\u5B58\u91CF\u5355\u4F4D\uFF09\u548CSPU\uFF08Standard Product Unit\uFF0C\u6807\u51C6\u5316\u4EA7\u54C1\u5355\u5143\uFF09\u7684\u542B\u4E49\u4E0A\uFF0C\u6211 \u4EEC\u76F4\u63A5\u4F7F\u7528\u4E86SKU\uFF0C\u5E76\u6CA1\u6709\u63D0\u53CASPU\u7684\u6982\u5FF5\u3002\u672C\u6B21\u7535\u5546\u4E1A\u52A1\u8BBE\u8BA1\u603B\u5171\u67098\u4E2A\u5B9E\u4F53\uFF0C\u5982\u4E0B\u6240\u793A\u3002</p><ul><li>\u5730\u5740\u5B9E\u4F53</li><li>\u7528\u6237\u5B9E\u4F53</li><li>\u8D2D\u7269\u8F66\u5B9E\u4F53</li><li>\u8BC4\u8BBA\u5B9E\u4F53</li><li>\u5546\u54C1\u5B9E\u4F53</li><li>\u5546\u54C1\u5206\u7C7B\u5B9E\u4F53</li><li>\u8BA2\u5355\u5B9E\u4F53</li><li>\u8BA2\u5355\u8BE6\u60C5\u5B9E\u4F53</li></ul><p>\u5176\u4E2D\uFF0C \u7528\u6237 \u548C \u5546\u54C1\u5206\u7C7B \u662F\u5F3A\u5B9E\u4F53\uFF0C\u56E0\u4E3A\u5B83\u4EEC\u4E0D\u9700\u8981\u4F9D\u8D56\u5176\u4ED6\u4EFB\u4F55\u5B9E\u4F53\u3002\u800C\u5176\u4ED6\u5C5E\u4E8E\u5F31\u5B9E\u4F53\uFF0C\u56E0\u4E3A\u5B83\u4EEC \u867D\u7136\u90FD\u53EF\u4EE5\u72EC\u7ACB\u5B58\u5728\uFF0C\u4F46\u662F\u5B83\u4EEC\u90FD\u4F9D\u8D56\u7528\u6237\u8FD9\u4E2A\u5B9E\u4F53\uFF0C\u56E0\u6B64\u90FD\u662F\u5F31\u5B9E\u4F53\u3002\u77E5\u9053\u4E86\u8FD9\u4E9B\u8981\u7D20\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5 \u7ED9\u7535\u5546\u4E1A\u52A1\u521B\u5EFA ER \u6A21\u578B\u4E86\uFF0C\u5982\u56FE\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707170608782.png" alt="image-20220707170608782"></p><p>\u5728\u8FD9\u4E2A\u56FE\u4E2D\uFF0C\u5730\u5740\u548C\u7528\u6237\u4E4B\u95F4\u7684\u6DFB\u52A0\u5173\u7CFB\uFF0C\u662F\u4E00\u5BF9\u591A\u7684\u5173\u7CFB\uFF0C\u800C\u5546\u54C1\u548C\u5546\u54C1\u8BE6\u60C5\u793A\u4E00\u5BF91\u7684\u5173\u7CFB\uFF0C\u5546\u54C1\u548C \u8BA2\u5355\u662F\u591A\u5BF9\u591A\u7684\u5173\u7CFB\u3002 \u8FD9\u4E2A ER \u6A21\u578B\uFF0C\u5305\u62EC\u4E86 8\u4E2A\u5B9E\u4F53\u4E4B\u95F4\u7684 8\u79CD\u5173\u7CFB\u3002</p><p>\uFF081\uFF09\u7528\u6237\u53EF\u4EE5\u5728\u7535\u5546\u5E73\u53F0\u6DFB\u52A0\u591A\u4E2A\u5730\u5740\uFF1B</p><p>\uFF082\uFF09\u7528\u6237\u53EA\u80FD\u62E5\u6709\u4E00\u4E2A\u8D2D\u7269\u8F66\uFF1B</p><p>\uFF083\uFF09\u7528\u6237\u53EF\u4EE5\u751F\u6210\u591A\u4E2A\u8BA2\u5355\uFF1B</p><p>\uFF084\uFF09\u7528\u6237\u53EF\u4EE5\u53D1\u8868\u591A\u6761\u8BC4\u8BBA\uFF1B</p><p>\uFF085\uFF09\u4E00\u4EF6\u5546\u54C1\u53EF\u4EE5\u6709\u591A\u6761\u8BC4\u8BBA\uFF1B</p><p>\uFF086\uFF09\u6BCF\u4E00\u4E2A\u5546\u54C1\u5206\u7C7B\u5305\u542B\u591A\u79CD\u5546\u54C1\uFF1B</p><p>\uFF087\uFF09\u4E00\u4E2A\u8BA2\u5355\u53EF\u4EE5\u5305\u542B\u591A\u4E2A\u5546\u54C1\uFF0C\u4E00\u4E2A\u5546\u54C1\u53EF\u4EE5\u5728\u591A\u4E2A\u8BA2\u5355\u91CC\u3002</p><p>\uFF088\uFF09\u8BA2\u5355\u4E2D\u53C8\u5305\u542B\u591A\u4E2A\u8BA2\u5355\u8BE6\u60C5\uFF0C\u56E0\u4E3A\u4E00\u4E2A\u8BA2\u5355\u4E2D\u53EF\u80FD\u5305\u542B\u4E0D\u540C\u79CD\u7C7B\u7684\u5546\u54C1</p><h5 id="_8-4-er-\u6A21\u578B\u7684\u7EC6\u5316" tabindex="-1"><a class="header-anchor" href="#_8-4-er-\u6A21\u578B\u7684\u7EC6\u5316" aria-hidden="true">#</a> 8.4 ER \u6A21\u578B\u7684\u7EC6\u5316</h5><p>\u6709\u4E86\u8FD9\u4E2A ER \u6A21\u578B\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u4ECE\u6574\u4F53\u4E0A \u7406\u89E3 \u7535\u5546\u7684\u4E1A\u52A1\u4E86\u3002\u521A\u521A\u7684 ER \u6A21\u578B\u5C55\u793A\u4E86\u7535\u5546\u4E1A\u52A1\u7684\u6846\u67B6\uFF0C \u4F46\u662F\u53EA\u5305\u62EC\u4E86\u8BA2\u5355\uFF0C\u5730\u5740\uFF0C\u7528\u6237\uFF0C\u8D2D\u7269\u8F66\uFF0C\u8BC4\u8BBA\uFF0C\u5546\u54C1\uFF0C\u5546\u54C1\u5206\u7C7B\u548C\u8BA2\u5355\u8BE6\u60C5\u8FD9\u516B\u4E2A\u5B9E\u4F53\uFF0C\u4EE5\u53CA\u5B83\u4EEC\u4E4B \u95F4\u7684\u5173\u7CFB\uFF0C\u8FD8\u4E0D\u80FD\u5BF9\u5E94\u5230\u5177\u4F53\u7684\u8868\uFF0C\u4EE5\u53CA\u8868\u4E0E\u8868\u4E4B\u95F4\u7684\u5173\u8054\u3002\u6211\u4EEC\u9700\u8981\u628A \u5C5E\u6027\u52A0\u4E0A \uFF0C\u7528 \u692D\u5706 \u6765\u8868\u793A\uFF0C \u8FD9\u6837\u6211\u4EEC\u5F97\u5230\u7684 ER \u6A21\u578B\u5C31\u66F4\u52A0\u5B8C\u6574\u4E86\u3002</p><p>\u56E0\u6B64\uFF0C\u6211\u4EEC\u9700\u8981\u8FDB\u4E00\u6B65\u53BB\u8BBE\u8BA1\u4E00\u4E0B\u8FD9\u4E2A ER \u6A21\u578B\u7684\u5404\u4E2A\u5C40\u90E8\uFF0C\u4E5F\u5C31\u662F\u7EC6\u5316\u4E0B\u7535\u5546\u7684\u5177\u4F53\u4E1A\u52A1\u6D41\u7A0B\uFF0C\u7136\u540E\u628A \u5B83\u4EEC\u7EFC\u5408\u5230\u4E00\u8D77\uFF0C\u5F62\u6210\u4E00\u4E2A\u5B8C\u6574\u7684 ER \u6A21\u578B\u3002\u8FD9\u6837\u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u7406\u6E05\u6570\u636E\u5E93\u7684\u8BBE\u8BA1\u601D\u8DEF\u3002</p><p>\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u518D\u5206\u6790\u4E00\u4E0B\u5404\u4E2A\u5B9E\u4F53\u90FD\u6709\u54EA\u4E9B\u5C5E\u6027\uFF0C\u5982\u4E0B\u6240\u793A\u3002</p><p>\uFF081\uFF09 <code>\u5730\u5740\u5B9E\u4F53</code> \u5305\u62EC\u7528\u6237\u7F16\u53F7\u3001\u7701\u3001\u5E02\u3001\u5730\u533A\u3001\u6536\u4EF6\u4EBA\u3001\u8054\u7CFB\u7535\u8BDD\u3001\u662F\u5426\u662F\u9ED8\u8BA4\u5730\u5740\u3002</p><p>\uFF082\uFF09 <code>\u7528\u6237\u5B9E\u4F53</code> \u5305\u62EC\u7528\u6237\u7F16\u53F7\u3001\u7528\u6237\u540D\u79F0\u3001\u6635\u79F0\u3001\u7528\u6237\u5BC6\u7801\u3001\u624B\u673A\u53F7\u3001\u90AE\u7BB1\u3001\u5934\u50CF\u3001\u7528\u6237\u7EA7\u522B\u3002</p><p>\uFF083\uFF09 <code>\u8D2D\u7269\u8F66\u5B9E\u4F53</code> \u5305\u62EC\u8D2D\u7269\u8F66\u7F16\u53F7\u3001\u7528\u6237\u7F16\u53F7\u3001\u5546\u54C1\u7F16\u53F7\u3001\u5546\u54C1\u6570\u91CF\u3001\u56FE\u7247\u6587\u4EF6url\u3002</p><p>\uFF084\uFF09 <code>\u8BA2\u5355\u5B9E\u4F53</code> \u5305\u62EC\u8BA2\u5355\u7F16\u53F7\u3001\u6536\u8D27\u4EBA\u3001\u6536\u4EF6\u4EBA\u7535\u8BDD\u3001\u603B\u91D1\u989D\u3001\u7528\u6237\u7F16\u53F7\u3001\u4ED8\u6B3E\u65B9\u5F0F\u3001\u9001\u8D27\u5730\u5740\u3001\u4E0B\u5355 \u65F6\u95F4\u3002</p><p>\uFF085\uFF09 <code>\u8BA2\u5355\u8BE6\u60C5\u5B9E\u4F53</code> \u5305\u62EC\u8BA2\u5355\u8BE6\u60C5\u7F16\u53F7\u3001\u8BA2\u5355\u7F16\u53F7\u3001\u5546\u54C1\u540D\u79F0\u3001\u5546\u54C1\u7F16\u53F7\u3001\u5546\u54C1\u6570\u91CF\u3002</p><p>\uFF086\uFF09 <code>\u5546\u54C1\u5B9E\u4F53</code> \u5305\u62EC\u5546\u54C1\u7F16\u53F7\u3001\u4EF7\u683C\u3001\u5546\u54C1\u540D\u79F0\u3001\u5206\u7C7B\u7F16\u53F7\u3001\u662F\u5426\u9500\u552E\uFF0C\u89C4\u683C\u3001\u989C\u8272\u3002</p><p>\uFF087\uFF09 <code>\u8BC4\u8BBA\u5B9E\u4F53</code> \u5305\u62EC\u8BC4\u8BBAid\u3001\u8BC4\u8BBA\u5185\u5BB9\u3001\u8BC4\u8BBA\u65F6\u95F4\u3001\u7528\u6237\u7F16\u53F7\u3001\u5546\u54C1\u7F16\u53F7</p><p>\uFF088\uFF09 <code>\u5546\u54C1\u5206\u7C7B\u5B9E\u4F53</code> \u5305\u62EC\u7C7B\u522B\u7F16\u53F7\u3001\u7C7B\u522B\u540D\u79F0\u3001\u7236\u7C7B\u522B\u7F16\u53F7</p><p>\u8FD9\u6837\u7EC6\u5206\u4E4B\u540E\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u91CD\u65B0\u8BBE\u8BA1\u7535\u5546\u4E1A\u52A1\u4E86\uFF0CER \u6A21\u578B\u5982\u56FE\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707171022246.png" alt="image-20220707171022246"></p><h5 id="_8-5-er-\u6A21\u578B\u56FE\u8F6C\u6362\u6210\u6570\u636E\u8868" tabindex="-1"><a class="header-anchor" href="#_8-5-er-\u6A21\u578B\u56FE\u8F6C\u6362\u6210\u6570\u636E\u8868" aria-hidden="true">#</a> 8.5 ER \u6A21\u578B\u56FE\u8F6C\u6362\u6210\u6570\u636E\u8868</h5><p>\u901A\u8FC7\u7ED8\u5236 ER \u6A21\u578B\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u7406\u6E05\u4E86\u4E1A\u52A1\u903B\u8F91\uFF0C\u73B0\u5728\uFF0C\u6211\u4EEC\u5C31\u8981\u8FDB\u884C\u975E\u5E38\u91CD\u8981\u7684\u4E00\u6B65\u4E86\uFF1A\u628A\u7ED8\u5236\u597D\u7684 ER \u6A21\u578B\uFF0C\u8F6C\u6362\u6210\u5177\u4F53\u7684\u6570\u636E\u8868\uFF0C\u4E0B\u9762\u4ECB\u7ECD\u4E0B\u8F6C\u6362\u7684\u539F\u5219\uFF1A</p><p>\uFF081\uFF09\u4E00\u4E2A \u5B9E\u4F53 \u901A\u5E38\u8F6C\u6362\u6210\u4E00\u4E2A \u6570\u636E\u8868 \uFF1B</p><p>\uFF082\uFF09\u4E00\u4E2A \u591A\u5BF9\u591A\u7684\u5173\u7CFB \uFF0C\u901A\u5E38\u4E5F\u8F6C\u6362\u6210\u4E00\u4E2A \u6570\u636E\u8868 \uFF1B</p><p>\uFF083\uFF09\u4E00\u4E2A 1 \u5BF9 1 \uFF0C\u6216\u8005 1 \u5BF9\u591A \u7684\u5173\u7CFB\uFF0C\u5F80\u5F80\u901A\u8FC7\u8868\u7684 \u5916\u952E \u6765\u8868\u8FBE\uFF0C\u800C\u4E0D\u662F\u8BBE\u8BA1\u4E00\u4E2A\u65B0\u7684\u6570\u636E\u8868\uFF1B</p><p>\uFF084\uFF09 \u5C5E\u6027 \u8F6C\u6362\u6210\u8868\u7684 \u5B57\u6BB5 \u3002</p><p>\u4E0B\u9762\u7ED3\u5408\u524D\u9762\u7684ER\u6A21\u578B\uFF0C\u5177\u4F53\u8BB2\u89E3\u4E00\u4E0B\u600E\u4E48\u8FD0\u7528\u8FD9\u4E9B\u8F6C\u6362\u7684\u539F\u5219\uFF0C\u628A ER \u6A21\u578B\u8F6C\u6362\u6210\u5177\u4F53\u7684\u6570\u636E\u8868\uFF0C\u4ECE \u800C\u628A\u62BD\u8C61\u51FA\u6765\u7684\u6570\u636E\u6A21\u578B\uFF0C\u843D\u5B9E\u5230\u5177\u4F53\u7684\u6570\u636E\u5E93\u8BBE\u8BA1\u5F53\u4E2D\u3002</p><h6 id="_1-\u4E00\u4E2A\u5B9E\u4F53\u8F6C\u6362\u6210\u4E00\u4E2A\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#_1-\u4E00\u4E2A\u5B9E\u4F53\u8F6C\u6362\u6210\u4E00\u4E2A\u6570\u636E\u5E93" aria-hidden="true">#</a> 1. \u4E00\u4E2A\u5B9E\u4F53\u8F6C\u6362\u6210\u4E00\u4E2A\u6570\u636E\u5E93</h6><p><strong>\u5148\u6765\u770B\u4E00\u4E0B\u5F3A\u5B9E\u4F53\u8F6C\u6362\u6210\u6570\u636E\u8868:</strong></p><p><code>\u7528\u6237\u5B9E\u4F53</code>\u8F6C\u6362\u6210\u7528\u6237\u8868(user_info)\u7684\u4EE3\u7801\u5982\u4E0B\u6240\u793A\u3002</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707171335255.png" alt="image-20220707171335255" style="float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707171412363.png" alt="image-20220707171412363" style="float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707171915637.png" alt="image-20220707171915637" style="float:left;"><p><strong>\u4E0B\u9762\u6211\u4EEC\u518D\u628A\u5F31\u5B9E\u4F53\u8F6C\u6362\u6210\u6570\u636E\u8868\uFF1A</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707172033399.png" alt="image-20220707172033399" style="float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707172052236.png" alt="image-20220707172052236" style="float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707172143793.png" alt="image-20220707172143793" style="float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707172217772.png" alt="image-20220707172217772" style="float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707172236606.png" alt="image-20220707172236606" style="float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707172259143.png" alt="image-20220707172259143" style="float:left;"><h6 id="_2-\u4E00\u4E2A\u591A\u5BF9\u591A\u7684\u5173\u7CFB\u8F6C\u6362\u6210\u4E00\u4E2A\u6570\u636E\u8868" tabindex="-1"><a class="header-anchor" href="#_2-\u4E00\u4E2A\u591A\u5BF9\u591A\u7684\u5173\u7CFB\u8F6C\u6362\u6210\u4E00\u4E2A\u6570\u636E\u8868" aria-hidden="true">#</a> 2. \u4E00\u4E2A\u591A\u5BF9\u591A\u7684\u5173\u7CFB\u8F6C\u6362\u6210\u4E00\u4E2A\u6570\u636E\u8868</h6><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707172350226.png" alt="image-20220707172350226" style="float:left;"><h6 id="_3-\u901A\u8FC7\u5916\u952E\u6765\u8868\u8FBE1\u5BF9\u591A\u7684\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_3-\u901A\u8FC7\u5916\u952E\u6765\u8868\u8FBE1\u5BF9\u591A\u7684\u5173\u7CFB" aria-hidden="true">#</a> 3. \u901A\u8FC7\u5916\u952E\u6765\u8868\u8FBE1\u5BF9\u591A\u7684\u5173\u7CFB</h6><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707172609833.png" alt="image-20220707172609833" style="float:left;"><h6 id="_4-\u628A\u5C5E\u6027\u8F6C\u6362\u6210\u8868\u7684\u5B57\u6BB5" tabindex="-1"><a class="header-anchor" href="#_4-\u628A\u5C5E\u6027\u8F6C\u6362\u6210\u8868\u7684\u5B57\u6BB5" aria-hidden="true">#</a> 4. \u628A\u5C5E\u6027\u8F6C\u6362\u6210\u8868\u7684\u5B57\u6BB5</h6><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707172819174.png" alt="image-20220707172819174" style="float:left;"><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707172918017.png" alt="image-20220707172918017"></p><h3 id="_9-\u6570\u636E\u8868\u7684\u8BBE\u8BA1\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_9-\u6570\u636E\u8868\u7684\u8BBE\u8BA1\u539F\u5219" aria-hidden="true">#</a> 9. \u6570\u636E\u8868\u7684\u8BBE\u8BA1\u539F\u5219</h3><p>\u7EFC\u5408\u4EE5\u4E0A\u5185\u5BB9\uFF0C\u603B\u7ED3\u51FA\u6570\u636E\u8868\u8BBE\u8BA1\u7684\u4E00\u822C\u539F\u5219\uFF1A&quot;\u4E09\u5C11\u4E00\u591A&quot;</p><p><strong>1. \u6570\u636E\u8868\u7684\u4E2A\u6570\u8D8A\u5C11\u8D8A\u597D</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707173028203.png" alt="image-20220707173028203" style="float:left;"><p><strong>2. \u6570\u636E\u8868\u4E2D\u7684\u5B57\u6BB5\u4E2A\u6570\u8D8A\u5C11\u8D8A\u597D</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707173402491.png" alt="image-20220707173402491" style="float:left;"><p><strong>3. \u6570\u636E\u8868\u4E2D\u8054\u5408\u4E3B\u952E\u7684\u5B57\u6BB5\u4E2A\u6570\u8D8A\u5C11\u8D8A\u597D</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707173522971.png" alt="image-20220707173522971" style="float:left;"><p><strong>4. \u4F7F\u7528\u4E3B\u952E\u548C\u5916\u952E\u8D8A\u591A\u8D8A\u597D</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707173557568.png" alt="image-20220707173557568" style="float:left;"><h3 id="_10-\u6570\u636E\u5E93\u5BF9\u8C61\u7F16\u5199\u5EFA\u8BAE" tabindex="-1"><a class="header-anchor" href="#_10-\u6570\u636E\u5E93\u5BF9\u8C61\u7F16\u5199\u5EFA\u8BAE" aria-hidden="true">#</a> 10. \u6570\u636E\u5E93\u5BF9\u8C61\u7F16\u5199\u5EFA\u8BAE</h3><h5 id="_10-1-\u5173\u4E8E\u5E93" tabindex="-1"><a class="header-anchor" href="#_10-1-\u5173\u4E8E\u5E93" aria-hidden="true">#</a> 10.1 \u5173\u4E8E\u5E93</h5><ol><li>\u3010\u5F3A\u5236\u3011\u5E93\u7684\u540D\u79F0\u5FC5\u987B\u63A7\u5236\u572832\u4E2A\u5B57\u7B26\u4EE5\u5185\uFF0C\u53EA\u80FD\u4F7F\u7528\u82F1\u6587\u5B57\u6BCD\u3001\u6570\u5B57\u548C\u4E0B\u5212\u7EBF\uFF0C\u5EFA\u8BAE\u4EE5\u82F1\u6587\u5B57 \u6BCD\u5F00\u5934\u3002</li><li>\u3010\u5F3A\u5236\u3011\u5E93\u540D\u4E2D\u82F1\u6587 \u4E00\u5F8B\u5C0F\u5199 \uFF0C\u4E0D\u540C\u5355\u8BCD\u91C7\u7528 \u4E0B\u5212\u7EBF \u5206\u5272\u3002\u987B\u89C1\u540D\u77E5\u610F\u3002</li><li>\u3010\u5F3A\u5236\u3011\u5E93\u7684\u540D\u79F0\u683C\u5F0F\uFF1A\u4E1A\u52A1\u7CFB\u7EDF\u540D\u79F0_\u5B50\u7CFB\u7EDF\u540D\u3002</li><li>\u3010\u5F3A\u5236\u3011\u5E93\u540D\u7981\u6B62\u4F7F\u7528\u5173\u952E\u5B57\uFF08\u5982type,order\u7B49\uFF09\u3002</li><li>\u3010\u5F3A\u5236\u3011\u521B\u5EFA\u6570\u636E\u5E93\u65F6\u5FC5\u987B \u663E\u5F0F\u6307\u5B9A\u5B57\u7B26\u96C6 \uFF0C\u5E76\u4E14\u5B57\u7B26\u96C6\u53EA\u80FD\u662Futf8\u6216\u8005utf8mb4\u3002 \u521B\u5EFA\u6570\u636E\u5E93SQL\u4E3E\u4F8B\uFF1ACREATE DATABASE crm_fund DEFAULT CHARACTER SET &#39;utf8&#39; ;</li><li>\u3010\u5EFA\u8BAE\u3011\u5BF9\u4E8E\u7A0B\u5E8F\u8FDE\u63A5\u6570\u636E\u5E93\u8D26\u53F7\uFF0C\u9075\u5FAA \u6743\u9650\u6700\u5C0F\u539F\u5219 \u4F7F\u7528\u6570\u636E\u5E93\u8D26\u53F7\u53EA\u80FD\u5728\u4E00\u4E2ADB\u4E0B\u4F7F\u7528\uFF0C\u4E0D\u51C6\u8DE8\u5E93\u3002\u7A0B\u5E8F\u4F7F\u7528\u7684\u8D26\u53F7 \u539F\u5219\u4E0A\u4E0D\u51C6\u6709drop\u6743\u9650 \u3002</li><li>\u3010\u5EFA\u8BAE\u3011\u4E34\u65F6\u5E93\u4EE5 tmp_ \u4E3A\u524D\u7F00\uFF0C\u5E76\u4EE5\u65E5\u671F\u4E3A\u540E\u7F00\uFF1B \u5907\u4EFD\u5E93\u4EE5 bak_ \u4E3A\u524D\u7F00\uFF0C\u5E76\u4EE5\u65E5\u671F\u4E3A\u540E\u7F00\u3002</li></ol><h5 id="_10-2-\u5173\u4E8E\u8868\u3001\u5217" tabindex="-1"><a class="header-anchor" href="#_10-2-\u5173\u4E8E\u8868\u3001\u5217" aria-hidden="true">#</a> 10.2 \u5173\u4E8E\u8868\u3001\u5217</h5><ol><li><p>\u3010\u5F3A\u5236\u3011\u8868\u548C\u5217\u7684\u540D\u79F0\u5FC5\u987B\u63A7\u5236\u572832\u4E2A\u5B57\u7B26\u4EE5\u5185\uFF0C\u8868\u540D\u53EA\u80FD\u4F7F\u7528\u82F1\u6587\u5B57\u6BCD\u3001\u6570\u5B57\u548C\u4E0B\u5212\u7EBF\uFF0C\u5EFA\u8BAE \u4EE5 \u82F1\u6587\u5B57\u6BCD\u5F00\u5934 \u3002</p></li><li><p>\u3010\u5F3A\u5236\u3011 \u8868\u540D\u3001\u5217\u540D\u4E00\u5F8B\u5C0F\u5199 \uFF0C\u4E0D\u540C\u5355\u8BCD\u91C7\u7528\u4E0B\u5212\u7EBF\u5206\u5272\u3002\u987B\u89C1\u540D\u77E5\u610F\u3002</p></li><li><p>\u3010\u5F3A\u5236\u3011\u8868\u540D\u8981\u6C42\u6709\u6A21\u5757\u540D\u5F3A\u76F8\u5173\uFF0C\u540C\u4E00\u6A21\u5757\u7684\u8868\u540D\u5C3D\u91CF\u4F7F\u7528 \u7EDF\u4E00\u524D\u7F00 \u3002\u6BD4\u5982\uFF1Acrm_fund_item</p></li><li><p>\u3010\u5F3A\u5236\u3011\u521B\u5EFA\u8868\u65F6\u5FC5\u987B \u663E\u5F0F\u6307\u5B9A\u5B57\u7B26\u96C6 \u4E3Autf8\u6216utf8mb4\u3002</p></li><li><p>\u3010\u5F3A\u5236\u3011\u8868\u540D\u3001\u5217\u540D\u7981\u6B62\u4F7F\u7528\u5173\u952E\u5B57\uFF08\u5982type,order\u7B49\uFF09\u3002</p></li><li><p>\u3010\u5F3A\u5236\u3011\u521B\u5EFA\u8868\u65F6\u5FC5\u987B \u663E\u5F0F\u6307\u5B9A\u8868\u5B58\u50A8\u5F15\u64CE \u7C7B\u578B\u3002\u5982\u65E0\u7279\u6B8A\u9700\u6C42\uFF0C\u4E00\u5F8B\u4E3AInnoDB\u3002</p></li><li><p>\u3010\u5F3A\u5236\u3011\u5EFA\u8868\u5FC5\u987B\u6709comment\u3002</p></li><li><p>\u3010\u5F3A\u5236\u3011\u5B57\u6BB5\u547D\u540D\u5E94\u5C3D\u53EF\u80FD\u4F7F\u7528\u8868\u8FBE\u5B9E\u9645\u542B\u4E49\u7684\u82F1\u6587\u5355\u8BCD\u6216 \u7F29\u5199 \u3002\u5982\uFF1A\u516C\u53F8 ID\uFF0C\u4E0D\u8981\u4F7F\u7528 corporation_id, \u800C\u7528corp_id \u5373\u53EF\u3002</p></li><li><p>\u3010\u5F3A\u5236\u3011\u5E03\u5C14\u503C\u7C7B\u578B\u7684\u5B57\u6BB5\u547D\u540D\u4E3A is_\u63CF\u8FF0 \u3002\u5982member\u8868\u4E0A\u8868\u793A\u662F\u5426\u4E3Aenabled\u7684\u4F1A\u5458\u7684\u5B57\u6BB5\u547D \u540D\u4E3A is_enabled\u3002</p></li><li><p>\u3010\u5F3A\u5236\u3011\u7981\u6B62\u5728\u6570\u636E\u5E93\u4E2D\u5B58\u50A8\u56FE\u7247\u3001\u6587\u4EF6\u7B49\u5927\u7684\u4E8C\u8FDB\u5236\u6570\u636E \u901A\u5E38\u6587\u4EF6\u5F88\u5927\uFF0C\u77ED\u65F6\u95F4\u5185\u9020\u6210\u6570\u636E\u91CF\u5FEB\u901F\u589E\u957F\uFF0C\u6570\u636E\u5E93\u8FDB\u884C\u6570\u636E\u5E93\u8BFB\u53D6\u65F6\uFF0C\u901A\u5E38\u4F1A\u8FDB\u884C\u5927\u91CF\u7684\u968F \u673AIO\u64CD\u4F5C\uFF0C\u6587\u4EF6\u5F88\u5927\u65F6\uFF0CIO\u64CD\u4F5C\u5F88\u8017\u65F6\u3002\u901A\u5E38\u5B58\u50A8\u4E8E\u6587\u4EF6\u670D\u52A1\u5668\uFF0C\u6570\u636E\u5E93\u53EA\u5B58\u50A8\u6587\u4EF6\u5730\u5740\u4FE1\u606F\u3002</p></li><li><p>\u3010\u5EFA\u8BAE\u3011\u5EFA\u8868\u65F6\u5173\u4E8E\u4E3B\u952E\uFF1A \u8868\u5FC5\u987B\u6709\u4E3B\u952E</p><p>(1)\u5F3A\u5236\u8981\u6C42\u4E3B\u952E\u4E3Aid\uFF0C\u7C7B\u578B\u4E3Aint\u6216bigint\uFF0C\u4E14\u4E3A auto_increment \u5EFA\u8BAE\u4F7F\u7528unsigned\u65E0\u7B26\u53F7\u578B\u3002</p><p>(2)\u6807\u8BC6\u8868\u91CC\u6BCF\u4E00\u884C\u4E3B\u4F53\u7684\u5B57\u6BB5\u4E0D\u8981\u8BBE\u4E3A\u4E3B\u952E\uFF0C\u5EFA\u8BAE \u8BBE\u4E3A\u5176\u4ED6\u5B57\u6BB5\u5982user_id\uFF0Corder_id\u7B49\uFF0C\u5E76\u5EFA\u7ACBunique key\u7D22\u5F15\u3002\u56E0\u4E3A\u5982\u679C\u8BBE\u4E3A\u4E3B\u952E\u4E14\u4E3B\u952E\u503C\u4E3A\u968F\u673A \u63D2\u5165\uFF0C\u5219\u4F1A\u5BFC\u81F4innodb\u5185\u90E8\u9875\u5206\u88C2\u548C\u5927\u91CF\u968F\u673AI/O\uFF0C\u6027\u80FD\u4E0B\u964D\u3002</p></li><li><p>\u3010\u5EFA\u8BAE\u3011\u6838\u5FC3\u8868\uFF08\u5982\u7528\u6237\u8868\uFF09\u5FC5\u987B\u6709\u884C\u6570\u636E\u7684 \u521B\u5EFA\u65F6\u95F4\u5B57\u6BB5 \uFF08create_time\uFF09\u548C \u6700\u540E\u66F4\u65B0\u65F6\u95F4\u5B57\u6BB5 \uFF08update_time\uFF09\uFF0C\u4FBF\u4E8E\u67E5\u95EE\u9898\u3002</p></li><li><p>\u3010\u5EFA\u8BAE\u3011\u8868\u4E2D\u6240\u6709\u5B57\u6BB5\u5C3D\u91CF\u90FD\u662F NOT NULL \u5C5E\u6027\uFF0C\u4E1A\u52A1\u53EF\u4EE5\u6839\u636E\u9700\u8981\u5B9A\u4E49 DEFAULT\u503C \u3002 \u56E0\u4E3A\u4F7F\u7528 NULL\u503C\u4F1A\u5B58\u5728\u6BCF\u4E00\u884C\u90FD\u4F1A\u5360\u7528\u989D\u5916\u5B58\u50A8\u7A7A\u95F4\u3001\u6570\u636E\u8FC1\u79FB\u5BB9\u6613\u51FA\u9519\u3001\u805A\u5408\u51FD\u6570\u8BA1\u7B97\u7ED3\u679C\u504F\u5DEE\u7B49\u95EE \u9898\u3002</p></li><li><p>\u3010\u5EFA\u8BAE\u3011\u6240\u6709\u5B58\u50A8\u76F8\u540C\u6570\u636E\u7684 \u5217\u540D\u548C\u5217\u7C7B\u578B\u5FC5\u987B\u4E00\u81F4 \uFF08\u4E00\u822C\u4F5C\u4E3A\u5173\u8054\u5217\uFF0C\u5982\u679C\u67E5\u8BE2\u65F6\u5173\u8054\u5217\u7C7B\u578B \u4E0D\u4E00\u81F4\u4F1A\u81EA\u52A8\u8FDB\u884C\u6570\u636E\u7C7B\u578B\u9690\u5F0F\u8F6C\u6362\uFF0C\u4F1A\u9020\u6210\u5217\u4E0A\u7684\u7D22\u5F15\u5931\u6548\uFF0C\u5BFC\u81F4\u67E5\u8BE2\u6548\u7387\u964D\u4F4E\uFF09\u3002</p></li><li><p>\u3010\u5EFA\u8BAE\u3011\u4E2D\u95F4\u8868\uFF08\u6216\u4E34\u65F6\u8868\uFF09\u7528\u4E8E\u4FDD\u7559\u4E2D\u95F4\u7ED3\u679C\u96C6\uFF0C\u540D\u79F0\u4EE5 tmp_ \u5F00\u5934\u3002 \u5907\u4EFD\u8868\u7528\u4E8E\u5907\u4EFD\u6216\u6293\u53D6\u6E90\u8868\u5FEB\u7167\uFF0C\u540D\u79F0\u4EE5 bak_ \u5F00\u5934\u3002\u4E2D\u95F4\u8868\u548C\u5907\u4EFD\u8868\u5B9A\u671F\u6E05\u7406\u3002 1</p></li><li><p>\u3010\u793A\u8303\u3011\u4E00\u4E2A\u8F83\u4E3A\u89C4\u8303\u7684\u5EFA\u8868\u8BED\u53E5\uFF1A</p></li></ol><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE user_info (
\`id\` int unsigned NOT NULL AUTO_INCREMENT COMMENT &#39;\u81EA\u589E\u4E3B\u952E&#39;,
\`user_id\` bigint(11) NOT NULL COMMENT &#39;\u7528\u6237id&#39;,
\`username\` varchar(45) NOT NULL COMMENT &#39;\u771F\u5B9E\u59D3\u540D&#39;,
\`email\` varchar(30) NOT NULL COMMENT &#39;\u7528\u6237\u90AE\u7BB1&#39;,
\`nickname\` varchar(45) NOT NULL COMMENT &#39;\u6635\u79F0&#39;,
\`birthday\` date NOT NULL COMMENT &#39;\u751F\u65E5&#39;,
\`sex\` tinyint(4) DEFAULT &#39;0&#39; COMMENT &#39;\u6027\u522B&#39;,
\`short_introduce\` varchar(150) DEFAULT NULL COMMENT &#39;\u4E00\u53E5\u8BDD\u4ECB\u7ECD\u81EA\u5DF1\uFF0C\u6700\u591A50\u4E2A\u6C49\u5B57&#39;,
\`user_resume\` varchar(300) NOT NULL COMMENT &#39;\u7528\u6237\u63D0\u4EA4\u7684\u7B80\u5386\u5B58\u653E\u5730\u5740&#39;,
\`user_register_ip\` int NOT NULL COMMENT &#39;\u7528\u6237\u6CE8\u518C\u65F6\u7684\u6E90ip&#39;,
\`create_time\` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;\u521B\u5EFA\u65F6\u95F4&#39;,
\`update_time\` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE
CURRENT_TIMESTAMP COMMENT &#39;\u4FEE\u6539\u65F6\u95F4&#39;,
\`user_review_status\` tinyint NOT NULL COMMENT &#39;\u7528\u6237\u8D44\u6599\u5BA1\u6838\u72B6\u6001\uFF0C1\u4E3A\u901A\u8FC7\uFF0C2\u4E3A\u5BA1\u6838\u4E2D\uFF0C3\u4E3A\u672A
\u901A\u8FC7\uFF0C4\u4E3A\u8FD8\u672A\u63D0\u4EA4\u5BA1\u6838&#39;,
PRIMARY KEY (\`id\`),
UNIQUE KEY \`uniq_user_id\` (\`user_id\`),
KEY \`idx_username\`(\`username\`),
KEY \`idx_create_time_status\`(\`create_time\`,\`user_review_status\`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT=&#39;\u7F51\u7AD9\u7528\u6237\u57FA\u672C\u4FE1\u606F
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="17"><li>\u3010\u5EFA\u8BAE\u3011\u521B\u5EFA\u8868\u65F6\uFF0C\u53EF\u4EE5\u4F7F\u7528\u53EF\u89C6\u5316\u5DE5\u5177\u3002\u8FD9\u6837\u53EF\u4EE5\u786E\u4FDD\u8868\u3001\u5B57\u6BB5\u76F8\u5173\u7684\u7EA6\u5B9A\u90FD\u80FD\u8BBE\u7F6E\u4E0A\u3002</li></ol><p>\u5B9E\u9645\u4E0A\uFF0C\u6211\u4EEC\u901A\u5E38\u5F88\u5C11\u81EA\u5DF1\u5199 DDL \u8BED\u53E5\uFF0C\u53EF\u4EE5\u4F7F\u7528\u4E00\u4E9B\u53EF\u89C6\u5316\u5DE5\u5177\u6765\u521B\u5EFA\u548C\u64CD\u4F5C\u6570\u636E\u5E93\u548C\u6570\u636E\u8868\u3002</p><p>\u53EF\u89C6\u5316\u5DE5\u5177\u9664\u4E86\u65B9\u4FBF\uFF0C\u8FD8\u80FD\u76F4\u63A5\u5E2E\u6211\u4EEC\u5C06\u6570\u636E\u5E93\u7684\u7ED3\u6784\u5B9A\u4E49\u8F6C\u5316\u6210 SQL \u8BED\u8A00\uFF0C\u65B9\u4FBF\u6570\u636E\u5E93\u548C\u6570\u636E\u8868\u7ED3\u6784\u7684\u5BFC\u51FA\u548C\u5BFC\u5165\u3002</p><h5 id="_10-3-\u5173\u4E8E\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#_10-3-\u5173\u4E8E\u7D22\u5F15" aria-hidden="true">#</a> 10.3 \u5173\u4E8E\u7D22\u5F15</h5><ol><li>\u3010\u5F3A\u5236\u3011InnoDB\u8868\u5FC5\u987B\u4E3B\u952E\u4E3Aid int/bigint auto_increment\uFF0C\u4E14\u4E3B\u952E\u503C \u7981\u6B62\u88AB\u66F4\u65B0 \u3002</li><li>\u3010\u5F3A\u5236\u3011InnoDB\u548CMyISAM\u5B58\u50A8\u5F15\u64CE\u8868\uFF0C\u7D22\u5F15\u7C7B\u578B\u5FC5\u987B\u4E3A BTREE \u3002</li><li>\u3010\u5EFA\u8BAE\u3011\u4E3B\u952E\u7684\u540D\u79F0\u4EE5 pk_ \u5F00\u5934\uFF0C\u552F\u4E00\u952E\u4EE5 uni_ \u6216 uk_ \u5F00\u5934\uFF0C\u666E\u901A\u7D22\u5F15\u4EE5 idx_ \u5F00\u5934\uFF0C\u4E00\u5F8B\u4F7F\u7528\u5C0F\u5199\u683C\u5F0F\uFF0C\u4EE5\u5B57\u6BB5\u7684\u540D\u79F0\u6216\u7F29\u5199\u4F5C\u4E3A\u540E\u7F00\u3002</li><li>\u3010\u5EFA\u8BAE\u3011\u591A\u5355\u8BCD\u7EC4\u6210\u7684columnname\uFF0C\u53D6\u524D\u51E0\u4E2A\u5355\u8BCD\u9996\u5B57\u6BCD\uFF0C\u52A0\u672B\u5355\u8BCD\u7EC4\u6210column_name\u3002\u5982: sample \u8868 member_id \u4E0A\u7684\u7D22\u5F15\uFF1Aidx_sample_mid\u3002</li><li>\u3010\u5EFA\u8BAE\u3011\u5355\u4E2A\u8868\u4E0A\u7684\u7D22\u5F15\u4E2A\u6570 \u4E0D\u80FD\u8D85\u8FC76\u4E2A \u3002</li><li>\u3010\u5EFA\u8BAE\u3011\u5728\u5EFA\u7ACB\u7D22\u5F15\u65F6\uFF0C\u591A\u8003\u8651\u5EFA\u7ACB \u8054\u5408\u7D22\u5F15 \uFF0C\u5E76\u628A\u533A\u5206\u5EA6\u6700\u9AD8\u7684\u5B57\u6BB5\u653E\u5728\u6700\u524D\u9762\u3002</li><li>\u3010\u5EFA\u8BAE\u3011\u5728\u591A\u8868 JOIN \u7684SQL\u91CC\uFF0C\u4FDD\u8BC1\u88AB\u9A71\u52A8\u8868\u7684\u8FDE\u63A5\u5217\u4E0A\u6709\u7D22\u5F15\uFF0C\u8FD9\u6837JOIN \u6267\u884C\u6548\u7387\u6700\u9AD8\u3002</li><li>\u3010\u5EFA\u8BAE\u3011\u5EFA\u8868\u6216\u52A0\u7D22\u5F15\u65F6\uFF0C\u4FDD\u8BC1\u8868\u91CC\u4E92\u76F8\u4E0D\u5B58\u5728 \u5197\u4F59\u7D22\u5F15 \u3002 \u6BD4\u5982\uFF1A\u5982\u679C\u8868\u91CC\u5DF2\u7ECF\u5B58\u5728key(a,b)\uFF0C \u5219key(a)\u4E3A\u5197\u4F59\u7D22\u5F15\uFF0C\u9700\u8981\u5220\u9664\u3002</li></ol><h5 id="_10-4-sql\u7F16\u5199" tabindex="-1"><a class="header-anchor" href="#_10-4-sql\u7F16\u5199" aria-hidden="true">#</a> 10.4 SQL\u7F16\u5199</h5><ol><li>\u3010\u5F3A\u5236\u3011\u7A0B\u5E8F\u7AEFSELECT\u8BED\u53E5\u5FC5\u987B\u6307\u5B9A\u5177\u4F53\u5B57\u6BB5\u540D\u79F0\uFF0C\u7981\u6B62\u5199\u6210 *\u3002</li><li>\u3010\u5EFA\u8BAE\u3011\u7A0B\u5E8F\u7AEFinsert\u8BED\u53E5\u6307\u5B9A\u5177\u4F53\u5B57\u6BB5\u540D\u79F0\uFF0C\u4E0D\u8981\u5199\u6210INSERT INTO t1 VALUES(\u2026)\u3002</li><li>\u3010\u5EFA\u8BAE\u3011\u9664\u9759\u6001\u8868\u6216\u5C0F\u8868\uFF08100\u884C\u4EE5\u5185\uFF09\uFF0CDML\u8BED\u53E5\u5FC5\u987B\u6709WHERE\u6761\u4EF6\uFF0C\u4E14\u4F7F\u7528\u7D22\u5F15\u67E5\u627E\u3002</li><li>\u3010\u5EFA\u8BAE\u3011INSERT INTO\u2026VALUES(XX),(XX),(XX).. \u8FD9\u91CCXX\u7684\u503C\u4E0D\u8981\u8D85\u8FC75000\u4E2A\u3002 \u503C\u8FC7\u591A\u867D\u7136\u4E0A\u7EBF\u5F88 \u5FEB\uFF0C\u4F46\u4F1A\u5F15\u8D77\u4E3B\u4ECE\u540C\u6B65\u5EF6\u8FDF\u3002</li><li>\u3010\u5EFA\u8BAE\u3011SELECT\u8BED\u53E5\u4E0D\u8981\u4F7F\u7528UNION\uFF0C\u63A8\u8350\u4F7F\u7528UNION ALL\uFF0C\u5E76\u4E14UNION\u5B50\u53E5\u4E2A\u6570\u9650\u5236\u57285\u4E2A\u4EE5 \u5185\u3002</li><li>\u3010\u5EFA\u8BAE\u3011\u7EBF\u4E0A\u73AF\u5883\uFF0C\u591A\u8868 JOIN \u4E0D\u8981\u8D85\u8FC75\u4E2A\u8868\u3002</li><li>\u3010\u5EFA\u8BAE\u3011\u51CF\u5C11\u4F7F\u7528ORDER BY\uFF0C\u548C\u4E1A\u52A1\u6C9F\u901A\u80FD\u4E0D\u6392\u5E8F\u5C31\u4E0D\u6392\u5E8F\uFF0C\u6216\u5C06\u6392\u5E8F\u653E\u5230\u7A0B\u5E8F\u7AEF\u53BB\u505A\u3002ORDER BY\u3001GROUP BY\u3001DISTINCT \u8FD9\u4E9B\u8BED\u53E5\u8F83\u4E3A\u8017\u8D39CPU\uFF0C\u6570\u636E\u5E93\u7684CPU\u8D44\u6E90\u662F\u6781\u5176\u5B9D\u8D35\u7684\u3002</li><li>\u3010\u5EFA\u8BAE\u3011\u5305\u542B\u4E86ORDER BY\u3001GROUP BY\u3001DISTINCT \u8FD9\u4E9B\u67E5\u8BE2\u7684\u8BED\u53E5\uFF0CWHERE \u6761\u4EF6\u8FC7\u6EE4\u51FA\u6765\u7684\u7ED3\u679C \u96C6\u8BF7\u4FDD\u6301\u57281000\u884C\u4EE5\u5185\uFF0C\u5426\u5219SQL\u4F1A\u5F88\u6162\u3002</li><li>\u3010\u5EFA\u8BAE\u3011\u5BF9\u5355\u8868\u7684\u591A\u6B21alter\u64CD\u4F5C\u5FC5\u987B\u5408\u5E76\u4E3A\u4E00\u6B21 \u5BF9\u4E8E\u8D85\u8FC7100W\u884C\u7684\u5927\u8868\u8FDB\u884Calter table\uFF0C\u5FC5\u987B\u7ECF\u8FC7DBA\u5BA1\u6838\uFF0C\u5E76\u5728\u4E1A\u52A1\u4F4E\u5CF0\u671F\u6267\u884C\uFF0C\u591A\u4E2Aalter\u9700\u6574 \u5408\u5728\u4E00\u8D77\u3002 \u56E0\u4E3Aalter table\u4F1A\u4EA7\u751F \u8868\u9501 \uFF0C\u671F\u95F4\u963B\u585E\u5BF9\u4E8E\u8BE5\u8868\u7684\u6240\u6709\u5199\u5165\uFF0C\u5BF9\u4E8E\u4E1A\u52A1\u53EF\u80FD\u4F1A\u4EA7\u751F\u6781 \u5927\u5F71\u54CD\u3002</li><li>\u3010\u5EFA\u8BAE\u3011\u6279\u91CF\u64CD\u4F5C\u6570\u636E\u65F6\uFF0C\u9700\u8981\u63A7\u5236\u4E8B\u52A1\u5904\u7406\u95F4\u9694\u65F6\u95F4\uFF0C\u8FDB\u884C\u5FC5\u8981\u7684sleep\u3002</li><li>\u3010\u5EFA\u8BAE\u3011\u4E8B\u52A1\u91CC\u5305\u542BSQL\u4E0D\u8D85\u8FC75\u4E2A\u3002 \u56E0\u4E3A\u8FC7\u957F\u7684\u4E8B\u52A1\u4F1A\u5BFC\u81F4\u9501\u6570\u636E\u8F83\u4E45\uFF0CMySQL\u5185\u90E8\u7F13\u5B58\u3001\u8FDE\u63A5\u6D88\u8017\u8FC7\u591A\u7B49\u95EE\u9898\u3002</li><li>\u3010\u5EFA\u8BAE\u3011\u4E8B\u52A1\u91CC\u66F4\u65B0\u8BED\u53E5\u5C3D\u91CF\u57FA\u4E8E\u4E3B\u952E\u6216UNIQUE KEY\uFF0C\u5982UPDATE\u2026 WHERE id=XX; \u5426\u5219\u4F1A\u4EA7\u751F\u95F4\u9699\u9501\uFF0C\u5185\u90E8\u6269\u5927\u9501\u5B9A\u8303\u56F4\uFF0C\u5BFC\u81F4\u7CFB\u7EDF\u6027\u80FD\u4E0B\u964D\uFF0C\u4EA7\u751F\u6B7B\u9501\u3002</li></ol><h3 id="_11-powerdesigner\u7684\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_11-powerdesigner\u7684\u4F7F\u7528" aria-hidden="true">#</a> 11. PowerDesigner\u7684\u4F7F\u7528</h3><p>PowerDesigner\u662F\u4E00\u6B3E\u5F00\u53D1\u4EBA\u5458\u5E38\u7528\u7684\u6570\u636E\u5E93\u5EFA\u6A21\u5DE5\u5177\uFF0C\u7528\u6237\u5229\u7528\u8BE5\u8F6F\u4EF6\u53EF\u4EE5\u65B9\u4FBF\u5730\u5236\u4F5C <code>\u6570\u636E\u6D41\u7A0B\u56FE</code> \u3001 <code>\u6982\u5FF5\u6570\u636E\u6A21\u578B</code> \u3001 <code>\u7269\u7406\u6570\u636E\u6A21\u578B</code> \uFF0C\u5B83\u51E0\u4E4E\u5305\u62EC\u4E86\u6570\u636E\u5E93\u6A21\u578B\u8BBE\u8BA1\u7684\u5168\u8FC7\u7A0B\uFF0C\u662FSybase\u516C\u53F8\u4E3A\u4F01\u4E1A\u5EFA\u6A21\u548C\u8BBE \u8BA1\u63D0\u4F9B\u7684\u4E00\u5957\u5B8C\u6574\u7684\u96C6\u6210\u5316\u4F01\u4E1A\u7EA7\u5EFA\u6A21\u89E3\u51B3\u65B9\u6848\u3002</p><h5 id="_11-1-\u5F00\u59CB\u754C\u9762" tabindex="-1"><a class="header-anchor" href="#_11-1-\u5F00\u59CB\u754C\u9762" aria-hidden="true">#</a> 11.1 \u5F00\u59CB\u754C\u9762</h5><p>\u5F53\u524D\u4F7F\u7528\u7684PowerDesigner\u7248\u672C\u662F16.5\u7684\u3002\u6253\u5F00\u8F6F\u4EF6\u5373\u662F\u6B64\u9875\u9762\uFF0C\u53EF\u9009\u62E9Create Model,\u4E5F\u53EF\u4EE5\u9009\u62E9Do Not Show page Again,\u81EA\u884C\u5728\u6253\u5F00\u8F6F\u4EF6\u540E\u521B\u5EFA\u4E5F\u53EF\u4EE5\uFF01\u5B8C\u5168\u770B\u4E2A\u4EBA\u7684\u559C\u597D\uFF0C\u5728\u6B64\u6211\u5728\u540E\u9762\u7684\u5B66\u4E60\u4E2D\u4E0D\u5728\u663E\u793A\u6B64\u9875\u9762\u3002</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707175250944.png" alt="image-20220707175250944" style="zoom:80%;float:left;"><p>\u201CCreate Model\u201D\u7684\u4F5C\u7528\u7C7B\u4F3C\u4E8E\u666E\u901A\u7684\u4E00\u4E2A\u6587\u4EF6\uFF0C\u8BE5\u6587\u4EF6\u53EF\u4EE5\u5355\u72EC\u5B58\u653E\u4E5F\u53EF\u4EE5\u5F52\u7C7B\u5B58\u653E\u3002</p><p>\u201CCreate Project\u201D\u7684\u4F5C\u7528\u7C7B\u4F3C\u4E8E\u6587\u4EF6\u5939\uFF0C\u8D1F\u8D23\u628A\u6709\u5173\u8054\u5173\u7CFB\u7684\u6587\u4EF6\u96C6\u4E2D\u5F52\u7C7B\u5B58\u653E\u3002</p><h5 id="_11-2-\u6982\u5FF5\u6570\u636E\u6A21\u578B" tabindex="-1"><a class="header-anchor" href="#_11-2-\u6982\u5FF5\u6570\u636E\u6A21\u578B" aria-hidden="true">#</a> 11.2 \u6982\u5FF5\u6570\u636E\u6A21\u578B</h5><p>\u5E38\u7528\u7684\u6A21\u578B\u67094\u79CD\uFF0C\u5206\u522B\u662F <code>\u6982\u5FF5\u6A21\u578B(CDM Conceptual Data Model)</code> \uFF0C <code>\u7269\u7406\u6A21\u578B\uFF08PDM,Physical Data Model\uFF09</code> \uFF0C <code>\u9762\u5411\u5BF9\u8C61\u7684\u6A21\u578B\uFF08OOM Objcet Oriented Model\uFF09</code> \u548C <code>\u4E1A\u52A1\u6A21\u578B\uFF08BPM Business Process Model\uFF09</code> \uFF0C\u6211\u4EEC\u5148\u521B\u5EFA\u6982\u5FF5\u6570\u636E\u6A21\u578B\u3002</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707175350250.png" alt="image-20220707175350250" style="float:left;"><p>\u70B9\u51FB\u4E0A\u9762\u7684ok\uFF0C\u5373\u53EF\u51FA\u73B0\u4E0B\u56FE\u5DE6\u8FB9\u7684\u6982\u5FF5\u6A21\u578B1\uFF0C\u53EF\u4EE5\u81EA\u5B9A\u4E49\u6982\u5FF5\u6A21\u578B\u7684\u540D\u5B57\uFF0C\u5728\u6982\u5FF5\u6A21\u578B\u4E2D\u4F7F\u7528\u6700\u591A\u7684 \u5C31\u662F\u5982\u56FE\u6240\u793A\u7684Entity(\u5B9E\u4F53),Relationship(\u5173\u7CFB)</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707175604026.png" alt="image-20220707175604026" style="float:left;"><p><strong>Entity\u5B9E\u4F53</strong></p><p>\u9009\u4E2D\u53F3\u8FB9\u6846\u4E2DEntity\u8FD9\u4E2A\u529F\u80FD\uFF0C\u5373\u53EF\u51FA\u73B0\u4E0B\u9762\u8FD9\u4E2A\u65B9\u6846\uFF0C\u9700\u8981\u6CE8\u610F\u7684\u662F\u4E66\u5199name\u7684\u65F6\u5019\uFF0Ccode\u81EA\u884C\u8865\u5168\uFF0Cname\u53EF\u4EE5\u662F\u82F1\u6587\u7684\u4E5F\u53EF\u4EE5\u662F\u4E2D\u6587\u7684\uFF0C\u4F46\u662Fcode\u5FC5\u987B\u662F\u82F1\u6587\u7684\u3002</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707175653689.png" alt="image-20220707175653689" style="float:left;"><p><strong>\u586B\u5145\u5B9E\u4F53\u5B57\u6BB5</strong></p><p>General\u4E2D\u7684name\u548Ccode\u586B\u597D\u540E\uFF0C\u5C31\u53EF\u4EE5\u70B9\u51FBAttributes\uFF08\u5C5E\u6027\uFF09\u6765\u8BBE\u7F6Ename\uFF08\u540D\u5B57\uFF09\uFF0Ccode(\u5728\u6570\u636E\u5E93\u4E2D \u7684\u5B57\u6BB5\u540D)\uFF0CData Type(\u6570\u636E\u7C7B\u578B) \uFF0Clength(\u6570\u636E\u7C7B\u578B\u7684\u957F\u5EA6)</p><ul><li>Name: \u5B9E\u4F53\u540D\u5B57\u4E00\u822C\u4E3A\u4E2D\u6587\uFF0C\u5982\u8BBA\u575B\u7528\u6237</li><li>Code: \u5B9E\u4F53\u4EE3\u53F7\uFF0C\u4E00\u822C\u7528\u82F1\u6587\uFF0C\u5982XXXUser</li><li>Comment:\u6CE8\u91CA\uFF0C\u5BF9\u6B64\u5B9E\u4F53\u8BE6\u7EC6\u8BF4\u660E</li><li>Code\u5C5E\u6027\uFF1A\u4EE3\u53F7\uFF0C\u4E00\u822C\u7528\u82F1\u6587UID DataType</li><li>Domain\u57DF\uFF0C\u8868\u793A\u5C5E\u6027\u53D6\u503C\u8303\u56F4\u5982\u53EF\u4EE5\u521B\u5EFA10\u4E2A\u5B57\u7B26\u7684\u5730\u5740\u57DF</li><li>M:Mandatory\u5F3A\u5236\u5C5E\u6027\uFF0C\u8868\u793A\u8BE5\u5C5E\u6027\u5FC5\u586B\u3002\u4E0D\u80FD\u4E3A\u7A7A</li><li>P:Primary Identifer\u662F\u5426\u662F\u4E3B\u6807\u8BC6\u7B26\uFF0C\u8868\u793A\u5B9E\u4F53\u552F\u4E00\u6807\u8BC6\u7B26</li><li>D:Displayed\u663E\u793A\u51FA\u6765\uFF0C\u9ED8\u8BA4\u5168\u90E8\u52FE\u9009</li></ul><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707175805226.png" alt="image-20220707175805226" style="float:left;"><p>\u5728\u6B64\u4E0A\u56FE\u8BF4\u660Ename\u548Ccode\u7684\u8D77\u540D\u65B9\u6CD5</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707175827417.png" alt="image-20220707175827417" style="float:left;"><p><strong>\u8BBE\u7F6E\u4E3B\u6807\u8BC6\u7B26</strong></p><p>\u5982\u679C\u4E0D\u5E0C\u671B\u7CFB\u7EDF\u81EA\u52A8\u751F\u6210\u6807\u8BC6\u7B26\u800C\u662F\u624B\u52A8\u8BBE\u7F6E\u7684\u8BDD\uFF0C\u90A3\u4E48\u5207\u6362\u5230Identifiers\u9009\u9879\u5361\uFF0C\u6DFB\u52A0\u4E00\u884CIdentifier\uFF0C \u7136\u540E\u5355\u51FB\u5DE6\u4E0A\u89D2\u7684\u201C\u5C5E\u6027\u201D\u6309\u94AE\uFF0C\u7136\u540E\u5F39\u51FA\u7684\u6807\u8BC6\u5C5E\u6027\u8BBE\u7F6E\u5BF9\u8BDD\u6846\u4E2D\u5355\u51FB\u201C\u6DFB\u52A0\u884C\u201D\u6309\u94AE\uFF0C\u9009\u62E9\u8BE5\u6807\u8BC6\u4E2D\u4F7F\u7528\u7684\u5C5E\u6027\u3002\u4F8B\u5982\u5C06\u5B66\u53F7\u8BBE\u7F6E\u4E3A\u5B66\u751F\u5B9E\u4F53\u7684\u6807\u8BC6\u3002</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707175858031.png" alt="image-20220707175858031" style="float:left;"><p><strong>\u653E\u5927\u6A21\u578B</strong></p><p>\u521B\u5EFA\u597D\u6982\u5FF5\u6570\u636E\u6A21\u578B\u5982\u56FE\u6240\u793A\uFF0C\u4F46\u662F\u521B\u5EFA\u597D\u7684\u5B57\u4F53\u5F88\u5C0F\uFF0C\u8BFB\u8005\u53EF\u4EE5\u6309\u7740ctrl\u952E\u540C\u65F6\u6ED1\u52A8\u9F20\u6807\u7684\u53EF\u6ED1\u52A8\u6309\u94AE \u5373\u53EF\u653E\u5927\u7F29\u5199\u5B57\u4F53\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u770B\u5230\u4E3B\u6807\u8BC6\u7B26\u6709\u4E00\u4E2A*\u53F7\u7684\u6807\u5FD7\uFF0C\u540C\u65F6\u4E5F\u663E\u793A\u51FA\u6765\u4E86\uFF0Cname,Data type\u548C length\u8FD9\u4E9B\u53EF\u89C1\u7684\u5C5E\u6027</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707175925155.png" alt="image-20220707175925155" style="float:left;"><p><strong>\u5B9E\u4F53\u5173\u7CFB</strong></p><p>\u540C\u7406\u521B\u5EFA\u4E00\u4E2A\u73ED\u7EA7\u7684\u5B9E\u4F53\uFF08\u9700\u8981\u7279\u522B\u6CE8\u610F\u7684\u662F\uFF0C\u70B9\u51FB\u5B8C\u53F3\u8FB9\u529F\u80FD\u7684\u6309\u94AE\u540E\u9700\u8981\u70B9\u51FB\u9F20\u6807\u6307\u9488\u72B6\u6001\u7684\u6309\u94AE \u6216\u8005\u53F3\u51FB\u9F20\u6807\u5373\u53EF\uFF0C\u4E0D\u7136\u5F88\u5BB9\u6613\u4E71\u64CD\u4F5C\uFF0C\u8FD9\u70B9\u6CE8\u610F\u4E00\u4E0B\u5C31\u53EF\u4EE5\u4E86\uFF09\uFF0C\u7136\u540E\u4F7F\u7528Relationship\uFF08\u5173\u7CFB\uFF09\u8FD9\u4E2A \u6309\u94AE\u53EF\u4EE5\u8FDE\u63A5\u5B66\u751F\u548C\u73ED\u7EA7\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u53D1\u751F\u4E00\u5BF9\u591A\uFF08\u73ED\u7EA7\u5BF9\u5B66\u751F\uFF09\u6216\u8005\u591A\u5BF9\u4E00\uFF08\u5B66\u751F\u5BF9\u73ED\u7EA7\uFF09\u7684\u5173\u7CFB\u3002</p><p>\u5982\u56FE\u6240\u793A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707175954634.png" alt="image-20220707175954634" style="float:left;"><p>\u9700\u8981\u6CE8\u610F\u7684\u662F\u70B9\u51FBRelationship\u8FD9\u4E2A\u6309\u94AE\uFF0C\u5C31\u628A\u73ED\u7EA7\u548C\u5B66\u751F\u8054\u7CFB\u8D77\u6765\u4E86\uFF0C\u5C31\u662F\u4E00\u6761\u7EBF\uFF0C\u7136\u540E\u53CC\u51FB\u8FD9\u6761\u7EBF\u8FDB \u884C\u7F16\u8F91\uFF0C\u5728General\u8FD9\u5757\u8D77name\u548Ccode</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707180021612.png" alt="image-20220707180021612" style="float:left;"><p>\u4E0A\u9762\u7684name\u548Ccode\u8D77\u597D\u540E\u5C31\u53EF\u4EE5\u5728Cardinalities\u8FD9\u5757\u67E5\u770B\u73ED\u7EA7\u548C\u5B66\u751F\u7684\u5173\u7CFB\uFF0C\u53EF\u4EE5\u770B\u5230\u73ED\u7EA7\u7684\u4E00\u7AEF\u662F\u4E00 \u6761\u7EBF\uFF0C\u5B66\u751F\u7684\u4E00\u7AEF\u662F\u4E09\u6761\uFF0C\u4EE3\u8868\u73ED\u7EA7\u5BF9\u5B66\u751F\u662F\u4E00\u5BF9\u591A\u7684\u5173\u7CFB\u5373one\u5BF9many\u7684\u5173\u7CFB\uFF0C\u70B9\u51FB\u5E94\u7528\uFF0C\u7136\u540E\u786E\u5B9A \u5373\u53EF</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707180044291.png" alt="image-20220707180044291" style="float:left;"><p>\u4E00\u5BF9\u591A\u548C\u591A\u5BF9\u4E00\u7EC3\u4E60\u5B8C\u8FD8\u6709\u591A\u5BF9\u591A\u7684\u7EC3\u4E60\uFF0C\u5982\u4E0B\u56FE\u64CD\u4F5C\u6240\u793A\uFF0C\u8001\u5E08\u5B9E\u4F53\u548C\u4E0A\u9762\u4ECB\u7ECD\u7684\u4E00\u6837\uFF0C\u81EA\u5DF1\u5C06 name\uFF0Cdata type\u7B49\u7B49\u4FEE\u6539\u6210\u81EA\u5DF1\u9700\u8981\u7684\u5373\u53EF\uFF0C\u6EE1\u8DB3\u9879\u76EE\u5F00\u53D1\u9700\u6C42\u5373\u53EF\u3002\uFF08comment\u662F\u89E3\u91CA\u8BF4\u660E\uFF0C\u81EA\u5DF1\u53EF\u4EE5\u5199\u76F8\u5173\u7684\u4ECB\u7ECD\u548C\u8BF4\u660E\uFF09</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707180113532.png" alt="image-20220707180113532" style="float:left;"><p>\u591A\u5BF9\u591A\u9700\u8981\u6CE8\u610F\u7684\u662F\u81EA\u5DF1\u53EF\u4EE5\u624B\u52A8\u70B9\u51FB\u6309\u94AE\u5C06\u5173\u7CFB\u8C03\u6574\u79F0\u4E3A\u591A\u5BF9\u591A\u7684\u5173\u7CFBmany\u5BF9many\u7684\u5173\u7CFB\uFF0C\u7136\u540E\u70B9\u51FB\u5E94\u7528\u548C\u786E\u5B9A\u5373\u53EF</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707180159184.png" alt="image-20220707180159184" style="float:left;"><p>\u7EFC\u4E0A\u5373\u53EF\u5B8C\u6210\u6700\u7B80\u5355\u7684\u5B66\u751F\uFF0C\u73ED\u7EA7\uFF0C\u6559\u5E08\u8FD9\u79CD\u6982\u5FF5\u6570\u636E\u6A21\u578B\u7684\u8BBE\u8BA1\uFF0C\u9700\u8981\u8003\u8651\u6570\u636E\u7684\u7C7B\u578B\u548C\u4E3B\u6807\u8BC6\u7801\uFF0C \u662F\u5426\u4E3A\u7A7A\u3002\u5173\u7CFB\u662F\u4E00\u5BF9\u4E00\u8FD8\u662F\u4E00\u5BF9\u591A\u8FD8\u662F\u591A\u5BF9\u591A\u7684\u5173\u7CFB\uFF0C\u81EA\u5DF1\u9700\u8981\u5148\u89C4\u5212\u597D\u518D\u8BBE\u8BA1\uFF0C\u7136\u540E\u5C31ok\u4E86\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707180254510.png" alt="image-20220707180254510"></p><h5 id="_11-3-\u7269\u7406\u6570\u636E\u6A21\u578B" tabindex="-1"><a class="header-anchor" href="#_11-3-\u7269\u7406\u6570\u636E\u6A21\u578B" aria-hidden="true">#</a> 11.3 \u7269\u7406\u6570\u636E\u6A21\u578B</h5><p>\u4E0A\u9762\u662F\u6982\u5FF5\u6570\u636E\u6A21\u578B\uFF0C\u4E0B\u9762\u4ECB\u7ECD\u4E00\u4E0B\u7269\u7406\u6570\u636E\u6A21\u578B\uFF0C\u4EE5\u540E \u7ECF\u5E38\u4F7F\u7528 \u7684\u5C31\u662F\u7269\u7406\u6570\u636E\u6A21\u578B\u3002\u6253\u5F00 PowerDesigner\uFF0C\u7136\u540E\u70B9\u51FBFile--&gt;New Model\u7136\u540E\u9009\u62E9\u5982\u4E0B\u56FE\u6240\u793A\u7684\u7269\u7406\u6570\u636E\u6A21\u578B\uFF0C\u7269\u7406\u6570\u636E\u6A21\u578B\u7684\u540D\u5B57\u81EA\u5DF1\u8D77\uFF0C\u7136\u540E\u9009\u62E9\u81EA\u5DF1\u6240\u4F7F\u7528\u7684\u6570\u636E\u5E93\u5373\u53EF\u3002</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707180327712.png" alt="image-20220707180327712" style="float:left;"><p>\u521B\u5EFA\u597D\u4E3B\u9875\u9762\u5982\u56FE\u6240\u793A\uFF0C\u4F46\u662F\u53F3\u8FB9\u7684\u6309\u94AE\u548C\u6982\u5FF5\u6A21\u578B\u7565\u6709\u5DEE\u522B\uFF0C\u7269\u7406\u6A21\u578B\u6700\u5E38\u7528\u7684\u4E09\u4E2A\u662F <code>table(\u8868)</code> \uFF0C <code>view(\u89C6\u56FE)</code>\uFF0C <code>reference(\u5173\u7CFB) </code>\uFF1B</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707180418090.png" alt="image-20220707180418090" style="float:left;"><p>\u9F20\u6807\u5148\u70B9\u51FB\u53F3\u8FB9table\u8FD9\u4E2A\u6309\u94AE\u7136\u540E\u5728\u65B0\u5EFA\u7684\u7269\u7406\u6A21\u578B\u70B9\u4E00\u4E0B\uFF0C\u5373\u53EF\u65B0\u5EFA\u4E00\u4E2A\u8868\uFF0C\u7136\u540E\u53CC\u51FB\u65B0\u5EFA\u5982\u4E0B\u56FE\u6240\u793A\uFF0C\u5728General\u7684name\u548Ccode\u586B\u4E0A\u81EA\u5DF1\u9700\u8981\u7684\uFF0C\u70B9\u51FB\u5E94\u7528\u5373\u53EF\uFF09\uFF0C\u5982\u4E0B\u56FE\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707180449212.png" alt="image-20220707180449212" style="float:left;"><p>\u7136\u540E\u70B9\u51FBColumns,\u5982\u4E0B\u56FE\u8BBE\u7F6E\uFF0C\u975E\u5E38\u7B80\u5355\uFF0C\u9700\u8981\u6CE8\u610F\u7684\u5C31\u662FP\uFF08primary\u4E3B\u952E\uFF09 , F \uFF08foreign key\u5916\u952E\uFF09 , M\uFF08mandatory\u5F3A\u5236\u6027\u7684\uFF0C\u4EE3\u8868\u4E0D\u53EF\u4E3A\u7A7A\uFF09 \u8FD9\u4E09\u4E2A\u3002</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707180537251.png" alt="image-20220707180537251" style="float:left;"><p>\u5728\u6B64\u8BBE\u7F6E\u5B66\u53F7\u7684\u81EA\u589E\uFF08MYSQL\u91CC\u9762\u7684\u81EA\u589E\u662F\u8FD9\u4E2AAUTO_INCREMENT\uFF09\uFF0C\u73ED\u7EA7\u7F16\u53F7\u540C\u7406\uFF0C\u4E0D\u591A\u8D58\u8FF0\uFF01</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707180556645.png" alt="image-20220707180556645" style="float:left;"><p>\u5728\u4E0B\u9762\u7684\u8FD9\u4E2A\u70B9\u4E0A\u5BF9\u53F7\u5373\u53EF\uFF0C\u5C31\u8BBE\u7F6E\u597D\u4E86\u81EA\u589E</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707180619440.png" alt="image-20220707180619440" style="float:left;"><p>\u5168\u90E8\u5B8C\u6210\u540E\u5982\u4E0B\u56FE\u6240\u793A\u3002</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707180643107.png" alt="image-20220707180643107" style="float:left;"><p>\u73ED\u7EA7\u7269\u7406\u6A21\u578B\u540C\u7406\u5982\u4E0B\u56FE\u6240\u793A\u521B\u5EFA\u5373\u53EF</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707180723698.png" alt="image-20220707180723698" style="float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707180744600.png" alt="image-20220707180744600" style="float:left;"><p>\u5B8C\u6210\u540E\u5982\u4E0B\u56FE\u6240\u793A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707180806150.png" alt="image-20220707180806150" style="float:left;"><p>\u4E0A\u9762\u7684\u8BBE\u7F6E\u597D\u5982\u4E0A\u56FE\u6240\u793A\uFF0C\u7136\u540E\u4E0B\u9762\u662F\u5173\u952E\u7684\u5730\u65B9\uFF0C\u70B9\u51FB\u53F3\u8FB9\u6309\u94AEReference\u8FD9\u4E2A\u6309\u94AE\uFF0C\u56E0\u4E3A\u662F\u73ED\u7EA7\u5BF9\u5B66 \u751F\u662F\u4E00\u5BF9\u591A\u7684\uFF0C\u6240\u4EE5\u9F20\u6807\u4ECE\u5B66\u751F\u62C9\u5230\u73ED\u7EA7\u5982\u4E0B\u56FE\u6240\u793A\uFF0C\u5B66\u751F\u8868\u5C06\u53D1\u751F\u53D8\u5316\uFF0C\u5B66\u751F\u8868\u91CC\u9762\u589E\u52A0\u4E86\u4E00\u884C\uFF0C\u8FD9 \u884C\u662F\u73ED\u7EA7\u8868\u7684\u4E3B\u952E\u4F5C\u4E3A\u5B66\u751F\u8868\u7684\u5916\u952E\uFF0C\u5C06\u73ED\u7EA7\u8868\u548C\u5B66\u751F\u8868\u8054\u7CFB\u8D77\u6765\u3002\uFF08\u4ED4\u7EC6\u89C2\u5BDF\u5373\u53EF\u770B\u5230\u533A\u522B\u3002\uFF09</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707180828164.png" alt="image-20220707180828164" style="float:left;"><p>\u505A\u5B8C\u4E0A\u9762\u7684\u64CD\u4F5C\uFF0C\u5C31\u53EF\u4EE5\u53CC\u51FB\u4E2D\u95F4\u7684\u4E00\u6761\u7EBF\uFF0C\u663E\u793A\u5982\u4E0B\u56FE\uFF0C\u4FEE\u6539name\u548Ccode\u5373\u53EF</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707183743297.png" alt="image-20220707183743297" style="float:left;"><p>\u4F46\u662F\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u4FEE\u6539\u5B8C\u6BD5\u540E\u663E\u793A\u7684\u7ED3\u679C\u5374\u5982\u4E0B\u56FE\u6240\u793A\uFF0C\u5E76\u6CA1\u6709\u529E\u6CD5\u76F4\u63A5\u50CF\u6982\u5FF5\u6A21\u578B\u90A3\u6837\uFF0C\u4FEE\u6539\u8FC7\u540E \u663E\u793A\u5728\u4E2D\u95F4\u7684\u90A3\u6761\u7EBF\u4E0A\u9762\uFF0C\u81EA\u5DF1\u660E\u767D\u5373\u53EF\u3002</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707193816176.png" alt="image-20220707193816176" style="float:left;"><p>\u5B66\u4E60\u4E86\u591A\u5BF9\u4E00\u6216\u8005\u4E00\u5BF9\u591A\u7684\u5173\u7CFB\uFF0C\u63A5\u4E0B\u6765\u5B66\u4E60\u591A\u5BF9\u5BF9\u7684\u5173\u7CFB\uFF0C\u540C\u7406\u81EA\u5DF1\u5EFA\u597D\u8001\u5E08\u8868\uFF0C\u8FD9\u91CC\u4E0D\u5728\u53D9\u8FF0\uFF0C\u8BB0\u5F97\u8001\u5E08\u7F16\u53F7\u81EA\u589E\uFF0C\u5EFA\u597D\u5982\u4E0B\u56FE\u6240\u793A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707193932694.png" alt="image-20220707193932694" style="float:left;"><p>\u4E0B\u9762\u662F\u591A\u5BF9\u591A\u5173\u7CFB\u7684\u5173\u952E\uFF0C\u7531\u4E8E\u7269\u7406\u6A21\u578B\u591A\u5BF9\u591A\u7684\u5173\u7CFB\u9700\u8981\u4E00\u4E2A\u4E2D\u95F4\u8868\u6765\u8FDE\u63A5\uFF0C\u5982\u4E0B\u56FE\uFF0C\u53EA\u8BBE\u7F6E\u4E00\u4E2A\u5B57 \u6BB5\uFF0C\u4E3B\u952E\uFF0C\u81EA\u589E</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707193957629.png" alt="image-20220707193957629" style="float:left;"><p>\u70B9\u51FB\u5E94\u7528\uFF0C\u7136\u540E\u8BBE\u7F6EColumns\uFF0C\u53EA\u6DFB\u52A0\u4E00\u4E2A\u5B57\u6BB5</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707194048843.png" alt="image-20220707194048843" style="float:left;"><p>\u8FD9\u662F\u8BBE\u7F6E\u5B57\u6BB5\u9012\u589E\uFF0C\u524D\u9762\u5DF2\u7ECF\u53D9\u8FF0\u8FC7\u597D\u51E0\u6B21</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707194111885.png" alt="image-20220707194111885" style="float:left;"><p>\u8BBE\u7F6E\u597D\u540E\u5982\u4E0B\u56FE\u6240\u793A\uFF0C\u9700\u8981\u6CE8\u610F\u7684\u662F\u6709\u7BAD\u5934\u7684\u4E00\u65B9\u662F\u4E00\uFF0C\u65E0\u7BAD\u5934\u7684\u4E00\u65B9\u662F\u591A\uFF0C\u5373\u4E00\u5BF9\u591A\u7684\u591A\u5BF9\u4E00\u7684\u5173\u7CFB \u9700\u8981\u641E\u6E05\u695A\uFF0C\u5B66\u751F\u4E5F\u53EF\u4EE5\u6709\u5F88\u591A\u8001\u5E08\uFF0C\u8001\u5E08\u4E5F\u53EF\u4EE5\u6709\u5F88\u591A\u5B66\u751F\uFF0C\u6240\u4EE5\u5B66\u751F\u548C\u8001\u5E08\u90FD\u53EF\u4EE5\u662F\u4E3B\u4F53\uFF1B</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707194138137.png" alt="image-20220707194138137" style="float:left;"><p>\u53EF\u4EE5\u770B\u5230\u6DFB\u52A0\u5173\u7CFB\u4EE5\u540E\u5B66\u751F\u548C\u6559\u5E08\u7684\u5173\u7CFB\u8868\u524D\u540E\u53D1\u751F\u7684\u53D8\u5316</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707194158936.png" alt="image-20220707194158936" style="float:left;"><h5 id="_11-4-\u6982\u5FF5\u6A21\u578B\u8F6C\u4E3A\u7269\u7406\u6A21\u578B" tabindex="-1"><a class="header-anchor" href="#_11-4-\u6982\u5FF5\u6A21\u578B\u8F6C\u4E3A\u7269\u7406\u6A21\u578B" aria-hidden="true">#</a> 11.4 \u6982\u5FF5\u6A21\u578B\u8F6C\u4E3A\u7269\u7406\u6A21\u578B</h5><p>1\uFF1A\u5982\u4E0B\u56FE\u6240\u793A\u5148\u6253\u5F00\u6982\u5FF5\u6A21\u578B\u56FE\uFF0C\u7136\u540E\u70B9\u51FBTool,\u5982\u4E0B\u56FE\u6240\u793A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707194228064.png" alt="image-20220707194228064"></p><p>\u70B9\u5F00\u7684\u9875\u9762\u5982\u4E0B\u6240\u793A\uFF0Cname\u548Ccode\u5DF2\u7ECF\u4ECE\u6982\u5FF5\u6A21\u578B1\u6539\u6210\u7269\u7406\u6A21\u578B1\u4E86</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707194248236.png" alt="image-20220707194248236"></p><p>\u5B8C\u6210\u540E\u5982\u4E0B\u56FE\u6240\u793A\uFF0C\u5C06\u81EA\u884C\u6253\u5F00\u4FEE\u6539\u7684\u7269\u7406\u6A21\u578B\uFF0C\u9700\u8981\u6CE8\u610F\u7684\u662F\u8FD9\u4E9B\u8868\u7684\u6570\u636E\u7C7B\u578B\u5DF2\u7ECF\u81EA\u884C\u6539\u53D8\u4E86\uFF0C\u800C \u4E14\u4E2D\u95F4\u8868\u51FA\u73B0\u4E24\u4E2A\u4E3B\u952E\uFF0C\u5373\u53CC\u4E3B\u952E</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707194308595.png" alt="image-20220707194308595"></p><h5 id="_11-5-\u7269\u7406\u6A21\u578B\u8F6C\u4E3A\u6982\u5FF5\u6A21\u578B" tabindex="-1"><a class="header-anchor" href="#_11-5-\u7269\u7406\u6A21\u578B\u8F6C\u4E3A\u6982\u5FF5\u6A21\u578B" aria-hidden="true">#</a> 11.5 \u7269\u7406\u6A21\u578B\u8F6C\u4E3A\u6982\u5FF5\u6A21\u578B</h5><p>\u4E0A\u9762\u4ECB\u7ECD\u4E86\u6982\u5FF5\u6A21\u578B\u8F6C\u7269\u7406\u6A21\u578B\uFF0C\u4E0B\u9762\u4ECB\u7ECD\u4E00\u4E0B\u7269\u7406\u6A21\u578B\u8F6C\u6982\u5FF5\u6A21\u578B\uFF08\u5982\u4E0B\u56FE\u70B9\u51FB\u64CD\u4F5C\u5373\u53EF\uFF09</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707194405358.png" alt="image-20220707194405358"></p><p>\u7136\u540E\u51FA\u73B0\u5982\u4E0B\u56FE\u6240\u793A\u754C\u9762\uFF0C\u7136\u540E\u5C06\u7269\u7406\u4FEE\u6539\u4E3A\u6982\u5FF5 \uFF0C\u70B9\u51FB\u5E94\u7528\u786E\u8BA4\u5373\u53EF</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707194419360.png" alt="image-20220707194419360"></p><p>\u70B9\u51FB\u786E\u8BA4\u540E\u5C06\u81EA\u884C\u6253\u5F00\u5982\u4E0B\u56FE\u6240\u793A\u7684\u9875\u9762\uFF0C\u81EA\u5DF1\u89C2\u5BDF\u6709\u4F55\u53D8\u5316\uFF0C\u5982\u679C\u8F6C\u6362\u4E3Aoracle\u7684\uFF0C\u6570\u636E\u7C7B\u578B\u4F1A\u53D1\u751F\u53D8 \u5316\uFF0C\u6BD4\u5982Varchar2\u7B49\u7B49\uFF09\uFF1B</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707194433407.png" alt="image-20220707194433407"></p><h5 id="_11-6-\u7269\u7406\u6A21\u578B\u5BFC\u51FAsql\u8BED\u53E5" tabindex="-1"><a class="header-anchor" href="#_11-6-\u7269\u7406\u6A21\u578B\u5BFC\u51FAsql\u8BED\u53E5" aria-hidden="true">#</a> 11.6 \u7269\u7406\u6A21\u578B\u5BFC\u51FASQL\u8BED\u53E5</h5><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707194544714.png" alt="image-20220707194544714"></p><p>\u6253\u5F00\u4E4B\u540E\u5982\u56FE\u6240\u793A\uFF0C\u4FEE\u6539\u597D\u5B58\u5728sql\u8BED\u53E5\u7684\u4F4D\u7F6E\u548C\u751F\u6210\u6587\u4EF6\u7684\u540D\u79F0\u5373\u53EF</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707194557554.png" alt="image-20220707194557554"></p><p>\u5728Selection\u4E2D\u9009\u62E9\u9700\u8981\u5BFC\u51FA\u7684\u8868\uFF0C\u7136\u540E\u70B9\u51FB\u5E94\u7528\u548C\u786E\u8BA4\u5373\u53EF</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707194637242.png" alt="image-20220707194637242"></p><p>\u5B8C\u6210\u4EE5\u540E\u51FA\u73B0\u5982\u4E0B\u56FE\u6240\u793A\uFF0C\u53EF\u4EE5\u70B9\u51FBEdit\u6216\u8005close\u6309\u94AE</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707194727849.png" alt="image-20220707194727849"></p><p>\u81EA\u6B64\uFF0C\u5C31\u5B8C\u6210\u4E86\u5BFC\u51FAsql\u8BED\u53E5\uFF0C\u5C31\u53EF\u4EE5\u5230\u81EA\u5DF1\u6307\u5B9A\u7684\u4F4D\u7F6E\u67E5\u770B\u5BFC\u51FA\u7684sql\u8BED\u53E5\u4E86\uFF1BPowerDesigner\u5728\u4EE5\u540E\u5728 \u9879\u76EE\u5F00\u53D1\u8FC7\u7A0B\u4E2D\u7528\u6765\u505A\u9700\u6C42\u5206\u6790\u548C\u6570\u636E\u5E93\u7684\u8BBE\u8BA1\u975E\u5E38\u7684\u65B9\u4FBF\u548C\u5FEB\u6377\u3002</p><h2 id="\u7B2C12\u7AE0-\u6570\u636E\u5E93\u5176\u5B83\u8C03\u4F18\u7B56\u7565" tabindex="-1"><a class="header-anchor" href="#\u7B2C12\u7AE0-\u6570\u636E\u5E93\u5176\u5B83\u8C03\u4F18\u7B56\u7565" aria-hidden="true">#</a> \u7B2C12\u7AE0_\u6570\u636E\u5E93\u5176\u5B83\u8C03\u4F18\u7B56\u7565</h2><h3 id="_1-\u6570\u636E\u5E93\u8C03\u4F18\u7684\u63AA\u65BD" tabindex="-1"><a class="header-anchor" href="#_1-\u6570\u636E\u5E93\u8C03\u4F18\u7684\u63AA\u65BD" aria-hidden="true">#</a> 1. \u6570\u636E\u5E93\u8C03\u4F18\u7684\u63AA\u65BD</h3><h5 id="_1-1-\u8C03\u4F18\u7684\u76EE\u6807" tabindex="-1"><a class="header-anchor" href="#_1-1-\u8C03\u4F18\u7684\u76EE\u6807" aria-hidden="true">#</a> 1.1 \u8C03\u4F18\u7684\u76EE\u6807</h5><ul><li>\u5C3D\u53EF\u80FD\u8282\u7701\u7CFB\u7EDF\u8D44\u6E90 \uFF0C\u4EE5\u4FBF\u7CFB\u7EDF\u53EF\u4EE5\u63D0\u4F9B\u66F4\u5927\u8D1F\u8377\u7684\u670D\u52A1\u3002\uFF08\u541E\u5410\u91CF\u66F4\u5927\uFF09</li><li>\u5408\u7406\u7684\u7ED3\u6784\u8BBE\u8BA1\u548C\u53C2\u6570\u8C03\u6574\uFF0C\u4EE5\u63D0\u9AD8\u7528\u6237\u64CD\u4F5C\u54CD\u5E94\u7684\u901F\u5EA6 \u3002\uFF08\u54CD\u5E94\u901F\u5EA6\u66F4\u5FEB\uFF09</li><li>\u51CF\u5C11\u7CFB\u7EDF\u7684\u74F6\u9888\uFF0C\u63D0\u9AD8MySQL\u6570\u636E\u5E93\u6574\u4F53\u7684\u6027\u80FD\u3002</li></ul><h5 id="_1-2-\u5982\u4F55\u5B9A\u4F4D\u8C03\u4F18\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_1-2-\u5982\u4F55\u5B9A\u4F4D\u8C03\u4F18\u95EE\u9898" aria-hidden="true">#</a> 1.2 \u5982\u4F55\u5B9A\u4F4D\u8C03\u4F18\u95EE\u9898</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707200915836.png" alt="image-20220707200915836" style="float:left;"><p>\u5982\u4F55\u786E\u5B9A\u5462\uFF1F\u4E00\u822C\u60C5\u51B5\u4E0B\uFF0C\u6709\u5982\u4E0B\u51E0\u79CD\u65B9\u5F0F\uFF1A</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707201133424.png" alt="image-20220707201133424" style="float:left;"><h5 id="_1-3-\u8C03\u4F18\u7684\u7EF4\u5EA6\u548C\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#_1-3-\u8C03\u4F18\u7684\u7EF4\u5EA6\u548C\u6B65\u9AA4" aria-hidden="true">#</a> 1.3 \u8C03\u4F18\u7684\u7EF4\u5EA6\u548C\u6B65\u9AA4</h5><p>\u6211\u4EEC\u9700\u8981\u8C03\u4F18\u7684\u5BF9\u8C61\u662F\u6574\u4E2A\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF\uFF0C\u5B83\u4E0D\u4EC5\u5305\u62EC SQL \u67E5\u8BE2\uFF0C\u8FD8\u5305\u62EC\u6570\u636E\u5E93\u7684\u90E8\u7F72\u914D\u7F6E\u3001\u67B6\u6784 \u7B49\u3002\u4ECE\u8FD9\u4E2A\u89D2\u5EA6\u6765\u8BF4\uFF0C\u6211\u4EEC\u601D\u8003\u7684\u7EF4\u5EA6\u5C31\u4E0D\u4EC5\u4EC5\u5C40\u9650\u5728 SQL \u4F18\u5316\u4E0A\u4E86\u3002\u901A\u8FC7\u5982\u4E0B\u7684\u6B65\u9AA4\u6211\u4EEC\u8FDB\u884C\u68B3\u7406\uFF1A</p><h6 id="\u7B2C1\u6B65-\u9009\u62E9\u9002\u5408\u7684-dbms" tabindex="-1"><a class="header-anchor" href="#\u7B2C1\u6B65-\u9009\u62E9\u9002\u5408\u7684-dbms" aria-hidden="true">#</a> \u7B2C1\u6B65\uFF1A\u9009\u62E9\u9002\u5408\u7684 DBMS</h6><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707201443229.png" alt="image-20220707201443229" style="float:left;"><h6 id="\u7B2C2\u6B65-\u4F18\u5316\u8868\u8BBE\u8BA1" tabindex="-1"><a class="header-anchor" href="#\u7B2C2\u6B65-\u4F18\u5316\u8868\u8BBE\u8BA1" aria-hidden="true">#</a> \u7B2C2\u6B65\uFF1A\u4F18\u5316\u8868\u8BBE\u8BA1</h6><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707201617799.png" alt="image-20220707201617799" style="float:left;"><h6 id="\u7B2C3\u6B65-\u4F18\u5316\u903B\u8F91\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u7B2C3\u6B65-\u4F18\u5316\u903B\u8F91\u67E5\u8BE2" aria-hidden="true">#</a> \u7B2C3\u6B65\uFF1A\u4F18\u5316\u903B\u8F91\u67E5\u8BE2</h6><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707202059972.png" alt="image-20220707202059972" style="float:left;"><h6 id="\u7B2C4\u6B65-\u4F18\u5316\u7269\u7406\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u7B2C4\u6B65-\u4F18\u5316\u7269\u7406\u67E5\u8BE2" aria-hidden="true">#</a> \u7B2C4\u6B65\uFF1A\u4F18\u5316\u7269\u7406\u67E5\u8BE2</h6><p>\u7269\u7406\u67E5\u8BE2\u4F18\u5316\u662F\u5728\u786E\u5B9A\u4E86\u903B\u8F91\u67E5\u8BE2\u4F18\u5316\u4E4B\u540E\uFF0C\u91C7\u7528\u7269\u7406\u4F18\u5316\u6280\u672F\uFF08\u6BD4\u5982\u7D22\u5F15\u7B49\uFF09\uFF0C\u901A\u8FC7\u8BA1\u7B97\u4EE3\u4EF7\u6A21\u578B\u5BF9 \u5404\u79CD\u53EF\u80FD\u7684\u8BBF\u95EE\u8DEF\u5F84\u8FDB\u884C\u4F30\u7B97\uFF0C\u4ECE\u800C\u627E\u5230\u6267\u884C\u65B9\u5F0F\u4E2D\u4EE3\u4EF7\u6700\u5C0F\u7684\u4F5C\u4E3A\u6267\u884C\u8BA1\u5212\u3002<strong>\u5728\u8FD9\u4E2A\u90E8\u5206\u4E2D\uFF0C\u6211\u4EEC\u9700\u8981\u638C\u63E1\u7684\u91CD\u70B9\u662F\u5BF9\u7D22\u5F15\u7684\u521B\u5EFA\u548C\u4F7F\u7528\u3002</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707202156660.png" alt="image-20220707202156660" style="float:left;"><h6 id="\u7B2C5\u6B65-\u4F7F\u7528-redis-\u6216-memcached-\u4F5C\u4E3A\u7F13\u5B58" tabindex="-1"><a class="header-anchor" href="#\u7B2C5\u6B65-\u4F7F\u7528-redis-\u6216-memcached-\u4F5C\u4E3A\u7F13\u5B58" aria-hidden="true">#</a> \u7B2C5\u6B65\uFF1A\u4F7F\u7528 Redis \u6216 Memcached \u4F5C\u4E3A\u7F13\u5B58</h6><p>\u9664\u4E86\u53EF\u4EE5\u5BF9 SQL \u672C\u8EAB\u8FDB\u884C\u4F18\u5316\u4EE5\u5916\uFF0C\u6211\u4EEC\u8FD8\u53EF\u4EE5\u8BF7\u5916\u63F4\u63D0\u5347\u67E5\u8BE2\u7684\u6548\u7387\u3002</p><p>\u56E0\u4E3A\u6570\u636E\u90FD\u662F\u5B58\u653E\u5230\u6570\u636E\u5E93\u4E2D\uFF0C\u6211\u4EEC\u9700\u8981\u4ECE\u6570\u636E\u5E93\u5C42\u4E2D\u53D6\u51FA\u6570\u636E\u653E\u5230\u5185\u5B58\u4E2D\u8FDB\u884C\u4E1A\u52A1\u903B\u8F91\u7684\u64CD\u4F5C\uFF0C\u5F53\u7528 \u6237\u91CF\u589E\u5927\u7684\u65F6\u5019\uFF0C\u5982\u679C\u9891\u7E41\u5730\u8FDB\u884C\u6570\u636E\u67E5\u8BE2\uFF0C\u4F1A\u6D88\u8017\u6570\u636E\u5E93\u7684\u5F88\u591A\u8D44\u6E90\u3002\u5982\u679C\u6211\u4EEC\u5C06\u5E38\u7528\u7684\u6570\u636E\u76F4\u63A5\u653E \u5230\u5185\u5B58\u4E2D\uFF0C\u5C31\u4F1A\u5927\u5E45\u63D0\u5347\u67E5\u8BE2\u7684\u6548\u7387\u3002</p><p>\u952E\u503C\u5B58\u50A8\u6570\u636E\u5E93\u53EF\u4EE5\u5E2E\u6211\u4EEC\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\u3002</p><p>\u5E38\u7528\u7684\u952E\u503C\u5B58\u50A8\u6570\u636E\u5E93\u6709 Redis \u548C Memcached\uFF0C\u5B83\u4EEC\u90FD\u53EF\u4EE5\u5C06\u6570\u636E\u5B58\u653E\u5230\u5185\u5B58\u4E2D\u3002</p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707202436467.png" alt="image-20220707202436467" style="float:left;"><h6 id="\u7B2C6\u6B65-\u5E93\u7EA7\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#\u7B2C6\u6B65-\u5E93\u7EA7\u4F18\u5316" aria-hidden="true">#</a> \u7B2C6\u6B65\uFF1A\u5E93\u7EA7\u4F18\u5316</h6><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707202555506.png" alt="image-20220707202555506" style="float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707202732911.png" alt="image-20220707202732911" style="float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707203538155.png" alt="image-20220707203538155" style="float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707203607993.png" alt="image-20220707203607993" style="float:left;"><blockquote><p>\u4F46\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u5206\u62C6\u5728\u63D0\u5347\u6570\u636E\u5E93\u6027\u80FD\u7684\u540C\u65F6\uFF0C\u4E5F\u4F1A\u589E\u52A0\u7EF4\u62A4\u548C\u4F7F\u7528\u6210\u672C\u3002</p></blockquote><h3 id="_2-\u4F18\u5316mysql\u670D\u52A1\u5668" tabindex="-1"><a class="header-anchor" href="#_2-\u4F18\u5316mysql\u670D\u52A1\u5668" aria-hidden="true">#</a> 2. \u4F18\u5316MySQL\u670D\u52A1\u5668</h3><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707203818987.png" alt="image-20220707203818987" style="float:left;"><h5 id="_2-1-\u4F18\u5316\u670D\u52A1\u5668\u786C\u4EF6" tabindex="-1"><a class="header-anchor" href="#_2-1-\u4F18\u5316\u670D\u52A1\u5668\u786C\u4EF6" aria-hidden="true">#</a> 2.1 \u4F18\u5316\u670D\u52A1\u5668\u786C\u4EF6</h5><p>\u670D\u52A1\u5668\u7684\u786C\u4EF6\u6027\u80FD\u76F4\u63A5\u51B3\u5B9A\u7740MySQL\u6570\u636E\u5E93\u7684\u6027\u80FD\u3002\u786C\u4EF6\u7684\u6027\u80FD\u74F6\u9888\u76F4\u63A5\u51B3\u5B9AMySQL\u6570\u636E\u5E93\u7684\u8FD0\u884C\u901F\u5EA6 \u548C\u6548\u7387\u3002\u9488\u5BF9\u6027\u80FD\u74F6\u9888\u63D0\u9AD8\u786C\u4EF6\u914D\u7F6E\uFF0C\u53EF\u4EE5\u63D0\u9AD8MySQL\u6570\u636E\u5E93\u67E5\u8BE2\u3001\u66F4\u65B0\u7684\u901F\u5EA6\u3002</p><p>\uFF081\uFF09 <code>\u914D\u7F6E\u8F83\u5927\u7684\u5185\u5B58</code> \u3002\u8DB3\u591F\u5927\u7684\u663E\u5B58\u662F\u63D0\u9AD8MySQL\u6570\u636E\u5E93\u6027\u80FD\u7684\u65B9\u6CD5\u4E4B\u4E00\u3002\u5185\u5B58\u7684\u901F\u5EA6\u6BD4\u78C1\u76D8I/O\u5FEB\u5F97\u591A\uFF0C\u53EF\u4EE5\u901A\u8FC7\u589E\u52A0\u7CFB\u7EDF\u7684<code>\u7F13\u51B2\u533A\u5BB9\u91CF</code>\u4F7F\u6570\u636E\u5728\u5185\u5B58\u4E2D\u505C\u7559\u7684\u65F6\u95F4\u66F4\u957F\uFF0C\u4EE5<code>\u51CF\u5C11\u78C1\u76D8I/O</code>\u3002</p><p>\uFF082\uFF09 <code>\u914D\u7F6E\u9AD8\u901F\u78C1\u76D8\u7CFB\u7EDF </code>\uFF0C\u4EE5\u51CF\u5C11\u8BFB\u76D8\u7684\u7B49\u5F85\u65F6\u95F4\uFF0C\u63D0\u9AD8\u54CD\u5E94\u901F\u5EA6\u3002\u78C1\u76D8\u7684I/O\u80FD\u529B\uFF0C\u4E5F\u5C31\u662F\u5B83\u7684\u5BFB\u9053\u80FD\u529B\uFF0C\u76EE\u524D\u7684SCSI\u9AD8\u901F\u65CB\u8F6C\u7684\u662F7200\u8F6C/\u5206\u949F\uFF0C\u8FD9\u6837\u7684\u901F\u5EA6\uFF0C\u4E00\u65E6\u8BBF\u95EE\u7684\u7528\u6237\u91CF\u4E0A\u53BB\uFF0C\u78C1\u76D8\u7684\u538B\u529B\u5C31\u4F1A\u8FC7\u5927\uFF0C\u5982\u679C\u662F\u6BCF\u5929\u7684\u7F51\u7AD9pv (page view) \u5728150w\uFF0C\u8FD9\u6837\u7684\u4E00\u822C\u7684\u914D\u7F6E\u5C31\u65E0\u6CD5\u6EE1\u8DB3\u8FD9\u6837\u7684\u9700\u6C42\u4E86\u3002\u73B0\u5728SSD\u76DB\u884C\uFF0C\u5728SSD\u4E0A\u968F\u673A\u8BBF\u95EE\u548C\u987A\u5E8F\u8BBF\u95EE\u6027\u80FD\u5DEE\u4E0D\u591A\uFF0C\u4F7F\u7528SSD\u53EF\u4EE5\u51CF\u5C11\u968F\u673AIO\u5E26\u6765\u7684\u6027\u80FD\u635F\u8017\u3002</p><p>\uFF083\uFF09 <code>\u5408\u7406\u5206\u5E03\u78C1\u76D8I/O</code>\uFF0C\u628A\u78C1\u76D8I/O\u5206\u6563\u5728\u591A\u4E2A\u8BBE\u5907\uFF0C\u4EE5\u51CF\u5C11\u8D44\u6E90\u7ADE\u4E89\uFF0C\u63D0\u9AD8\u51B0\u7BB1\u64CD\u4F5C\u80FD\u529B\u3002</p><p>\uFF084\uFF09 <code>\u914D\u7F6E\u591A\u5904\u7406\u5668</code>, MySQL\u662F\u591A\u7EBF\u7A0B\u7684\u6570\u636E\u5E93\uFF0C\u591A\u5904\u7406\u5668\u53EF\u540C\u65F6\u6267\u884C\u591A\u4E2A\u7EBF\u7A0B\u3002</p><h5 id="_2-2-\u4F18\u5316mysql\u7684\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#_2-2-\u4F18\u5316mysql\u7684\u53C2\u6570" aria-hidden="true">#</a> 2.2 \u4F18\u5316MySQL\u7684\u53C2\u6570</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707204403406.png" alt="image-20220707204403406" style="float:left;"><ul><li><p>innodb_buffer_pool_size \uFF1A\u8FD9\u4E2A\u53C2\u6570\u662FMysql\u6570\u636E\u5E93\u6700\u91CD\u8981\u7684\u53C2\u6570\u4E4B\u4E00\uFF0C\u8868\u793AInnoDB\u7C7B\u578B\u7684 \u8868 \u548C\u7D22\u5F15\u7684\u6700\u5927\u7F13\u5B58 \u3002\u5B83\u4E0D\u4EC5\u4EC5\u7F13\u5B58 \u7D22\u5F15\u6570\u636E \uFF0C\u8FD8\u4F1A\u7F13\u5B58 \u8868\u7684\u6570\u636E \u3002\u8FD9\u4E2A\u503C\u8D8A\u5927\uFF0C\u67E5\u8BE2\u7684\u901F\u5EA6\u5C31\u4F1A\u8D8A \u5FEB\u3002\u4F46\u662F\u8FD9\u4E2A\u503C\u592A\u5927\u4F1A\u5F71\u54CD\u64CD\u4F5C\u7CFB\u7EDF\u7684\u6027\u80FD\u3002</p></li><li><p>key_buffer_size \uFF1A\u8868\u793A \u7D22\u5F15\u7F13\u51B2\u533A\u7684\u5927\u5C0F \u3002\u7D22\u5F15\u7F13\u51B2\u533A\u662F\u6240\u6709\u7684 \u7EBF\u7A0B\u5171\u4EAB \u3002\u589E\u52A0\u7D22\u5F15\u7F13\u51B2\u533A\u53EF \u4EE5\u5F97\u5230\u66F4\u597D\u5904\u7406\u7684\u7D22\u5F15\uFF08\u5BF9\u6240\u6709\u8BFB\u548C\u591A\u91CD\u5199\uFF09\u3002\u5F53\u7136\uFF0C\u8FD9\u4E2A\u503C\u4E0D\u662F\u8D8A\u5927\u8D8A\u597D\uFF0C\u5B83\u7684\u5927\u5C0F\u53D6\u51B3\u4E8E\u5185\u5B58 \u7684\u5927\u5C0F\u3002\u5982\u679C\u8FD9\u4E2A\u503C\u592A\u5927\uFF0C\u5C31\u4F1A\u5BFC\u81F4\u64CD\u4F5C\u7CFB\u7EDF\u9891\u7E41\u6362\u9875\uFF0C\u4E5F\u4F1A\u964D\u4F4E\u7CFB\u7EDF\u6027\u80FD\u3002\u5BF9\u4E8E\u5185\u5B58\u5728 4GB \u5DE6\u53F3 \u7684\u670D\u52A1\u5668\u8BE5\u53C2\u6570\u53EF\u8BBE\u7F6E\u4E3A 256M \u6216 384M \u3002</p></li><li><p>table_cache \uFF1A\u8868\u793A \u540C\u65F6\u6253\u5F00\u7684\u8868\u7684\u4E2A\u6570 \u3002\u8FD9\u4E2A\u503C\u8D8A\u5927\uFF0C\u80FD\u591F\u540C\u65F6\u6253\u5F00\u7684\u8868\u7684\u4E2A\u6570\u8D8A\u591A\u3002\u7269\u7406\u5185 \u5B58\u8D8A\u5927\uFF0C\u8BBE\u7F6E\u5C31\u8D8A\u5927\u3002\u9ED8\u8BA4\u4E3A2402\uFF0C\u8C03\u5230512-1024\u6700\u4F73\u3002\u8FD9\u4E2A\u503C\u4E0D\u662F\u8D8A\u5927\u8D8A\u597D\uFF0C\u56E0\u4E3A\u540C\u65F6\u6253\u5F00\u7684\u8868 \u592A\u591A\u4F1A\u5F71\u54CD\u64CD\u4F5C\u7CFB\u7EDF\u7684\u6027\u80FD\u3002</p></li><li><p>query_cache_size \uFF1A\u8868\u793A \u67E5\u8BE2\u7F13\u51B2\u533A\u7684\u5927\u5C0F \u3002\u53EF\u4EE5\u901A\u8FC7\u5728MySQL\u63A7\u5236\u53F0\u89C2\u5BDF\uFF0C\u5982\u679C Qcache_lowmem_prunes\u7684\u503C\u975E\u5E38\u5927\uFF0C\u5219\u8868\u660E\u7ECF\u5E38\u51FA\u73B0\u7F13\u51B2\u4E0D\u591F\u7684\u60C5\u51B5\uFF0C\u5C31\u8981\u589E\u52A0Query_cache_size \u7684\u503C\uFF1B\u5982\u679CQcache_hits\u7684\u503C\u975E\u5E38\u5927\uFF0C\u5219\u8868\u660E\u67E5\u8BE2\u7F13\u51B2\u4F7F\u7528\u975E\u5E38\u9891\u7E41\uFF0C\u5982\u679C\u8BE5\u503C\u8F83\u5C0F\u53CD\u800C\u4F1A\u5F71\u54CD\u6548 \u7387\uFF0C\u90A3\u4E48\u53EF\u4EE5\u8003\u8651\u4E0D\u7528\u67E5\u8BE2\u7F13\u5B58\uFF1BQcache_free_blocks\uFF0C\u5982\u679C\u8BE5\u503C\u975E\u5E38\u5927\uFF0C\u5219\u8868\u660E\u7F13\u51B2\u533A\u4E2D\u788E\u7247\u5F88 \u591A\u3002MySQL8.0\u4E4B\u540E\u5931\u6548\u3002\u8BE5\u53C2\u6570\u9700\u8981\u548Cquery_cache_type\u914D\u5408\u4F7F\u7528\u3002</p></li><li><p>query_cache_type \u7684\u503C\u662F0\u65F6\uFF0C\u6240\u6709\u7684\u67E5\u8BE2\u90FD\u4E0D\u4F7F\u7528\u67E5\u8BE2\u7F13\u5B58\u533A\u3002\u4F46\u662Fquery_cache_type=0\u5E76\u4E0D \u4F1A\u5BFC\u81F4MySQL\u91CA\u653Equery_cache_size\u6240\u914D\u7F6E\u7684\u7F13\u5B58\u533A\u5185\u5B58\u3002</p><ul><li>\u5F53query_cache_type=1\u65F6\uFF0C\u6240\u6709\u7684\u67E5\u8BE2\u90FD\u5C06\u4F7F\u7528\u67E5\u8BE2\u7F13\u5B58\u533A\uFF0C\u9664\u975E\u5728\u67E5\u8BE2\u8BED\u53E5\u4E2D\u6307\u5B9A SQL_NO_CACHE \uFF0C\u5982SELECT SQL_NO_CACHE * FROM tbl_name\u3002</li><li>\u5F53query_cache_type=2\u65F6\uFF0C\u53EA\u6709\u5728\u67E5\u8BE2\u8BED\u53E5\u4E2D\u4F7F\u7528 SQL_CACHE \u5173\u952E\u5B57\uFF0C\u67E5\u8BE2\u624D\u4F1A\u4F7F\u7528\u67E5\u8BE2\u7F13 \u5B58\u533A\u3002\u4F7F\u7528\u67E5\u8BE2\u7F13\u5B58\u533A\u53EF\u4EE5\u63D0\u9AD8\u67E5\u8BE2\u7684\u901F\u5EA6\uFF0C\u8FD9\u79CD\u65B9\u5F0F\u53EA\u9002\u7528\u4E8E\u4FEE\u6539\u64CD\u4F5C\u5C11\u4E14\u7ECF\u5E38\u6267\u884C\u76F8\u540C\u7684 \u67E5\u8BE2\u64CD\u4F5C\u7684\u60C5\u51B5\u3002</li></ul></li><li><p>sort_buffer_size \uFF1A\u8868\u793A\u6BCF\u4E2A \u9700\u8981\u8FDB\u884C\u6392\u5E8F\u7684\u7EBF\u7A0B\u5206\u914D\u7684\u7F13\u51B2\u533A\u7684\u5927\u5C0F \u3002\u589E\u52A0\u8FD9\u4E2A\u53C2\u6570\u7684\u503C\u53EF\u4EE5 \u63D0\u9AD8 ORDER BY \u6216 GROUP BY \u64CD\u4F5C\u7684\u901F\u5EA6\u3002\u9ED8\u8BA4\u6570\u503C\u662F2 097 144\u5B57\u8282\uFF08\u7EA62MB\uFF09\u3002\u5BF9\u4E8E\u5185\u5B58\u57284GB \u5DE6\u53F3\u7684\u670D\u52A1\u5668\u63A8\u8350\u8BBE\u7F6E\u4E3A6-8M\uFF0C\u5982\u679C\u6709100\u4E2A\u8FDE\u63A5\uFF0C\u90A3\u4E48\u5B9E\u9645\u5206\u914D\u7684\u603B\u5171\u6392\u5E8F\u7F13\u51B2\u533A\u5927\u5C0F\u4E3A100 \xD7 6 \uFF1D 600MB\u3002</p></li><li><p>join_buffer_size = 8M \uFF1A\u8868\u793A \u8054\u5408\u67E5\u8BE2\u64CD\u4F5C\u6240\u80FD\u4F7F\u7528\u7684\u7F13\u51B2\u533A\u5927\u5C0F \uFF0C\u548Csort_buffer_size\u4E00\u6837\uFF0C \u8BE5\u53C2\u6570\u5BF9\u5E94\u7684\u5206\u914D\u5185\u5B58\u4E5F\u662F\u6BCF\u4E2A\u8FDE\u63A5\u72EC\u4EAB\u3002</p></li><li><p>read_buffer_size \uFF1A\u8868\u793A \u6BCF\u4E2A\u7EBF\u7A0B\u8FDE\u7EED\u626B\u63CF\u65F6\u4E3A\u626B\u63CF\u7684\u6BCF\u4E2A\u8868\u5206\u914D\u7684\u7F13\u51B2\u533A\u7684\u5927\u5C0F\uFF08\u5B57\u8282\uFF09 \u3002\u5F53\u7EBF \u7A0B\u4ECE\u8868\u4E2D\u8FDE\u7EED\u8BFB\u53D6\u8BB0\u5F55\u65F6\u9700\u8981\u7528\u5230\u8FD9\u4E2A\u7F13\u51B2\u533A\u3002SET SESSION read_buffer_size=n\u53EF\u4EE5\u4E34\u65F6\u8BBE\u7F6E\u8BE5\u53C2 \u6570\u7684\u503C\u3002\u9ED8\u8BA4\u4E3A64K\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u4E3A4M\u3002</p></li><li><p>innodb_flush_log_at_trx_commit \uFF1A\u8868\u793A \u4F55\u65F6\u5C06\u7F13\u51B2\u533A\u7684\u6570\u636E\u5199\u5165\u65E5\u5FD7\u6587\u4EF6 \uFF0C\u5E76\u4E14\u5C06\u65E5\u5FD7\u6587\u4EF6 \u5199\u5165\u78C1\u76D8\u4E2D\u3002\u8BE5\u53C2\u6570\u5BF9\u4E8EinnoDB\u5F15\u64CE\u975E\u5E38\u91CD\u8981\u3002\u8BE5\u53C2\u6570\u67093\u4E2A\u503C\uFF0C\u5206\u522B\u4E3A0\u30011\u548C2\u3002\u8BE5\u53C2\u6570\u7684\u9ED8\u8BA4\u503C \u4E3A1\u3002</p><ul><li>\u503C\u4E3A 0 \u65F6\uFF0C\u8868\u793A \u6BCF\u79D21\u6B21 \u7684\u9891\u7387\u5C06\u6570\u636E\u5199\u5165\u65E5\u5FD7\u6587\u4EF6\u5E76\u5C06\u65E5\u5FD7\u6587\u4EF6\u5199\u5165\u78C1\u76D8\u3002\u6BCF\u4E2A\u4E8B\u52A1\u7684 commit\u5E76\u4E0D\u4F1A\u89E6\u53D1\u524D\u9762\u7684\u4EFB\u4F55\u64CD\u4F5C\u3002\u8BE5\u6A21\u5F0F\u901F\u5EA6\u6700\u5FEB\uFF0C\u4F46\u4E0D\u592A\u5B89\u5168\uFF0Cmysqld\u8FDB\u7A0B\u7684\u5D29\u6E83\u4F1A\u5BFC \u81F4\u4E0A\u4E00\u79D2\u949F\u6240\u6709\u4E8B\u52A1\u6570\u636E\u7684\u4E22\u5931\u3002</li><li>\u503C\u4E3A 1 \u65F6\uFF0C\u8868\u793A \u6BCF\u6B21\u63D0\u4EA4\u4E8B\u52A1\u65F6 \u5C06\u6570\u636E\u5199\u5165\u65E5\u5FD7\u6587\u4EF6\u5E76\u5C06\u65E5\u5FD7\u6587\u4EF6\u5199\u5165\u78C1\u76D8\u8FDB\u884C\u540C\u6B65\u3002\u8BE5\u6A21 \u5F0F\u662F\u6700\u5B89\u5168\u7684\uFF0C\u4F46\u4E5F\u662F\u6700\u6162\u7684\u4E00\u79CD\u65B9\u5F0F\u3002\u56E0\u4E3A\u6BCF\u6B21\u4E8B\u52A1\u63D0\u4EA4\u6216\u4E8B\u52A1\u5916\u7684\u6307\u4EE4\u90FD\u9700\u8981\u628A\u65E5\u5FD7\u5199\u5165 \uFF08flush\uFF09\u786C\u76D8\u3002</li><li>\u503C\u4E3A 2 \u65F6\uFF0C\u8868\u793A \u6BCF\u6B21\u63D0\u4EA4\u4E8B\u52A1\u65F6 \u5C06\u6570\u636E\u5199\u5165\u65E5\u5FD7\u6587\u4EF6\uFF0C \u6BCF\u96941\u79D2 \u5C06\u65E5\u5FD7\u6587\u4EF6\u5199\u5165\u78C1\u76D8\u3002\u8BE5\u6A21 \u5F0F\u901F\u5EA6\u8F83\u5FEB\uFF0C\u4E5F\u6BD40\u5B89\u5168\uFF0C\u53EA\u6709\u5728\u64CD\u4F5C\u7CFB\u7EDF\u5D29\u6E83\u6216\u8005\u7CFB\u7EDF\u65AD\u7535\u7684\u60C5\u51B5\u4E0B\uFF0C\u4E0A\u4E00\u79D2\u949F\u6240\u6709\u4E8B\u52A1\u6570 \u636E\u624D\u53EF\u80FD\u4E22\u5931\u3002</li></ul></li><li><p>innodb_log_buffer_size \uFF1A\u8FD9\u662F InnoDB \u5B58\u50A8\u5F15\u64CE\u7684 \u4E8B\u52A1\u65E5\u5FD7\u6240\u4F7F\u7528\u7684\u7F13\u51B2\u533A \u3002\u4E3A\u4E86\u63D0\u9AD8\u6027\u80FD\uFF0C \u4E5F\u662F\u5148\u5C06\u4FE1\u606F\u5199\u5165 Innodb Log Buffer \u4E2D\uFF0C\u5F53\u6EE1\u8DB3 innodb_flush_log_trx_commit \u53C2\u6570\u6240\u8BBE\u7F6E\u7684\u76F8\u5E94\u6761 \u4EF6\uFF08\u6216\u8005\u65E5\u5FD7\u7F13\u51B2\u533A\u5199\u6EE1\uFF09\u4E4B\u540E\uFF0C\u624D\u4F1A\u5C06\u65E5\u5FD7\u5199\u5230\u6587\u4EF6\uFF08\u6216\u8005\u540C\u6B65\u5230\u78C1\u76D8\uFF09\u4E2D\u3002</p></li><li><p>max_connections \uFF1A\u8868\u793A \u5141\u8BB8\u8FDE\u63A5\u5230MySQL\u6570\u636E\u5E93\u7684\u6700\u5927\u6570\u91CF \uFF0C\u9ED8\u8BA4\u503C\u662F 151 \u3002\u5982\u679C\u72B6\u6001\u53D8\u91CF connection_errors_max_connections \u4E0D\u4E3A\u96F6\uFF0C\u5E76\u4E14\u4E00\u76F4\u589E\u957F\uFF0C\u5219\u8BF4\u660E\u4E0D\u65AD\u6709\u8FDE\u63A5\u8BF7\u6C42\u56E0\u6570\u636E\u5E93\u8FDE\u63A5 \u6570\u5DF2\u8FBE\u5230\u5141\u8BB8\u6700\u5927\u503C\u800C\u5931\u8D25\uFF0C\u8FD9\u662F\u53EF\u4EE5\u8003\u8651\u589E\u5927max_connections \u7684\u503C\u3002\u5728Linux \u5E73\u53F0\u4E0B\uFF0C\u6027\u80FD\u597D\u7684 \u670D\u52A1\u5668\uFF0C\u652F\u6301 500-1000 \u4E2A\u8FDE\u63A5\u4E0D\u662F\u96BE\u4E8B\uFF0C\u9700\u8981\u6839\u636E\u670D\u52A1\u5668\u6027\u80FD\u8FDB\u884C\u8BC4\u4F30\u8BBE\u5B9A\u3002\u8FD9\u4E2A\u8FDE\u63A5\u6570 \u4E0D\u662F\u8D8A\u5927 \u8D8A\u597D \uFF0C\u56E0\u4E3A\u8FD9\u4E9B\u8FDE\u63A5\u4F1A\u6D6A\u8D39\u5185\u5B58\u7684\u8D44\u6E90\u3002\u8FC7\u591A\u7684\u8FDE\u63A5\u53EF\u80FD\u4F1A\u5BFC\u81F4MySQL\u670D\u52A1\u5668\u50F5\u6B7B\u3002</p></li><li><p>back_log \uFF1A\u7528\u4E8E \u63A7\u5236MySQL\u76D1\u542CTCP\u7AEF\u53E3\u65F6\u8BBE\u7F6E\u7684\u79EF\u538B\u8BF7\u6C42\u6808\u5927\u5C0F \u3002\u5982\u679CMySql\u7684\u8FDE\u63A5\u6570\u8FBE\u5230 max_connections\u65F6\uFF0C\u65B0\u6765\u7684\u8BF7\u6C42\u5C06\u4F1A\u88AB\u5B58\u5728\u5806\u6808\u4E2D\uFF0C\u4EE5\u7B49\u5F85\u67D0\u4E00\u8FDE\u63A5\u91CA\u653E\u8D44\u6E90\uFF0C\u8BE5\u5806\u6808\u7684\u6570\u91CF\u5373 back_log\uFF0C\u5982\u679C\u7B49\u5F85\u8FDE\u63A5\u7684\u6570\u91CF\u8D85\u8FC7back_log\uFF0C\u5C06\u4E0D\u88AB\u6388\u4E88\u8FDE\u63A5\u8D44\u6E90\uFF0C\u5C06\u4F1A\u62A5\u9519\u30025.6.6 \u7248\u672C\u4E4B\u524D\u9ED8 \u8BA4\u503C\u4E3A 50 \uFF0C \u4E4B\u540E\u7684\u7248\u672C\u9ED8\u8BA4\u4E3A 50 + \uFF08max_connections / 5\uFF09\uFF0C \u5BF9\u4E8ELinux\u7CFB\u7EDF\u63A8\u8350\u8BBE\u7F6E\u4E3A\u5C0F\u4E8E512 \u7684\u6574\u6570\uFF0C\u4F46\u6700\u5927\u4E0D\u8D85\u8FC7900\u3002</p><p>\u5982\u679C\u9700\u8981\u6570\u636E\u5E93\u5728\u8F83\u77ED\u7684\u65F6\u95F4\u5185\u5904\u7406\u5927\u91CF\u8FDE\u63A5\u8BF7\u6C42\uFF0C \u53EF\u4EE5\u8003\u8651\u9002\u5F53\u589E\u5927back_log \u7684\u503C\u3002</p></li><li><p>thread_cache_size \uFF1A \u7EBF\u7A0B\u6C60\u7F13\u5B58\u7EBF\u7A0B\u6570\u91CF\u7684\u5927\u5C0F \uFF0C\u5F53\u5BA2\u6237\u7AEF\u65AD\u5F00\u8FDE\u63A5\u540E\u5C06\u5F53\u524D\u7EBF\u7A0B\u7F13\u5B58\u8D77\u6765\uFF0C \u5F53\u5728\u63A5\u5230\u65B0\u7684\u8FDE\u63A5\u8BF7\u6C42\u65F6\u5FEB\u901F\u54CD\u5E94\u65E0\u9700\u521B\u5EFA\u65B0\u7684\u7EBF\u7A0B \u3002\u8FD9\u5C24\u5176\u5BF9\u90A3\u4E9B\u4F7F\u7528\u77ED\u8FDE\u63A5\u7684\u5E94\u7528\u7A0B\u5E8F\u6765\u8BF4\u53EF \u4EE5\u6781\u5927\u7684\u63D0\u9AD8\u521B\u5EFA\u8FDE\u63A5\u7684\u6548\u7387\u3002\u90A3\u4E48\u4E3A\u4E86\u63D0\u9AD8\u6027\u80FD\u53EF\u4EE5\u589E\u5927\u8BE5\u53C2\u6570\u7684\u503C\u3002\u9ED8\u8BA4\u4E3A60\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u4E3A 120\u3002</p><p>\u53EF\u4EE5\u901A\u8FC7\u5982\u4E0B\u51E0\u4E2AMySQL\u72B6\u6001\u503C\u6765\u9002\u5F53\u8C03\u6574\u7EBF\u7A0B\u6C60\u7684\u5927\u5C0F\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; show global status like &#39;Thread%&#39;;
+-------------------+-------+
| Variable_name | Value |
+-------------------+-------+
| Threads_cached | 2 |
| Threads_connected | 1 |
| Threads_created | 3 |
| Threads_running | 2 |
+-------------------+-------+
4 rows in set (0.01 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F53 Threads_cached \u8D8A\u6765\u8D8A\u5C11\uFF0C\u4F46 Threads_connected \u59CB\u7EC8\u4E0D\u964D\uFF0C\u4E14 Threads_created \u6301\u7EED\u5347\u9AD8\uFF0C\u53EF \u9002\u5F53\u589E\u52A0 thread_cache_size \u7684\u5927\u5C0F\u3002</p></li><li><p>wait_timeout \uFF1A\u6307\u5B9A \u4E00\u4E2A\u8BF7\u6C42\u7684\u6700\u5927\u8FDE\u63A5\u65F6\u95F4 \uFF0C\u5BF9\u4E8E4GB\u5DE6\u53F3\u5185\u5B58\u7684\u670D\u52A1\u5668\u53EF\u4EE5\u8BBE\u7F6E\u4E3A5-10\u3002</p></li><li><p>interactive_timeout \uFF1A\u8868\u793A\u670D\u52A1\u5668\u5728\u5173\u95ED\u8FDE\u63A5\u524D\u7B49\u5F85\u884C\u52A8\u7684\u79D2\u6570\u3002</p></li></ul><p>\u8FD9\u91CC\u7ED9\u51FA\u4E00\u4EFDmy.cnf\u7684\u53C2\u8003\u914D\u7F6E\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysqld]
port = 3306 
serverid = 1 
socket = /tmp/mysql.sock 
skip-locking #\u907F\u514DMySQL\u7684\u5916\u90E8\u9501\u5B9A\uFF0C\u51CF\u5C11\u51FA\u9519\u51E0\u7387\u589E\u5F3A\u7A33\u5B9A\u6027\u3002 
skip-name-resolve #\u7981\u6B62MySQL\u5BF9\u5916\u90E8\u8FDE\u63A5\u8FDB\u884CDNS\u89E3\u6790\uFF0C\u4F7F\u7528\u8FD9\u4E00\u9009\u9879\u53EF\u4EE5\u6D88\u9664MySQL\u8FDB\u884CDNS\u89E3\u6790\u7684\u65F6\u95F4\u3002\u4F46\u9700\u8981\u6CE8\u610F\uFF0C\u5982\u679C\u5F00\u542F\u8BE5\u9009\u9879\uFF0C\u5219\u6240\u6709\u8FDC\u7A0B\u4E3B\u673A\u8FDE\u63A5\u6388\u6743\u90FD\u8981\u4F7F\u7528IP\u5730\u5740\u65B9\u5F0F\uFF0C\u5426\u5219MySQL\u5C06\u65E0\u6CD5\u6B63\u5E38\u5904\u7406\u8FDE\u63A5\u8BF7\u6C42\uFF01 
back_log = 384
key_buffer_size = 256M 
max_allowed_packet = 4M 
thread_stack = 256K
table_cache = 128K 
sort_buffer_size = 6M 
read_buffer_size = 4M
read_rnd_buffer_size=16M 
join_buffer_size = 8M 
myisam_sort_buffer_size =64M 
table_cache = 512 
thread_cache_size = 64 
query_cache_size = 64M
tmp_table_size = 256M 
max_connections = 768 
max_connect_errors = 10000000
wait_timeout = 10 
thread_concurrency = 8 #\u8BE5\u53C2\u6570\u53D6\u503C\u4E3A\u670D\u52A1\u5668\u903B\u8F91CPU\u6570\u91CF*2\uFF0C\u5728\u672C\u4F8B\u4E2D\uFF0C\u670D\u52A1\u5668\u67092\u9897\u7269\u7406CPU\uFF0C\u800C\u6BCF\u9897\u7269\u7406CPU\u53C8\u652F\u6301H.T\u8D85\u7EBF\u7A0B\uFF0C\u6240\u4EE5\u5B9E\u9645\u53D6\u503C\u4E3A4*2=8
skip-networking #\u5F00\u542F\u8BE5\u9009\u9879\u53EF\u4EE5\u5F7B\u5E95\u5173\u95EDMySQL\u7684TCP/IP\u8FDE\u63A5\u65B9\u5F0F\uFF0C\u5982\u679CWEB\u670D\u52A1\u5668\u662F\u4EE5\u8FDC\u7A0B\u8FDE\u63A5\u7684\u65B9\u5F0F\u8BBF\u95EEMySQL\u6570\u636E\u5E93\u670D\u52A1\u5668\u5219\u4E0D\u8981\u5F00\u542F\u8BE5\u9009\u9879\uFF01\u5426\u5219\u5C06\u65E0\u6CD5\u6B63\u5E38\u8FDE\u63A5\uFF01 
table_cache=1024
innodb_additional_mem_pool_size=4M #\u9ED8\u8BA4\u4E3A2M 
innodb_flush_log_at_trx_commit=1
innodb_log_buffer_size=2M #\u9ED8\u8BA4\u4E3A1M 
innodb_thread_concurrency=8 #\u4F60\u7684\u670D\u52A1\u5668CPU\u6709\u51E0\u4E2A\u5C31\u8BBE\u7F6E\u4E3A\u51E0\u3002\u5EFA\u8BAE\u7528\u9ED8\u8BA4\u4E00\u822C\u4E3A8 
tmp_table_size=64M #\u9ED8\u8BA4\u4E3A16M\uFF0C\u8C03\u523064-256\u6700\u6302
thread_cache_size=120 
query_cache_size=32M
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F88\u591A\u60C5\u51B5\u8FD8\u9700\u8981\u5177\u4F53\u60C5\u51B5\u5177\u4F53\u5206\u6790\uFF01</p><p><strong>\u4E3E\u4F8B\uFF1A</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707210351452.png" alt="image-20220707210351452" style="float:left;"><p><strong>(1) \u8C03\u6574\u7CFB\u7EDF\u53C2\u6570 InnoDB_flush_log_at_trx_commit</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707210447501.png" alt="image-20220707210447501" style="float:left;"><p><strong>(2) \u8C03\u6574\u7CFB\u7EDF\u53C2\u6570 InnoDB_buffer_pool_size</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707210555848.png" alt="image-20220707210555848" style="float:left;"><p><strong>(3) \u8C03\u6574\u7CFB\u7EDF\u53C2\u6570 InnoDB_buffer_pool_instances</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707210720394.png" alt="image-20220707210720394" style="float:left;"><h3 id="_3-\u4F18\u5316\u6570\u636E\u5E93\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_3-\u4F18\u5316\u6570\u636E\u5E93\u7ED3\u6784" aria-hidden="true">#</a> 3. \u4F18\u5316\u6570\u636E\u5E93\u7ED3\u6784</h3><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707211709553.png" alt="image-20220707211709553" style="float:left;"><h5 id="_3-1-\u62C6\u5206\u8868-\u51B7\u70ED\u6570\u636E\u5206\u79BB" tabindex="-1"><a class="header-anchor" href="#_3-1-\u62C6\u5206\u8868-\u51B7\u70ED\u6570\u636E\u5206\u79BB" aria-hidden="true">#</a> 3.1 \u62C6\u5206\u8868\uFF1A\u51B7\u70ED\u6570\u636E\u5206\u79BB</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707211802756.png" alt="image-20220707211802756" style="float:left;"><p><strong>\u4E3E\u4F8B1\uFF1A</strong> <code>\u4F1A\u5458members\u8868</code> \u5B58\u50A8\u4F1A\u5458\u767B\u5F55\u8BA4\u8BC1\u4FE1\u606F\uFF0C\u8BE5\u8868\u4E2D\u6709\u5F88\u591A\u5B57\u6BB5\uFF0C\u5982id\u3001\u59D3\u540D\u3001\u5BC6\u7801\u3001\u5730\u5740\u3001\u7535 \u8BDD\u3001\u4E2A\u4EBA\u63CF\u8FF0\u5B57\u6BB5\u3002\u5176\u4E2D\u5730\u5740\u3001\u7535\u8BDD\u3001\u4E2A\u4EBA\u63CF\u8FF0\u7B49\u5B57\u6BB5\u5E76\u4E0D\u5E38\u7528\uFF0C\u53EF\u4EE5\u5C06\u8FD9\u4E9B\u4E0D\u5E38\u7528\u7684\u5B57\u6BB5\u5206\u89E3\u51FA\u53E6\u4E00 \u4E2A\u8868\u3002\u5C06\u8FD9\u4E2A\u8868\u53D6\u540D\u53EBmembers_detail\uFF0C\u8868\u4E2D\u6709member_id\u3001address\u3001telephone\u3001description\u7B49\u5B57\u6BB5\u3002 \u8FD9\u6837\u5C31\u628A\u4F1A\u5458\u8868\u5206\u6210\u4E86\u4E24\u4E2A\u8868\uFF0C\u5206\u522B\u4E3A <code>members\u8868</code> \u548C <code>members_detail\u8868</code> \u3002</p><p>\u521B\u5EFA\u8FD9\u4E24\u4E2A\u8868\u7684SQL\u8BED\u53E5\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE members (
    id int(11) NOT NULL AUTO_INCREMENT,
    username varchar(50) DEFAULT NULL,
    password varchar(50) DEFAULT NULL,
    last_login_time datetime DEFAULT NULL,
    last_login_ip varchar(100) DEFAULT NULL,
    PRIMARY KEY(Id)
);
CREATE TABLE members_detail (
    Member_id int(11) NOT NULL DEFAULT 0,
    address varchar(255) DEFAULT NULL,
    telephone varchar(255) DEFAULT NULL,
    description text
);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u9700\u8981\u67E5\u8BE2\u4F1A\u5458\u7684\u57FA\u672C\u4FE1\u606F\u6216\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u90A3\u4E48\u53EF\u4EE5\u7528\u4F1A\u5458\u7684id\u6765\u67E5\u8BE2\u3002\u5982\u679C\u9700\u8981\u5C06\u4F1A\u5458\u7684\u57FA\u672C\u4FE1\u606F\u548C \u8BE6\u7EC6\u4FE1\u606F\u540C\u65F6\u663E\u793A\uFF0C\u90A3\u4E48\u53EF\u4EE5\u5C06members\u8868\u548Cmembers_detail\u8868\u8FDB\u884C\u8054\u5408\u67E5\u8BE2\uFF0C\u67E5\u8BE2\u8BED\u53E5\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT * FROM members LEFT JOIN members_detail on members.id =
members_detail.member_id;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u901A\u8FC7\u8FD9\u79CD\u5206\u89E3\u53EF\u4EE5\u63D0\u9AD8\u8868\u7684\u67E5\u8BE2\u6548\u7387\u3002\u5BF9\u4E8E\u5B57\u6BB5\u5F88\u591A\u4E14\u6709\u4E9B\u5B57\u6BB5\u4F7F\u7528\u4E0D\u9891\u7E41\u7684\u8868\uFF0C\u53EF\u4EE5\u901A\u8FC7\u8FD9\u79CD\u5206\u89E3\u7684\u65B9\u5F0F\u6765\u4F18\u5316\u6570\u636E\u5E93\u7684\u6027\u80FD\u3002</p><h5 id="_3-2-\u589E\u52A0\u4E2D\u95F4\u8868" tabindex="-1"><a class="header-anchor" href="#_3-2-\u589E\u52A0\u4E2D\u95F4\u8868" aria-hidden="true">#</a> 3.2 \u589E\u52A0\u4E2D\u95F4\u8868</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707212800544.png" alt="image-20220707212800544" style="float:left;"><p>\u4E3E\u4F8B1\uFF1A \u5B66\u751F\u4FE1\u606F\u8868 \u548C \u73ED\u7EA7\u8868 \u7684SQL\u8BED\u53E5\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE \`class\` (
\`id\` INT(11) NOT NULL AUTO_INCREMENT,
\`className\` VARCHAR(30) DEFAULT NULL,
\`address\` VARCHAR(40) DEFAULT NULL,
\`monitor\` INT NULL ,
PRIMARY KEY (\`id\`)
) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

CREATE TABLE \`student\` (
\`id\` INT(11) NOT NULL AUTO_INCREMENT,
\`stuno\` INT NOT NULL ,
\`name\` VARCHAR(20) DEFAULT NULL,
\`age\` INT(3) DEFAULT NULL,
\`classId\` INT(11) DEFAULT NULL,
PRIMARY KEY (\`id\`)
) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u73B0\u5728\u6709\u4E00\u4E2A\u6A21\u5757\u9700\u8981\u7ECF\u5E38\u67E5\u8BE2\u5E26\u6709\u5B66\u751F\u540D\u79F0\uFF08name\uFF09\u3001\u5B66\u751F\u6240\u5728\u73ED\u7EA7\u540D\u79F0\uFF08className\uFF09\u3001\u5B66\u751F\u73ED\u7EA7\u73ED \u957F\uFF08monitor\uFF09\u7684\u5B66\u751F\u4FE1\u606F\u3002\u6839\u636E\u8FD9\u79CD\u60C5\u51B5\u53EF\u4EE5\u521B\u5EFA\u4E00\u4E2A temp_student \u8868\u3002temp_student\u8868\u4E2D\u5B58\u50A8\u5B66\u751F\u540D\u79F0\uFF08stu_name\uFF09\u3001\u5B66\u751F\u6240\u5728\u73ED\u7EA7\u540D\u79F0\uFF08className\uFF09\u548C\u5B66\u751F\u73ED\u7EA7\u73ED\u957F\uFF08monitor\uFF09\u4FE1\u606F\u3002\u521B\u5EFA\u8868\u7684\u8BED\u53E5\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE \`temp_student\` (
\`id\` INT(11) NOT NULL AUTO_INCREMENT,
\`stu_name\` INT NOT NULL ,
\`className\` VARCHAR(20) DEFAULT NULL,
\`monitor\` INT(3) DEFAULT NULL,
PRIMARY KEY (\`id\`)
) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u63A5\u4E0B\u6765\uFF0C\u4ECE\u5B66\u751F\u4FE1\u606F\u8868\u548C\u73ED\u7EA7\u8868\u4E2D\u67E5\u8BE2\u76F8\u5173\u4FE1\u606F\u5B58\u50A8\u5230\u4E34\u65F6\u8868\u4E2D\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>insert into temp_student(stu_name,className,monitor)
            select s.name,c.className,c.monitor
            from student as s,class as c
            where s.classId = c.id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5\u540E\uFF0C\u53EF\u4EE5\u76F4\u63A5\u4ECEtemp_student\u8868\u4E2D\u67E5\u8BE2\u5B66\u751F\u540D\u79F0\u3001\u73ED\u7EA7\u540D\u79F0\u548C\u73ED\u7EA7\u73ED\u957F\uFF0C\u800C\u4E0D\u7528\u6BCF\u6B21\u90FD\u8FDB\u884C\u8054\u5408\u67E5 \u8BE2\u3002\u8FD9\u6837\u53EF\u4EE5\u63D0\u9AD8\u6570\u636E\u5E93\u7684\u67E5\u8BE2\u901F\u5EA6\u3002</p><h5 id="_3-3-\u589E\u52A0\u5197\u4F59\u5B57\u6BB5" tabindex="-1"><a class="header-anchor" href="#_3-3-\u589E\u52A0\u5197\u4F59\u5B57\u6BB5" aria-hidden="true">#</a> 3.3 \u589E\u52A0\u5197\u4F59\u5B57\u6BB5</h5><p>\u8BBE\u8BA1\u6570\u636E\u5E93\u8868\u65F6\u5E94\u5C3D\u91CF\u9075\u5FAA\u8303\u5F0F\u7406\u8BBA\u7684\u89C4\u7EA6\uFF0C\u5C3D\u53EF\u80FD\u51CF\u5C11\u5197\u4F59\u5B57\u6BB5\uFF0C\u8BA9\u6570\u636E\u5E93\u8BBE\u8BA1\u770B\u8D77\u6765\u7CBE\u81F4\u3001\u4F18\u96C5\u3002 \u4F46\u662F\uFF0C\u5408\u7406\u5730\u52A0\u5165\u5197\u4F59\u5B57\u6BB5\u53EF\u4EE5\u63D0\u9AD8\u67E5\u8BE2\u901F\u5EA6\u3002</p><p>\u8868\u7684\u89C4\u8303\u5316\u7A0B\u5EA6\u8D8A\u9AD8\uFF0C\u8868\u4E0E\u8868\u4E4B\u95F4\u7684\u5173\u7CFB\u5C31\u8D8A\u591A\uFF0C\u9700\u8981\u8FDE\u63A5\u67E5\u8BE2\u7684\u60C5\u51B5\u4E5F\u5C31\u8D8A\u591A\u3002\u5C24\u5176\u5728\u6570\u636E\u91CF\u5927\uFF0C\u800C \u4E14\u9700\u8981\u9891\u7E41\u8FDB\u884C\u8FDE\u63A5\u7684\u65F6\u5019\uFF0C\u4E3A\u4E86\u63D0\u5347\u6548\u7387\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u8003\u8651\u589E\u52A0\u5197\u4F59\u5B57\u6BB5\u6765\u51CF\u5C11\u8FDE\u63A5\u3002</p><p>\u8FD9\u90E8\u5206\u5185\u5BB9\u5728\u300A\u7B2C11\u7AE0_\u6570\u636E\u5E93\u7684\u8BBE\u8BA1\u89C4\u8303\u300B\u7AE0\u8282\u4E2D \u53CD\u8303\u5F0F\u5316\u5C0F\u8282 \u4E2D\u5177\u4F53\u5C55\u5F00\u8BB2\u89E3\u4E86\u3002\u8FD9\u91CC\u7701\u7565\u3002</p><h5 id="_3-4-\u4F18\u5316\u6570\u636E\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#_3-4-\u4F18\u5316\u6570\u636E\u7C7B\u578B" aria-hidden="true">#</a> 3.4 \u4F18\u5316\u6570\u636E\u7C7B\u578B</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707213524137.png" alt="image-20220707213524137" style="float:left;"><p><strong>\u60C5\u51B51\uFF1A\u5BF9\u6574\u6570\u7C7B\u578B\u6570\u636E\u8FDB\u884C\u4F18\u5316\u3002</strong></p><p>\u9047\u5230\u6574\u6570\u7C7B\u578B\u7684\u5B57\u6BB5\u53EF\u4EE5\u7528 INT \u578B \u3002\u8FD9\u6837\u505A\u7684\u7406\u7531\u662F\uFF0CINT \u578B\u6570\u636E\u6709\u8DB3\u591F\u5927\u7684\u53D6\u503C\u8303\u56F4\uFF0C\u4E0D\u7528\u62C5\u5FC3\u6570 \u636E\u8D85\u51FA\u53D6\u503C\u8303\u56F4\u7684\u95EE\u9898\u3002\u521A\u5F00\u59CB\u505A\u9879\u76EE\u7684\u65F6\u5019\uFF0C\u9996\u5148\u8981\u4FDD\u8BC1\u7CFB\u7EDF\u7684\u7A33\u5B9A\u6027\uFF0C\u8FD9\u6837\u8BBE\u8BA1\u5B57\u6BB5\u7C7B\u578B\u662F\u53EF\u4EE5 \u7684\u3002\u4F46\u5728\u6570\u636E\u91CF\u5F88\u5927\u7684\u65F6\u5019\uFF0C\u6570\u636E\u7C7B\u578B\u7684\u5B9A\u4E49\uFF0C\u5728\u5F88\u5927\u7A0B\u5EA6\u4E0A\u4F1A\u5F71\u54CD\u5230\u7CFB\u7EDF\u6574\u4F53\u7684\u6267\u884C\u6548\u7387\u3002</p><p>\u5BF9\u4E8E \u975E\u8D1F\u578B \u7684\u6570\u636E\uFF08\u5982\u81EA\u589EID\u3001\u6574\u578BIP\uFF09\u6765\u8BF4\uFF0C\u8981\u4F18\u5148\u4F7F\u7528\u65E0\u7B26\u53F7\u6574\u578B UNSIGNED \u6765\u5B58\u50A8\u3002\u56E0\u4E3A\u65E0\u7B26\u53F7 \u76F8\u5BF9\u4E8E\u6709\u7B26\u53F7\uFF0C\u540C\u6837\u7684\u5B57\u8282\u6570\uFF0C\u5B58\u50A8\u7684\u6570\u503C\u8303\u56F4\u66F4\u5927\u3002\u5982tinyint\u6709\u7B26\u53F7\u4E3A-128-127\uFF0C\u65E0\u7B26\u53F7\u4E3A0-255\uFF0C\u591A \u51FA\u4E00\u500D\u7684\u5B58\u50A8\u7A7A\u95F4\u3002</p><p><strong>\u60C5\u51B52\uFF1A\u65E2\u53EF\u4EE5\u4F7F\u7528\u6587\u672C\u7C7B\u578B\u4E5F\u53EF\u4EE5\u4F7F\u7528\u6574\u6570\u7C7B\u578B\u7684\u5B57\u6BB5\uFF0C\u8981\u9009\u62E9\u4F7F\u7528\u6574\u6570\u7C7B\u578B\u3002</strong></p><p>\u8DDF\u6587\u672C\u7C7B\u578B\u6570\u636E\u76F8\u6BD4\uFF0C\u5927\u6574\u6570\u5F80\u5F80\u5360\u7528\u66F4\u5C11\u7684\u5B58\u50A8\u7A7A\u95F4 \uFF0C\u56E0\u6B64\uFF0C\u5728\u5B58\u53D6\u548C\u6BD4\u5BF9\u7684\u65F6\u5019\uFF0C\u53EF\u4EE5\u5360\u7528\u66F4\u5C11\u7684 \u5185\u5B58\u7A7A\u95F4\u3002\u6240\u4EE5\uFF0C\u5728\u4E8C\u8005\u7686\u53EF\u7528\u7684\u60C5\u51B5\u4E0B\uFF0C\u5C3D\u91CF\u4F7F\u7528\u6574\u6570\u7C7B\u578B\uFF0C\u8FD9\u6837\u53EF\u4EE5\u63D0\u9AD8\u67E5\u8BE2\u7684\u6548\u7387\u3002\u5982\uFF1A\u5C06IP\u5730 \u5740\u8F6C\u6362\u6210\u6574\u578B\u6570\u636E\u3002</p><p><strong>\u60C5\u51B53\uFF1A\u907F\u514D\u4F7F\u7528TEXT\u3001BLOB\u6570\u636E\u7C7B\u578B</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707214640374.png" alt="image-20220707214640374" style="float:left;"><p><strong>\u60C5\u51B54\uFF1A\u907F\u514D\u4F7F\u7528ENUM\u7C7B\u578B</strong></p><p>\u4FEE\u6539ENUM\u503C\u9700\u8981\u4F7F\u7528ALTER\u8BED\u53E5\u3002</p><p>ENUM\u7C7B\u578B\u7684ORDER BY \u64CD\u4F5C\u6548\u7387\u4F4E\uFF0C\u9700\u8981\u989D\u5916\u64CD\u4F5C\u3002\u4F7F\u7528TINYINT\u6765\u4EE3\u66FFENUM\u7C7B\u578B\u3002</p><p><strong>\u60C5\u51B55\uFF1A\u4F7F\u7528TIMESTAMP\u5B58\u50A8\u65F6\u95F4</strong></p><p>TIMESTAMP\u5B58\u50A8\u7684\u65F6\u95F4\u8303\u56F41970-01-01 00:00:01 ~ 2038-01_19-03:14:07\u3002TIMESTAMP\u4F7F\u75284\u5B57\u8282\uFF0CDATETIME\u4F7F\u75288\u4E2A\u5B57\u8282\uFF0C\u540C\u65F6TIMESTAMP\u5177\u6709\u81EA\u52A8\u8D4B\u503C\u4EE5\u53CA\u81EA\u52A8\u66F4\u65B0\u7684\u7279\u6027\u3002</p><p><strong>\u60C5\u51B56\uFF1A\u7528DECIMAL\u4EE3\u66FFFLOAT\u548CDOUBLE\u5B58\u50A8\u7CBE\u786E\u6D6E\u70B9\u6570</strong></p><ol><li>\u975E\u7CBE\u51C6\u6D6E\u70B9\uFF1A float, double</li><li>\u7CBE\u51C6\u6D6E\u70B9\uFF1Adecimal</li></ol><p>Decimal\u7C7B\u578B\u4E3A\u7CBE\u51C6\u6D6E\u70B9\u6570\uFF0C\u5728\u8BA1\u7B97\u65F6\u4E0D\u4F1A\u4E22\u5931\u7CBE\u5EA6\uFF0C\u5C24\u5176\u662F\u8D22\u52A1\u76F8\u5173\u7684\u91D1\u878D\u7C7B\u6570\u636E\u3002\u5360\u7528\u7A7A\u95F4\u7531\u5B9A\u4E49\u7684\u5BBD\u5EA6\u51B3\u5B9A\uFF0C\u6BCF4\u4E2A\u5B57\u8282\u53EF\u4EE5\u5B58\u50A89\u4F4D\u6570\u5B57\uFF0C\u5E76\u4E14\u5C0F\u6570\u70B9\u8981\u5360\u7528\u4E00\u4E2A\u5B57\u8282\u3002\u53EF\u7528\u4E8E\u5B58\u50A8\u6BD4bigint\u66F4\u5927\u7684\u6574\u578B\u6570\u636E\u3002</p><p><strong>\u603B\u4E4B\uFF0C\u9047\u5230\u6570\u636E\u91CF\u5927\u7684\u9879\u76EE\u65F6\uFF0C\u4E00\u5B9A\u8981\u5728\u5145\u5206\u4E86\u89E3\u4E1A\u52A1\u9700\u6C42\u7684\u524D\u63D0\u4E0B\uFF0C\u5408\u7406\u4F18\u5316\u6570\u636E\u7C7B\u578B\uFF0C\u8FD9\u6837\u624D\u80FD\u5145 \u5206\u53D1\u6325\u8D44\u6E90\u7684\u6548\u7387\uFF0C\u4F7F\u7CFB\u7EDF\u8FBE\u5230\u6700\u4F18\u3002</strong></p><h5 id="_3-5-\u4F18\u5316\u63D2\u5165\u8BB0\u5F55\u7684\u901F\u5EA6" tabindex="-1"><a class="header-anchor" href="#_3-5-\u4F18\u5316\u63D2\u5165\u8BB0\u5F55\u7684\u901F\u5EA6" aria-hidden="true">#</a> 3.5 \u4F18\u5316\u63D2\u5165\u8BB0\u5F55\u7684\u901F\u5EA6</h5><p>\u63D2\u5165\u8BB0\u5F55\u65F6\uFF0C\u5F71\u54CD\u63D2\u5165\u901F\u5EA6\u7684\u4E3B\u8981\u662F\u7D22\u5F15\u3001\u552F\u4E00\u6027\u6821\u9A8C\u3001\u4E00\u6B21\u63D2\u5165\u8BB0\u5F55\u6761\u6570\u7B49\u3002\u6839\u636E\u8FD9\u4E9B\u60C5\u51B5\u53EF\u4EE5\u5206\u522B\u8FDB\u884C\u4F18\u5316\u3002\u8FD9\u91CC\u6211\u4EEC\u5206\u4E3AMyISAM\u5F15\u64CE\u548CInnoDB\u5F15\u64CE\u6765\u8BB2\u3002</p><p><strong>1. MyISAM\u5F15\u64CE\u7684\u8868\uFF1A</strong></p><p><strong>\u2460 \u7981\u7528\u7D22\u5F15</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707215305640.png" alt="image-20220707215305640" style="float:left;"><p><strong>\u2461 \u7981\u7528\u552F\u4E00\u6027\u68C0\u67E5</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707215356893.png" alt="image-20220707215356893" style="float:left;"><p><strong>\u2462 \u4F7F\u7528\u6279\u91CF\u63D2\u5165</strong></p><p>\u63D2\u5165\u591A\u6761\u8BB0\u5F55\u65F6\uFF0C\u53EF\u4EE5\u4F7F\u7528\u4E00\u6761INSERT\u8BED\u53E5\u63D2\u5165\u4E00\u6761\u6570\u636E\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u4E00\u6761INSERT\u8BED\u53E5\u63D2\u5165\u591A\u6761\u6570\u636E\u3002\u63D2\u5165\u4E00\u6761\u8BB0\u5F55\u7684INSERT\u8BED\u53E5\u60C5\u5F62\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>insert into student values(1,&#39;zhangsan&#39;,18,1);
insert into student values(2,&#39;lisi&#39;,17,1);
insert into student values(3,&#39;wangwu&#39;,17,1);
insert into student values(4,&#39;zhaoliu&#39;,19,1);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528\u4E00\u6761INSERT\u8BED\u53E5\u63D2\u5165\u591A\u6761\u8BB0\u5F55\u7684\u60C5\u5F62\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>insert into student values
(1,&#39;zhangsan&#39;,18,1),
(2,&#39;lisi&#39;,17,1),
(3,&#39;wangwu&#39;,17,1),
(4,&#39;zhaoliu&#39;,19,1);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B2C2\u79CD\u60C5\u5F62\u7684\u63D2\u5165\u901F\u5EA6\u8981\u6BD4\u7B2C1\u79CD\u60C5\u5F62\u5FEB\u3002</p><p><strong>\u2463 \u4F7F\u7528LOAD DATA INFILE \u6279\u91CF\u5BFC\u5165</strong></p><p>\u5F53\u9700\u8981\u6279\u91CF\u5BFC\u5165\u6570\u636E\u65F6\uFF0C\u5982\u679C\u80FD\u7528LOAD DATA INFILE\u8BED\u53E5\uFF0C\u5C31\u5C3D\u91CF\u4F7F\u7528\u3002\u56E0\u4E3ALOAD DATA INFILE\u8BED\u53E5\u5BFC\u5165\u6570\u636E\u7684\u901F\u5EA6\u6BD4INSERT\u8BED\u53E5\u5757\u3002</p><p><strong>2. InnoDB\u5F15\u64CE\u7684\u8868\uFF1A</strong></p><p><strong>\u2460 \u7981\u7528\u552F\u4E00\u6027\u68C0\u67E5</strong></p><p>\u63D2\u5165\u6570\u636E\u4E4B\u524D\u6267\u884C<code>set unique_checks=0</code>\u6765\u7981\u6B62\u5BF9\u552F\u4E00\u7D22\u5F15\u7684\u68C0\u67E5\uFF0C\u6570\u636E\u5BFC\u5165\u5B8C\u6210\u4E4B\u540E\u518D\u8FD0\u884C<code>set unique_check=1</code>\u3002\u8FD9\u4E2A\u548CMyISAM\u5F15\u64CE\u7684\u4F7F\u7528\u65B9\u6CD5\u4E00\u6837\u3002</p><p><strong>\u2461 \u7981\u7528\u5916\u952E\u68C0\u67E5</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707220034534.png" alt="image-20220707220034534" style="float:left;"><p><strong>\u2462 \u7981\u6B62\u81EA\u52A8\u63D0\u4EA4</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707220131891.png" alt="image-20220707220131891" style="float:left;"><h5 id="_3-6-\u4F7F\u7528\u975E\u7A7A\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_3-6-\u4F7F\u7528\u975E\u7A7A\u7EA6\u675F" aria-hidden="true">#</a> 3.6 \u4F7F\u7528\u975E\u7A7A\u7EA6\u675F</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707220157606.png" alt="image-20220707220157606" style="float:left;"><h5 id="_3-7-\u5206\u6790\u8868\u3001\u68C0\u67E5\u8868\u4E0E\u4F18\u5316\u8868" tabindex="-1"><a class="header-anchor" href="#_3-7-\u5206\u6790\u8868\u3001\u68C0\u67E5\u8868\u4E0E\u4F18\u5316\u8868" aria-hidden="true">#</a> 3.7 \u5206\u6790\u8868\u3001\u68C0\u67E5\u8868\u4E0E\u4F18\u5316\u8868</h5><p>MySQL\u63D0\u4F9B\u4E86\u5206\u6790\u8868\u3001\u68C0\u67E5\u8868\u548C\u4F18\u5316\u8868\u7684\u8BED\u53E5\u3002<code>\u5206\u6790\u8868</code>\u4E3B\u8981\u662F\u5206\u6790\u5173\u952E\u5B57\u7684\u5206\u5E03\uFF0C<code>\u68C0\u67E5\u8868</code>\u4E3B\u8981\u662F\u68C0\u67E5\u8868\u662F\u5426\u5B58\u5728\u9519\u8BEF\uFF0C<code>\u4F18\u5316\u8868</code>\u4E3B\u8981\u662F\u6D88\u9664\u5220\u9664\u6216\u8005\u66F4\u65B0\u9020\u6210\u7684\u7A7A\u95F4\u6D6A\u8D39\u3002</p><h6 id="_1-\u5206\u6790\u8868" tabindex="-1"><a class="header-anchor" href="#_1-\u5206\u6790\u8868" aria-hidden="true">#</a> 1. \u5206\u6790\u8868</h6><p>MySQL\u4E2D\u63D0\u4F9B\u4E86ANALYZE TABLE\u8BED\u53E5\u5206\u6790\u8868\uFF0CANALYZE TABLE\u8BED\u53E5\u7684\u57FA\u672C\u8BED\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ANALYZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name[,tbl_name]\u2026
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u9ED8\u8BA4\u7684\uFF0CMySQL\u670D\u52A1\u4F1A\u5C06 ANALYZE TABLE\u8BED\u53E5\u5199\u5230binlog\u4E2D\uFF0C\u4EE5\u4FBF\u5728\u4E3B\u4ECE\u67B6\u6784\u4E2D\uFF0C\u4ECE\u670D\u52A1\u80FD\u591F\u540C\u6B65\u6570\u636E\u3002 \u53EF\u4EE5\u6DFB\u52A0\u53C2\u6570LOCAL \u6216\u8005 NO_WRITE_TO_BINLOG\u53D6\u6D88\u5C06\u8BED\u53E5\u5199\u5230binlog\u4E2D\u3002</p><p>\u4F7F\u7528 <code>ANALYZE TABLE</code> \u5206\u6790\u8868\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u6570\u636E\u5E93\u7CFB\u7EDF\u4F1A\u81EA\u52A8\u5BF9\u8868\u52A0\u4E00\u4E2A <code>\u53EA\u8BFB\u9501</code> \u3002\u5728\u5206\u6790\u671F\u95F4\uFF0C\u53EA\u80FD\u8BFB\u53D6 \u8868\u4E2D\u7684\u8BB0\u5F55\uFF0C\u4E0D\u80FD\u66F4\u65B0\u548C\u63D2\u5165\u8BB0\u5F55\u3002ANALYZE TABLE\u8BED\u53E5\u80FD\u591F\u5206\u6790InnoDB\u548CMyISAM\u7C7B\u578B\u7684\u8868\uFF0C\u4F46\u662F\u4E0D\u80FD\u4F5C\u7528\u4E8E\u89C6\u56FE\u3002</p><p>ANALYZE TABLE\u5206\u6790\u540E\u7684\u7EDF\u8BA1\u7ED3\u679C\u4F1A\u53CD\u5E94\u5230 <code>cardinality</code> \u7684\u503C\uFF0C\u8BE5\u503C\u7EDF\u8BA1\u4E86\u8868\u4E2D\u67D0\u4E00\u952E\u6240\u5728\u7684\u5217\u4E0D\u91CD\u590D \u7684\u503C\u7684\u4E2A\u6570\u3002<strong>\u8BE5\u503C\u8D8A\u63A5\u8FD1\u8868\u4E2D\u7684\u603B\u884C\u6570\uFF0C\u5219\u5728\u8868\u8FDE\u63A5\u67E5\u8BE2\u6216\u8005\u7D22\u5F15\u67E5\u8BE2\u65F6\uFF0C\u5C31\u8D8A\u4F18\u5148\u88AB\u4F18\u5316\u5668\u9009\u62E9\u4F7F\u7528</strong>\u3002\u4E5F\u5C31\u662F\u7D22\u5F15\u5217\u7684cardinality\u7684\u503C\u4E0E\u8868\u4E2D\u6570\u636E\u7684\u603B\u6761\u6570\u5DEE\u8DDD\u8D8A\u5927\uFF0C\u5373\u4F7F\u67E5\u8BE2\u7684\u65F6\u5019\u4F7F\u7528\u4E86\u8BE5\u7D22\u5F15\u4F5C\u4E3A\u67E5 \u8BE2\u6761\u4EF6\uFF0C\u5B58\u50A8\u5F15\u64CE\u5B9E\u9645\u67E5\u8BE2\u7684\u65F6\u5019\u4F7F\u7528\u7684\u6982\u7387\u5C31\u8D8A\u5C0F\u3002\u4E0B\u9762\u901A\u8FC7\u4F8B\u5B50\u6765\u9A8C\u8BC1\u4E0B\u3002cardinality\u53EF\u4EE5\u901A\u8FC7 SHOW INDEX FROM \u8868\u540D\u67E5\u770B\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; ANALYZE TABLE user;
+--------------+---------+----------+---------+
| Table        | Op      | Msg_type |Msg_text |
+--------------+---------+----------+---------+
| atguigu.user | analyze | status   | Ok      |
+--------------+----------+---------+---------+
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7ED3\u679C\u663E\u793A\u7684\u4FE1\u606F\u8BF4\u660E\u5982\u4E0B\uFF1A</p><ul><li>Table: \u8868\u793A\u5206\u6790\u7684\u8868\u7684\u540D\u79F0\u3002</li><li>Op: \u8868\u793A\u6267\u884C\u7684\u64CD\u4F5C\u3002analyze\u8868\u793A\u8FDB\u884C\u5206\u6790\u64CD\u4F5C\u3002</li><li>Msg_type: \u8868\u793A\u4FE1\u606F\u7C7B\u578B\uFF0C\u5176\u503C\u901A\u5E38\u662F\u72B6\u6001 (status) \u3001\u4FE1\u606F (info) \u3001\u6CE8\u610F (note) \u3001\u8B66\u544A (warning) \u548C \u9519\u8BEF (error) \u4E4B\u4E00\u3002</li><li>Msg_text: \u663E\u793A\u4FE1\u606F\u3002</li></ul><h6 id="_2-\u68C0\u67E5\u8868" tabindex="-1"><a class="header-anchor" href="#_2-\u68C0\u67E5\u8868" aria-hidden="true">#</a> 2. \u68C0\u67E5\u8868</h6><p>MySQL\u4E2D\u53EF\u4EE5\u4F7F\u7528 <code>CHECK TABLE</code> \u8BED\u53E5\u6765\u68C0\u67E5\u8868\u3002CHECK TABLE\u8BED\u53E5\u80FD\u591F\u68C0\u67E5InnoDB\u548CMyISAM\u7C7B\u578B\u7684\u8868 \u662F\u5426\u5B58\u5728\u9519\u8BEF\u3002CHECK TABLE\u8BED\u53E5\u5728\u6267\u884C\u8FC7\u7A0B\u4E2D\u4E5F\u4F1A\u7ED9\u8868\u52A0\u4E0A <code>\u53EA\u8BFB\u9501</code> \u3002</p><p>\u5BF9\u4E8EMyISAM\u7C7B\u578B\u7684\u8868\uFF0CCHECK TABLE\u8BED\u53E5\u8FD8\u4F1A\u66F4\u65B0\u5173\u952E\u5B57\u7EDF\u8BA1\u6570\u636E\u3002\u800C\u4E14\uFF0CCHECK TABLE\u4E5F\u53EF\u4EE5\u68C0\u67E5\u89C6 \u56FE\u662F\u5426\u6709\u9519\u8BEF\uFF0C\u6BD4\u5982\u5728\u89C6\u56FE\u5B9A\u4E49\u4E2D\u88AB\u5F15\u7528\u7684\u8868\u5DF2\u4E0D\u5B58\u5728\u3002\u8BE5\u8BED\u53E5\u7684\u57FA\u672C\u8BED\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CHECK TABLE tbl_name [, tbl_name] ... [option] ...
option = {QUICK | FAST | MEDIUM | EXTENDED | CHANGED}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5176\u4E2D\uFF0Ctbl_name\u662F\u8868\u540D\uFF1Boption\u53C2\u6570\u67095\u4E2A\u53D6\u503C\uFF0C\u5206\u522B\u662FQUICK\u3001FAST\u3001MEDIUM\u3001EXTENDED\u548C CHANGED\u3002\u5404\u4E2A\u9009\u9879\u7684\u610F\u4E49\u5206\u522B\u662F\uFF1A</p><ul><li>QUICK \uFF1A\u4E0D\u626B\u63CF\u884C\uFF0C\u4E0D\u68C0\u67E5\u9519\u8BEF\u7684\u8FDE\u63A5\u3002</li><li>FAST \uFF1A\u53EA\u68C0\u67E5\u6CA1\u6709\u88AB\u6B63\u786E\u5173\u95ED\u7684\u8868\u3002</li><li>CHANGED \uFF1A\u53EA\u68C0\u67E5\u4E0A\u6B21\u68C0\u67E5\u540E\u88AB\u66F4\u6539\u7684\u8868\u548C\u6CA1\u6709\u88AB\u6B63\u786E\u5173\u95ED\u7684\u8868\u3002</li><li>MEDIUM \uFF1A\u626B\u63CF\u884C\uFF0C\u4EE5\u9A8C\u8BC1\u88AB\u5220\u9664\u7684\u8FDE\u63A5\u662F\u6709\u6548\u7684\u3002\u4E5F\u53EF\u4EE5\u8BA1\u7B97\u5404\u884C\u7684\u5173\u952E\u5B57\u6821\u9A8C\u548C\uFF0C\u5E76\u4F7F\u7528\u8BA1\u7B97\u51FA\u7684\u6821\u9A8C\u548C\u9A8C\u8BC1\u8FD9\u4E00\u70B9\u3002</li><li>EXTENDED \uFF1A\u5BF9\u6BCF\u884C\u7684\u6240\u6709\u5173\u952E\u5B57\u8FDB\u884C\u4E00\u4E2A\u5168\u9762\u7684\u5173\u952E\u5B57\u67E5\u627E\u3002\u8FD9\u53EF\u4EE5\u786E\u4FDD\u8868\u662F100%\u4E00\u81F4\u7684\uFF0C\u4F46 \u662F\u82B1\u7684\u65F6\u95F4\u8F83\u957F\u3002</li></ul><p>option\u53EA\u5BF9MyISAM\u7C7B\u578B\u7684\u8868\u6709\u6548\uFF0C\u5BF9InnoDB\u7C7B\u578B\u7684\u8868\u65E0\u6548\u3002\u6BD4\u5982\uFF1A</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707221707254.png" alt="image-20220707221707254"></p><p>\u8BE5\u8BED\u53E5\u5BF9\u4E8E\u68C0\u67E5\u7684\u8868\u53EF\u80FD\u4F1A\u4EA7\u751F\u591A\u884C\u4FE1\u606F\u3002\u6700\u540E\u4E00\u884C\u6709\u4E00\u4E2A\u72B6\u6001\u7684 Msg_type \u503C\uFF0CMsg_text \u901A\u5E38\u4E3A OK\u3002 \u5982\u679C\u5F97\u5230\u7684\u4E0D\u662F OK\uFF0C\u901A\u5E38\u8981\u5BF9\u5176\u8FDB\u884C\u4FEE\u590D\uFF1B\u662F OK \u8BF4\u660E\u8868\u5DF2\u7ECF\u662F\u6700\u65B0\u7684\u4E86\u3002\u8868\u5DF2\u7ECF\u662F\u6700\u65B0\u7684\uFF0C\u610F\u5473\u7740\u5B58 \u50A8\u5F15\u64CE\u5BF9\u8FD9\u5F20\u8868\u4E0D\u5FC5\u8FDB\u884C\u68C0\u67E5\u3002</p><h6 id="_3-\u4F18\u5316\u8868" tabindex="-1"><a class="header-anchor" href="#_3-\u4F18\u5316\u8868" aria-hidden="true">#</a> 3. \u4F18\u5316\u8868</h6><p><strong>\u65B9\u5F0F1\uFF1AOPTIMIZE TABLE</strong></p><p>MySQL\u4E2D\u4F7F\u7528 <code>OPTIMIZE TABLE</code> \u8BED\u53E5\u6765\u4F18\u5316\u8868\u3002\u4F46\u662F\uFF0COPTILMIZE TABLE\u8BED\u53E5\u53EA\u80FD\u4F18\u5316\u8868\u4E2D\u7684 <code>VARCHAR</code> \u3001 <code>BLOB</code> \u6216 <code>TEXT</code> \u7C7B\u578B\u7684\u5B57\u6BB5\u3002\u4E00\u4E2A\u8868\u4F7F\u7528\u4E86\u8FD9\u4E9B\u5B57\u6BB5\u7684\u6570\u636E\u7C7B\u578B\uFF0C\u82E5\u5DF2\u7ECF <code>\u5220\u9664</code> \u4E86\u8868\u7684\u4E00\u5927\u90E8 \u5206\u6570\u636E\uFF0C\u6216\u8005\u5DF2\u7ECF\u5BF9\u542B\u6709\u53EF\u53D8\u957F\u5EA6\u884C\u7684\u8868\uFF08\u542B\u6709VARCHAR\u3001BLOB\u6216TEXT\u5217\u7684\u8868\uFF09\u8FDB\u884C\u4E86\u5F88\u591A <code>\u66F4\u65B0</code> \uFF0C\u5219 \u5E94\u4F7F\u7528OPTIMIZE TABLE\u6765\u91CD\u65B0\u5229\u7528\u672A\u4F7F\u7528\u7684\u7A7A\u95F4\uFF0C\u5E76\u6574\u7406\u6570\u636E\u6587\u4EF6\u7684 <code>\u788E\u7247</code> \u3002</p><p>OPTIMIZE TABLE \u8BED\u53E5\u5BF9InnoDB\u548CMyISAM\u7C7B\u578B\u7684\u8868\u90FD\u6709\u6548\u3002\u8BE5\u8BED\u53E5\u5728\u6267\u884C\u8FC7\u7A0B\u4E2D\u4E5F\u4F1A\u7ED9\u8868\u52A0\u4E0A <code>\u53EA\u8BFB\u9501</code> \u3002</p><p>OPTILMIZE TABLE\u8BED\u53E5\u7684\u57FA\u672C\u8BED\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>OPTIMIZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>LOCAL | NO_WRITE_TO_BINLOG\u5173\u952E\u5B57\u7684\u610F\u4E49\u548C\u5206\u6790\u8868\u76F8\u540C\uFF0C\u90FD\u662F\u6307\u5B9A\u4E0D\u5199\u5165\u4E8C\u8FDB\u5236\u65E5\u5FD7\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707221901664.png" alt="image-20220707221901664"></p><p>\u6267\u884C\u5B8C\u6BD5\uFF0CMsg_text\u663E\u793A</p><blockquote><p>\u2018numysql.SYS_APP_USER\u2019, \u2018optimize\u2019, \u2018note\u2019, \u2018Table does not support optimize, doing recreate + analyze instead\u2019</p></blockquote><p>\u539F\u56E0\u662F\u6211\u670D\u52A1\u5668\u4E0A\u7684MySQL\u662FInnoDB\u5B58\u50A8\u5F15\u64CE\u3002</p><p>\u5230\u5E95\u4F18\u5316\u4E86\u6CA1\u6709\u5462\uFF1F\u770B\u5B98\u7F51\uFF01</p>`,1250),_={href:"https://dev.mysql.com/doc/refman/8.0/en/optimize-table.html",target:"_blank",rel:"noopener noreferrer"},N=i("MySQL :: MySQL 8.0 Reference Manual :: 13.7.3.4 OPTIMIZE TABLE Statement"),L=a(`<p>\u5728MyISAM\u4E2D\uFF0C\u662F\u5148\u5206\u6790\u8FD9\u5F20\u8868\uFF0C\u7136\u540E\u4F1A\u6574\u7406\u76F8\u5173\u7684MySQL datafile\uFF0C\u4E4B\u540E\u56DE\u6536\u672A\u4F7F\u7528\u7684\u7A7A\u95F4\uFF1B\u5728InnoDB \u4E2D\uFF0C\u56DE\u6536\u7A7A\u95F4\u662F\u7B80\u5355\u901A\u8FC7Alter table\u8FDB\u884C\u6574\u7406\u7A7A\u95F4\u3002\u5728\u4F18\u5316\u671F\u95F4\uFF0CMySQL\u4F1A\u521B\u5EFA\u4E00\u4E2A\u4E34\u65F6\u8868\uFF0C\u4F18\u5316\u5B8C\u6210\u4E4B \u540E\u4F1A\u5220\u9664\u539F\u59CB\u8868\uFF0C\u7136\u540E\u4F1A\u5C06\u4E34\u65F6\u8868rename\u6210\u4E3A\u539F\u59CB\u8868\u3002</p><blockquote><p>\u8BF4\u660E\uFF1A \u5728\u591A\u6570\u7684\u8BBE\u7F6E\u4E2D\uFF0C\u6839\u672C\u4E0D\u9700\u8981\u8FD0\u884COPTIMIZE TABLE\u3002\u5373\u4F7F\u5BF9\u53EF\u53D8\u957F\u5EA6\u7684\u884C\u8FDB\u884C\u4E86\u5927\u91CF\u7684\u66F4 \u65B0\uFF0C\u4E5F\u4E0D\u9700\u8981\u7ECF\u5E38\u8FD0\u884C\uFF0C<code> \u6BCF\u5468\u4E00\u6B21</code> \u6216 <code>\u6BCF\u6708\u4E00\u6B21</code> \u5373\u53EF\uFF0C\u5E76\u4E14\u53EA\u9700\u8981\u5BF9 <code>\u7279\u5B9A\u7684\u8868</code> \u8FD0\u884C\u3002</p></blockquote><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707222156765.png" alt="image-20220707222156765" style="float:left;"><p><strong>\u65B9\u5F0F\u4E8C\uFF1A\u4F7F\u7528mysqlcheck\u547D\u4EE4</strong></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707222305302.png" alt="image-20220707222305302" style="float:left;"><h6 id="_3-8-\u5C0F\u7ED3" tabindex="-1"><a class="header-anchor" href="#_3-8-\u5C0F\u7ED3" aria-hidden="true">#</a> 3.8 \u5C0F\u7ED3</h6><p>\u4E0A\u8FF0\u8FD9\u4E9B\u65B9\u6CD5\u90FD\u662F\u6709\u5229\u6709\u5F0A\u7684\u3002\u6BD4\u5982\uFF1A</p><ul><li>\u4FEE\u6539\u6570\u636E\u7C7B\u578B\uFF0C\u8282\u7701\u5B58\u50A8\u7A7A\u95F4\u7684\u540C\u65F6\uFF0C\u4F60\u8981\u8003\u8651\u5230\u6570\u636E\u4E0D\u80FD\u8D85\u8FC7\u53D6\u503C\u8303\u56F4\uFF1B</li><li>\u589E\u52A0\u5197\u4F59\u5B57\u6BB5\u7684\u65F6\u5019\uFF0C\u4E0D\u8981\u5FD8\u4E86\u786E\u4FDD\u6570\u636E\u4E00\u81F4\u6027\uFF1B</li><li>\u628A\u5927\u8868\u62C6\u5206\uFF0C\u4E5F\u610F\u5473\u7740\u4F60\u7684\u67E5\u8BE2\u4F1A\u589E\u52A0\u65B0\u7684\u8FDE\u63A5\uFF0C\u4ECE\u800C\u589E\u52A0\u989D\u5916\u7684\u5F00\u9500\u548C\u8FD0\u7EF4\u7684\u6210\u672C\u3002</li></ul><p>\u56E0\u6B64\uFF0C\u4F60\u4E00\u5B9A\u8981\u7ED3\u5408\u5B9E\u9645\u7684\u4E1A\u52A1\u9700\u6C42\u8FDB\u884C\u6743\u8861\u3002</p><h3 id="_4-\u5927\u8868\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#_4-\u5927\u8868\u4F18\u5316" aria-hidden="true">#</a> 4. \u5927\u8868\u4F18\u5316</h3><p>\u5F53MySQL\u5355\u8868\u8BB0\u5F55\u6570\u8FC7\u5927\u65F6\uFF0C\u6570\u636E\u5E93\u7684CRUD\u6027\u80FD\u4F1A\u660E\u663E\u4E0B\u964D\uFF0C\u4E00\u4E9B\u5E38\u89C1\u7684\u4F18\u5316\u63AA\u65BD\u5982\u4E0B\uFF1A</p><h5 id="_4-1-\u9650\u5B9A\u67E5\u8BE2\u7684\u8303\u56F4" tabindex="-1"><a class="header-anchor" href="#_4-1-\u9650\u5B9A\u67E5\u8BE2\u7684\u8303\u56F4" aria-hidden="true">#</a> 4.1 \u9650\u5B9A\u67E5\u8BE2\u7684\u8303\u56F4</h5><p>\u7981\u6B62\u4E0D\u5E26\u4EFB\u4F55\u9650\u5236\u6570\u636E\u8303\u56F4\u6761\u4EF6\u7684\u67E5\u8BE2\u8BED\u53E5\u3002\u6BD4\u5982\uFF1A\u6211\u4EEC\u5F53\u7528\u6237\u5728\u67E5\u8BE2\u8BA2\u5355\u5386\u53F2\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u53EF\u4EE5\u63A7\u5236 \u5728\u4E00\u4E2A\u6708\u7684\u8303\u56F4\u5185\uFF1B</p><h5 id="_4-2-\u8BFB-\u5199\u5206\u79BB" tabindex="-1"><a class="header-anchor" href="#_4-2-\u8BFB-\u5199\u5206\u79BB" aria-hidden="true">#</a> 4.2 \u8BFB/\u5199\u5206\u79BB</h5><p>\u7ECF\u5178\u7684\u6570\u636E\u5E93\u62C6\u5206\u65B9\u6848\uFF0C\u4E3B\u5E93\u8D1F\u8D23\u5199\uFF0C\u4ECE\u5E93\u8D1F\u8D23\u8BFB\u3002</p><ul><li>\u4E00\u4E3B\u4E00\u4ECE\u6A21\u5F0F\uFF1A</li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707222606097.png" alt="image-20220707222606097"></p><ul><li>\u53CC\u4E3B\u53CC\u4ECE\u6A21\u5F0F\uFF1A</li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707222623485.png" alt="image-20220707222623485"></p><h5 id="_4-3-\u5782\u76F4\u62C6\u5206" tabindex="-1"><a class="header-anchor" href="#_4-3-\u5782\u76F4\u62C6\u5206" aria-hidden="true">#</a> 4.3 \u5782\u76F4\u62C6\u5206</h5><p>\u5F53\u6570\u636E\u91CF\u7EA7\u8FBE\u5230 <code>\u5343\u4E07\u7EA7</code> \u4EE5\u4E0A\u65F6\uFF0C\u6709\u65F6\u5019\u6211\u4EEC\u9700\u8981\u628A\u4E00\u4E2A\u6570\u636E\u5E93\u5207\u6210\u591A\u4EFD\uFF0C\u653E\u5230\u4E0D\u540C\u7684\u6570\u636E\u5E93\u670D\u52A1\u5668\u4E0A\uFF0C \u51CF\u5C11\u5BF9\u5355\u4E00\u6570\u636E\u5E93\u670D\u52A1\u5668\u7684\u8BBF\u95EE\u538B\u529B\u3002</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707222648112.png" alt="image-20220707222648112"></p><ul><li>\u5982\u679C\u6570\u636E\u5E93\u7684\u6570\u636E\u8868\u8FC7\u591A\uFF0C\u53EF\u4EE5\u91C7\u7528<code>\u5782\u76F4\u5206\u5E93</code>\u7684\u65B9\u5F0F\uFF0C\u5C06\u5173\u8054\u7684\u6570\u636E\u5E93\u90E8\u7F72\u5728\u540C\u4E00\u4E2A\u6570\u636E\u5E93\u4E0A\u3002</li><li>\u5982\u679C\u6570\u636E\u5E93\u4E2D\u7684\u5217\u8FC7\u591A\uFF0C\u53EF\u4EE5\u91C7\u7528<code>\u5782\u76F4\u5206\u8868</code>\u7684\u65B9\u5F0F\uFF0C\u5C06\u4E00\u5F20\u6570\u636E\u8868\u5206\u62C6\u6210\u591A\u5F20\u6570\u636E\u8868\uFF0C\u628A\u7ECF\u5E38\u4E00\u8D77\u4F7F\u7528\u7684\u5217\u653E\u5728\u540C\u4E00\u5F20\u8868\u91CC\u3002</li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707222910740.png" alt="image-20220707222910740"></p><p><code>\u5782\u76F4\u62C6\u5206\u7684\u4F18\u70B9</code>\uFF1A \u53EF\u4EE5\u4F7F\u5F97\u5217\u6570\u636E\u53D8\u5C0F\uFF0C\u5728\u67E5\u8BE2\u65F6\u51CF\u5C11\u8BFB\u53D6\u7684Block\u6570\uFF0C\u51CF\u5C11I/O\u6B21\u6570\u3002\u6B64\u5916\uFF0C\u5782\u76F4\u5206\u533A\u53EF\u4EE5\u7B80\u5316\u8868\u7684\u7ED3\u6784\uFF0C\u6613\u4E8E\u7EF4\u62A4\u3002</p><p><code>\u5782\u76F4\u62C6\u5206\u7684\u7F3A\u70B9</code>\uFF1A \u4E3B\u952E\u4F1A\u51FA\u73B0\u5197\u4F59\uFF0C\u9700\u8981\u7BA1\u7406\u5197\u4F59\u5217\uFF0C\u5E76\u4F1A\u5F15\u8D77 JOIN \u64CD\u4F5C\u3002\u6B64\u5916\uFF0C\u5782\u76F4\u62C6\u5206\u4F1A\u8BA9\u4E8B\u52A1\u53D8\u5F97\u66F4\u52A0\u590D\u6742\u3002</p><h5 id="_4-4-\u6C34\u5E73\u62C6\u5206" tabindex="-1"><a class="header-anchor" href="#_4-4-\u6C34\u5E73\u62C6\u5206" aria-hidden="true">#</a> 4.4 \u6C34\u5E73\u62C6\u5206</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707222954304.png" alt="image-20220707222954304" style="float:left;"><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707222739120.png" alt="image-20220707222739120"></p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707223024163.png" alt="image-20220707223024163" style="float:left;"><p>\u4E0B\u9762\u8865\u5145\u4E00\u4E0B\u6570\u636E\u5E93\u5206\u7247\u7684\u4E24\u79CD\u5E38\u89C1\u65B9\u6848\uFF1A</p><ul><li><strong>\u5BA2\u6237\u7AEF\u4EE3\u7406\uFF1A \u5206\u7247\u903B\u8F91\u5728\u5E94\u7528\u7AEF\uFF0C\u5C01\u88C5\u5728jar\u5305\u4E2D\uFF0C\u901A\u8FC7\u4FEE\u6539\u6216\u8005\u5C01\u88C5JDBC\u5C42\u6765\u5B9E\u73B0\u3002</strong> \u5F53\u5F53\u7F51\u7684 Sharding-JDBC \u3001\u963F\u91CC\u7684TDDL\u662F\u4E24\u79CD\u6BD4\u8F83\u5E38\u7528\u7684\u5B9E\u73B0\u3002</li><li>**\u4E2D\u95F4\u4EF6\u4EE3\u7406\uFF1A \u5728\u5E94\u7528\u548C\u6570\u636E\u4E2D\u95F4\u52A0\u4E86\u4E00\u4E2A\u4EE3\u7406\u5C42\u3002\u5206\u7247\u903B\u8F91\u7EDF\u4E00\u7EF4\u62A4\u5728\u4E2D\u95F4\u4EF6\u670D\u52A1\u4E2D\u3002**\u6211\u4EEC\u73B0\u5728 \u8C08\u7684 Mycat \u3001360\u7684Atlas\u3001\u7F51\u6613\u7684DDB\u7B49\u7B49\u90FD\u662F\u8FD9\u79CD\u67B6\u6784\u7684\u5B9E\u73B0\u3002</li></ul><h3 id="_5-\u5176\u5B83\u8C03\u4F18\u7B56\u7565" tabindex="-1"><a class="header-anchor" href="#_5-\u5176\u5B83\u8C03\u4F18\u7B56\u7565" aria-hidden="true">#</a> 5. \u5176\u5B83\u8C03\u4F18\u7B56\u7565</h3><h5 id="_5-1-\u670D\u52A1\u5668\u8BED\u53E5\u8D85\u65F6\u5904\u7406" tabindex="-1"><a class="header-anchor" href="#_5-1-\u670D\u52A1\u5668\u8BED\u53E5\u8D85\u65F6\u5904\u7406" aria-hidden="true">#</a> 5.1 \u670D\u52A1\u5668\u8BED\u53E5\u8D85\u65F6\u5904\u7406</h5><p>\u5728MySQL 8.0\u4E2D\u53EF\u4EE5\u8BBE\u7F6E \u670D\u52A1\u5668\u8BED\u53E5\u8D85\u65F6\u7684\u9650\u5236 \uFF0C\u5355\u4F4D\u53EF\u4EE5\u8FBE\u5230 \u6BEB\u79D2\u7EA7\u522B \u3002\u5F53\u4E2D\u65AD\u7684\u6267\u884C\u8BED\u53E5\u8D85\u8FC7\u8BBE\u7F6E\u7684 \u6BEB\u79D2\u6570\u540E\uFF0C\u670D\u52A1\u5668\u5C06\u7EC8\u6B62\u67E5\u8BE2\u5F71\u54CD\u4E0D\u5927\u7684\u4E8B\u52A1\u6216\u8FDE\u63A5\uFF0C\u7136\u540E\u5C06\u9519\u8BEF\u62A5\u7ED9\u5BA2\u6237\u7AEF\u3002</p><p>\u8BBE\u7F6E\u670D\u52A1\u5668\u8BED\u53E5\u8D85\u65F6\u7684\u9650\u5236\uFF0C\u53EF\u4EE5\u901A\u8FC7\u8BBE\u7F6E\u7CFB\u7EDF\u53D8\u91CF MAX_EXECUTION_TIME \u6765\u5B9E\u73B0\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C MAX_EXECUTION_TIME\u7684\u503C\u4E3A0\uFF0C\u4EE3\u8868\u6CA1\u6709\u65F6\u95F4\u9650\u5236\u3002 \u4F8B\u5982\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SET GLOBAL MAX_EXECUTION_TIME=2000;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SET SESSION MAX_EXECUTION_TIME=2000; #\u6307\u5B9A\u8BE5\u4F1A\u8BDD\u4E2DSELECT\u8BED\u53E5\u7684\u8D85\u65F6\u65F6\u95F4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="_5-2-\u521B\u5EFA\u5168\u5C40\u901A\u7528\u8868\u7A7A\u95F4" tabindex="-1"><a class="header-anchor" href="#_5-2-\u521B\u5EFA\u5168\u5C40\u901A\u7528\u8868\u7A7A\u95F4" aria-hidden="true">#</a> 5.2 \u521B\u5EFA\u5168\u5C40\u901A\u7528\u8868\u7A7A\u95F4</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707223246684.png" alt="image-20220707223246684" style="float:left;"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707223349879.png" alt="image-20220707223349879" style="float:left;"><h5 id="_5-3-mysql-8-0\u65B0\u7279\u6027-\u9690\u85CF\u7D22\u5F15\u5BF9\u8C03\u4F18\u7684\u5E2E\u52A9" tabindex="-1"><a class="header-anchor" href="#_5-3-mysql-8-0\u65B0\u7279\u6027-\u9690\u85CF\u7D22\u5F15\u5BF9\u8C03\u4F18\u7684\u5E2E\u52A9" aria-hidden="true">#</a> 5.3 MySQL 8.0\u65B0\u7279\u6027\uFF1A\u9690\u85CF\u7D22\u5F15\u5BF9\u8C03\u4F18\u7684\u5E2E\u52A9</h5><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/2541/image-20220707223420496.png" alt="image-20220707223420496" style="float:left;">`,43);function I(x,T){const n=r("ExternalLinkIcon");return d(),c("div",null,[o,e("p",null,[e("a",u,[m,s(n)])]),e("p",null,[e("a",p,[g,s(n)])]),v,e("ul",null,[h,e("li",null,[e("a",null,[e("a",b,[q,s(n)])])]),y]),E,e("p",null,[e("a",null,[e("a",_,[N,s(n)])])]),L])}var f=l(t,[["render",I],["__file","mysql02.html.vue"]]);export{f as default};
